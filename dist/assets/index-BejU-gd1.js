function tx(d,l){for(var u=0;u<l.length;u++){const h=l[u];if(typeof h!="string"&&!Array.isArray(h)){for(const C in h)if(C!=="default"&&!(C in d)){const b=Object.getOwnPropertyDescriptor(h,C);b&&Object.defineProperty(d,C,b.get?b:{enumerable:!0,get:()=>h[C]})}}}return Object.freeze(Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}))}(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const C of document.querySelectorAll('link[rel="modulepreload"]'))h(C);new MutationObserver(C=>{for(const b of C)if(b.type==="childList")for(const w of b.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&h(w)}).observe(document,{childList:!0,subtree:!0});function u(C){const b={};return C.integrity&&(b.integrity=C.integrity),C.referrerPolicy&&(b.referrerPolicy=C.referrerPolicy),C.crossOrigin==="use-credentials"?b.credentials="include":C.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function h(C){if(C.ep)return;C.ep=!0;const b=u(C);fetch(C.href,b)}})();var fc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ng(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var vd={exports:{}},Uo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xh;function nx(){if(xh)return Uo;xh=1;var d=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function u(h,C,b){var w=null;if(b!==void 0&&(w=""+b),C.key!==void 0&&(w=""+C.key),"key"in C){b={};for(var _ in C)_!=="key"&&(b[_]=C[_])}else b=C;return C=b.ref,{$$typeof:d,type:h,key:w,ref:C!==void 0?C:null,props:b}}return Uo.Fragment=l,Uo.jsx=u,Uo.jsxs=u,Uo}var mh;function ix(){return mh||(mh=1,vd.exports=nx()),vd.exports}var x=ix(),Td={exports:{}},at={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yh;function rx(){if(yh)return at;yh=1;var d=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),w=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),P=Symbol.iterator;function G(z){return z===null||typeof z!="object"?null:(z=P&&z[P]||z["@@iterator"],typeof z=="function"?z:null)}var ee={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ne=Object.assign,J={};function xe(z,re,ve){this.props=z,this.context=re,this.refs=J,this.updater=ve||ee}xe.prototype.isReactComponent={},xe.prototype.setState=function(z,re){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,re,"setState")},xe.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function ce(){}ce.prototype=xe.prototype;function X(z,re,ve){this.props=z,this.context=re,this.refs=J,this.updater=ve||ee}var Ee=X.prototype=new ce;Ee.constructor=X,ne(Ee,xe.prototype),Ee.isPureReactComponent=!0;var Fe=Array.isArray;function ge(){}var te={H:null,A:null,T:null,S:null},Te=Object.prototype.hasOwnProperty;function de(z,re,ve){var Re=ve.ref;return{$$typeof:d,type:z,key:re,ref:Re!==void 0?Re:null,props:ve}}function De(z,re){return de(z.type,re,z.props)}function tt(z){return typeof z=="object"&&z!==null&&z.$$typeof===d}function Me(z){var re={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ve){return re[ve]})}var nt=/\/+/g;function st(z,re){return typeof z=="object"&&z!==null&&z.key!=null?Me(""+z.key):re.toString(36)}function oe(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(ge,ge):(z.status="pending",z.then(function(re){z.status==="pending"&&(z.status="fulfilled",z.value=re)},function(re){z.status==="pending"&&(z.status="rejected",z.reason=re)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function $(z,re,ve,Re,Ke){var Se=typeof z;(Se==="undefined"||Se==="boolean")&&(z=null);var ot=!1;if(z===null)ot=!0;else switch(Se){case"bigint":case"string":case"number":ot=!0;break;case"object":switch(z.$$typeof){case d:case l:ot=!0;break;case D:return ot=z._init,$(ot(z._payload),re,ve,Re,Ke)}}if(ot)return Ke=Ke(z),ot=Re===""?"."+st(z,0):Re,Fe(Ke)?(ve="",ot!=null&&(ve=ot.replace(nt,"$&/")+"/"),$(Ke,re,ve,"",function(Yn){return Yn})):Ke!=null&&(tt(Ke)&&(Ke=De(Ke,ve+(Ke.key==null||z&&z.key===Ke.key?"":(""+Ke.key).replace(nt,"$&/")+"/")+ot)),re.push(Ke)),1;ot=0;var ft=Re===""?".":Re+":";if(Fe(z))for(var Bt=0;Bt<z.length;Bt++)Re=z[Bt],Se=ft+st(Re,Bt),ot+=$(Re,re,ve,Se,Ke);else if(Bt=G(z),typeof Bt=="function")for(z=Bt.call(z),Bt=0;!(Re=z.next()).done;)Re=Re.value,Se=ft+st(Re,Bt++),ot+=$(Re,re,ve,Se,Ke);else if(Se==="object"){if(typeof z.then=="function")return $(oe(z),re,ve,Re,Ke);throw re=String(z),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return ot}function fe(z,re,ve){if(z==null)return z;var Re=[],Ke=0;return $(z,Re,"","",function(Se){return re.call(ve,Se,Ke++)}),Re}function Ge(z){if(z._status===-1){var re=z._result;re=re(),re.then(function(ve){(z._status===0||z._status===-1)&&(z._status=1,z._result=ve)},function(ve){(z._status===0||z._status===-1)&&(z._status=2,z._result=ve)}),z._status===-1&&(z._status=0,z._result=re)}if(z._status===1)return z._result.default;throw z._result}var Z=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},be={map:fe,forEach:function(z,re,ve){fe(z,function(){re.apply(this,arguments)},ve)},count:function(z){var re=0;return fe(z,function(){re++}),re},toArray:function(z){return fe(z,function(re){return re})||[]},only:function(z){if(!tt(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return at.Activity=M,at.Children=be,at.Component=xe,at.Fragment=u,at.Profiler=C,at.PureComponent=X,at.StrictMode=h,at.Suspense=I,at.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te,at.__COMPILER_RUNTIME={__proto__:null,c:function(z){return te.H.useMemoCache(z)}},at.cache=function(z){return function(){return z.apply(null,arguments)}},at.cacheSignal=function(){return null},at.cloneElement=function(z,re,ve){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var Re=ne({},z.props),Ke=z.key;if(re!=null)for(Se in re.key!==void 0&&(Ke=""+re.key),re)!Te.call(re,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&re.ref===void 0||(Re[Se]=re[Se]);var Se=arguments.length-2;if(Se===1)Re.children=ve;else if(1<Se){for(var ot=Array(Se),ft=0;ft<Se;ft++)ot[ft]=arguments[ft+2];Re.children=ot}return de(z.type,Ke,Re)},at.createContext=function(z){return z={$$typeof:w,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:b,_context:z},z},at.createElement=function(z,re,ve){var Re,Ke={},Se=null;if(re!=null)for(Re in re.key!==void 0&&(Se=""+re.key),re)Te.call(re,Re)&&Re!=="key"&&Re!=="__self"&&Re!=="__source"&&(Ke[Re]=re[Re]);var ot=arguments.length-2;if(ot===1)Ke.children=ve;else if(1<ot){for(var ft=Array(ot),Bt=0;Bt<ot;Bt++)ft[Bt]=arguments[Bt+2];Ke.children=ft}if(z&&z.defaultProps)for(Re in ot=z.defaultProps,ot)Ke[Re]===void 0&&(Ke[Re]=ot[Re]);return de(z,Se,Ke)},at.createRef=function(){return{current:null}},at.forwardRef=function(z){return{$$typeof:_,render:z}},at.isValidElement=tt,at.lazy=function(z){return{$$typeof:D,_payload:{_status:-1,_result:z},_init:Ge}},at.memo=function(z,re){return{$$typeof:A,type:z,compare:re===void 0?null:re}},at.startTransition=function(z){var re=te.T,ve={};te.T=ve;try{var Re=z(),Ke=te.S;Ke!==null&&Ke(ve,Re),typeof Re=="object"&&Re!==null&&typeof Re.then=="function"&&Re.then(ge,Z)}catch(Se){Z(Se)}finally{re!==null&&ve.types!==null&&(re.types=ve.types),te.T=re}},at.unstable_useCacheRefresh=function(){return te.H.useCacheRefresh()},at.use=function(z){return te.H.use(z)},at.useActionState=function(z,re,ve){return te.H.useActionState(z,re,ve)},at.useCallback=function(z,re){return te.H.useCallback(z,re)},at.useContext=function(z){return te.H.useContext(z)},at.useDebugValue=function(){},at.useDeferredValue=function(z,re){return te.H.useDeferredValue(z,re)},at.useEffect=function(z,re){return te.H.useEffect(z,re)},at.useEffectEvent=function(z){return te.H.useEffectEvent(z)},at.useId=function(){return te.H.useId()},at.useImperativeHandle=function(z,re,ve){return te.H.useImperativeHandle(z,re,ve)},at.useInsertionEffect=function(z,re){return te.H.useInsertionEffect(z,re)},at.useLayoutEffect=function(z,re){return te.H.useLayoutEffect(z,re)},at.useMemo=function(z,re){return te.H.useMemo(z,re)},at.useOptimistic=function(z,re){return te.H.useOptimistic(z,re)},at.useReducer=function(z,re,ve){return te.H.useReducer(z,re,ve)},at.useRef=function(z){return te.H.useRef(z)},at.useState=function(z){return te.H.useState(z)},at.useSyncExternalStore=function(z,re,ve){return te.H.useSyncExternalStore(z,re,ve)},at.useTransition=function(){return te.H.useTransition()},at.version="19.2.0",at}var bh;function Zd(){return bh||(bh=1,Td.exports=rx()),Td.exports}var j=Zd();const ax=ng(j);var Nd={exports:{}},Fo={},Id={exports:{}},Rd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ch;function sx(){return Ch||(Ch=1,(function(d){function l($,fe){var Ge=$.length;$.push(fe);e:for(;0<Ge;){var Z=Ge-1>>>1,be=$[Z];if(0<C(be,fe))$[Z]=fe,$[Ge]=be,Ge=Z;else break e}}function u($){return $.length===0?null:$[0]}function h($){if($.length===0)return null;var fe=$[0],Ge=$.pop();if(Ge!==fe){$[0]=Ge;e:for(var Z=0,be=$.length,z=be>>>1;Z<z;){var re=2*(Z+1)-1,ve=$[re],Re=re+1,Ke=$[Re];if(0>C(ve,Ge))Re<be&&0>C(Ke,ve)?($[Z]=Ke,$[Re]=Ge,Z=Re):($[Z]=ve,$[re]=Ge,Z=re);else if(Re<be&&0>C(Ke,Ge))$[Z]=Ke,$[Re]=Ge,Z=Re;else break e}}return fe}function C($,fe){var Ge=$.sortIndex-fe.sortIndex;return Ge!==0?Ge:$.id-fe.id}if(d.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var b=performance;d.unstable_now=function(){return b.now()}}else{var w=Date,_=w.now();d.unstable_now=function(){return w.now()-_}}var I=[],A=[],D=1,M=null,P=3,G=!1,ee=!1,ne=!1,J=!1,xe=typeof setTimeout=="function"?setTimeout:null,ce=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function Ee($){for(var fe=u(A);fe!==null;){if(fe.callback===null)h(A);else if(fe.startTime<=$)h(A),fe.sortIndex=fe.expirationTime,l(I,fe);else break;fe=u(A)}}function Fe($){if(ne=!1,Ee($),!ee)if(u(I)!==null)ee=!0,ge||(ge=!0,Me());else{var fe=u(A);fe!==null&&oe(Fe,fe.startTime-$)}}var ge=!1,te=-1,Te=5,de=-1;function De(){return J?!0:!(d.unstable_now()-de<Te)}function tt(){if(J=!1,ge){var $=d.unstable_now();de=$;var fe=!0;try{e:{ee=!1,ne&&(ne=!1,ce(te),te=-1),G=!0;var Ge=P;try{t:{for(Ee($),M=u(I);M!==null&&!(M.expirationTime>$&&De());){var Z=M.callback;if(typeof Z=="function"){M.callback=null,P=M.priorityLevel;var be=Z(M.expirationTime<=$);if($=d.unstable_now(),typeof be=="function"){M.callback=be,Ee($),fe=!0;break t}M===u(I)&&h(I),Ee($)}else h(I);M=u(I)}if(M!==null)fe=!0;else{var z=u(A);z!==null&&oe(Fe,z.startTime-$),fe=!1}}break e}finally{M=null,P=Ge,G=!1}fe=void 0}}finally{fe?Me():ge=!1}}}var Me;if(typeof X=="function")Me=function(){X(tt)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,st=nt.port2;nt.port1.onmessage=tt,Me=function(){st.postMessage(null)}}else Me=function(){xe(tt,0)};function oe($,fe){te=xe(function(){$(d.unstable_now())},fe)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function($){$.callback=null},d.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Te=0<$?Math.floor(1e3/$):5},d.unstable_getCurrentPriorityLevel=function(){return P},d.unstable_next=function($){switch(P){case 1:case 2:case 3:var fe=3;break;default:fe=P}var Ge=P;P=fe;try{return $()}finally{P=Ge}},d.unstable_requestPaint=function(){J=!0},d.unstable_runWithPriority=function($,fe){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Ge=P;P=$;try{return fe()}finally{P=Ge}},d.unstable_scheduleCallback=function($,fe,Ge){var Z=d.unstable_now();switch(typeof Ge=="object"&&Ge!==null?(Ge=Ge.delay,Ge=typeof Ge=="number"&&0<Ge?Z+Ge:Z):Ge=Z,$){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=Ge+be,$={id:D++,callback:fe,priorityLevel:$,startTime:Ge,expirationTime:be,sortIndex:-1},Ge>Z?($.sortIndex=Ge,l(A,$),u(I)===null&&$===u(A)&&(ne?(ce(te),te=-1):ne=!0,oe(Fe,Ge-Z))):($.sortIndex=be,l(I,$),ee||G||(ee=!0,ge||(ge=!0,Me()))),$},d.unstable_shouldYield=De,d.unstable_wrapCallback=function($){var fe=P;return function(){var Ge=P;P=fe;try{return $.apply(this,arguments)}finally{P=Ge}}}})(Rd)),Rd}var Eh;function ox(){return Eh||(Eh=1,Id.exports=sx()),Id.exports}var _d={exports:{}},Wn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ah;function lx(){if(Ah)return Wn;Ah=1;var d=Zd();function l(I){var A="https://react.dev/errors/"+I;if(1<arguments.length){A+="?args[]="+encodeURIComponent(arguments[1]);for(var D=2;D<arguments.length;D++)A+="&args[]="+encodeURIComponent(arguments[D])}return"Minified React error #"+I+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(){}var h={d:{f:u,r:function(){throw Error(l(522))},D:u,C:u,L:u,m:u,X:u,S:u,M:u},p:0,findDOMNode:null},C=Symbol.for("react.portal");function b(I,A,D){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C,key:M==null?null:""+M,children:I,containerInfo:A,implementation:D}}var w=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function _(I,A){if(I==="font")return"";if(typeof A=="string")return A==="use-credentials"?A:""}return Wn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=h,Wn.createPortal=function(I,A){var D=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)throw Error(l(299));return b(I,A,null,D)},Wn.flushSync=function(I){var A=w.T,D=h.p;try{if(w.T=null,h.p=2,I)return I()}finally{w.T=A,h.p=D,h.d.f()}},Wn.preconnect=function(I,A){typeof I=="string"&&(A?(A=A.crossOrigin,A=typeof A=="string"?A==="use-credentials"?A:"":void 0):A=null,h.d.C(I,A))},Wn.prefetchDNS=function(I){typeof I=="string"&&h.d.D(I)},Wn.preinit=function(I,A){if(typeof I=="string"&&A&&typeof A.as=="string"){var D=A.as,M=_(D,A.crossOrigin),P=typeof A.integrity=="string"?A.integrity:void 0,G=typeof A.fetchPriority=="string"?A.fetchPriority:void 0;D==="style"?h.d.S(I,typeof A.precedence=="string"?A.precedence:void 0,{crossOrigin:M,integrity:P,fetchPriority:G}):D==="script"&&h.d.X(I,{crossOrigin:M,integrity:P,fetchPriority:G,nonce:typeof A.nonce=="string"?A.nonce:void 0})}},Wn.preinitModule=function(I,A){if(typeof I=="string")if(typeof A=="object"&&A!==null){if(A.as==null||A.as==="script"){var D=_(A.as,A.crossOrigin);h.d.M(I,{crossOrigin:D,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0})}}else A==null&&h.d.M(I)},Wn.preload=function(I,A){if(typeof I=="string"&&typeof A=="object"&&A!==null&&typeof A.as=="string"){var D=A.as,M=_(D,A.crossOrigin);h.d.L(I,D,{crossOrigin:M,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0,type:typeof A.type=="string"?A.type:void 0,fetchPriority:typeof A.fetchPriority=="string"?A.fetchPriority:void 0,referrerPolicy:typeof A.referrerPolicy=="string"?A.referrerPolicy:void 0,imageSrcSet:typeof A.imageSrcSet=="string"?A.imageSrcSet:void 0,imageSizes:typeof A.imageSizes=="string"?A.imageSizes:void 0,media:typeof A.media=="string"?A.media:void 0})}},Wn.preloadModule=function(I,A){if(typeof I=="string")if(A){var D=_(A.as,A.crossOrigin);h.d.m(I,{as:typeof A.as=="string"&&A.as!=="script"?A.as:void 0,crossOrigin:D,integrity:typeof A.integrity=="string"?A.integrity:void 0})}else h.d.m(I)},Wn.requestFormReset=function(I){h.d.r(I)},Wn.unstable_batchedUpdates=function(I,A){return I(A)},Wn.useFormState=function(I,A,D){return w.H.useFormState(I,A,D)},Wn.useFormStatus=function(){return w.H.useHostTransitionStatus()},Wn.version="19.2.0",Wn}var Sh;function cx(){if(Sh)return _d.exports;Sh=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(l){console.error(l)}}return d(),_d.exports=lx(),_d.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wh;function ux(){if(wh)return Fo;wh=1;var d=ox(),l=Zd(),u=cx();function h(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function C(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function b(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function w(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function _(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function I(e){if(b(e)!==e)throw Error(h(188))}function A(e){var n=e.alternate;if(!n){if(n=b(e),n===null)throw Error(h(188));return n!==e?null:e}for(var a=e,c=n;;){var p=a.return;if(p===null)break;var y=p.alternate;if(y===null){if(c=p.return,c!==null){a=c;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===a)return I(p),e;if(y===c)return I(p),n;y=y.sibling}throw Error(h(188))}if(a.return!==c.return)a=p,c=y;else{for(var v=!1,O=p.child;O;){if(O===a){v=!0,a=p,c=y;break}if(O===c){v=!0,c=p,a=y;break}O=O.sibling}if(!v){for(O=y.child;O;){if(O===a){v=!0,a=y,c=p;break}if(O===c){v=!0,c=y,a=p;break}O=O.sibling}if(!v)throw Error(h(189))}}if(a.alternate!==c)throw Error(h(190))}if(a.tag!==3)throw Error(h(188));return a.stateNode.current===a?e:n}function D(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=D(e),n!==null)return n;e=e.sibling}return null}var M=Object.assign,P=Symbol.for("react.element"),G=Symbol.for("react.transitional.element"),ee=Symbol.for("react.portal"),ne=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),xe=Symbol.for("react.profiler"),ce=Symbol.for("react.consumer"),X=Symbol.for("react.context"),Ee=Symbol.for("react.forward_ref"),Fe=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),Te=Symbol.for("react.lazy"),de=Symbol.for("react.activity"),De=Symbol.for("react.memo_cache_sentinel"),tt=Symbol.iterator;function Me(e){return e===null||typeof e!="object"?null:(e=tt&&e[tt]||e["@@iterator"],typeof e=="function"?e:null)}var nt=Symbol.for("react.client.reference");function st(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===nt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ne:return"Fragment";case xe:return"Profiler";case J:return"StrictMode";case Fe:return"Suspense";case ge:return"SuspenseList";case de:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case ee:return"Portal";case X:return e.displayName||"Context";case ce:return(e._context.displayName||"Context")+".Consumer";case Ee:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case te:return n=e.displayName||null,n!==null?n:st(e.type)||"Memo";case Te:n=e._payload,e=e._init;try{return st(e(n))}catch{}}return null}var oe=Array.isArray,$=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=u.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ge={pending:!1,data:null,method:null,action:null},Z=[],be=-1;function z(e){return{current:e}}function re(e){0>be||(e.current=Z[be],Z[be]=null,be--)}function ve(e,n){be++,Z[be]=e.current,e.current=n}var Re=z(null),Ke=z(null),Se=z(null),ot=z(null);function ft(e,n){switch(ve(Se,n),ve(Ke,e),ve(Re,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?U1(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=U1(n),e=F1(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}re(Re),ve(Re,e)}function Bt(){re(Re),re(Ke),re(Se)}function Yn(e){e.memoizedState!==null&&ve(ot,e);var n=Re.current,a=F1(n,e.type);n!==a&&(ve(Ke,e),ve(Re,a))}function cn(e){Ke.current===e&&(re(Re),re(Ke)),ot.current===e&&(re(ot),Lo._currentValue=Ge)}var hi,pt;function Kt(e){if(hi===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);hi=n&&n[1]||"",pt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hi+e+pt}var _e=!1;function Xe(e,n){if(!e||_e)return"";_e=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(n){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(ue){var ie=ue}Reflect.construct(e,[],me)}else{try{me.call()}catch(ue){ie=ue}e.call(me.prototype)}}else{try{throw Error()}catch(ue){ie=ue}(me=e())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(ue){if(ue&&ie&&typeof ue.stack=="string")return[ue.stack,ie.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),v=y[0],O=y[1];if(v&&O){var k=v.split(`
`),K=O.split(`
`);for(p=c=0;c<k.length&&!k[c].includes("DetermineComponentFrameRoot");)c++;for(;p<K.length&&!K[p].includes("DetermineComponentFrameRoot");)p++;if(c===k.length||p===K.length)for(c=k.length-1,p=K.length-1;1<=c&&0<=p&&k[c]!==K[p];)p--;for(;1<=c&&0<=p;c--,p--)if(k[c]!==K[p]){if(c!==1||p!==1)do if(c--,p--,0>p||k[c]!==K[p]){var he=`
`+k[c].replace(" at new "," at ");return e.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",e.displayName)),he}while(1<=c&&0<=p);break}}}finally{_e=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Kt(a):""}function Oe(e,n){switch(e.tag){case 26:case 27:case 5:return Kt(e.type);case 16:return Kt("Lazy");case 13:return e.child!==n&&n!==null?Kt("Suspense Fallback"):Kt("Suspense");case 19:return Kt("SuspenseList");case 0:case 15:return Xe(e.type,!1);case 11:return Xe(e.type.render,!1);case 1:return Xe(e.type,!0);case 31:return Kt("Activity");default:return""}}function We(e){try{var n="",a=null;do n+=Oe(e,a),a=e,e=e.return;while(e);return n}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Qe=Object.prototype.hasOwnProperty,ii=d.unstable_scheduleCallback,ke=d.unstable_cancelCallback,yr=d.unstable_shouldYield,Da=d.unstable_requestPaint,Jt=d.unstable_now,Ba=d.unstable_getCurrentPriorityLevel,Xn=d.unstable_ImmediatePriority,La=d.unstable_UserBlockingPriority,qn=d.unstable_NormalPriority,On=d.unstable_LowPriority,Ri=d.unstable_IdlePriority,Gr=d.log,as=d.unstable_setDisableYieldValue,St=null,Ne=null;function Lt(e){if(typeof Gr=="function"&&as(e),Ne&&typeof Ne.setStrictMode=="function")try{Ne.setStrictMode(St,e)}catch{}}var V=Math.clz32?Math.clz32:Be,ae=Math.log,ye=Math.LN2;function Be(e){return e>>>=0,e===0?32:31-(ae(e)/ye|0)|0}var Ve=256,Le=262144,Pe=4194304;function ht(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function xn(e,n,a){var c=e.pendingLanes;if(c===0)return 0;var p=0,y=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var O=c&134217727;return O!==0?(c=O&~y,c!==0?p=ht(c):(v&=O,v!==0?p=ht(v):a||(a=O&~e,a!==0&&(p=ht(a))))):(O=c&~y,O!==0?p=ht(O):v!==0?p=ht(v):a||(a=c&~e,a!==0&&(p=ht(a)))),p===0?0:n!==0&&n!==p&&(n&y)===0&&(y=p&-p,a=n&-n,y>=a||y===32&&(a&4194048)!==0)?n:p}function jt(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function ja(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mn(){var e=Pe;return Pe<<=1,(Pe&62914560)===0&&(Pe=4194304),e}function rr(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function ar(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function _i(e,n,a,c,p,y){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var O=e.entanglements,k=e.expirationTimes,K=e.hiddenUpdates;for(a=v&~a;0<a;){var he=31-V(a),me=1<<he;O[he]=0,k[he]=-1;var ie=K[he];if(ie!==null)for(K[he]=null,he=0;he<ie.length;he++){var ue=ie[he];ue!==null&&(ue.lane&=-536870913)}a&=~me}c!==0&&Zo(e,c,0),y!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=y&~(v&~n))}function Zo(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var c=31-V(n);e.entangledLanes|=n,e.entanglements[c]=e.entanglements[c]|1073741824|a&261930}function sr(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var c=31-V(a),p=1<<c;p&n|e[c]&n&&(e[c]|=n),a&=~p}}function ss(e,n){var a=n&-n;return a=(a&42)!==0?1:kn(a),(a&(e.suspendedLanes|n))!==0?0:a}function kn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Vi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Zn(){var e=fe.p;return e!==0?e:(e=window.event,e===void 0?32:ch(e.type))}function je(e,n){var a=fe.p;try{return fe.p=e,n()}finally{fe.p=a}}var Qn=Math.random().toString(36).slice(2),mn="__reactFiber$"+Qn,Ft="__reactProps$"+Qn,gi="__reactContainer$"+Qn,Yr="__reactEvents$"+Qn,os="__reactListeners$"+Qn,Oi="__reactHandles$"+Qn,Qo="__reactResources$"+Qn,ka="__reactMarker$"+Qn;function ri(e){delete e[mn],delete e[Ft],delete e[Yr],delete e[os],delete e[Oi]}function un(e){var n=e[mn];if(n)return n;for(var a=e.parentNode;a;){if(n=a[gi]||a[mn]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=W1(e);e!==null;){if(a=e[mn])return a;e=W1(e)}return n}e=a,a=e.parentNode}return null}function Ot(e){if(e=e[mn]||e[gi]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Xr(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(h(33))}function Kn(e){var n=e[Qo];return n||(n=e[Qo]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function dn(e){e[ka]=!0}var Ce=new Set,Ko={};function kt(e,n){pi(e,n),pi(e+"Capture",n)}function pi(e,n){for(Ko[e]=n,e=0;e<n.length;e++)Ce.add(n[e])}var Oc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nt={},Tt={};function xt(e){return Qe.call(Tt,e)?!0:Qe.call(Nt,e)?!1:Oc.test(e)?Tt[e]=!0:(Nt[e]=!0,!1)}function Wr(e,n,a){if(xt(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var c=n.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function qr(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function xi(e,n,a,c){if(c===null)e.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+c)}}function It(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Gi(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Mc(e,n,a){var c=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,y=c.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return p.call(this)},set:function(v){a=""+v,y.call(this,v)}}),Object.defineProperty(e,n,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function $t(e){if(!e._valueTracker){var n=Gi(e)?"checked":"value";e._valueTracker=Mc(e,n,""+e[n])}}function Yi(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),c="";return e&&(c=Gi(e)?e.checked?"true":"false":e.value),e=c,e!==a?(n.setValue(e),!0):!1}function ls(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Zr=/[\n"\\]/g;function gt(e){return e.replace(Zr,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function wn(e,n,a,c,p,y,v,O){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+It(n)):e.value!==""+It(n)&&(e.value=""+It(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?B(e,v,It(n)):a!=null?B(e,v,It(a)):c!=null&&e.removeAttribute("value"),p==null&&y!=null&&(e.defaultChecked=!!y),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?e.name=""+It(O):e.removeAttribute("name")}function q(e,n,a,c,p,y,v,O){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.type=y),n!=null||a!=null){if(!(y!=="submit"&&y!=="reset"||n!=null)){$t(e);return}a=a!=null?""+It(a):"",n=n!=null?""+It(n):a,O||n===e.value||(e.value=n),e.defaultValue=n}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=O?e.checked:!!c,e.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),$t(e)}function B(e,n,a){n==="number"&&ls(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function He(e,n,a,c){if(e=e.options,n){n={};for(var p=0;p<a.length;p++)n["$"+a[p]]=!0;for(a=0;a<e.length;a++)p=n.hasOwnProperty("$"+e[a].value),e[a].selected!==p&&(e[a].selected=p),p&&c&&(e[a].defaultSelected=!0)}else{for(a=""+It(a),n=null,p=0;p<e.length;p++){if(e[p].value===a){e[p].selected=!0,c&&(e[p].defaultSelected=!0);return}n!==null||e[p].disabled||(n=e[p])}n!==null&&(n.selected=!0)}}function yn(e,n,a){if(n!=null&&(n=""+It(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+It(a):""}function Jn(e,n,a,c){if(n==null){if(c!=null){if(a!=null)throw Error(h(92));if(oe(c)){if(1<c.length)throw Error(h(93));c=c[0]}a=c}a==null&&(a=""),n=a}a=It(n),e.defaultValue=a,c=e.textContent,c===a&&c!==""&&c!==null&&(e.value=c),$t(e)}function Qr(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var Qs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $n(e,n,a){var c=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":c?e.setProperty(n,a):typeof a!="number"||a===0||Qs.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function qe(e,n,a){if(n!=null&&typeof n!="object")throw Error(h(62));if(e=e.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||n!=null&&n.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var p in n)c=n[p],n.hasOwnProperty(p)&&a[p]!==c&&$n(e,p,c)}else for(var y in n)n.hasOwnProperty(y)&&$n(e,y,n[y])}function Wt(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Kr(e){return Dc.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ai(){}var za=null;function Ks(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var en=null,Mi=null;function Xi(e){var n=Ot(e);if(n&&(e=n.stateNode)){var a=e[Ft]||null;e:switch(e=n.stateNode,n.type){case"input":if(wn(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+gt(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var c=a[n];if(c!==e&&c.form===e.form){var p=c[Ft]||null;if(!p)throw Error(h(90));wn(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(n=0;n<a.length;n++)c=a[n],c.form===e.form&&Yi(c)}break e;case"textarea":yn(e,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&He(e,!!a.multiple,n,!1)}}}var Je=!1;function $o(e,n,a){if(Je)return e(n,a);Je=!0;try{var c=e(n);return c}finally{if(Je=!1,(en!==null||Mi!==null)&&(Gl(),en&&(n=en,e=Mi,Mi=en=null,Xi(n),e)))for(n=0;n<e.length;n++)Xi(e[n])}}function it(e,n){var a=e.stateNode;if(a===null)return null;var c=a[Ft]||null;if(c===null)return null;a=c[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(h(231,n,typeof a));return a}var qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Js=!1;if(qt)try{var br={};Object.defineProperty(br,"passive",{get:function(){Js=!0}}),window.addEventListener("test",br,br),window.removeEventListener("test",br,br)}catch{Js=!1}var Wi=null,qi=null,cs=null;function Jr(){if(cs)return cs;var e,n=qi,a=n.length,c,p="value"in Wi?Wi.value:Wi.textContent,y=p.length;for(e=0;e<a&&n[e]===p[e];e++);var v=a-e;for(c=1;c<=v&&n[a-c]===p[y-c];c++);return cs=p.slice(e,1<c?1-c:void 0)}function or(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function lr(){return!0}function $s(){return!1}function vn(e){function n(a,c,p,y,v){this._reactName=a,this._targetInst=p,this.type=c,this.nativeEvent=y,this.target=v,this.currentTarget=null;for(var O in e)e.hasOwnProperty(O)&&(a=e[O],this[O]=a?a(y):y[O]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?lr:$s,this.isPropagationStopped=$s,this}return M(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=lr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=lr)},persist:function(){},isPersistent:lr}),n}var mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dn=vn(mi),$r=M({},mi,{view:0,detail:0}),el=vn($r),us,eo,Ua,ds=M({},$r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ua&&(Ua&&e.type==="mousemove"?(us=e.screenX-Ua.screenX,eo=e.screenY-Ua.screenY):eo=us=0,Ua=e),us)},movementY:function(e){return"movementY"in e?e.movementY:eo}}),Mt=vn(ds),tl=M({},ds,{dataTransfer:0}),fs=vn(tl),cr=M({},$r,{relatedTarget:0}),to=vn(cr),le=M({},mi,{animationName:0,elapsedTime:0,pseudoElement:0}),ct=vn(le),Bn=M({},mi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hs=vn(Bn),nl=M({},mi,{data:0}),il=vn(nl),Bc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},no={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bn(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=no[e])?!!n[e]:!1}function Fa(){return bn}var an=M({},$r,{key:function(e){if(e.key){var n=Bc[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=or(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Lc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fa,charCode:function(e){return e.type==="keypress"?or(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?or(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gs=vn(an),Cr=M({},ds,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zt=vn(Cr),$e=M({},$r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fa}),jc=vn($e),Zt=M({},mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Er=vn(Zt),ea=M({},ds,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kc=vn(ea),Di=M({},mi,{newState:0,oldState:0}),io=vn(Di),rl=[9,13,27,32],Pa=qt&&"CompositionEvent"in window,ta=null;qt&&"documentMode"in document&&(ta=document.documentMode);var al=qt&&"TextEvent"in window&&!ta,sl=qt&&(!Pa||ta&&8<ta&&11>=ta),Ar=" ",ps=!1;function ol(e,n){switch(e){case"keyup":return rl.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function na(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ia=!1;function ur(e,n){switch(e){case"compositionend":return na(n);case"keypress":return n.which!==32?null:(ps=!0,Ar);case"textInput":return e=n.data,e===Ar&&ps?null:e;default:return null}}function xs(e,n){if(ia)return e==="compositionend"||!Pa&&ol(e,n)?(e=Jr(),cs=qi=Wi=null,ia=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return sl&&n.locale!=="ko"?null:n.data;default:return null}}var si={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ro(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!si[e.type]:n==="textarea"}function yi(e,n,a,c){en?Mi?Mi.push(c):Mi=[c]:en=c,n=Kl(n,"onChange"),0<n.length&&(a=new Dn("onChange","change",null,a,c),e.push({event:a,listeners:n}))}var Ha=null,Sr=null;function zc(e){D1(e,0)}function Va(e){var n=Xr(e);if(Yi(n))return e}function bi(e,n){if(e==="change")return n}var ll=!1;if(qt){var Ga;if(qt){var wr="oninput"in document;if(!wr){var bt=document.createElement("div");bt.setAttribute("oninput","return;"),wr=typeof bt.oninput=="function"}Ga=wr}else Ga=!1;ll=Ga&&(!document.documentMode||9<document.documentMode)}function Ya(){Ha&&(Ha.detachEvent("onpropertychange",T),Sr=Ha=null)}function T(e){if(e.propertyName==="value"&&Va(Sr)){var n=[];yi(n,Sr,e,Ks(e)),$o(zc,n)}}function t(e,n,a){e==="focusin"?(Ya(),Ha=n,Sr=a,Ha.attachEvent("onpropertychange",T)):e==="focusout"&&Ya()}function i(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Va(Sr)}function r(e,n){if(e==="click")return Va(n)}function s(e,n){if(e==="input"||e==="change")return Va(n)}function o(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var f=typeof Object.is=="function"?Object.is:o;function g(e,n){if(f(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),c=Object.keys(n);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var p=a[c];if(!Qe.call(n,p)||!f(e[p],n[p]))return!1}return!0}function m(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function E(e,n){var a=m(e);e=0;for(var c;a;){if(a.nodeType===3){if(c=e+a.textContent.length,e<=n&&c>=n)return{node:a,offset:n-e};e=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=m(a)}}function S(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?S(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function N(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=ls(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=ls(e.document)}return n}function R(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var L=qt&&"documentMode"in document&&11>=document.documentMode,U=null,F=null,W=null,se=!1;function Ie(e,n,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;se||U==null||U!==ls(c)||(c=U,"selectionStart"in c&&R(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),W&&g(W,c)||(W=c,c=Kl(F,"onSelect"),0<c.length&&(n=new Dn("onSelect","select",null,n,a),e.push({event:n,listeners:c}),n.target=U)))}function we(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var Ae={animationend:we("Animation","AnimationEnd"),animationiteration:we("Animation","AnimationIteration"),animationstart:we("Animation","AnimationStart"),transitionrun:we("Transition","TransitionRun"),transitionstart:we("Transition","TransitionStart"),transitioncancel:we("Transition","TransitionCancel"),transitionend:we("Transition","TransitionEnd")},dt={},rt={};qt&&(rt=document.createElement("div").style,"AnimationEvent"in window||(delete Ae.animationend.animation,delete Ae.animationiteration.animation,delete Ae.animationstart.animation),"TransitionEvent"in window||delete Ae.transitionend.transition);function fn(e){if(dt[e])return dt[e];if(!Ae[e])return e;var n=Ae[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in rt)return dt[e]=n[a];return e}var oi=fn("animationend"),Fn=fn("animationiteration"),Ut=fn("animationstart"),Ln=fn("transitionrun"),ei=fn("transitionstart"),ra=fn("transitioncancel"),vr=fn("transitionend"),cl=new Map,ao="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ao.push("scrollEnd");function Zi(e,n){cl.set(e,n),kt(n,[e])}var ul=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Bi=[],ms=0,Uc=0;function dl(){for(var e=ms,n=Uc=ms=0;n<e;){var a=Bi[n];Bi[n++]=null;var c=Bi[n];Bi[n++]=null;var p=Bi[n];Bi[n++]=null;var y=Bi[n];if(Bi[n++]=null,c!==null&&p!==null){var v=c.pending;v===null?p.next=p:(p.next=v.next,v.next=p),c.pending=p}y!==0&&gf(a,p,y)}}function fl(e,n,a,c){Bi[ms++]=e,Bi[ms++]=n,Bi[ms++]=a,Bi[ms++]=c,Uc|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function Fc(e,n,a,c){return fl(e,n,a,c),hl(e)}function Xa(e,n){return fl(e,null,null,n),hl(e)}function gf(e,n,a){e.lanes|=a;var c=e.alternate;c!==null&&(c.lanes|=a);for(var p=!1,y=e.return;y!==null;)y.childLanes|=a,c=y.alternate,c!==null&&(c.childLanes|=a),y.tag===22&&(e=y.stateNode,e===null||e._visibility&1||(p=!0)),e=y,y=y.return;return e.tag===3?(y=e.stateNode,p&&n!==null&&(p=31-V(a),e=y.hiddenUpdates,c=e[p],c===null?e[p]=[n]:c.push(n),n.lane=a|536870912),y):null}function hl(e){if(50<Io)throw Io=0,Zu=null,Error(h(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ys={};function zg(e,n,a,c){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ci(e,n,a,c){return new zg(e,n,a,c)}function Pc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Tr(e,n){var a=e.alternate;return a===null?(a=Ci(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function pf(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function gl(e,n,a,c,p,y){var v=0;if(c=e,typeof e=="function")Pc(e)&&(v=1);else if(typeof e=="string")v=Vp(e,a,Re.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case de:return e=Ci(31,a,n,p),e.elementType=de,e.lanes=y,e;case ne:return Wa(a.children,p,y,n);case J:v=8,p|=24;break;case xe:return e=Ci(12,a,n,p|2),e.elementType=xe,e.lanes=y,e;case Fe:return e=Ci(13,a,n,p),e.elementType=Fe,e.lanes=y,e;case ge:return e=Ci(19,a,n,p),e.elementType=ge,e.lanes=y,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case X:v=10;break e;case ce:v=9;break e;case Ee:v=11;break e;case te:v=14;break e;case Te:v=16,c=null;break e}v=29,a=Error(h(130,e===null?"null":typeof e,"")),c=null}return n=Ci(v,a,n,p),n.elementType=e,n.type=c,n.lanes=y,n}function Wa(e,n,a,c){return e=Ci(7,e,c,n),e.lanes=a,e}function Hc(e,n,a){return e=Ci(6,e,null,n),e.lanes=a,e}function xf(e){var n=Ci(18,null,null,0);return n.stateNode=e,n}function Vc(e,n,a){return n=Ci(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var mf=new WeakMap;function Li(e,n){if(typeof e=="object"&&e!==null){var a=mf.get(e);return a!==void 0?a:(n={value:e,source:n,stack:We(n)},mf.set(e,n),n)}return{value:e,source:n,stack:We(n)}}var bs=[],Cs=0,pl=null,so=0,ji=[],ki=0,aa=null,dr=1,fr="";function Nr(e,n){bs[Cs++]=so,bs[Cs++]=pl,pl=e,so=n}function yf(e,n,a){ji[ki++]=dr,ji[ki++]=fr,ji[ki++]=aa,aa=e;var c=dr;e=fr;var p=32-V(c)-1;c&=~(1<<p),a+=1;var y=32-V(n)+p;if(30<y){var v=p-p%5;y=(c&(1<<v)-1).toString(32),c>>=v,p-=v,dr=1<<32-V(n)+p|a<<p|c,fr=y+e}else dr=1<<y|a<<p|c,fr=e}function Gc(e){e.return!==null&&(Nr(e,1),yf(e,1,0))}function Yc(e){for(;e===pl;)pl=bs[--Cs],bs[Cs]=null,so=bs[--Cs],bs[Cs]=null;for(;e===aa;)aa=ji[--ki],ji[ki]=null,fr=ji[--ki],ji[ki]=null,dr=ji[--ki],ji[ki]=null}function bf(e,n){ji[ki++]=dr,ji[ki++]=fr,ji[ki++]=aa,dr=n.id,fr=n.overflow,aa=e}var Pn=null,tn=null,wt=!1,sa=null,zi=!1,Xc=Error(h(519));function oa(e){var n=Error(h(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw oo(Li(n,e)),Xc}function Cf(e){var n=e.stateNode,a=e.type,c=e.memoizedProps;switch(n[mn]=e,n[Ft]=c,a){case"dialog":yt("cancel",n),yt("close",n);break;case"iframe":case"object":case"embed":yt("load",n);break;case"video":case"audio":for(a=0;a<_o.length;a++)yt(_o[a],n);break;case"source":yt("error",n);break;case"img":case"image":case"link":yt("error",n),yt("load",n);break;case"details":yt("toggle",n);break;case"input":yt("invalid",n),q(n,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":yt("invalid",n);break;case"textarea":yt("invalid",n),Jn(n,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||c.suppressHydrationWarning===!0||k1(n.textContent,a)?(c.popover!=null&&(yt("beforetoggle",n),yt("toggle",n)),c.onScroll!=null&&yt("scroll",n),c.onScrollEnd!=null&&yt("scrollend",n),c.onClick!=null&&(n.onclick=ai),n=!0):n=!1,n||oa(e,!0)}function Ef(e){for(Pn=e.return;Pn;)switch(Pn.tag){case 5:case 31:case 13:zi=!1;return;case 27:case 3:zi=!0;return;default:Pn=Pn.return}}function Es(e){if(e!==Pn)return!1;if(!wt)return Ef(e),wt=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||ud(e.type,e.memoizedProps)),a=!a),a&&tn&&oa(e),Ef(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(h(317));tn=X1(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(h(317));tn=X1(e)}else n===27?(n=tn,Ea(e.type)?(e=pd,pd=null,tn=e):tn=n):tn=Pn?Fi(e.stateNode.nextSibling):null;return!0}function qa(){tn=Pn=null,wt=!1}function Wc(){var e=sa;return e!==null&&(di===null?di=e:di.push.apply(di,e),sa=null),e}function oo(e){sa===null?sa=[e]:sa.push(e)}var qc=z(null),Za=null,Ir=null;function la(e,n,a){ve(qc,n._currentValue),n._currentValue=a}function Rr(e){e._currentValue=qc.current,re(qc)}function Zc(e,n,a){for(;e!==null;){var c=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),e===a)break;e=e.return}}function Qc(e,n,a,c){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var y=p.dependencies;if(y!==null){var v=p.child;y=y.firstContext;e:for(;y!==null;){var O=y;y=p;for(var k=0;k<n.length;k++)if(O.context===n[k]){y.lanes|=a,O=y.alternate,O!==null&&(O.lanes|=a),Zc(y.return,a,e),c||(v=null);break e}y=O.next}}else if(p.tag===18){if(v=p.return,v===null)throw Error(h(341));v.lanes|=a,y=v.alternate,y!==null&&(y.lanes|=a),Zc(v,a,e),v=null}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===e){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}}function As(e,n,a,c){e=null;for(var p=n,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var v=p.alternate;if(v===null)throw Error(h(387));if(v=v.memoizedProps,v!==null){var O=p.type;f(p.pendingProps.value,v.value)||(e!==null?e.push(O):e=[O])}}else if(p===ot.current){if(v=p.alternate,v===null)throw Error(h(387));v.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(Lo):e=[Lo])}p=p.return}e!==null&&Qc(n,e,a,c),n.flags|=262144}function xl(e){for(e=e.firstContext;e!==null;){if(!f(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Qa(e){Za=e,Ir=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Hn(e){return Af(Za,e)}function ml(e,n){return Za===null&&Qa(e),Af(e,n)}function Af(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Ir===null){if(e===null)throw Error(h(308));Ir=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Ir=Ir.next=n;return a}var Ug=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,c){e.push(c)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},Fg=d.unstable_scheduleCallback,Pg=d.unstable_NormalPriority,Tn={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kc(){return{controller:new Ug,data:new Map,refCount:0}}function lo(e){e.refCount--,e.refCount===0&&Fg(Pg,function(){e.controller.abort()})}var co=null,Jc=0,Ss=0,ws=null;function Hg(e,n){if(co===null){var a=co=[];Jc=0,Ss=td(),ws={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Jc++,n.then(Sf,Sf),n}function Sf(){if(--Jc===0&&co!==null){ws!==null&&(ws.status="fulfilled");var e=co;co=null,Ss=0,ws=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Vg(e,n){var a=[],c={status:"pending",value:null,reason:null,then:function(p){a.push(p)}};return e.then(function(){c.status="fulfilled",c.value=n;for(var p=0;p<a.length;p++)(0,a[p])(n)},function(p){for(c.status="rejected",c.reason=p,p=0;p<a.length;p++)(0,a[p])(void 0)}),c}var wf=$.S;$.S=function(e,n){o1=Jt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Hg(e,n),wf!==null&&wf(e,n)};var Ka=z(null);function $c(){var e=Ka.current;return e!==null?e:Qt.pooledCache}function yl(e,n){n===null?ve(Ka,Ka.current):ve(Ka,n.pool)}function vf(){var e=$c();return e===null?null:{parent:Tn._currentValue,pool:e}}var vs=Error(h(460)),eu=Error(h(474)),bl=Error(h(542)),Cl={then:function(){}};function Tf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Nf(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(ai,ai),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Rf(e),e;default:if(typeof n.status=="string")n.then(ai,ai);else{if(e=Qt,e!==null&&100<e.shellSuspendCounter)throw Error(h(482));e=n,e.status="pending",e.then(function(c){if(n.status==="pending"){var p=n;p.status="fulfilled",p.value=c}},function(c){if(n.status==="pending"){var p=n;p.status="rejected",p.reason=c}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Rf(e),e}throw $a=n,vs}}function Ja(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?($a=a,vs):a}}var $a=null;function If(){if($a===null)throw Error(h(459));var e=$a;return $a=null,e}function Rf(e){if(e===vs||e===bl)throw Error(h(483))}var Ts=null,uo=0;function El(e){var n=uo;return uo+=1,Ts===null&&(Ts=[]),Nf(Ts,e,n)}function fo(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Al(e,n){throw n.$$typeof===P?Error(h(525)):(e=Object.prototype.toString.call(n),Error(h(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function _f(e){function n(Y,H){if(e){var Q=Y.deletions;Q===null?(Y.deletions=[H],Y.flags|=16):Q.push(H)}}function a(Y,H){if(!e)return null;for(;H!==null;)n(Y,H),H=H.sibling;return null}function c(Y){for(var H=new Map;Y!==null;)Y.key!==null?H.set(Y.key,Y):H.set(Y.index,Y),Y=Y.sibling;return H}function p(Y,H){return Y=Tr(Y,H),Y.index=0,Y.sibling=null,Y}function y(Y,H,Q){return Y.index=Q,e?(Q=Y.alternate,Q!==null?(Q=Q.index,Q<H?(Y.flags|=67108866,H):Q):(Y.flags|=67108866,H)):(Y.flags|=1048576,H)}function v(Y){return e&&Y.alternate===null&&(Y.flags|=67108866),Y}function O(Y,H,Q,pe){return H===null||H.tag!==6?(H=Hc(Q,Y.mode,pe),H.return=Y,H):(H=p(H,Q),H.return=Y,H)}function k(Y,H,Q,pe){var Ze=Q.type;return Ze===ne?he(Y,H,Q.props.children,pe,Q.key):H!==null&&(H.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===Te&&Ja(Ze)===H.type)?(H=p(H,Q.props),fo(H,Q),H.return=Y,H):(H=gl(Q.type,Q.key,Q.props,null,Y.mode,pe),fo(H,Q),H.return=Y,H)}function K(Y,H,Q,pe){return H===null||H.tag!==4||H.stateNode.containerInfo!==Q.containerInfo||H.stateNode.implementation!==Q.implementation?(H=Vc(Q,Y.mode,pe),H.return=Y,H):(H=p(H,Q.children||[]),H.return=Y,H)}function he(Y,H,Q,pe,Ze){return H===null||H.tag!==7?(H=Wa(Q,Y.mode,pe,Ze),H.return=Y,H):(H=p(H,Q),H.return=Y,H)}function me(Y,H,Q){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Hc(""+H,Y.mode,Q),H.return=Y,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case G:return Q=gl(H.type,H.key,H.props,null,Y.mode,Q),fo(Q,H),Q.return=Y,Q;case ee:return H=Vc(H,Y.mode,Q),H.return=Y,H;case Te:return H=Ja(H),me(Y,H,Q)}if(oe(H)||Me(H))return H=Wa(H,Y.mode,Q,null),H.return=Y,H;if(typeof H.then=="function")return me(Y,El(H),Q);if(H.$$typeof===X)return me(Y,ml(Y,H),Q);Al(Y,H)}return null}function ie(Y,H,Q,pe){var Ze=H!==null?H.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Ze!==null?null:O(Y,H,""+Q,pe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case G:return Q.key===Ze?k(Y,H,Q,pe):null;case ee:return Q.key===Ze?K(Y,H,Q,pe):null;case Te:return Q=Ja(Q),ie(Y,H,Q,pe)}if(oe(Q)||Me(Q))return Ze!==null?null:he(Y,H,Q,pe,null);if(typeof Q.then=="function")return ie(Y,H,El(Q),pe);if(Q.$$typeof===X)return ie(Y,H,ml(Y,Q),pe);Al(Y,Q)}return null}function ue(Y,H,Q,pe,Ze){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return Y=Y.get(Q)||null,O(H,Y,""+pe,Ze);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case G:return Y=Y.get(pe.key===null?Q:pe.key)||null,k(H,Y,pe,Ze);case ee:return Y=Y.get(pe.key===null?Q:pe.key)||null,K(H,Y,pe,Ze);case Te:return pe=Ja(pe),ue(Y,H,Q,pe,Ze)}if(oe(pe)||Me(pe))return Y=Y.get(Q)||null,he(H,Y,pe,Ze,null);if(typeof pe.then=="function")return ue(Y,H,Q,El(pe),Ze);if(pe.$$typeof===X)return ue(Y,H,Q,ml(H,pe),Ze);Al(H,pe)}return null}function Ue(Y,H,Q,pe){for(var Ze=null,Rt=null,Ye=H,ut=H=0,Et=null;Ye!==null&&ut<Q.length;ut++){Ye.index>ut?(Et=Ye,Ye=null):Et=Ye.sibling;var _t=ie(Y,Ye,Q[ut],pe);if(_t===null){Ye===null&&(Ye=Et);break}e&&Ye&&_t.alternate===null&&n(Y,Ye),H=y(_t,H,ut),Rt===null?Ze=_t:Rt.sibling=_t,Rt=_t,Ye=Et}if(ut===Q.length)return a(Y,Ye),wt&&Nr(Y,ut),Ze;if(Ye===null){for(;ut<Q.length;ut++)Ye=me(Y,Q[ut],pe),Ye!==null&&(H=y(Ye,H,ut),Rt===null?Ze=Ye:Rt.sibling=Ye,Rt=Ye);return wt&&Nr(Y,ut),Ze}for(Ye=c(Ye);ut<Q.length;ut++)Et=ue(Ye,Y,ut,Q[ut],pe),Et!==null&&(e&&Et.alternate!==null&&Ye.delete(Et.key===null?ut:Et.key),H=y(Et,H,ut),Rt===null?Ze=Et:Rt.sibling=Et,Rt=Et);return e&&Ye.forEach(function(Ta){return n(Y,Ta)}),wt&&Nr(Y,ut),Ze}function et(Y,H,Q,pe){if(Q==null)throw Error(h(151));for(var Ze=null,Rt=null,Ye=H,ut=H=0,Et=null,_t=Q.next();Ye!==null&&!_t.done;ut++,_t=Q.next()){Ye.index>ut?(Et=Ye,Ye=null):Et=Ye.sibling;var Ta=ie(Y,Ye,_t.value,pe);if(Ta===null){Ye===null&&(Ye=Et);break}e&&Ye&&Ta.alternate===null&&n(Y,Ye),H=y(Ta,H,ut),Rt===null?Ze=Ta:Rt.sibling=Ta,Rt=Ta,Ye=Et}if(_t.done)return a(Y,Ye),wt&&Nr(Y,ut),Ze;if(Ye===null){for(;!_t.done;ut++,_t=Q.next())_t=me(Y,_t.value,pe),_t!==null&&(H=y(_t,H,ut),Rt===null?Ze=_t:Rt.sibling=_t,Rt=_t);return wt&&Nr(Y,ut),Ze}for(Ye=c(Ye);!_t.done;ut++,_t=Q.next())_t=ue(Ye,Y,ut,_t.value,pe),_t!==null&&(e&&_t.alternate!==null&&Ye.delete(_t.key===null?ut:_t.key),H=y(_t,H,ut),Rt===null?Ze=_t:Rt.sibling=_t,Rt=_t);return e&&Ye.forEach(function(ex){return n(Y,ex)}),wt&&Nr(Y,ut),Ze}function Xt(Y,H,Q,pe){if(typeof Q=="object"&&Q!==null&&Q.type===ne&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case G:e:{for(var Ze=Q.key;H!==null;){if(H.key===Ze){if(Ze=Q.type,Ze===ne){if(H.tag===7){a(Y,H.sibling),pe=p(H,Q.props.children),pe.return=Y,Y=pe;break e}}else if(H.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===Te&&Ja(Ze)===H.type){a(Y,H.sibling),pe=p(H,Q.props),fo(pe,Q),pe.return=Y,Y=pe;break e}a(Y,H);break}else n(Y,H);H=H.sibling}Q.type===ne?(pe=Wa(Q.props.children,Y.mode,pe,Q.key),pe.return=Y,Y=pe):(pe=gl(Q.type,Q.key,Q.props,null,Y.mode,pe),fo(pe,Q),pe.return=Y,Y=pe)}return v(Y);case ee:e:{for(Ze=Q.key;H!==null;){if(H.key===Ze)if(H.tag===4&&H.stateNode.containerInfo===Q.containerInfo&&H.stateNode.implementation===Q.implementation){a(Y,H.sibling),pe=p(H,Q.children||[]),pe.return=Y,Y=pe;break e}else{a(Y,H);break}else n(Y,H);H=H.sibling}pe=Vc(Q,Y.mode,pe),pe.return=Y,Y=pe}return v(Y);case Te:return Q=Ja(Q),Xt(Y,H,Q,pe)}if(oe(Q))return Ue(Y,H,Q,pe);if(Me(Q)){if(Ze=Me(Q),typeof Ze!="function")throw Error(h(150));return Q=Ze.call(Q),et(Y,H,Q,pe)}if(typeof Q.then=="function")return Xt(Y,H,El(Q),pe);if(Q.$$typeof===X)return Xt(Y,H,ml(Y,Q),pe);Al(Y,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,H!==null&&H.tag===6?(a(Y,H.sibling),pe=p(H,Q),pe.return=Y,Y=pe):(a(Y,H),pe=Hc(Q,Y.mode,pe),pe.return=Y,Y=pe),v(Y)):a(Y,H)}return function(Y,H,Q,pe){try{uo=0;var Ze=Xt(Y,H,Q,pe);return Ts=null,Ze}catch(Ye){if(Ye===vs||Ye===bl)throw Ye;var Rt=Ci(29,Ye,null,Y.mode);return Rt.lanes=pe,Rt.return=Y,Rt}finally{}}}var es=_f(!0),Of=_f(!1),ca=!1;function tu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nu(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ua(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function da(e,n,a){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(Dt&2)!==0){var p=c.pending;return p===null?n.next=n:(n.next=p.next,p.next=n),c.pending=n,n=hl(e),gf(e,null,a),n}return fl(e,c,n,a),hl(e)}function ho(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var c=n.lanes;c&=e.pendingLanes,a|=c,n.lanes=a,sr(e,a)}}function iu(e,n){var a=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var p=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};y===null?p=y=v:y=y.next=v,a=a.next}while(a!==null);y===null?p=y=n:y=y.next=n}else p=y=n;a={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var ru=!1;function go(){if(ru){var e=ws;if(e!==null)throw e}}function po(e,n,a,c){ru=!1;var p=e.updateQueue;ca=!1;var y=p.firstBaseUpdate,v=p.lastBaseUpdate,O=p.shared.pending;if(O!==null){p.shared.pending=null;var k=O,K=k.next;k.next=null,v===null?y=K:v.next=K,v=k;var he=e.alternate;he!==null&&(he=he.updateQueue,O=he.lastBaseUpdate,O!==v&&(O===null?he.firstBaseUpdate=K:O.next=K,he.lastBaseUpdate=k))}if(y!==null){var me=p.baseState;v=0,he=K=k=null,O=y;do{var ie=O.lane&-536870913,ue=ie!==O.lane;if(ue?(Ct&ie)===ie:(c&ie)===ie){ie!==0&&ie===Ss&&(ru=!0),he!==null&&(he=he.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Ue=e,et=O;ie=n;var Xt=a;switch(et.tag){case 1:if(Ue=et.payload,typeof Ue=="function"){me=Ue.call(Xt,me,ie);break e}me=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=et.payload,ie=typeof Ue=="function"?Ue.call(Xt,me,ie):Ue,ie==null)break e;me=M({},me,ie);break e;case 2:ca=!0}}ie=O.callback,ie!==null&&(e.flags|=64,ue&&(e.flags|=8192),ue=p.callbacks,ue===null?p.callbacks=[ie]:ue.push(ie))}else ue={lane:ie,tag:O.tag,payload:O.payload,callback:O.callback,next:null},he===null?(K=he=ue,k=me):he=he.next=ue,v|=ie;if(O=O.next,O===null){if(O=p.shared.pending,O===null)break;ue=O,O=ue.next,ue.next=null,p.lastBaseUpdate=ue,p.shared.pending=null}}while(!0);he===null&&(k=me),p.baseState=k,p.firstBaseUpdate=K,p.lastBaseUpdate=he,y===null&&(p.shared.lanes=0),xa|=v,e.lanes=v,e.memoizedState=me}}function Mf(e,n){if(typeof e!="function")throw Error(h(191,e));e.call(n)}function Df(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Mf(a[e],n)}var Ns=z(null),Sl=z(0);function Bf(e,n){e=zr,ve(Sl,e),ve(Ns,n),zr=e|n.baseLanes}function au(){ve(Sl,zr),ve(Ns,Ns.current)}function su(){zr=Sl.current,re(Ns),re(Sl)}var Ei=z(null),Ui=null;function fa(e){var n=e.alternate;ve(Cn,Cn.current&1),ve(Ei,e),Ui===null&&(n===null||Ns.current!==null||n.memoizedState!==null)&&(Ui=e)}function ou(e){ve(Cn,Cn.current),ve(Ei,e),Ui===null&&(Ui=e)}function Lf(e){e.tag===22?(ve(Cn,Cn.current),ve(Ei,e),Ui===null&&(Ui=e)):ha()}function ha(){ve(Cn,Cn.current),ve(Ei,Ei.current)}function Ai(e){re(Ei),Ui===e&&(Ui=null),re(Cn)}var Cn=z(0);function wl(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||hd(a)||gd(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var _r=0,lt=null,Gt=null,Nn=null,vl=!1,Is=!1,ts=!1,Tl=0,xo=0,Rs=null,Gg=0;function hn(){throw Error(h(321))}function lu(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!f(e[a],n[a]))return!1;return!0}function cu(e,n,a,c,p,y){return _r=y,lt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,$.H=e===null||e.memoizedState===null?y0:wu,ts=!1,y=a(c,p),ts=!1,Is&&(y=kf(n,a,c,p)),jf(e),y}function jf(e){$.H=bo;var n=Gt!==null&&Gt.next!==null;if(_r=0,Nn=Gt=lt=null,vl=!1,xo=0,Rs=null,n)throw Error(h(300));e===null||In||(e=e.dependencies,e!==null&&xl(e)&&(In=!0))}function kf(e,n,a,c){lt=e;var p=0;do{if(Is&&(Rs=null),xo=0,Is=!1,25<=p)throw Error(h(301));if(p+=1,Nn=Gt=null,e.updateQueue!=null){var y=e.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}$.H=b0,y=n(a,c)}while(Is);return y}function Yg(){var e=$.H,n=e.useState()[0];return n=typeof n.then=="function"?mo(n):n,e=e.useState()[0],(Gt!==null?Gt.memoizedState:null)!==e&&(lt.flags|=1024),n}function uu(){var e=Tl!==0;return Tl=0,e}function du(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function fu(e){if(vl){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}vl=!1}_r=0,Nn=Gt=lt=null,Is=!1,xo=Tl=0,Rs=null}function ti(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?lt.memoizedState=Nn=e:Nn=Nn.next=e,Nn}function En(){if(Gt===null){var e=lt.alternate;e=e!==null?e.memoizedState:null}else e=Gt.next;var n=Nn===null?lt.memoizedState:Nn.next;if(n!==null)Nn=n,Gt=e;else{if(e===null)throw lt.alternate===null?Error(h(467)):Error(h(310));Gt=e,e={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},Nn===null?lt.memoizedState=Nn=e:Nn=Nn.next=e}return Nn}function Nl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mo(e){var n=xo;return xo+=1,Rs===null&&(Rs=[]),e=Nf(Rs,e,n),n=lt,(Nn===null?n.memoizedState:Nn.next)===null&&(n=n.alternate,$.H=n===null||n.memoizedState===null?y0:wu),e}function Il(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return mo(e);if(e.$$typeof===X)return Hn(e)}throw Error(h(438,String(e)))}function hu(e){var n=null,a=lt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var c=lt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(n={data:c.data.map(function(p){return p.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=Nl(),lt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),c=0;c<e;c++)a[c]=De;return n.index++,a}function Or(e,n){return typeof n=="function"?n(e):n}function Rl(e){var n=En();return gu(n,Gt,e)}function gu(e,n,a){var c=e.queue;if(c===null)throw Error(h(311));c.lastRenderedReducer=a;var p=e.baseQueue,y=c.pending;if(y!==null){if(p!==null){var v=p.next;p.next=y.next,y.next=v}n.baseQueue=p=y,c.pending=null}if(y=e.baseState,p===null)e.memoizedState=y;else{n=p.next;var O=v=null,k=null,K=n,he=!1;do{var me=K.lane&-536870913;if(me!==K.lane?(Ct&me)===me:(_r&me)===me){var ie=K.revertLane;if(ie===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),me===Ss&&(he=!0);else if((_r&ie)===ie){K=K.next,ie===Ss&&(he=!0);continue}else me={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},k===null?(O=k=me,v=y):k=k.next=me,lt.lanes|=ie,xa|=ie;me=K.action,ts&&a(y,me),y=K.hasEagerState?K.eagerState:a(y,me)}else ie={lane:me,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},k===null?(O=k=ie,v=y):k=k.next=ie,lt.lanes|=me,xa|=me;K=K.next}while(K!==null&&K!==n);if(k===null?v=y:k.next=O,!f(y,e.memoizedState)&&(In=!0,he&&(a=ws,a!==null)))throw a;e.memoizedState=y,e.baseState=v,e.baseQueue=k,c.lastRenderedState=y}return p===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function pu(e){var n=En(),a=n.queue;if(a===null)throw Error(h(311));a.lastRenderedReducer=e;var c=a.dispatch,p=a.pending,y=n.memoizedState;if(p!==null){a.pending=null;var v=p=p.next;do y=e(y,v.action),v=v.next;while(v!==p);f(y,n.memoizedState)||(In=!0),n.memoizedState=y,n.baseQueue===null&&(n.baseState=y),a.lastRenderedState=y}return[y,c]}function zf(e,n,a){var c=lt,p=En(),y=wt;if(y){if(a===void 0)throw Error(h(407));a=a()}else a=n();var v=!f((Gt||p).memoizedState,a);if(v&&(p.memoizedState=a,In=!0),p=p.queue,yu(Pf.bind(null,c,p,e),[e]),p.getSnapshot!==n||v||Nn!==null&&Nn.memoizedState.tag&1){if(c.flags|=2048,_s(9,{destroy:void 0},Ff.bind(null,c,p,a,n),null),Qt===null)throw Error(h(349));y||(_r&127)!==0||Uf(c,n,a)}return a}function Uf(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=lt.updateQueue,n===null?(n=Nl(),lt.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function Ff(e,n,a,c){n.value=a,n.getSnapshot=c,Hf(n)&&Vf(e)}function Pf(e,n,a){return a(function(){Hf(n)&&Vf(e)})}function Hf(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!f(e,a)}catch{return!0}}function Vf(e){var n=Xa(e,2);n!==null&&fi(n,e,2)}function xu(e){var n=ti();if(typeof e=="function"){var a=e;if(e=a(),ts){Lt(!0);try{a()}finally{Lt(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:e},n}function Gf(e,n,a,c){return e.baseState=a,gu(e,Gt,typeof c=="function"?c:Or)}function Xg(e,n,a,c,p){if(Ml(e))throw Error(h(485));if(e=n.action,e!==null){var y={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){y.listeners.push(v)}};$.T!==null?a(!0):y.isTransition=!1,c(y),a=n.pending,a===null?(y.next=n.pending=y,Yf(n,y)):(y.next=a.next,n.pending=a.next=y)}}function Yf(e,n){var a=n.action,c=n.payload,p=e.state;if(n.isTransition){var y=$.T,v={};$.T=v;try{var O=a(p,c),k=$.S;k!==null&&k(v,O),Xf(e,n,O)}catch(K){mu(e,n,K)}finally{y!==null&&v.types!==null&&(y.types=v.types),$.T=y}}else try{y=a(p,c),Xf(e,n,y)}catch(K){mu(e,n,K)}}function Xf(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Wf(e,n,c)},function(c){return mu(e,n,c)}):Wf(e,n,a)}function Wf(e,n,a){n.status="fulfilled",n.value=a,qf(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,Yf(e,a)))}function mu(e,n,a){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do n.status="rejected",n.reason=a,qf(n),n=n.next;while(n!==c)}e.action=null}function qf(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Zf(e,n){return n}function Qf(e,n){if(wt){var a=Qt.formState;if(a!==null){e:{var c=lt;if(wt){if(tn){t:{for(var p=tn,y=zi;p.nodeType!==8;){if(!y){p=null;break t}if(p=Fi(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){tn=Fi(p.nextSibling),c=p.data==="F!";break e}}oa(c)}c=!1}c&&(n=a[0])}}return a=ti(),a.memoizedState=a.baseState=n,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zf,lastRenderedState:n},a.queue=c,a=p0.bind(null,lt,c),c.dispatch=a,c=xu(!1),y=Su.bind(null,lt,!1,c.queue),c=ti(),p={state:n,dispatch:null,action:e,pending:null},c.queue=p,a=Xg.bind(null,lt,p,y,a),p.dispatch=a,c.memoizedState=e,[n,a,!1]}function Kf(e){var n=En();return Jf(n,Gt,e)}function Jf(e,n,a){if(n=gu(e,n,Zf)[0],e=Rl(Or)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var c=mo(n)}catch(v){throw v===vs?bl:v}else c=n;n=En();var p=n.queue,y=p.dispatch;return a!==n.memoizedState&&(lt.flags|=2048,_s(9,{destroy:void 0},Wg.bind(null,p,a),null)),[c,y,e]}function Wg(e,n){e.action=n}function $f(e){var n=En(),a=Gt;if(a!==null)return Jf(n,a,e);En(),n=n.memoizedState,a=En();var c=a.queue.dispatch;return a.memoizedState=e,[n,c,!1]}function _s(e,n,a,c){return e={tag:e,create:a,deps:c,inst:n,next:null},n=lt.updateQueue,n===null&&(n=Nl(),lt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(c=a.next,a.next=e,e.next=c,n.lastEffect=e),e}function e0(){return En().memoizedState}function _l(e,n,a,c){var p=ti();lt.flags|=e,p.memoizedState=_s(1|n,{destroy:void 0},a,c===void 0?null:c)}function Ol(e,n,a,c){var p=En();c=c===void 0?null:c;var y=p.memoizedState.inst;Gt!==null&&c!==null&&lu(c,Gt.memoizedState.deps)?p.memoizedState=_s(n,y,a,c):(lt.flags|=e,p.memoizedState=_s(1|n,y,a,c))}function t0(e,n){_l(8390656,8,e,n)}function yu(e,n){Ol(2048,8,e,n)}function qg(e){lt.flags|=4;var n=lt.updateQueue;if(n===null)n=Nl(),lt.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function n0(e){var n=En().memoizedState;return qg({ref:n,nextImpl:e}),function(){if((Dt&2)!==0)throw Error(h(440));return n.impl.apply(void 0,arguments)}}function i0(e,n){return Ol(4,2,e,n)}function r0(e,n){return Ol(4,4,e,n)}function a0(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function s0(e,n,a){a=a!=null?a.concat([e]):null,Ol(4,4,a0.bind(null,n,e),a)}function bu(){}function o0(e,n){var a=En();n=n===void 0?null:n;var c=a.memoizedState;return n!==null&&lu(n,c[1])?c[0]:(a.memoizedState=[e,n],e)}function l0(e,n){var a=En();n=n===void 0?null:n;var c=a.memoizedState;if(n!==null&&lu(n,c[1]))return c[0];if(c=e(),ts){Lt(!0);try{e()}finally{Lt(!1)}}return a.memoizedState=[c,n],c}function Cu(e,n,a){return a===void 0||(_r&1073741824)!==0&&(Ct&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=c1(),lt.lanes|=e,xa|=e,a)}function c0(e,n,a,c){return f(a,n)?a:Ns.current!==null?(e=Cu(e,a,c),f(e,n)||(In=!0),e):(_r&42)===0||(_r&1073741824)!==0&&(Ct&261930)===0?(In=!0,e.memoizedState=a):(e=c1(),lt.lanes|=e,xa|=e,n)}function u0(e,n,a,c,p){var y=fe.p;fe.p=y!==0&&8>y?y:8;var v=$.T,O={};$.T=O,Su(e,!1,n,a);try{var k=p(),K=$.S;if(K!==null&&K(O,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var he=Vg(k,c);yo(e,n,he,vi(e))}else yo(e,n,c,vi(e))}catch(me){yo(e,n,{then:function(){},status:"rejected",reason:me},vi())}finally{fe.p=y,v!==null&&O.types!==null&&(v.types=O.types),$.T=v}}function Zg(){}function Eu(e,n,a,c){if(e.tag!==5)throw Error(h(476));var p=d0(e).queue;u0(e,p,n,Ge,a===null?Zg:function(){return f0(e),a(c)})}function d0(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Ge,baseState:Ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:Ge},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function f0(e){var n=d0(e);n.next===null&&(n=e.alternate.memoizedState),yo(e,n.next.queue,{},vi())}function Au(){return Hn(Lo)}function h0(){return En().memoizedState}function g0(){return En().memoizedState}function Qg(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=vi();e=ua(a);var c=da(n,e,a);c!==null&&(fi(c,n,a),ho(c,n,a)),n={cache:Kc()},e.payload=n;return}n=n.return}}function Kg(e,n,a){var c=vi();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ml(e)?x0(n,a):(a=Fc(e,n,a,c),a!==null&&(fi(a,e,c),m0(a,n,c)))}function p0(e,n,a){var c=vi();yo(e,n,a,c)}function yo(e,n,a,c){var p={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ml(e))x0(n,p);else{var y=e.alternate;if(e.lanes===0&&(y===null||y.lanes===0)&&(y=n.lastRenderedReducer,y!==null))try{var v=n.lastRenderedState,O=y(v,a);if(p.hasEagerState=!0,p.eagerState=O,f(O,v))return fl(e,n,p,0),Qt===null&&dl(),!1}catch{}finally{}if(a=Fc(e,n,p,c),a!==null)return fi(a,e,c),m0(a,n,c),!0}return!1}function Su(e,n,a,c){if(c={lane:2,revertLane:td(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ml(e)){if(n)throw Error(h(479))}else n=Fc(e,a,c,2),n!==null&&fi(n,e,2)}function Ml(e){var n=e.alternate;return e===lt||n!==null&&n===lt}function x0(e,n){Is=vl=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function m0(e,n,a){if((a&4194048)!==0){var c=n.lanes;c&=e.pendingLanes,a|=c,n.lanes=a,sr(e,a)}}var bo={readContext:Hn,use:Il,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useLayoutEffect:hn,useInsertionEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useSyncExternalStore:hn,useId:hn,useHostTransitionStatus:hn,useFormState:hn,useActionState:hn,useOptimistic:hn,useMemoCache:hn,useCacheRefresh:hn};bo.useEffectEvent=hn;var y0={readContext:Hn,use:Il,useCallback:function(e,n){return ti().memoizedState=[e,n===void 0?null:n],e},useContext:Hn,useEffect:t0,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,_l(4194308,4,a0.bind(null,n,e),a)},useLayoutEffect:function(e,n){return _l(4194308,4,e,n)},useInsertionEffect:function(e,n){_l(4,2,e,n)},useMemo:function(e,n){var a=ti();n=n===void 0?null:n;var c=e();if(ts){Lt(!0);try{e()}finally{Lt(!1)}}return a.memoizedState=[c,n],c},useReducer:function(e,n,a){var c=ti();if(a!==void 0){var p=a(n);if(ts){Lt(!0);try{a(n)}finally{Lt(!1)}}}else p=n;return c.memoizedState=c.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},c.queue=e,e=e.dispatch=Kg.bind(null,lt,e),[c.memoizedState,e]},useRef:function(e){var n=ti();return e={current:e},n.memoizedState=e},useState:function(e){e=xu(e);var n=e.queue,a=p0.bind(null,lt,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:bu,useDeferredValue:function(e,n){var a=ti();return Cu(a,e,n)},useTransition:function(){var e=xu(!1);return e=u0.bind(null,lt,e.queue,!0,!1),ti().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var c=lt,p=ti();if(wt){if(a===void 0)throw Error(h(407));a=a()}else{if(a=n(),Qt===null)throw Error(h(349));(Ct&127)!==0||Uf(c,n,a)}p.memoizedState=a;var y={value:a,getSnapshot:n};return p.queue=y,t0(Pf.bind(null,c,y,e),[e]),c.flags|=2048,_s(9,{destroy:void 0},Ff.bind(null,c,y,a,n),null),a},useId:function(){var e=ti(),n=Qt.identifierPrefix;if(wt){var a=fr,c=dr;a=(c&~(1<<32-V(c)-1)).toString(32)+a,n="_"+n+"R_"+a,a=Tl++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=Gg++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Au,useFormState:Qf,useActionState:Qf,useOptimistic:function(e){var n=ti();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Su.bind(null,lt,!0,a),a.dispatch=n,[e,n]},useMemoCache:hu,useCacheRefresh:function(){return ti().memoizedState=Qg.bind(null,lt)},useEffectEvent:function(e){var n=ti(),a={impl:e};return n.memoizedState=a,function(){if((Dt&2)!==0)throw Error(h(440));return a.impl.apply(void 0,arguments)}}},wu={readContext:Hn,use:Il,useCallback:o0,useContext:Hn,useEffect:yu,useImperativeHandle:s0,useInsertionEffect:i0,useLayoutEffect:r0,useMemo:l0,useReducer:Rl,useRef:e0,useState:function(){return Rl(Or)},useDebugValue:bu,useDeferredValue:function(e,n){var a=En();return c0(a,Gt.memoizedState,e,n)},useTransition:function(){var e=Rl(Or)[0],n=En().memoizedState;return[typeof e=="boolean"?e:mo(e),n]},useSyncExternalStore:zf,useId:h0,useHostTransitionStatus:Au,useFormState:Kf,useActionState:Kf,useOptimistic:function(e,n){var a=En();return Gf(a,Gt,e,n)},useMemoCache:hu,useCacheRefresh:g0};wu.useEffectEvent=n0;var b0={readContext:Hn,use:Il,useCallback:o0,useContext:Hn,useEffect:yu,useImperativeHandle:s0,useInsertionEffect:i0,useLayoutEffect:r0,useMemo:l0,useReducer:pu,useRef:e0,useState:function(){return pu(Or)},useDebugValue:bu,useDeferredValue:function(e,n){var a=En();return Gt===null?Cu(a,e,n):c0(a,Gt.memoizedState,e,n)},useTransition:function(){var e=pu(Or)[0],n=En().memoizedState;return[typeof e=="boolean"?e:mo(e),n]},useSyncExternalStore:zf,useId:h0,useHostTransitionStatus:Au,useFormState:$f,useActionState:$f,useOptimistic:function(e,n){var a=En();return Gt!==null?Gf(a,Gt,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:hu,useCacheRefresh:g0};b0.useEffectEvent=n0;function vu(e,n,a,c){n=e.memoizedState,a=a(c,n),a=a==null?n:M({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Tu={enqueueSetState:function(e,n,a){e=e._reactInternals;var c=vi(),p=ua(c);p.payload=n,a!=null&&(p.callback=a),n=da(e,p,c),n!==null&&(fi(n,e,c),ho(n,e,c))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var c=vi(),p=ua(c);p.tag=1,p.payload=n,a!=null&&(p.callback=a),n=da(e,p,c),n!==null&&(fi(n,e,c),ho(n,e,c))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=vi(),c=ua(a);c.tag=2,n!=null&&(c.callback=n),n=da(e,c,a),n!==null&&(fi(n,e,a),ho(n,e,a))}};function C0(e,n,a,c,p,y,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,y,v):n.prototype&&n.prototype.isPureReactComponent?!g(a,c)||!g(p,y):!0}function E0(e,n,a,c){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,c),n.state!==e&&Tu.enqueueReplaceState(n,n.state,null)}function ns(e,n){var a=n;if("ref"in n){a={};for(var c in n)c!=="ref"&&(a[c]=n[c])}if(e=e.defaultProps){a===n&&(a=M({},a));for(var p in e)a[p]===void 0&&(a[p]=e[p])}return a}function A0(e){ul(e)}function S0(e){console.error(e)}function w0(e){ul(e)}function Dl(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(c){setTimeout(function(){throw c})}}function v0(e,n,a){try{var c=e.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Nu(e,n,a){return a=ua(a),a.tag=3,a.payload={element:null},a.callback=function(){Dl(e,n)},a}function T0(e){return e=ua(e),e.tag=3,e}function N0(e,n,a,c){var p=a.type.getDerivedStateFromError;if(typeof p=="function"){var y=c.value;e.payload=function(){return p(y)},e.callback=function(){v0(n,a,c)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){v0(n,a,c),typeof p!="function"&&(ma===null?ma=new Set([this]):ma.add(this));var O=c.stack;this.componentDidCatch(c.value,{componentStack:O!==null?O:""})})}function Jg(e,n,a,c,p){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(n=a.alternate,n!==null&&As(n,a,p,!0),a=Ei.current,a!==null){switch(a.tag){case 31:case 13:return Ui===null?Yl():a.alternate===null&&gn===0&&(gn=3),a.flags&=-257,a.flags|=65536,a.lanes=p,c===Cl?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([c]):n.add(c),Ju(e,c,p)),!1;case 22:return a.flags|=65536,c===Cl?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([c]):a.add(c)),Ju(e,c,p)),!1}throw Error(h(435,a.tag))}return Ju(e,c,p),Yl(),!1}if(wt)return n=Ei.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=p,c!==Xc&&(e=Error(h(422),{cause:c}),oo(Li(e,a)))):(c!==Xc&&(n=Error(h(423),{cause:c}),oo(Li(n,a))),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,c=Li(c,a),p=Nu(e.stateNode,c,p),iu(e,p),gn!==4&&(gn=2)),!1;var y=Error(h(520),{cause:c});if(y=Li(y,a),No===null?No=[y]:No.push(y),gn!==4&&(gn=2),n===null)return!0;c=Li(c,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=p&-p,a.lanes|=e,e=Nu(a.stateNode,c,e),iu(a,e),!1;case 1:if(n=a.type,y=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ma===null||!ma.has(y))))return a.flags|=65536,p&=-p,a.lanes|=p,p=T0(p),N0(p,e,a,c),iu(a,p),!1}a=a.return}while(a!==null);return!1}var Iu=Error(h(461)),In=!1;function Vn(e,n,a,c){n.child=e===null?Of(n,null,a,c):es(n,e.child,a,c)}function I0(e,n,a,c,p){a=a.render;var y=n.ref;if("ref"in c){var v={};for(var O in c)O!=="ref"&&(v[O]=c[O])}else v=c;return Qa(n),c=cu(e,n,a,v,y,p),O=uu(),e!==null&&!In?(du(e,n,p),Mr(e,n,p)):(wt&&O&&Gc(n),n.flags|=1,Vn(e,n,c,p),n.child)}function R0(e,n,a,c,p){if(e===null){var y=a.type;return typeof y=="function"&&!Pc(y)&&y.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=y,_0(e,n,y,c,p)):(e=gl(a.type,null,c,n,n.mode,p),e.ref=n.ref,e.return=n,n.child=e)}if(y=e.child,!ju(e,p)){var v=y.memoizedProps;if(a=a.compare,a=a!==null?a:g,a(v,c)&&e.ref===n.ref)return Mr(e,n,p)}return n.flags|=1,e=Tr(y,c),e.ref=n.ref,e.return=n,n.child=e}function _0(e,n,a,c,p){if(e!==null){var y=e.memoizedProps;if(g(y,c)&&e.ref===n.ref)if(In=!1,n.pendingProps=c=y,ju(e,p))(e.flags&131072)!==0&&(In=!0);else return n.lanes=e.lanes,Mr(e,n,p)}return Ru(e,n,a,c,p)}function O0(e,n,a,c){var p=c.children,y=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((n.flags&128)!==0){if(y=y!==null?y.baseLanes|a:a,e!==null){for(c=n.child=e.child,p=0;c!==null;)p=p|c.lanes|c.childLanes,c=c.sibling;c=p&~y}else c=0,n.child=null;return M0(e,n,y,a,c)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&yl(n,y!==null?y.cachePool:null),y!==null?Bf(n,y):au(),Lf(n);else return c=n.lanes=536870912,M0(e,n,y!==null?y.baseLanes|a:a,a,c)}else y!==null?(yl(n,y.cachePool),Bf(n,y),ha(),n.memoizedState=null):(e!==null&&yl(n,null),au(),ha());return Vn(e,n,p,a),n.child}function Co(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function M0(e,n,a,c,p){var y=$c();return y=y===null?null:{parent:Tn._currentValue,pool:y},n.memoizedState={baseLanes:a,cachePool:y},e!==null&&yl(n,null),au(),Lf(n),e!==null&&As(e,n,c,!0),n.childLanes=p,null}function Bl(e,n){return n=jl({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function D0(e,n,a){return es(n,e.child,null,a),e=Bl(n,n.pendingProps),e.flags|=2,Ai(n),n.memoizedState=null,e}function $g(e,n,a){var c=n.pendingProps,p=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(wt){if(c.mode==="hidden")return e=Bl(n,c),n.lanes=536870912,Co(null,e);if(ou(n),(e=tn)?(e=Y1(e,zi),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:aa!==null?{id:dr,overflow:fr}:null,retryLane:536870912,hydrationErrors:null},a=xf(e),a.return=n,n.child=a,Pn=n,tn=null)):e=null,e===null)throw oa(n);return n.lanes=536870912,null}return Bl(n,c)}var y=e.memoizedState;if(y!==null){var v=y.dehydrated;if(ou(n),p)if(n.flags&256)n.flags&=-257,n=D0(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(h(558));else if(In||As(e,n,a,!1),p=(a&e.childLanes)!==0,In||p){if(c=Qt,c!==null&&(v=ss(c,a),v!==0&&v!==y.retryLane))throw y.retryLane=v,Xa(e,v),fi(c,e,v),Iu;Yl(),n=D0(e,n,a)}else e=y.treeContext,tn=Fi(v.nextSibling),Pn=n,wt=!0,sa=null,zi=!1,e!==null&&bf(n,e),n=Bl(n,c),n.flags|=4096;return n}return e=Tr(e.child,{mode:c.mode,children:c.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Ll(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(h(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Ru(e,n,a,c,p){return Qa(n),a=cu(e,n,a,c,void 0,p),c=uu(),e!==null&&!In?(du(e,n,p),Mr(e,n,p)):(wt&&c&&Gc(n),n.flags|=1,Vn(e,n,a,p),n.child)}function B0(e,n,a,c,p,y){return Qa(n),n.updateQueue=null,a=kf(n,c,a,p),jf(e),c=uu(),e!==null&&!In?(du(e,n,y),Mr(e,n,y)):(wt&&c&&Gc(n),n.flags|=1,Vn(e,n,a,y),n.child)}function L0(e,n,a,c,p){if(Qa(n),n.stateNode===null){var y=ys,v=a.contextType;typeof v=="object"&&v!==null&&(y=Hn(v)),y=new a(c,y),n.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Tu,n.stateNode=y,y._reactInternals=n,y=n.stateNode,y.props=c,y.state=n.memoizedState,y.refs={},tu(n),v=a.contextType,y.context=typeof v=="object"&&v!==null?Hn(v):ys,y.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(vu(n,a,v,c),y.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(v=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),v!==y.state&&Tu.enqueueReplaceState(y,y.state,null),po(n,c,y,p),go(),y.state=n.memoizedState),typeof y.componentDidMount=="function"&&(n.flags|=4194308),c=!0}else if(e===null){y=n.stateNode;var O=n.memoizedProps,k=ns(a,O);y.props=k;var K=y.context,he=a.contextType;v=ys,typeof he=="object"&&he!==null&&(v=Hn(he));var me=a.getDerivedStateFromProps;he=typeof me=="function"||typeof y.getSnapshotBeforeUpdate=="function",O=n.pendingProps!==O,he||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(O||K!==v)&&E0(n,y,c,v),ca=!1;var ie=n.memoizedState;y.state=ie,po(n,c,y,p),go(),K=n.memoizedState,O||ie!==K||ca?(typeof me=="function"&&(vu(n,a,me,c),K=n.memoizedState),(k=ca||C0(n,a,k,c,ie,K,v))?(he||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(n.flags|=4194308)):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=K),y.props=c,y.state=K,y.context=v,c=k):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{y=n.stateNode,nu(e,n),v=n.memoizedProps,he=ns(a,v),y.props=he,me=n.pendingProps,ie=y.context,K=a.contextType,k=ys,typeof K=="object"&&K!==null&&(k=Hn(K)),O=a.getDerivedStateFromProps,(K=typeof O=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(v!==me||ie!==k)&&E0(n,y,c,k),ca=!1,ie=n.memoizedState,y.state=ie,po(n,c,y,p),go();var ue=n.memoizedState;v!==me||ie!==ue||ca||e!==null&&e.dependencies!==null&&xl(e.dependencies)?(typeof O=="function"&&(vu(n,a,O,c),ue=n.memoizedState),(he=ca||C0(n,a,he,c,ie,ue,k)||e!==null&&e.dependencies!==null&&xl(e.dependencies))?(K||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,ue,k),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,ue,k)),typeof y.componentDidUpdate=="function"&&(n.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof y.componentDidUpdate!="function"||v===e.memoizedProps&&ie===e.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&ie===e.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=ue),y.props=c,y.state=ue,y.context=k,c=he):(typeof y.componentDidUpdate!="function"||v===e.memoizedProps&&ie===e.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&ie===e.memoizedState||(n.flags|=1024),c=!1)}return y=c,Ll(e,n),c=(n.flags&128)!==0,y||c?(y=n.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:y.render(),n.flags|=1,e!==null&&c?(n.child=es(n,e.child,null,p),n.child=es(n,null,a,p)):Vn(e,n,a,p),n.memoizedState=y.state,e=n.child):e=Mr(e,n,p),e}function j0(e,n,a,c){return qa(),n.flags|=256,Vn(e,n,a,c),n.child}var _u={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ou(e){return{baseLanes:e,cachePool:vf()}}function Mu(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=wi),e}function k0(e,n,a){var c=n.pendingProps,p=!1,y=(n.flags&128)!==0,v;if((v=y)||(v=e!==null&&e.memoizedState===null?!1:(Cn.current&2)!==0),v&&(p=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(wt){if(p?fa(n):ha(),(e=tn)?(e=Y1(e,zi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:aa!==null?{id:dr,overflow:fr}:null,retryLane:536870912,hydrationErrors:null},a=xf(e),a.return=n,n.child=a,Pn=n,tn=null)):e=null,e===null)throw oa(n);return gd(e)?n.lanes=32:n.lanes=536870912,null}var O=c.children;return c=c.fallback,p?(ha(),p=n.mode,O=jl({mode:"hidden",children:O},p),c=Wa(c,p,a,null),O.return=n,c.return=n,O.sibling=c,n.child=O,c=n.child,c.memoizedState=Ou(a),c.childLanes=Mu(e,v,a),n.memoizedState=_u,Co(null,c)):(fa(n),Du(n,O))}var k=e.memoizedState;if(k!==null&&(O=k.dehydrated,O!==null)){if(y)n.flags&256?(fa(n),n.flags&=-257,n=Bu(e,n,a)):n.memoizedState!==null?(ha(),n.child=e.child,n.flags|=128,n=null):(ha(),O=c.fallback,p=n.mode,c=jl({mode:"visible",children:c.children},p),O=Wa(O,p,a,null),O.flags|=2,c.return=n,O.return=n,c.sibling=O,n.child=c,es(n,e.child,null,a),c=n.child,c.memoizedState=Ou(a),c.childLanes=Mu(e,v,a),n.memoizedState=_u,n=Co(null,c));else if(fa(n),gd(O)){if(v=O.nextSibling&&O.nextSibling.dataset,v)var K=v.dgst;v=K,c=Error(h(419)),c.stack="",c.digest=v,oo({value:c,source:null,stack:null}),n=Bu(e,n,a)}else if(In||As(e,n,a,!1),v=(a&e.childLanes)!==0,In||v){if(v=Qt,v!==null&&(c=ss(v,a),c!==0&&c!==k.retryLane))throw k.retryLane=c,Xa(e,c),fi(v,e,c),Iu;hd(O)||Yl(),n=Bu(e,n,a)}else hd(O)?(n.flags|=192,n.child=e.child,n=null):(e=k.treeContext,tn=Fi(O.nextSibling),Pn=n,wt=!0,sa=null,zi=!1,e!==null&&bf(n,e),n=Du(n,c.children),n.flags|=4096);return n}return p?(ha(),O=c.fallback,p=n.mode,k=e.child,K=k.sibling,c=Tr(k,{mode:"hidden",children:c.children}),c.subtreeFlags=k.subtreeFlags&65011712,K!==null?O=Tr(K,O):(O=Wa(O,p,a,null),O.flags|=2),O.return=n,c.return=n,c.sibling=O,n.child=c,Co(null,c),c=n.child,O=e.child.memoizedState,O===null?O=Ou(a):(p=O.cachePool,p!==null?(k=Tn._currentValue,p=p.parent!==k?{parent:k,pool:k}:p):p=vf(),O={baseLanes:O.baseLanes|a,cachePool:p}),c.memoizedState=O,c.childLanes=Mu(e,v,a),n.memoizedState=_u,Co(e.child,c)):(fa(n),a=e.child,e=a.sibling,a=Tr(a,{mode:"visible",children:c.children}),a.return=n,a.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=a,n.memoizedState=null,a)}function Du(e,n){return n=jl({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function jl(e,n){return e=Ci(22,e,null,n),e.lanes=0,e}function Bu(e,n,a){return es(n,e.child,null,a),e=Du(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function z0(e,n,a){e.lanes|=n;var c=e.alternate;c!==null&&(c.lanes|=n),Zc(e.return,n,a)}function Lu(e,n,a,c,p,y){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:p,treeForkCount:y}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=a,v.tailMode=p,v.treeForkCount=y)}function U0(e,n,a){var c=n.pendingProps,p=c.revealOrder,y=c.tail;c=c.children;var v=Cn.current,O=(v&2)!==0;if(O?(v=v&1|2,n.flags|=128):v&=1,ve(Cn,v),Vn(e,n,c,a),c=wt?so:0,!O&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&z0(e,a,n);else if(e.tag===19)z0(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(p){case"forwards":for(a=n.child,p=null;a!==null;)e=a.alternate,e!==null&&wl(e)===null&&(p=a),a=a.sibling;a=p,a===null?(p=n.child,n.child=null):(p=a.sibling,a.sibling=null),Lu(n,!1,p,a,y,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,p=n.child,n.child=null;p!==null;){if(e=p.alternate,e!==null&&wl(e)===null){n.child=p;break}e=p.sibling,p.sibling=a,a=p,p=e}Lu(n,!0,a,null,y,c);break;case"together":Lu(n,!1,null,null,void 0,c);break;default:n.memoizedState=null}return n.child}function Mr(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),xa|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(As(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(h(153));if(n.child!==null){for(e=n.child,a=Tr(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=Tr(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function ju(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&xl(e)))}function ep(e,n,a){switch(n.tag){case 3:ft(n,n.stateNode.containerInfo),la(n,Tn,e.memoizedState.cache),qa();break;case 27:case 5:Yn(n);break;case 4:ft(n,n.stateNode.containerInfo);break;case 10:la(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,ou(n),null;break;case 13:var c=n.memoizedState;if(c!==null)return c.dehydrated!==null?(fa(n),n.flags|=128,null):(a&n.child.childLanes)!==0?k0(e,n,a):(fa(n),e=Mr(e,n,a),e!==null?e.sibling:null);fa(n);break;case 19:var p=(e.flags&128)!==0;if(c=(a&n.childLanes)!==0,c||(As(e,n,a,!1),c=(a&n.childLanes)!==0),p){if(c)return U0(e,n,a);n.flags|=128}if(p=n.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ve(Cn,Cn.current),c)break;return null;case 22:return n.lanes=0,O0(e,n,a,n.pendingProps);case 24:la(n,Tn,e.memoizedState.cache)}return Mr(e,n,a)}function F0(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)In=!0;else{if(!ju(e,a)&&(n.flags&128)===0)return In=!1,ep(e,n,a);In=(e.flags&131072)!==0}else In=!1,wt&&(n.flags&1048576)!==0&&yf(n,so,n.index);switch(n.lanes=0,n.tag){case 16:e:{var c=n.pendingProps;if(e=Ja(n.elementType),n.type=e,typeof e=="function")Pc(e)?(c=ns(e,c),n.tag=1,n=L0(null,n,e,c,a)):(n.tag=0,n=Ru(null,n,e,c,a));else{if(e!=null){var p=e.$$typeof;if(p===Ee){n.tag=11,n=I0(null,n,e,c,a);break e}else if(p===te){n.tag=14,n=R0(null,n,e,c,a);break e}}throw n=st(e)||e,Error(h(306,n,""))}}return n;case 0:return Ru(e,n,n.type,n.pendingProps,a);case 1:return c=n.type,p=ns(c,n.pendingProps),L0(e,n,c,p,a);case 3:e:{if(ft(n,n.stateNode.containerInfo),e===null)throw Error(h(387));c=n.pendingProps;var y=n.memoizedState;p=y.element,nu(e,n),po(n,c,null,a);var v=n.memoizedState;if(c=v.cache,la(n,Tn,c),c!==y.cache&&Qc(n,[Tn],a,!0),go(),c=v.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=y,n.memoizedState=y,n.flags&256){n=j0(e,n,c,a);break e}else if(c!==p){p=Li(Error(h(424)),n),oo(p),n=j0(e,n,c,a);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(tn=Fi(e.firstChild),Pn=n,wt=!0,sa=null,zi=!0,a=Of(n,null,c,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(qa(),c===p){n=Mr(e,n,a);break e}Vn(e,n,c,a)}n=n.child}return n;case 26:return Ll(e,n),e===null?(a=K1(n.type,null,n.pendingProps,null))?n.memoizedState=a:wt||(a=n.type,e=n.pendingProps,c=Jl(Se.current).createElement(a),c[mn]=n,c[Ft]=e,Gn(c,a,e),dn(c),n.stateNode=c):n.memoizedState=K1(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Yn(n),e===null&&wt&&(c=n.stateNode=q1(n.type,n.pendingProps,Se.current),Pn=n,zi=!0,p=tn,Ea(n.type)?(pd=p,tn=Fi(c.firstChild)):tn=p),Vn(e,n,n.pendingProps.children,a),Ll(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&wt&&((p=c=tn)&&(c=_p(c,n.type,n.pendingProps,zi),c!==null?(n.stateNode=c,Pn=n,tn=Fi(c.firstChild),zi=!1,p=!0):p=!1),p||oa(n)),Yn(n),p=n.type,y=n.pendingProps,v=e!==null?e.memoizedProps:null,c=y.children,ud(p,y)?c=null:v!==null&&ud(p,v)&&(n.flags|=32),n.memoizedState!==null&&(p=cu(e,n,Yg,null,null,a),Lo._currentValue=p),Ll(e,n),Vn(e,n,c,a),n.child;case 6:return e===null&&wt&&((e=a=tn)&&(a=Op(a,n.pendingProps,zi),a!==null?(n.stateNode=a,Pn=n,tn=null,e=!0):e=!1),e||oa(n)),null;case 13:return k0(e,n,a);case 4:return ft(n,n.stateNode.containerInfo),c=n.pendingProps,e===null?n.child=es(n,null,c,a):Vn(e,n,c,a),n.child;case 11:return I0(e,n,n.type,n.pendingProps,a);case 7:return Vn(e,n,n.pendingProps,a),n.child;case 8:return Vn(e,n,n.pendingProps.children,a),n.child;case 12:return Vn(e,n,n.pendingProps.children,a),n.child;case 10:return c=n.pendingProps,la(n,n.type,c.value),Vn(e,n,c.children,a),n.child;case 9:return p=n.type._context,c=n.pendingProps.children,Qa(n),p=Hn(p),c=c(p),n.flags|=1,Vn(e,n,c,a),n.child;case 14:return R0(e,n,n.type,n.pendingProps,a);case 15:return _0(e,n,n.type,n.pendingProps,a);case 19:return U0(e,n,a);case 31:return $g(e,n,a);case 22:return O0(e,n,a,n.pendingProps);case 24:return Qa(n),c=Hn(Tn),e===null?(p=$c(),p===null&&(p=Qt,y=Kc(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=a),p=y),n.memoizedState={parent:c,cache:p},tu(n),la(n,Tn,p)):((e.lanes&a)!==0&&(nu(e,n),po(n,null,null,a),go()),p=e.memoizedState,y=n.memoizedState,p.parent!==c?(p={parent:c,cache:c},n.memoizedState=p,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=p),la(n,Tn,c)):(c=y.cache,la(n,Tn,c),c!==p.cache&&Qc(n,[Tn],a,!0))),Vn(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(h(156,n.tag))}function Dr(e){e.flags|=4}function ku(e,n,a,c,p){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(p&335544128)===p)if(e.stateNode.complete)e.flags|=8192;else if(h1())e.flags|=8192;else throw $a=Cl,eu}else e.flags&=-16777217}function P0(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!nh(n))if(h1())e.flags|=8192;else throw $a=Cl,eu}function kl(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Mn():536870912,e.lanes|=n,Bs|=n)}function Eo(e,n){if(!wt)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function nn(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,c=0;if(n)for(var p=e.child;p!==null;)a|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)a|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=c,e.childLanes=a,n}function tp(e,n,a){var c=n.pendingProps;switch(Yc(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(n),null;case 1:return nn(n),null;case 3:return a=n.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),n.memoizedState.cache!==c&&(n.flags|=2048),Rr(Tn),Bt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Es(n)?Dr(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Wc())),nn(n),null;case 26:var p=n.type,y=n.memoizedState;return e===null?(Dr(n),y!==null?(nn(n),P0(n,y)):(nn(n),ku(n,p,null,c,a))):y?y!==e.memoizedState?(Dr(n),nn(n),P0(n,y)):(nn(n),n.flags&=-16777217):(e=e.memoizedProps,e!==c&&Dr(n),nn(n),ku(n,p,e,c,a)),null;case 27:if(cn(n),a=Se.current,p=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==c&&Dr(n);else{if(!c){if(n.stateNode===null)throw Error(h(166));return nn(n),null}e=Re.current,Es(n)?Cf(n):(e=q1(p,c,a),n.stateNode=e,Dr(n))}return nn(n),null;case 5:if(cn(n),p=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==c&&Dr(n);else{if(!c){if(n.stateNode===null)throw Error(h(166));return nn(n),null}if(y=Re.current,Es(n))Cf(n);else{var v=Jl(Se.current);switch(y){case 1:y=v.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=v.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=v.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=v.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=v.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?y.multiple=!0:c.size&&(y.size=c.size);break;default:y=typeof c.is=="string"?v.createElement(p,{is:c.is}):v.createElement(p)}}y[mn]=n,y[Ft]=c;e:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)y.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break e;for(;v.sibling===null;){if(v.return===null||v.return===n)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=y;e:switch(Gn(y,p,c),p){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Dr(n)}}return nn(n),ku(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==c&&Dr(n);else{if(typeof c!="string"&&n.stateNode===null)throw Error(h(166));if(e=Se.current,Es(n)){if(e=n.stateNode,a=n.memoizedProps,c=null,p=Pn,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}e[mn]=n,e=!!(e.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||k1(e.nodeValue,a)),e||oa(n,!0)}else e=Jl(e).createTextNode(c),e[mn]=n,n.stateNode=e}return nn(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(c=Es(n),a!==null){if(e===null){if(!c)throw Error(h(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(h(557));e[mn]=n}else qa(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;nn(n),e=!1}else a=Wc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(Ai(n),n):(Ai(n),null);if((n.flags&128)!==0)throw Error(h(558))}return nn(n),null;case 13:if(c=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=Es(n),c!==null&&c.dehydrated!==null){if(e===null){if(!p)throw Error(h(318));if(p=n.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(h(317));p[mn]=n}else qa(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;nn(n),p=!1}else p=Wc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=p),p=!0;if(!p)return n.flags&256?(Ai(n),n):(Ai(n),null)}return Ai(n),(n.flags&128)!==0?(n.lanes=a,n):(a=c!==null,e=e!==null&&e.memoizedState!==null,a&&(c=n.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==p&&(c.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),kl(n,n.updateQueue),nn(n),null);case 4:return Bt(),e===null&&ad(n.stateNode.containerInfo),nn(n),null;case 10:return Rr(n.type),nn(n),null;case 19:if(re(Cn),c=n.memoizedState,c===null)return nn(n),null;if(p=(n.flags&128)!==0,y=c.rendering,y===null)if(p)Eo(c,!1);else{if(gn!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(y=wl(e),y!==null){for(n.flags|=128,Eo(c,!1),e=y.updateQueue,n.updateQueue=e,kl(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)pf(a,e),a=a.sibling;return ve(Cn,Cn.current&1|2),wt&&Nr(n,c.treeForkCount),n.child}e=e.sibling}c.tail!==null&&Jt()>Hl&&(n.flags|=128,p=!0,Eo(c,!1),n.lanes=4194304)}else{if(!p)if(e=wl(y),e!==null){if(n.flags|=128,p=!0,e=e.updateQueue,n.updateQueue=e,kl(n,e),Eo(c,!0),c.tail===null&&c.tailMode==="hidden"&&!y.alternate&&!wt)return nn(n),null}else 2*Jt()-c.renderingStartTime>Hl&&a!==536870912&&(n.flags|=128,p=!0,Eo(c,!1),n.lanes=4194304);c.isBackwards?(y.sibling=n.child,n.child=y):(e=c.last,e!==null?e.sibling=y:n.child=y,c.last=y)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=Jt(),e.sibling=null,a=Cn.current,ve(Cn,p?a&1|2:a&1),wt&&Nr(n,c.treeForkCount),e):(nn(n),null);case 22:case 23:return Ai(n),su(),c=n.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(n.flags|=8192):c&&(n.flags|=8192),c?(a&536870912)!==0&&(n.flags&128)===0&&(nn(n),n.subtreeFlags&6&&(n.flags|=8192)):nn(n),a=n.updateQueue,a!==null&&kl(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==a&&(n.flags|=2048),e!==null&&re(Ka),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Rr(Tn),nn(n),null;case 25:return null;case 30:return null}throw Error(h(156,n.tag))}function np(e,n){switch(Yc(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Rr(Tn),Bt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return cn(n),null;case 31:if(n.memoizedState!==null){if(Ai(n),n.alternate===null)throw Error(h(340));qa()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Ai(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(h(340));qa()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return re(Cn),null;case 4:return Bt(),null;case 10:return Rr(n.type),null;case 22:case 23:return Ai(n),su(),e!==null&&re(Ka),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Rr(Tn),null;case 25:return null;default:return null}}function H0(e,n){switch(Yc(n),n.tag){case 3:Rr(Tn),Bt();break;case 26:case 27:case 5:cn(n);break;case 4:Bt();break;case 31:n.memoizedState!==null&&Ai(n);break;case 13:Ai(n);break;case 19:re(Cn);break;case 10:Rr(n.type);break;case 22:case 23:Ai(n),su(),e!==null&&re(Ka);break;case 24:Rr(Tn)}}function Ao(e,n){try{var a=n.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var p=c.next;a=p;do{if((a.tag&e)===e){c=void 0;var y=a.create,v=a.inst;c=y(),v.destroy=c}a=a.next}while(a!==p)}}catch(O){Ht(n,n.return,O)}}function ga(e,n,a){try{var c=n.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var y=p.next;c=y;do{if((c.tag&e)===e){var v=c.inst,O=v.destroy;if(O!==void 0){v.destroy=void 0,p=n;var k=a,K=O;try{K()}catch(he){Ht(p,k,he)}}}c=c.next}while(c!==y)}}catch(he){Ht(n,n.return,he)}}function V0(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{Df(n,a)}catch(c){Ht(e,e.return,c)}}}function G0(e,n,a){a.props=ns(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(c){Ht(e,n,c)}}function So(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof a=="function"?e.refCleanup=a(c):a.current=c}}catch(p){Ht(e,n,p)}}function hr(e,n){var a=e.ref,c=e.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(p){Ht(e,n,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(p){Ht(e,n,p)}else a.current=null}function Y0(e){var n=e.type,a=e.memoizedProps,c=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(p){Ht(e,e.return,p)}}function zu(e,n,a){try{var c=e.stateNode;wp(c,e.type,a,n),c[Ft]=n}catch(p){Ht(e,e.return,p)}}function X0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ea(e.type)||e.tag===4}function Uu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||X0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ea(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fu(e,n,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=ai));else if(c!==4&&(c===27&&Ea(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(Fu(e,n,a),e=e.sibling;e!==null;)Fu(e,n,a),e=e.sibling}function zl(e,n,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(c!==4&&(c===27&&Ea(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(zl(e,n,a),e=e.sibling;e!==null;)zl(e,n,a),e=e.sibling}function W0(e){var n=e.stateNode,a=e.memoizedProps;try{for(var c=e.type,p=n.attributes;p.length;)n.removeAttributeNode(p[0]);Gn(n,c,a),n[mn]=e,n[Ft]=a}catch(y){Ht(e,e.return,y)}}var Br=!1,Rn=!1,Pu=!1,q0=typeof WeakSet=="function"?WeakSet:Set,zn=null;function ip(e,n){if(e=e.containerInfo,ld=ac,e=N(e),R(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var p=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var v=0,O=-1,k=-1,K=0,he=0,me=e,ie=null;t:for(;;){for(var ue;me!==a||p!==0&&me.nodeType!==3||(O=v+p),me!==y||c!==0&&me.nodeType!==3||(k=v+c),me.nodeType===3&&(v+=me.nodeValue.length),(ue=me.firstChild)!==null;)ie=me,me=ue;for(;;){if(me===e)break t;if(ie===a&&++K===p&&(O=v),ie===y&&++he===c&&(k=v),(ue=me.nextSibling)!==null)break;me=ie,ie=me.parentNode}me=ue}a=O===-1||k===-1?null:{start:O,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(cd={focusedElem:e,selectionRange:a},ac=!1,zn=n;zn!==null;)if(n=zn,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,zn=e;else for(;zn!==null;){switch(n=zn,y=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)p=e[a],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&y!==null){e=void 0,a=n,p=y.memoizedProps,y=y.memoizedState,c=a.stateNode;try{var Ue=ns(a.type,p);e=c.getSnapshotBeforeUpdate(Ue,y),c.__reactInternalSnapshotBeforeUpdate=e}catch(et){Ht(a,a.return,et)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)fd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(h(163))}if(e=n.sibling,e!==null){e.return=n.return,zn=e;break}zn=n.return}}function Z0(e,n,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:jr(e,a),c&4&&Ao(5,a);break;case 1:if(jr(e,a),c&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(v){Ht(a,a.return,v)}else{var p=ns(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(p,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Ht(a,a.return,v)}}c&64&&V0(a),c&512&&So(a,a.return);break;case 3:if(jr(e,a),c&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Df(e,n)}catch(v){Ht(a,a.return,v)}}break;case 27:n===null&&c&4&&W0(a);case 26:case 5:jr(e,a),n===null&&c&4&&Y0(a),c&512&&So(a,a.return);break;case 12:jr(e,a);break;case 31:jr(e,a),c&4&&J0(e,a);break;case 13:jr(e,a),c&4&&$0(e,a),c&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=fp.bind(null,a),Mp(e,a))));break;case 22:if(c=a.memoizedState!==null||Br,!c){n=n!==null&&n.memoizedState!==null||Rn,p=Br;var y=Rn;Br=c,(Rn=n)&&!y?kr(e,a,(a.subtreeFlags&8772)!==0):jr(e,a),Br=p,Rn=y}break;case 30:break;default:jr(e,a)}}function Q0(e){var n=e.alternate;n!==null&&(e.alternate=null,Q0(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&ri(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var sn=null,li=!1;function Lr(e,n,a){for(a=a.child;a!==null;)K0(e,n,a),a=a.sibling}function K0(e,n,a){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(St,a)}catch{}switch(a.tag){case 26:Rn||hr(a,n),Lr(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Rn||hr(a,n);var c=sn,p=li;Ea(a.type)&&(sn=a.stateNode,li=!1),Lr(e,n,a),Mo(a.stateNode),sn=c,li=p;break;case 5:Rn||hr(a,n);case 6:if(c=sn,p=li,sn=null,Lr(e,n,a),sn=c,li=p,sn!==null)if(li)try{(sn.nodeType===9?sn.body:sn.nodeName==="HTML"?sn.ownerDocument.body:sn).removeChild(a.stateNode)}catch(y){Ht(a,n,y)}else try{sn.removeChild(a.stateNode)}catch(y){Ht(a,n,y)}break;case 18:sn!==null&&(li?(e=sn,V1(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Hs(e)):V1(sn,a.stateNode));break;case 4:c=sn,p=li,sn=a.stateNode.containerInfo,li=!0,Lr(e,n,a),sn=c,li=p;break;case 0:case 11:case 14:case 15:ga(2,a,n),Rn||ga(4,a,n),Lr(e,n,a);break;case 1:Rn||(hr(a,n),c=a.stateNode,typeof c.componentWillUnmount=="function"&&G0(a,n,c)),Lr(e,n,a);break;case 21:Lr(e,n,a);break;case 22:Rn=(c=Rn)||a.memoizedState!==null,Lr(e,n,a),Rn=c;break;default:Lr(e,n,a)}}function J0(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Hs(e)}catch(a){Ht(n,n.return,a)}}}function $0(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Hs(e)}catch(a){Ht(n,n.return,a)}}function rp(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new q0),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new q0),n;default:throw Error(h(435,e.tag))}}function Ul(e,n){var a=rp(e);n.forEach(function(c){if(!a.has(c)){a.add(c);var p=hp.bind(null,e,c);c.then(p,p)}})}function ci(e,n){var a=n.deletions;if(a!==null)for(var c=0;c<a.length;c++){var p=a[c],y=e,v=n,O=v;e:for(;O!==null;){switch(O.tag){case 27:if(Ea(O.type)){sn=O.stateNode,li=!1;break e}break;case 5:sn=O.stateNode,li=!1;break e;case 3:case 4:sn=O.stateNode.containerInfo,li=!0;break e}O=O.return}if(sn===null)throw Error(h(160));K0(y,v,p),sn=null,li=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)e1(n,e),n=n.sibling}var Qi=null;function e1(e,n){var a=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ci(n,e),ui(e),c&4&&(ga(3,e,e.return),Ao(3,e),ga(5,e,e.return));break;case 1:ci(n,e),ui(e),c&512&&(Rn||a===null||hr(a,a.return)),c&64&&Br&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var p=Qi;if(ci(n,e),ui(e),c&512&&(Rn||a===null||hr(a,a.return)),c&4){var y=a!==null?a.memoizedState:null;if(c=e.memoizedState,a===null)if(c===null)if(e.stateNode===null){e:{c=e.type,a=e.memoizedProps,p=p.ownerDocument||p;t:switch(c){case"title":y=p.getElementsByTagName("title")[0],(!y||y[ka]||y[mn]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(c),p.head.insertBefore(y,p.querySelector("head > title"))),Gn(y,c,a),y[mn]=e,dn(y),c=y;break e;case"link":var v=eh("link","href",p).get(c+(a.href||""));if(v){for(var O=0;O<v.length;O++)if(y=v[O],y.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&y.getAttribute("rel")===(a.rel==null?null:a.rel)&&y.getAttribute("title")===(a.title==null?null:a.title)&&y.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(O,1);break t}}y=p.createElement(c),Gn(y,c,a),p.head.appendChild(y);break;case"meta":if(v=eh("meta","content",p).get(c+(a.content||""))){for(O=0;O<v.length;O++)if(y=v[O],y.getAttribute("content")===(a.content==null?null:""+a.content)&&y.getAttribute("name")===(a.name==null?null:a.name)&&y.getAttribute("property")===(a.property==null?null:a.property)&&y.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&y.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(O,1);break t}}y=p.createElement(c),Gn(y,c,a),p.head.appendChild(y);break;default:throw Error(h(468,c))}y[mn]=e,dn(y),c=y}e.stateNode=c}else th(p,e.type,e.stateNode);else e.stateNode=$1(p,c,e.memoizedProps);else y!==c?(y===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):y.count--,c===null?th(p,e.type,e.stateNode):$1(p,c,e.memoizedProps)):c===null&&e.stateNode!==null&&zu(e,e.memoizedProps,a.memoizedProps)}break;case 27:ci(n,e),ui(e),c&512&&(Rn||a===null||hr(a,a.return)),a!==null&&c&4&&zu(e,e.memoizedProps,a.memoizedProps);break;case 5:if(ci(n,e),ui(e),c&512&&(Rn||a===null||hr(a,a.return)),e.flags&32){p=e.stateNode;try{Qr(p,"")}catch(Ue){Ht(e,e.return,Ue)}}c&4&&e.stateNode!=null&&(p=e.memoizedProps,zu(e,p,a!==null?a.memoizedProps:p)),c&1024&&(Pu=!0);break;case 6:if(ci(n,e),ui(e),c&4){if(e.stateNode===null)throw Error(h(162));c=e.memoizedProps,a=e.stateNode;try{a.nodeValue=c}catch(Ue){Ht(e,e.return,Ue)}}break;case 3:if(tc=null,p=Qi,Qi=$l(n.containerInfo),ci(n,e),Qi=p,ui(e),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Hs(n.containerInfo)}catch(Ue){Ht(e,e.return,Ue)}Pu&&(Pu=!1,t1(e));break;case 4:c=Qi,Qi=$l(e.stateNode.containerInfo),ci(n,e),ui(e),Qi=c;break;case 12:ci(n,e),ui(e);break;case 31:ci(n,e),ui(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Ul(e,c)));break;case 13:ci(n,e),ui(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Pl=Jt()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Ul(e,c)));break;case 22:p=e.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,K=Br,he=Rn;if(Br=K||p,Rn=he||k,ci(n,e),Rn=he,Br=K,ui(e),c&8192)e:for(n=e.stateNode,n._visibility=p?n._visibility&-2:n._visibility|1,p&&(a===null||k||Br||Rn||is(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){k=a=n;try{if(y=k.stateNode,p)v=y.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{O=k.stateNode;var me=k.memoizedProps.style,ie=me!=null&&me.hasOwnProperty("display")?me.display:null;O.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(Ue){Ht(k,k.return,Ue)}}}else if(n.tag===6){if(a===null){k=n;try{k.stateNode.nodeValue=p?"":k.memoizedProps}catch(Ue){Ht(k,k.return,Ue)}}}else if(n.tag===18){if(a===null){k=n;try{var ue=k.stateNode;p?G1(ue,!0):G1(k.stateNode,!1)}catch(Ue){Ht(k,k.return,Ue)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}c&4&&(c=e.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Ul(e,a))));break;case 19:ci(n,e),ui(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Ul(e,c)));break;case 30:break;case 21:break;default:ci(n,e),ui(e)}}function ui(e){var n=e.flags;if(n&2){try{for(var a,c=e.return;c!==null;){if(X0(c)){a=c;break}c=c.return}if(a==null)throw Error(h(160));switch(a.tag){case 27:var p=a.stateNode,y=Uu(e);zl(e,y,p);break;case 5:var v=a.stateNode;a.flags&32&&(Qr(v,""),a.flags&=-33);var O=Uu(e);zl(e,O,v);break;case 3:case 4:var k=a.stateNode.containerInfo,K=Uu(e);Fu(e,K,k);break;default:throw Error(h(161))}}catch(he){Ht(e,e.return,he)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function t1(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;t1(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function jr(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Z0(e,n.alternate,n),n=n.sibling}function is(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:ga(4,n,n.return),is(n);break;case 1:hr(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&G0(n,n.return,a),is(n);break;case 27:Mo(n.stateNode);case 26:case 5:hr(n,n.return),is(n);break;case 22:n.memoizedState===null&&is(n);break;case 30:is(n);break;default:is(n)}e=e.sibling}}function kr(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var c=n.alternate,p=e,y=n,v=y.flags;switch(y.tag){case 0:case 11:case 15:kr(p,y,a),Ao(4,y);break;case 1:if(kr(p,y,a),c=y,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(K){Ht(c,c.return,K)}if(c=y,p=c.updateQueue,p!==null){var O=c.stateNode;try{var k=p.shared.hiddenCallbacks;if(k!==null)for(p.shared.hiddenCallbacks=null,p=0;p<k.length;p++)Mf(k[p],O)}catch(K){Ht(c,c.return,K)}}a&&v&64&&V0(y),So(y,y.return);break;case 27:W0(y);case 26:case 5:kr(p,y,a),a&&c===null&&v&4&&Y0(y),So(y,y.return);break;case 12:kr(p,y,a);break;case 31:kr(p,y,a),a&&v&4&&J0(p,y);break;case 13:kr(p,y,a),a&&v&4&&$0(p,y);break;case 22:y.memoizedState===null&&kr(p,y,a),So(y,y.return);break;case 30:break;default:kr(p,y,a)}n=n.sibling}}function Hu(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&lo(a))}function Vu(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&lo(e))}function Ki(e,n,a,c){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)n1(e,n,a,c),n=n.sibling}function n1(e,n,a,c){var p=n.flags;switch(n.tag){case 0:case 11:case 15:Ki(e,n,a,c),p&2048&&Ao(9,n);break;case 1:Ki(e,n,a,c);break;case 3:Ki(e,n,a,c),p&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&lo(e)));break;case 12:if(p&2048){Ki(e,n,a,c),e=n.stateNode;try{var y=n.memoizedProps,v=y.id,O=y.onPostCommit;typeof O=="function"&&O(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(k){Ht(n,n.return,k)}}else Ki(e,n,a,c);break;case 31:Ki(e,n,a,c);break;case 13:Ki(e,n,a,c);break;case 23:break;case 22:y=n.stateNode,v=n.alternate,n.memoizedState!==null?y._visibility&2?Ki(e,n,a,c):wo(e,n):y._visibility&2?Ki(e,n,a,c):(y._visibility|=2,Os(e,n,a,c,(n.subtreeFlags&10256)!==0||!1)),p&2048&&Hu(v,n);break;case 24:Ki(e,n,a,c),p&2048&&Vu(n.alternate,n);break;default:Ki(e,n,a,c)}}function Os(e,n,a,c,p){for(p=p&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var y=e,v=n,O=a,k=c,K=v.flags;switch(v.tag){case 0:case 11:case 15:Os(y,v,O,k,p),Ao(8,v);break;case 23:break;case 22:var he=v.stateNode;v.memoizedState!==null?he._visibility&2?Os(y,v,O,k,p):wo(y,v):(he._visibility|=2,Os(y,v,O,k,p)),p&&K&2048&&Hu(v.alternate,v);break;case 24:Os(y,v,O,k,p),p&&K&2048&&Vu(v.alternate,v);break;default:Os(y,v,O,k,p)}n=n.sibling}}function wo(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,c=n,p=c.flags;switch(c.tag){case 22:wo(a,c),p&2048&&Hu(c.alternate,c);break;case 24:wo(a,c),p&2048&&Vu(c.alternate,c);break;default:wo(a,c)}n=n.sibling}}var vo=8192;function Ms(e,n,a){if(e.subtreeFlags&vo)for(e=e.child;e!==null;)i1(e,n,a),e=e.sibling}function i1(e,n,a){switch(e.tag){case 26:Ms(e,n,a),e.flags&vo&&e.memoizedState!==null&&Gp(a,Qi,e.memoizedState,e.memoizedProps);break;case 5:Ms(e,n,a);break;case 3:case 4:var c=Qi;Qi=$l(e.stateNode.containerInfo),Ms(e,n,a),Qi=c;break;case 22:e.memoizedState===null&&(c=e.alternate,c!==null&&c.memoizedState!==null?(c=vo,vo=16777216,Ms(e,n,a),vo=c):Ms(e,n,a));break;default:Ms(e,n,a)}}function r1(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function To(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var c=n[a];zn=c,s1(c,e)}r1(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)a1(e),e=e.sibling}function a1(e){switch(e.tag){case 0:case 11:case 15:To(e),e.flags&2048&&ga(9,e,e.return);break;case 3:To(e);break;case 12:To(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Fl(e)):To(e);break;default:To(e)}}function Fl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var c=n[a];zn=c,s1(c,e)}r1(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:ga(8,n,n.return),Fl(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Fl(n));break;default:Fl(n)}e=e.sibling}}function s1(e,n){for(;zn!==null;){var a=zn;switch(a.tag){case 0:case 11:case 15:ga(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:lo(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,zn=c;else e:for(a=e;zn!==null;){c=zn;var p=c.sibling,y=c.return;if(Q0(c),c===a){zn=null;break e}if(p!==null){p.return=y,zn=p;break e}zn=y}}}var ap={getCacheForType:function(e){var n=Hn(Tn),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return Hn(Tn).controller.signal}},sp=typeof WeakMap=="function"?WeakMap:Map,Dt=0,Qt=null,mt=null,Ct=0,Pt=0,Si=null,pa=!1,Ds=!1,Gu=!1,zr=0,gn=0,xa=0,rs=0,Yu=0,wi=0,Bs=0,No=null,di=null,Xu=!1,Pl=0,o1=0,Hl=1/0,Vl=null,ma=null,jn=0,ya=null,Ls=null,Ur=0,Wu=0,qu=null,l1=null,Io=0,Zu=null;function vi(){return(Dt&2)!==0&&Ct!==0?Ct&-Ct:$.T!==null?td():Zn()}function c1(){if(wi===0)if((Ct&536870912)===0||wt){var e=Le;Le<<=1,(Le&3932160)===0&&(Le=262144),wi=e}else wi=536870912;return e=Ei.current,e!==null&&(e.flags|=32),wi}function fi(e,n,a){(e===Qt&&(Pt===2||Pt===9)||e.cancelPendingCommit!==null)&&(js(e,0),ba(e,Ct,wi,!1)),ar(e,a),((Dt&2)===0||e!==Qt)&&(e===Qt&&((Dt&2)===0&&(rs|=a),gn===4&&ba(e,Ct,wi,!1)),gr(e))}function u1(e,n,a){if((Dt&6)!==0)throw Error(h(327));var c=!a&&(n&127)===0&&(n&e.expiredLanes)===0||jt(e,n),p=c?cp(e,n):Ku(e,n,!0),y=c;do{if(p===0){Ds&&!c&&ba(e,n,0,!1);break}else{if(a=e.current.alternate,y&&!op(a)){p=Ku(e,n,!1),y=!1;continue}if(p===2){if(y=n,e.errorRecoveryDisabledLanes&y)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;e:{var O=e;p=No;var k=O.current.memoizedState.isDehydrated;if(k&&(js(O,v).flags|=256),v=Ku(O,v,!1),v!==2){if(Gu&&!k){O.errorRecoveryDisabledLanes|=y,rs|=y,p=4;break e}y=di,di=p,y!==null&&(di===null?di=y:di.push.apply(di,y))}p=v}if(y=!1,p!==2)continue}}if(p===1){js(e,0),ba(e,n,0,!0);break}e:{switch(c=e,y=p,y){case 0:case 1:throw Error(h(345));case 4:if((n&4194048)!==n)break;case 6:ba(c,n,wi,!pa);break e;case 2:di=null;break;case 3:case 5:break;default:throw Error(h(329))}if((n&62914560)===n&&(p=Pl+300-Jt(),10<p)){if(ba(c,n,wi,!pa),xn(c,0,!0)!==0)break e;Ur=n,c.timeoutHandle=P1(d1.bind(null,c,a,di,Vl,Xu,n,wi,rs,Bs,pa,y,"Throttled",-0,0),p);break e}d1(c,a,di,Vl,Xu,n,wi,rs,Bs,pa,y,null,-0,0)}}break}while(!0);gr(e)}function d1(e,n,a,c,p,y,v,O,k,K,he,me,ie,ue){if(e.timeoutHandle=-1,me=n.subtreeFlags,me&8192||(me&16785408)===16785408){me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ai},i1(n,y,me);var Ue=(y&62914560)===y?Pl-Jt():(y&4194048)===y?o1-Jt():0;if(Ue=Yp(me,Ue),Ue!==null){Ur=y,e.cancelPendingCommit=Ue(b1.bind(null,e,n,y,a,c,p,v,O,k,he,me,null,ie,ue)),ba(e,y,v,!K);return}}b1(e,n,y,a,c,p,v,O,k)}function op(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var p=a[c],y=p.getSnapshot;p=p.value;try{if(!f(y(),p))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ba(e,n,a,c){n&=~Yu,n&=~rs,e.suspendedLanes|=n,e.pingedLanes&=~n,c&&(e.warmLanes|=n),c=e.expirationTimes;for(var p=n;0<p;){var y=31-V(p),v=1<<y;c[y]=-1,p&=~v}a!==0&&Zo(e,a,n)}function Gl(){return(Dt&6)===0?(Ro(0),!1):!0}function Qu(){if(mt!==null){if(Pt===0)var e=mt.return;else e=mt,Ir=Za=null,fu(e),Ts=null,uo=0,e=mt;for(;e!==null;)H0(e.alternate,e),e=e.return;mt=null}}function js(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Np(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Ur=0,Qu(),Qt=e,mt=a=Tr(e.current,null),Ct=n,Pt=0,Si=null,pa=!1,Ds=jt(e,n),Gu=!1,Bs=wi=Yu=rs=xa=gn=0,di=No=null,Xu=!1,(n&8)!==0&&(n|=n&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=n;0<c;){var p=31-V(c),y=1<<p;n|=e[p],c&=~y}return zr=n,dl(),a}function f1(e,n){lt=null,$.H=bo,n===vs||n===bl?(n=If(),Pt=3):n===eu?(n=If(),Pt=4):Pt=n===Iu?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Si=n,mt===null&&(gn=1,Dl(e,Li(n,e.current)))}function h1(){var e=Ei.current;return e===null?!0:(Ct&4194048)===Ct?Ui===null:(Ct&62914560)===Ct||(Ct&536870912)!==0?e===Ui:!1}function g1(){var e=$.H;return $.H=bo,e===null?bo:e}function p1(){var e=$.A;return $.A=ap,e}function Yl(){gn=4,pa||(Ct&4194048)!==Ct&&Ei.current!==null||(Ds=!0),(xa&134217727)===0&&(rs&134217727)===0||Qt===null||ba(Qt,Ct,wi,!1)}function Ku(e,n,a){var c=Dt;Dt|=2;var p=g1(),y=p1();(Qt!==e||Ct!==n)&&(Vl=null,js(e,n)),n=!1;var v=gn;e:do try{if(Pt!==0&&mt!==null){var O=mt,k=Si;switch(Pt){case 8:Qu(),v=6;break e;case 3:case 2:case 9:case 6:Ei.current===null&&(n=!0);var K=Pt;if(Pt=0,Si=null,ks(e,O,k,K),a&&Ds){v=0;break e}break;default:K=Pt,Pt=0,Si=null,ks(e,O,k,K)}}lp(),v=gn;break}catch(he){f1(e,he)}while(!0);return n&&e.shellSuspendCounter++,Ir=Za=null,Dt=c,$.H=p,$.A=y,mt===null&&(Qt=null,Ct=0,dl()),v}function lp(){for(;mt!==null;)x1(mt)}function cp(e,n){var a=Dt;Dt|=2;var c=g1(),p=p1();Qt!==e||Ct!==n?(Vl=null,Hl=Jt()+500,js(e,n)):Ds=jt(e,n);e:do try{if(Pt!==0&&mt!==null){n=mt;var y=Si;t:switch(Pt){case 1:Pt=0,Si=null,ks(e,n,y,1);break;case 2:case 9:if(Tf(y)){Pt=0,Si=null,m1(n);break}n=function(){Pt!==2&&Pt!==9||Qt!==e||(Pt=7),gr(e)},y.then(n,n);break e;case 3:Pt=7;break e;case 4:Pt=5;break e;case 7:Tf(y)?(Pt=0,Si=null,m1(n)):(Pt=0,Si=null,ks(e,n,y,7));break;case 5:var v=null;switch(mt.tag){case 26:v=mt.memoizedState;case 5:case 27:var O=mt;if(v?nh(v):O.stateNode.complete){Pt=0,Si=null;var k=O.sibling;if(k!==null)mt=k;else{var K=O.return;K!==null?(mt=K,Xl(K)):mt=null}break t}}Pt=0,Si=null,ks(e,n,y,5);break;case 6:Pt=0,Si=null,ks(e,n,y,6);break;case 8:Qu(),gn=6;break e;default:throw Error(h(462))}}up();break}catch(he){f1(e,he)}while(!0);return Ir=Za=null,$.H=c,$.A=p,Dt=a,mt!==null?0:(Qt=null,Ct=0,dl(),gn)}function up(){for(;mt!==null&&!yr();)x1(mt)}function x1(e){var n=F0(e.alternate,e,zr);e.memoizedProps=e.pendingProps,n===null?Xl(e):mt=n}function m1(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=B0(a,n,n.pendingProps,n.type,void 0,Ct);break;case 11:n=B0(a,n,n.pendingProps,n.type.render,n.ref,Ct);break;case 5:fu(n);default:H0(a,n),n=mt=pf(n,zr),n=F0(a,n,zr)}e.memoizedProps=e.pendingProps,n===null?Xl(e):mt=n}function ks(e,n,a,c){Ir=Za=null,fu(n),Ts=null,uo=0;var p=n.return;try{if(Jg(e,p,n,a,Ct)){gn=1,Dl(e,Li(a,e.current)),mt=null;return}}catch(y){if(p!==null)throw mt=p,y;gn=1,Dl(e,Li(a,e.current)),mt=null;return}n.flags&32768?(wt||c===1?e=!0:Ds||(Ct&536870912)!==0?e=!1:(pa=e=!0,(c===2||c===9||c===3||c===6)&&(c=Ei.current,c!==null&&c.tag===13&&(c.flags|=16384))),y1(n,e)):Xl(n)}function Xl(e){var n=e;do{if((n.flags&32768)!==0){y1(n,pa);return}e=n.return;var a=tp(n.alternate,n,zr);if(a!==null){mt=a;return}if(n=n.sibling,n!==null){mt=n;return}mt=n=e}while(n!==null);gn===0&&(gn=5)}function y1(e,n){do{var a=np(e.alternate,e);if(a!==null){a.flags&=32767,mt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){mt=e;return}mt=e=a}while(e!==null);gn=6,mt=null}function b1(e,n,a,c,p,y,v,O,k){e.cancelPendingCommit=null;do Wl();while(jn!==0);if((Dt&6)!==0)throw Error(h(327));if(n!==null){if(n===e.current)throw Error(h(177));if(y=n.lanes|n.childLanes,y|=Uc,_i(e,a,y,v,O,k),e===Qt&&(mt=Qt=null,Ct=0),Ls=n,ya=e,Ur=a,Wu=y,qu=p,l1=c,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,gp(qn,function(){return w1(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||c){c=$.T,$.T=null,p=fe.p,fe.p=2,v=Dt,Dt|=4;try{ip(e,n,a)}finally{Dt=v,fe.p=p,$.T=c}}jn=1,C1(),E1(),A1()}}function C1(){if(jn===1){jn=0;var e=ya,n=Ls,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=$.T,$.T=null;var c=fe.p;fe.p=2;var p=Dt;Dt|=4;try{e1(n,e);var y=cd,v=N(e.containerInfo),O=y.focusedElem,k=y.selectionRange;if(v!==O&&O&&O.ownerDocument&&S(O.ownerDocument.documentElement,O)){if(k!==null&&R(O)){var K=k.start,he=k.end;if(he===void 0&&(he=K),"selectionStart"in O)O.selectionStart=K,O.selectionEnd=Math.min(he,O.value.length);else{var me=O.ownerDocument||document,ie=me&&me.defaultView||window;if(ie.getSelection){var ue=ie.getSelection(),Ue=O.textContent.length,et=Math.min(k.start,Ue),Xt=k.end===void 0?et:Math.min(k.end,Ue);!ue.extend&&et>Xt&&(v=Xt,Xt=et,et=v);var Y=E(O,et),H=E(O,Xt);if(Y&&H&&(ue.rangeCount!==1||ue.anchorNode!==Y.node||ue.anchorOffset!==Y.offset||ue.focusNode!==H.node||ue.focusOffset!==H.offset)){var Q=me.createRange();Q.setStart(Y.node,Y.offset),ue.removeAllRanges(),et>Xt?(ue.addRange(Q),ue.extend(H.node,H.offset)):(Q.setEnd(H.node,H.offset),ue.addRange(Q))}}}}for(me=[],ue=O;ue=ue.parentNode;)ue.nodeType===1&&me.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<me.length;O++){var pe=me[O];pe.element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}}ac=!!ld,cd=ld=null}finally{Dt=p,fe.p=c,$.T=a}}e.current=n,jn=2}}function E1(){if(jn===2){jn=0;var e=ya,n=Ls,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=$.T,$.T=null;var c=fe.p;fe.p=2;var p=Dt;Dt|=4;try{Z0(e,n.alternate,n)}finally{Dt=p,fe.p=c,$.T=a}}jn=3}}function A1(){if(jn===4||jn===3){jn=0,Da();var e=ya,n=Ls,a=Ur,c=l1;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?jn=5:(jn=0,Ls=ya=null,S1(e,e.pendingLanes));var p=e.pendingLanes;if(p===0&&(ma=null),Vi(a),n=n.stateNode,Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(St,n,void 0,(n.current.flags&128)===128)}catch{}if(c!==null){n=$.T,p=fe.p,fe.p=2,$.T=null;try{for(var y=e.onRecoverableError,v=0;v<c.length;v++){var O=c[v];y(O.value,{componentStack:O.stack})}}finally{$.T=n,fe.p=p}}(Ur&3)!==0&&Wl(),gr(e),p=e.pendingLanes,(a&261930)!==0&&(p&42)!==0?e===Zu?Io++:(Io=0,Zu=e):Io=0,Ro(0)}}function S1(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,lo(n)))}function Wl(){return C1(),E1(),A1(),w1()}function w1(){if(jn!==5)return!1;var e=ya,n=Wu;Wu=0;var a=Vi(Ur),c=$.T,p=fe.p;try{fe.p=32>a?32:a,$.T=null,a=qu,qu=null;var y=ya,v=Ur;if(jn=0,Ls=ya=null,Ur=0,(Dt&6)!==0)throw Error(h(331));var O=Dt;if(Dt|=4,a1(y.current),n1(y,y.current,v,a),Dt=O,Ro(0,!1),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(St,y)}catch{}return!0}finally{fe.p=p,$.T=c,S1(e,n)}}function v1(e,n,a){n=Li(a,n),n=Nu(e.stateNode,n,2),e=da(e,n,2),e!==null&&(ar(e,2),gr(e))}function Ht(e,n,a){if(e.tag===3)v1(e,e,a);else for(;n!==null;){if(n.tag===3){v1(n,e,a);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ma===null||!ma.has(c))){e=Li(a,e),a=T0(2),c=da(n,a,2),c!==null&&(N0(a,c,n,e),ar(c,2),gr(c));break}}n=n.return}}function Ju(e,n,a){var c=e.pingCache;if(c===null){c=e.pingCache=new sp;var p=new Set;c.set(n,p)}else p=c.get(n),p===void 0&&(p=new Set,c.set(n,p));p.has(a)||(Gu=!0,p.add(a),e=dp.bind(null,e,n,a),n.then(e,e))}function dp(e,n,a){var c=e.pingCache;c!==null&&c.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Qt===e&&(Ct&a)===a&&(gn===4||gn===3&&(Ct&62914560)===Ct&&300>Jt()-Pl?(Dt&2)===0&&js(e,0):Yu|=a,Bs===Ct&&(Bs=0)),gr(e)}function T1(e,n){n===0&&(n=Mn()),e=Xa(e,n),e!==null&&(ar(e,n),gr(e))}function fp(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),T1(e,a)}function hp(e,n){var a=0;switch(e.tag){case 31:case 13:var c=e.stateNode,p=e.memoizedState;p!==null&&(a=p.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(h(314))}c!==null&&c.delete(n),T1(e,a)}function gp(e,n){return ii(e,n)}var ql=null,zs=null,$u=!1,Zl=!1,ed=!1,Ca=0;function gr(e){e!==zs&&e.next===null&&(zs===null?ql=zs=e:zs=zs.next=e),Zl=!0,$u||($u=!0,xp())}function Ro(e,n){if(!ed&&Zl){ed=!0;do for(var a=!1,c=ql;c!==null;){if(e!==0){var p=c.pendingLanes;if(p===0)var y=0;else{var v=c.suspendedLanes,O=c.pingedLanes;y=(1<<31-V(42|e)+1)-1,y&=p&~(v&~O),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(a=!0,_1(c,y))}else y=Ct,y=xn(c,c===Qt?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||jt(c,y)||(a=!0,_1(c,y));c=c.next}while(a);ed=!1}}function pp(){N1()}function N1(){Zl=$u=!1;var e=0;Ca!==0&&Tp()&&(e=Ca);for(var n=Jt(),a=null,c=ql;c!==null;){var p=c.next,y=I1(c,n);y===0?(c.next=null,a===null?ql=p:a.next=p,p===null&&(zs=a)):(a=c,(e!==0||(y&3)!==0)&&(Zl=!0)),c=p}jn!==0&&jn!==5||Ro(e),Ca!==0&&(Ca=0)}function I1(e,n){for(var a=e.suspendedLanes,c=e.pingedLanes,p=e.expirationTimes,y=e.pendingLanes&-62914561;0<y;){var v=31-V(y),O=1<<v,k=p[v];k===-1?((O&a)===0||(O&c)!==0)&&(p[v]=ja(O,n)):k<=n&&(e.expiredLanes|=O),y&=~O}if(n=Qt,a=Ct,a=xn(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,a===0||e===n&&(Pt===2||Pt===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&ke(c),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||jt(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(c!==null&&ke(c),Vi(a)){case 2:case 8:a=La;break;case 32:a=qn;break;case 268435456:a=Ri;break;default:a=qn}return c=R1.bind(null,e),a=ii(a,c),e.callbackPriority=n,e.callbackNode=a,n}return c!==null&&c!==null&&ke(c),e.callbackPriority=2,e.callbackNode=null,2}function R1(e,n){if(jn!==0&&jn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Wl()&&e.callbackNode!==a)return null;var c=Ct;return c=xn(e,e===Qt?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(u1(e,c,n),I1(e,Jt()),e.callbackNode!=null&&e.callbackNode===a?R1.bind(null,e):null)}function _1(e,n){if(Wl())return null;u1(e,n,!0)}function xp(){Ip(function(){(Dt&6)!==0?ii(Xn,pp):N1()})}function td(){if(Ca===0){var e=Ss;e===0&&(e=Ve,Ve<<=1,(Ve&261888)===0&&(Ve=256)),Ca=e}return Ca}function O1(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Kr(""+e)}function M1(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function mp(e,n,a,c,p){if(n==="submit"&&a&&a.stateNode===p){var y=O1((p[Ft]||null).action),v=c.submitter;v&&(n=(n=v[Ft]||null)?O1(n.formAction):v.getAttribute("formAction"),n!==null&&(y=n,v=null));var O=new Dn("action","action",null,c,p);e.push({event:O,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ca!==0){var k=v?M1(p,v):new FormData(p);Eu(a,{pending:!0,data:k,method:p.method,action:y},null,k)}}else typeof y=="function"&&(O.preventDefault(),k=v?M1(p,v):new FormData(p),Eu(a,{pending:!0,data:k,method:p.method,action:y},y,k))},currentTarget:p}]})}}for(var nd=0;nd<ao.length;nd++){var id=ao[nd],yp=id.toLowerCase(),bp=id[0].toUpperCase()+id.slice(1);Zi(yp,"on"+bp)}Zi(oi,"onAnimationEnd"),Zi(Fn,"onAnimationIteration"),Zi(Ut,"onAnimationStart"),Zi("dblclick","onDoubleClick"),Zi("focusin","onFocus"),Zi("focusout","onBlur"),Zi(Ln,"onTransitionRun"),Zi(ei,"onTransitionStart"),Zi(ra,"onTransitionCancel"),Zi(vr,"onTransitionEnd"),pi("onMouseEnter",["mouseout","mouseover"]),pi("onMouseLeave",["mouseout","mouseover"]),pi("onPointerEnter",["pointerout","pointerover"]),pi("onPointerLeave",["pointerout","pointerover"]),kt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),kt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),kt("onBeforeInput",["compositionend","keypress","textInput","paste"]),kt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),kt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),kt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_o));function D1(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var c=e[a],p=c.event;c=c.listeners;e:{var y=void 0;if(n)for(var v=c.length-1;0<=v;v--){var O=c[v],k=O.instance,K=O.currentTarget;if(O=O.listener,k!==y&&p.isPropagationStopped())break e;y=O,p.currentTarget=K;try{y(p)}catch(he){ul(he)}p.currentTarget=null,y=k}else for(v=0;v<c.length;v++){if(O=c[v],k=O.instance,K=O.currentTarget,O=O.listener,k!==y&&p.isPropagationStopped())break e;y=O,p.currentTarget=K;try{y(p)}catch(he){ul(he)}p.currentTarget=null,y=k}}}}function yt(e,n){var a=n[Yr];a===void 0&&(a=n[Yr]=new Set);var c=e+"__bubble";a.has(c)||(B1(n,e,2,!1),a.add(c))}function rd(e,n,a){var c=0;n&&(c|=4),B1(a,e,c,n)}var Ql="_reactListening"+Math.random().toString(36).slice(2);function ad(e){if(!e[Ql]){e[Ql]=!0,Ce.forEach(function(a){a!=="selectionchange"&&(Cp.has(a)||rd(a,!1,e),rd(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Ql]||(n[Ql]=!0,rd("selectionchange",!1,n))}}function B1(e,n,a,c){switch(ch(n)){case 2:var p=qp;break;case 8:p=Zp;break;default:p=Cd}a=p.bind(null,n,a,e),p=void 0,!Js||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(p=!0),c?p!==void 0?e.addEventListener(n,a,{capture:!0,passive:p}):e.addEventListener(n,a,!0):p!==void 0?e.addEventListener(n,a,{passive:p}):e.addEventListener(n,a,!1)}function sd(e,n,a,c,p){var y=c;if((n&1)===0&&(n&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var O=c.stateNode.containerInfo;if(O===p)break;if(v===4)for(v=c.return;v!==null;){var k=v.tag;if((k===3||k===4)&&v.stateNode.containerInfo===p)return;v=v.return}for(;O!==null;){if(v=un(O),v===null)return;if(k=v.tag,k===5||k===6||k===26||k===27){c=y=v;continue e}O=O.parentNode}}c=c.return}$o(function(){var K=y,he=Ks(a),me=[];e:{var ie=cl.get(e);if(ie!==void 0){var ue=Dn,Ue=e;switch(e){case"keypress":if(or(a)===0)break e;case"keydown":case"keyup":ue=gs;break;case"focusin":Ue="focus",ue=to;break;case"focusout":Ue="blur",ue=to;break;case"beforeblur":case"afterblur":ue=to;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Mt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=fs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=jc;break;case oi:case Fn:case Ut:ue=ct;break;case vr:ue=Er;break;case"scroll":case"scrollend":ue=el;break;case"wheel":ue=kc;break;case"copy":case"cut":case"paste":ue=hs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=zt;break;case"toggle":case"beforetoggle":ue=io}var et=(n&4)!==0,Xt=!et&&(e==="scroll"||e==="scrollend"),Y=et?ie!==null?ie+"Capture":null:ie;et=[];for(var H=K,Q;H!==null;){var pe=H;if(Q=pe.stateNode,pe=pe.tag,pe!==5&&pe!==26&&pe!==27||Q===null||Y===null||(pe=it(H,Y),pe!=null&&et.push(Oo(H,pe,Q))),Xt)break;H=H.return}0<et.length&&(ie=new ue(ie,Ue,null,a,he),me.push({event:ie,listeners:et}))}}if((n&7)===0){e:{if(ie=e==="mouseover"||e==="pointerover",ue=e==="mouseout"||e==="pointerout",ie&&a!==za&&(Ue=a.relatedTarget||a.fromElement)&&(un(Ue)||Ue[gi]))break e;if((ue||ie)&&(ie=he.window===he?he:(ie=he.ownerDocument)?ie.defaultView||ie.parentWindow:window,ue?(Ue=a.relatedTarget||a.toElement,ue=K,Ue=Ue?un(Ue):null,Ue!==null&&(Xt=b(Ue),et=Ue.tag,Ue!==Xt||et!==5&&et!==27&&et!==6)&&(Ue=null)):(ue=null,Ue=K),ue!==Ue)){if(et=Mt,pe="onMouseLeave",Y="onMouseEnter",H="mouse",(e==="pointerout"||e==="pointerover")&&(et=zt,pe="onPointerLeave",Y="onPointerEnter",H="pointer"),Xt=ue==null?ie:Xr(ue),Q=Ue==null?ie:Xr(Ue),ie=new et(pe,H+"leave",ue,a,he),ie.target=Xt,ie.relatedTarget=Q,pe=null,un(he)===K&&(et=new et(Y,H+"enter",Ue,a,he),et.target=Q,et.relatedTarget=Xt,pe=et),Xt=pe,ue&&Ue)t:{for(et=Ep,Y=ue,H=Ue,Q=0,pe=Y;pe;pe=et(pe))Q++;pe=0;for(var Ze=H;Ze;Ze=et(Ze))pe++;for(;0<Q-pe;)Y=et(Y),Q--;for(;0<pe-Q;)H=et(H),pe--;for(;Q--;){if(Y===H||H!==null&&Y===H.alternate){et=Y;break t}Y=et(Y),H=et(H)}et=null}else et=null;ue!==null&&L1(me,ie,ue,et,!1),Ue!==null&&Xt!==null&&L1(me,Xt,Ue,et,!0)}}e:{if(ie=K?Xr(K):window,ue=ie.nodeName&&ie.nodeName.toLowerCase(),ue==="select"||ue==="input"&&ie.type==="file")var Rt=bi;else if(ro(ie))if(ll)Rt=s;else{Rt=i;var Ye=t}else ue=ie.nodeName,!ue||ue.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?K&&Wt(K.elementType)&&(Rt=bi):Rt=r;if(Rt&&(Rt=Rt(e,K))){yi(me,Rt,a,he);break e}Ye&&Ye(e,ie,K),e==="focusout"&&K&&ie.type==="number"&&K.memoizedProps.value!=null&&B(ie,"number",ie.value)}switch(Ye=K?Xr(K):window,e){case"focusin":(ro(Ye)||Ye.contentEditable==="true")&&(U=Ye,F=K,W=null);break;case"focusout":W=F=U=null;break;case"mousedown":se=!0;break;case"contextmenu":case"mouseup":case"dragend":se=!1,Ie(me,a,he);break;case"selectionchange":if(L)break;case"keydown":case"keyup":Ie(me,a,he)}var ut;if(Pa)e:{switch(e){case"compositionstart":var Et="onCompositionStart";break e;case"compositionend":Et="onCompositionEnd";break e;case"compositionupdate":Et="onCompositionUpdate";break e}Et=void 0}else ia?ol(e,a)&&(Et="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Et="onCompositionStart");Et&&(sl&&a.locale!=="ko"&&(ia||Et!=="onCompositionStart"?Et==="onCompositionEnd"&&ia&&(ut=Jr()):(Wi=he,qi="value"in Wi?Wi.value:Wi.textContent,ia=!0)),Ye=Kl(K,Et),0<Ye.length&&(Et=new il(Et,e,null,a,he),me.push({event:Et,listeners:Ye}),ut?Et.data=ut:(ut=na(a),ut!==null&&(Et.data=ut)))),(ut=al?ur(e,a):xs(e,a))&&(Et=Kl(K,"onBeforeInput"),0<Et.length&&(Ye=new il("onBeforeInput","beforeinput",null,a,he),me.push({event:Ye,listeners:Et}),Ye.data=ut)),mp(me,e,K,a,he)}D1(me,n)})}function Oo(e,n,a){return{instance:e,listener:n,currentTarget:a}}function Kl(e,n){for(var a=n+"Capture",c=[];e!==null;){var p=e,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=it(e,a),p!=null&&c.unshift(Oo(e,p,y)),p=it(e,n),p!=null&&c.push(Oo(e,p,y))),e.tag===3)return c;e=e.return}return[]}function Ep(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function L1(e,n,a,c,p){for(var y=n._reactName,v=[];a!==null&&a!==c;){var O=a,k=O.alternate,K=O.stateNode;if(O=O.tag,k!==null&&k===c)break;O!==5&&O!==26&&O!==27||K===null||(k=K,p?(K=it(a,y),K!=null&&v.unshift(Oo(a,K,k))):p||(K=it(a,y),K!=null&&v.push(Oo(a,K,k)))),a=a.return}v.length!==0&&e.push({event:n,listeners:v})}var Ap=/\r\n?/g,Sp=/\u0000|\uFFFD/g;function j1(e){return(typeof e=="string"?e:""+e).replace(Ap,`
`).replace(Sp,"")}function k1(e,n){return n=j1(n),j1(e)===n}function Yt(e,n,a,c,p,y){switch(a){case"children":typeof c=="string"?n==="body"||n==="textarea"&&c===""||Qr(e,c):(typeof c=="number"||typeof c=="bigint")&&n!=="body"&&Qr(e,""+c);break;case"className":qr(e,"class",c);break;case"tabIndex":qr(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":qr(e,a,c);break;case"style":qe(e,c,y);break;case"data":if(n!=="object"){qr(e,"data",c);break}case"src":case"href":if(c===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(a);break}c=Kr(""+c),e.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(a==="formAction"?(n!=="input"&&Yt(e,n,"name",p.name,p,null),Yt(e,n,"formEncType",p.formEncType,p,null),Yt(e,n,"formMethod",p.formMethod,p,null),Yt(e,n,"formTarget",p.formTarget,p,null)):(Yt(e,n,"encType",p.encType,p,null),Yt(e,n,"method",p.method,p,null),Yt(e,n,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(a);break}c=Kr(""+c),e.setAttribute(a,c);break;case"onClick":c!=null&&(e.onclick=ai);break;case"onScroll":c!=null&&yt("scroll",e);break;case"onScrollEnd":c!=null&&yt("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(h(61));if(a=c.__html,a!=null){if(p.children!=null)throw Error(h(60));e.innerHTML=a}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}a=Kr(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,""+c):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":c===!0?e.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,c):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(a,c):e.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(a):e.setAttribute(a,c);break;case"popover":yt("beforetoggle",e),yt("toggle",e),Wr(e,"popover",c);break;case"xlinkActuate":xi(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":xi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":xi(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":xi(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":xi(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":xi(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":xi(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":xi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":xi(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Wr(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Jo.get(a)||a,Wr(e,a,c))}}function od(e,n,a,c,p,y){switch(a){case"style":qe(e,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(h(61));if(a=c.__html,a!=null){if(p.children!=null)throw Error(h(60));e.innerHTML=a}}break;case"children":typeof c=="string"?Qr(e,c):(typeof c=="number"||typeof c=="bigint")&&Qr(e,""+c);break;case"onScroll":c!=null&&yt("scroll",e);break;case"onScrollEnd":c!=null&&yt("scrollend",e);break;case"onClick":c!=null&&(e.onclick=ai);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ko.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(p=a.endsWith("Capture"),n=a.slice(2,p?a.length-7:void 0),y=e[Ft]||null,y=y!=null?y[a]:null,typeof y=="function"&&e.removeEventListener(n,y,p),typeof c=="function")){typeof y!="function"&&y!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,c,p);break e}a in e?e[a]=c:c===!0?e.setAttribute(a,""):Wr(e,a,c)}}}function Gn(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yt("error",e),yt("load",e);var c=!1,p=!1,y;for(y in a)if(a.hasOwnProperty(y)){var v=a[y];if(v!=null)switch(y){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(h(137,n));default:Yt(e,n,y,v,a,null)}}p&&Yt(e,n,"srcSet",a.srcSet,a,null),c&&Yt(e,n,"src",a.src,a,null);return;case"input":yt("invalid",e);var O=y=v=p=null,k=null,K=null;for(c in a)if(a.hasOwnProperty(c)){var he=a[c];if(he!=null)switch(c){case"name":p=he;break;case"type":v=he;break;case"checked":k=he;break;case"defaultChecked":K=he;break;case"value":y=he;break;case"defaultValue":O=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(h(137,n));break;default:Yt(e,n,c,he,a,null)}}q(e,y,O,k,K,v,p,!1);return;case"select":yt("invalid",e),c=v=y=null;for(p in a)if(a.hasOwnProperty(p)&&(O=a[p],O!=null))switch(p){case"value":y=O;break;case"defaultValue":v=O;break;case"multiple":c=O;default:Yt(e,n,p,O,a,null)}n=y,a=v,e.multiple=!!c,n!=null?He(e,!!c,n,!1):a!=null&&He(e,!!c,a,!0);return;case"textarea":yt("invalid",e),y=p=c=null;for(v in a)if(a.hasOwnProperty(v)&&(O=a[v],O!=null))switch(v){case"value":c=O;break;case"defaultValue":p=O;break;case"children":y=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(h(91));break;default:Yt(e,n,v,O,a,null)}Jn(e,c,p,y);return;case"option":for(k in a)if(a.hasOwnProperty(k)&&(c=a[k],c!=null))switch(k){case"selected":e.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Yt(e,n,k,c,a,null)}return;case"dialog":yt("beforetoggle",e),yt("toggle",e),yt("cancel",e),yt("close",e);break;case"iframe":case"object":yt("load",e);break;case"video":case"audio":for(c=0;c<_o.length;c++)yt(_o[c],e);break;case"image":yt("error",e),yt("load",e);break;case"details":yt("toggle",e);break;case"embed":case"source":case"link":yt("error",e),yt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in a)if(a.hasOwnProperty(K)&&(c=a[K],c!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(h(137,n));default:Yt(e,n,K,c,a,null)}return;default:if(Wt(n)){for(he in a)a.hasOwnProperty(he)&&(c=a[he],c!==void 0&&od(e,n,he,c,a,void 0));return}}for(O in a)a.hasOwnProperty(O)&&(c=a[O],c!=null&&Yt(e,n,O,c,a,null))}function wp(e,n,a,c){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,v=null,O=null,k=null,K=null,he=null;for(ue in a){var me=a[ue];if(a.hasOwnProperty(ue)&&me!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":k=me;default:c.hasOwnProperty(ue)||Yt(e,n,ue,null,c,me)}}for(var ie in c){var ue=c[ie];if(me=a[ie],c.hasOwnProperty(ie)&&(ue!=null||me!=null))switch(ie){case"type":y=ue;break;case"name":p=ue;break;case"checked":K=ue;break;case"defaultChecked":he=ue;break;case"value":v=ue;break;case"defaultValue":O=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(h(137,n));break;default:ue!==me&&Yt(e,n,ie,ue,c,me)}}wn(e,v,O,k,K,he,y,p);return;case"select":ue=v=O=ie=null;for(y in a)if(k=a[y],a.hasOwnProperty(y)&&k!=null)switch(y){case"value":break;case"multiple":ue=k;default:c.hasOwnProperty(y)||Yt(e,n,y,null,c,k)}for(p in c)if(y=c[p],k=a[p],c.hasOwnProperty(p)&&(y!=null||k!=null))switch(p){case"value":ie=y;break;case"defaultValue":O=y;break;case"multiple":v=y;default:y!==k&&Yt(e,n,p,y,c,k)}n=O,a=v,c=ue,ie!=null?He(e,!!a,ie,!1):!!c!=!!a&&(n!=null?He(e,!!a,n,!0):He(e,!!a,a?[]:"",!1));return;case"textarea":ue=ie=null;for(O in a)if(p=a[O],a.hasOwnProperty(O)&&p!=null&&!c.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:Yt(e,n,O,null,c,p)}for(v in c)if(p=c[v],y=a[v],c.hasOwnProperty(v)&&(p!=null||y!=null))switch(v){case"value":ie=p;break;case"defaultValue":ue=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(h(91));break;default:p!==y&&Yt(e,n,v,p,c,y)}yn(e,ie,ue);return;case"option":for(var Ue in a)if(ie=a[Ue],a.hasOwnProperty(Ue)&&ie!=null&&!c.hasOwnProperty(Ue))switch(Ue){case"selected":e.selected=!1;break;default:Yt(e,n,Ue,null,c,ie)}for(k in c)if(ie=c[k],ue=a[k],c.hasOwnProperty(k)&&ie!==ue&&(ie!=null||ue!=null))switch(k){case"selected":e.selected=ie&&typeof ie!="function"&&typeof ie!="symbol";break;default:Yt(e,n,k,ie,c,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var et in a)ie=a[et],a.hasOwnProperty(et)&&ie!=null&&!c.hasOwnProperty(et)&&Yt(e,n,et,null,c,ie);for(K in c)if(ie=c[K],ue=a[K],c.hasOwnProperty(K)&&ie!==ue&&(ie!=null||ue!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(h(137,n));break;default:Yt(e,n,K,ie,c,ue)}return;default:if(Wt(n)){for(var Xt in a)ie=a[Xt],a.hasOwnProperty(Xt)&&ie!==void 0&&!c.hasOwnProperty(Xt)&&od(e,n,Xt,void 0,c,ie);for(he in c)ie=c[he],ue=a[he],!c.hasOwnProperty(he)||ie===ue||ie===void 0&&ue===void 0||od(e,n,he,ie,c,ue);return}}for(var Y in a)ie=a[Y],a.hasOwnProperty(Y)&&ie!=null&&!c.hasOwnProperty(Y)&&Yt(e,n,Y,null,c,ie);for(me in c)ie=c[me],ue=a[me],!c.hasOwnProperty(me)||ie===ue||ie==null&&ue==null||Yt(e,n,me,ie,c,ue)}function z1(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vp(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var p=a[c],y=p.transferSize,v=p.initiatorType,O=p.duration;if(y&&O&&z1(v)){for(v=0,O=p.responseEnd,c+=1;c<a.length;c++){var k=a[c],K=k.startTime;if(K>O)break;var he=k.transferSize,me=k.initiatorType;he&&z1(me)&&(k=k.responseEnd,v+=he*(k<O?1:(O-K)/(k-K)))}if(--c,n+=8*(y+v)/(p.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var ld=null,cd=null;function Jl(e){return e.nodeType===9?e:e.ownerDocument}function U1(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function F1(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function ud(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var dd=null;function Tp(){var e=window.event;return e&&e.type==="popstate"?e===dd?!1:(dd=e,!0):(dd=null,!1)}var P1=typeof setTimeout=="function"?setTimeout:void 0,Np=typeof clearTimeout=="function"?clearTimeout:void 0,H1=typeof Promise=="function"?Promise:void 0,Ip=typeof queueMicrotask=="function"?queueMicrotask:typeof H1<"u"?function(e){return H1.resolve(null).then(e).catch(Rp)}:P1;function Rp(e){setTimeout(function(){throw e})}function Ea(e){return e==="head"}function V1(e,n){var a=n,c=0;do{var p=a.nextSibling;if(e.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"||a==="/&"){if(c===0){e.removeChild(p),Hs(n);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")Mo(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Mo(a);for(var y=a.firstChild;y;){var v=y.nextSibling,O=y.nodeName;y[ka]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&y.rel.toLowerCase()==="stylesheet"||a.removeChild(y),y=v}}else a==="body"&&Mo(e.ownerDocument.body);a=p}while(a);Hs(n)}function G1(e,n){var a=e;e=0;do{var c=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=c}while(a)}function fd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":fd(a),ri(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function _p(e,n,a,c){for(;e.nodeType===1;){var p=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[ka])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(y=e.getAttribute("rel"),y==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(y!==p.rel||e.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(y=e.getAttribute("src"),(y!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===y)return e}else return e;if(e=Fi(e.nextSibling),e===null)break}return null}function Op(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Fi(e.nextSibling),e===null))return null;return e}function Y1(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Fi(e.nextSibling),e===null))return null;return e}function hd(e){return e.data==="$?"||e.data==="$~"}function gd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Mp(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var c=function(){n(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function Fi(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var pd=null;function X1(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return Fi(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function W1(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function q1(e,n,a){switch(n=Jl(a),e){case"html":if(e=n.documentElement,!e)throw Error(h(452));return e;case"head":if(e=n.head,!e)throw Error(h(453));return e;case"body":if(e=n.body,!e)throw Error(h(454));return e;default:throw Error(h(451))}}function Mo(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);ri(e)}var Pi=new Map,Z1=new Set;function $l(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Fr=fe.d;fe.d={f:Dp,r:Bp,D:Lp,C:jp,L:kp,m:zp,X:Fp,S:Up,M:Pp};function Dp(){var e=Fr.f(),n=Gl();return e||n}function Bp(e){var n=Ot(e);n!==null&&n.tag===5&&n.type==="form"?f0(n):Fr.r(e)}var Us=typeof document>"u"?null:document;function Q1(e,n,a){var c=Us;if(c&&typeof n=="string"&&n){var p=gt(n);p='link[rel="'+e+'"][href="'+p+'"]',typeof a=="string"&&(p+='[crossorigin="'+a+'"]'),Z1.has(p)||(Z1.add(p),e={rel:e,crossOrigin:a,href:n},c.querySelector(p)===null&&(n=c.createElement("link"),Gn(n,"link",e),dn(n),c.head.appendChild(n)))}}function Lp(e){Fr.D(e),Q1("dns-prefetch",e,null)}function jp(e,n){Fr.C(e,n),Q1("preconnect",e,n)}function kp(e,n,a){Fr.L(e,n,a);var c=Us;if(c&&e&&n){var p='link[rel="preload"][as="'+gt(n)+'"]';n==="image"&&a&&a.imageSrcSet?(p+='[imagesrcset="'+gt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(p+='[imagesizes="'+gt(a.imageSizes)+'"]')):p+='[href="'+gt(e)+'"]';var y=p;switch(n){case"style":y=Fs(e);break;case"script":y=Ps(e)}Pi.has(y)||(e=M({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),Pi.set(y,e),c.querySelector(p)!==null||n==="style"&&c.querySelector(Do(y))||n==="script"&&c.querySelector(Bo(y))||(n=c.createElement("link"),Gn(n,"link",e),dn(n),c.head.appendChild(n)))}}function zp(e,n){Fr.m(e,n);var a=Us;if(a&&e){var c=n&&typeof n.as=="string"?n.as:"script",p='link[rel="modulepreload"][as="'+gt(c)+'"][href="'+gt(e)+'"]',y=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Ps(e)}if(!Pi.has(y)&&(e=M({rel:"modulepreload",href:e},n),Pi.set(y,e),a.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Bo(y)))return}c=a.createElement("link"),Gn(c,"link",e),dn(c),a.head.appendChild(c)}}}function Up(e,n,a){Fr.S(e,n,a);var c=Us;if(c&&e){var p=Kn(c).hoistableStyles,y=Fs(e);n=n||"default";var v=p.get(y);if(!v){var O={loading:0,preload:null};if(v=c.querySelector(Do(y)))O.loading=5;else{e=M({rel:"stylesheet",href:e,"data-precedence":n},a),(a=Pi.get(y))&&xd(e,a);var k=v=c.createElement("link");dn(k),Gn(k,"link",e),k._p=new Promise(function(K,he){k.onload=K,k.onerror=he}),k.addEventListener("load",function(){O.loading|=1}),k.addEventListener("error",function(){O.loading|=2}),O.loading|=4,ec(v,n,c)}v={type:"stylesheet",instance:v,count:1,state:O},p.set(y,v)}}}function Fp(e,n){Fr.X(e,n);var a=Us;if(a&&e){var c=Kn(a).hoistableScripts,p=Ps(e),y=c.get(p);y||(y=a.querySelector(Bo(p)),y||(e=M({src:e,async:!0},n),(n=Pi.get(p))&&md(e,n),y=a.createElement("script"),dn(y),Gn(y,"link",e),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function Pp(e,n){Fr.M(e,n);var a=Us;if(a&&e){var c=Kn(a).hoistableScripts,p=Ps(e),y=c.get(p);y||(y=a.querySelector(Bo(p)),y||(e=M({src:e,async:!0,type:"module"},n),(n=Pi.get(p))&&md(e,n),y=a.createElement("script"),dn(y),Gn(y,"link",e),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function K1(e,n,a,c){var p=(p=Se.current)?$l(p):null;if(!p)throw Error(h(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=Fs(a.href),a=Kn(p).hoistableStyles,c=a.get(n),c||(c={type:"style",instance:null,count:0,state:null},a.set(n,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Fs(a.href);var y=Kn(p).hoistableStyles,v=y.get(e);if(v||(p=p.ownerDocument||p,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(e,v),(y=p.querySelector(Do(e)))&&!y._p&&(v.instance=y,v.state.loading=5),Pi.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Pi.set(e,a),y||Hp(p,e,a,v.state))),n&&c===null)throw Error(h(528,""));return v}if(n&&c!==null)throw Error(h(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Ps(a),a=Kn(p).hoistableScripts,c=a.get(n),c||(c={type:"script",instance:null,count:0,state:null},a.set(n,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(h(444,e))}}function Fs(e){return'href="'+gt(e)+'"'}function Do(e){return'link[rel="stylesheet"]['+e+"]"}function J1(e){return M({},e,{"data-precedence":e.precedence,precedence:null})}function Hp(e,n,a,c){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?c.loading=1:(n=e.createElement("link"),c.preload=n,n.addEventListener("load",function(){return c.loading|=1}),n.addEventListener("error",function(){return c.loading|=2}),Gn(n,"link",a),dn(n),e.head.appendChild(n))}function Ps(e){return'[src="'+gt(e)+'"]'}function Bo(e){return"script[async]"+e}function $1(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var c=e.querySelector('style[data-href~="'+gt(a.href)+'"]');if(c)return n.instance=c,dn(c),c;var p=M({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),dn(c),Gn(c,"style",p),ec(c,a.precedence,e),n.instance=c;case"stylesheet":p=Fs(a.href);var y=e.querySelector(Do(p));if(y)return n.state.loading|=4,n.instance=y,dn(y),y;c=J1(a),(p=Pi.get(p))&&xd(c,p),y=(e.ownerDocument||e).createElement("link"),dn(y);var v=y;return v._p=new Promise(function(O,k){v.onload=O,v.onerror=k}),Gn(y,"link",c),n.state.loading|=4,ec(y,a.precedence,e),n.instance=y;case"script":return y=Ps(a.src),(p=e.querySelector(Bo(y)))?(n.instance=p,dn(p),p):(c=a,(p=Pi.get(y))&&(c=M({},a),md(c,p)),e=e.ownerDocument||e,p=e.createElement("script"),dn(p),Gn(p,"link",c),e.head.appendChild(p),n.instance=p);case"void":return null;default:throw Error(h(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(c=n.instance,n.state.loading|=4,ec(c,a.precedence,e));return n.instance}function ec(e,n,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,y=p,v=0;v<c.length;v++){var O=c[v];if(O.dataset.precedence===n)y=O;else if(y!==p)break}y?y.parentNode.insertBefore(e,y.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function xd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function md(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var tc=null;function eh(e,n,a){if(tc===null){var c=new Map,p=tc=new Map;p.set(a,c)}else p=tc,c=p.get(a),c||(c=new Map,p.set(a,c));if(c.has(e))return c;for(c.set(e,null),a=a.getElementsByTagName(e),p=0;p<a.length;p++){var y=a[p];if(!(y[ka]||y[mn]||e==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var v=y.getAttribute(n)||"";v=e+v;var O=c.get(v);O?O.push(y):c.set(v,[y])}}return c}function th(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function Vp(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function nh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Gp(e,n,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var p=Fs(c.href),y=n.querySelector(Do(p));if(y){n=y._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=nc.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=y,dn(y);return}y=n.ownerDocument||n,c=J1(c),(p=Pi.get(p))&&xd(c,p),y=y.createElement("link"),dn(y);var v=y;v._p=new Promise(function(O,k){v.onload=O,v.onerror=k}),Gn(y,"link",c),a.instance=y}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=nc.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var yd=0;function Yp(e,n){return e.stylesheets&&e.count===0&&rc(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var c=setTimeout(function(){if(e.stylesheets&&rc(e,e.stylesheets),e.unsuspend){var y=e.unsuspend;e.unsuspend=null,y()}},6e4+n);0<e.imgBytes&&yd===0&&(yd=62500*vp());var p=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&rc(e,e.stylesheets),e.unsuspend)){var y=e.unsuspend;e.unsuspend=null,y()}},(e.imgBytes>yd?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(c),clearTimeout(p)}}:null}function nc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)rc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ic=null;function rc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ic=new Map,n.forEach(Xp,e),ic=null,nc.call(e))}function Xp(e,n){if(!(n.state.loading&4)){var a=ic.get(e);if(a)var c=a.get(null);else{a=new Map,ic.set(e,a);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var v=p[y];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),c=v)}c&&a.set(null,c)}p=n.instance,v=p.getAttribute("data-precedence"),y=a.get(v)||c,y===c&&a.set(null,p),a.set(v,p),this.count++,c=nc.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),y?y.parentNode.insertBefore(p,y.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),n.state.loading|=4}}var Lo={$$typeof:X,Provider:null,Consumer:null,_currentValue:Ge,_currentValue2:Ge,_threadCount:0};function Wp(e,n,a,c,p,y,v,O,k){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=rr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rr(0),this.hiddenUpdates=rr(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function ih(e,n,a,c,p,y,v,O,k,K,he,me){return e=new Wp(e,n,a,v,k,K,he,me,O),n=1,y===!0&&(n|=24),y=Ci(3,null,null,n),e.current=y,y.stateNode=e,n=Kc(),n.refCount++,e.pooledCache=n,n.refCount++,y.memoizedState={element:c,isDehydrated:a,cache:n},tu(y),e}function rh(e){return e?(e=ys,e):ys}function ah(e,n,a,c,p,y){p=rh(p),c.context===null?c.context=p:c.pendingContext=p,c=ua(n),c.payload={element:a},y=y===void 0?null:y,y!==null&&(c.callback=y),a=da(e,c,n),a!==null&&(fi(a,e,n),ho(a,e,n))}function sh(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function bd(e,n){sh(e,n),(e=e.alternate)&&sh(e,n)}function oh(e){if(e.tag===13||e.tag===31){var n=Xa(e,67108864);n!==null&&fi(n,e,67108864),bd(e,67108864)}}function lh(e){if(e.tag===13||e.tag===31){var n=vi();n=kn(n);var a=Xa(e,n);a!==null&&fi(a,e,n),bd(e,n)}}var ac=!0;function qp(e,n,a,c){var p=$.T;$.T=null;var y=fe.p;try{fe.p=2,Cd(e,n,a,c)}finally{fe.p=y,$.T=p}}function Zp(e,n,a,c){var p=$.T;$.T=null;var y=fe.p;try{fe.p=8,Cd(e,n,a,c)}finally{fe.p=y,$.T=p}}function Cd(e,n,a,c){if(ac){var p=Ed(c);if(p===null)sd(e,n,c,sc,a),uh(e,c);else if(Kp(p,e,n,a,c))c.stopPropagation();else if(uh(e,c),n&4&&-1<Qp.indexOf(e)){for(;p!==null;){var y=Ot(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var v=ht(y.pendingLanes);if(v!==0){var O=y;for(O.pendingLanes|=2,O.entangledLanes|=2;v;){var k=1<<31-V(v);O.entanglements[1]|=k,v&=~k}gr(y),(Dt&6)===0&&(Hl=Jt()+500,Ro(0))}}break;case 31:case 13:O=Xa(y,2),O!==null&&fi(O,y,2),Gl(),bd(y,2)}if(y=Ed(c),y===null&&sd(e,n,c,sc,a),y===p)break;p=y}p!==null&&c.stopPropagation()}else sd(e,n,c,null,a)}}function Ed(e){return e=Ks(e),Ad(e)}var sc=null;function Ad(e){if(sc=null,e=un(e),e!==null){var n=b(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=w(n),e!==null)return e;e=null}else if(a===31){if(e=_(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return sc=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ba()){case Xn:return 2;case La:return 8;case qn:case On:return 32;case Ri:return 268435456;default:return 32}default:return 32}}var Sd=!1,Aa=null,Sa=null,wa=null,jo=new Map,ko=new Map,va=[],Qp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function uh(e,n){switch(e){case"focusin":case"focusout":Aa=null;break;case"dragenter":case"dragleave":Sa=null;break;case"mouseover":case"mouseout":wa=null;break;case"pointerover":case"pointerout":jo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ko.delete(n.pointerId)}}function zo(e,n,a,c,p,y){return e===null||e.nativeEvent!==y?(e={blockedOn:n,domEventName:a,eventSystemFlags:c,nativeEvent:y,targetContainers:[p]},n!==null&&(n=Ot(n),n!==null&&oh(n)),e):(e.eventSystemFlags|=c,n=e.targetContainers,p!==null&&n.indexOf(p)===-1&&n.push(p),e)}function Kp(e,n,a,c,p){switch(n){case"focusin":return Aa=zo(Aa,e,n,a,c,p),!0;case"dragenter":return Sa=zo(Sa,e,n,a,c,p),!0;case"mouseover":return wa=zo(wa,e,n,a,c,p),!0;case"pointerover":var y=p.pointerId;return jo.set(y,zo(jo.get(y)||null,e,n,a,c,p)),!0;case"gotpointercapture":return y=p.pointerId,ko.set(y,zo(ko.get(y)||null,e,n,a,c,p)),!0}return!1}function dh(e){var n=un(e.target);if(n!==null){var a=b(n);if(a!==null){if(n=a.tag,n===13){if(n=w(a),n!==null){e.blockedOn=n,je(e.priority,function(){lh(a)});return}}else if(n===31){if(n=_(a),n!==null){e.blockedOn=n,je(e.priority,function(){lh(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function oc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=Ed(e.nativeEvent);if(a===null){a=e.nativeEvent;var c=new a.constructor(a.type,a);za=c,a.target.dispatchEvent(c),za=null}else return n=Ot(a),n!==null&&oh(n),e.blockedOn=a,!1;n.shift()}return!0}function fh(e,n,a){oc(e)&&a.delete(n)}function Jp(){Sd=!1,Aa!==null&&oc(Aa)&&(Aa=null),Sa!==null&&oc(Sa)&&(Sa=null),wa!==null&&oc(wa)&&(wa=null),jo.forEach(fh),ko.forEach(fh)}function lc(e,n){e.blockedOn===n&&(e.blockedOn=null,Sd||(Sd=!0,d.unstable_scheduleCallback(d.unstable_NormalPriority,Jp)))}var cc=null;function hh(e){cc!==e&&(cc=e,d.unstable_scheduleCallback(d.unstable_NormalPriority,function(){cc===e&&(cc=null);for(var n=0;n<e.length;n+=3){var a=e[n],c=e[n+1],p=e[n+2];if(typeof c!="function"){if(Ad(c||a)===null)continue;break}var y=Ot(a);y!==null&&(e.splice(n,3),n-=3,Eu(y,{pending:!0,data:p,method:a.method,action:c},c,p))}}))}function Hs(e){function n(k){return lc(k,e)}Aa!==null&&lc(Aa,e),Sa!==null&&lc(Sa,e),wa!==null&&lc(wa,e),jo.forEach(n),ko.forEach(n);for(var a=0;a<va.length;a++){var c=va[a];c.blockedOn===e&&(c.blockedOn=null)}for(;0<va.length&&(a=va[0],a.blockedOn===null);)dh(a),a.blockedOn===null&&va.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var p=a[c],y=a[c+1],v=p[Ft]||null;if(typeof y=="function")v||hh(a);else if(v){var O=null;if(y&&y.hasAttribute("formAction")){if(p=y,v=y[Ft]||null)O=v.formAction;else if(Ad(p)!==null)continue}else O=v.action;typeof O=="function"?a[c+1]=O:(a.splice(c,3),c-=3),hh(a)}}}function gh(){function e(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(v){return p=v})},focusReset:"manual",scroll:"manual"})}function n(){p!==null&&(p(),p=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,p=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),p!==null&&(p(),p=null)}}}function wd(e){this._internalRoot=e}uc.prototype.render=wd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(h(409));var a=n.current,c=vi();ah(a,c,e,n,null,null)},uc.prototype.unmount=wd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;ah(e.current,2,null,e,null,null),Gl(),n[gi]=null}};function uc(e){this._internalRoot=e}uc.prototype.unstable_scheduleHydration=function(e){if(e){var n=Zn();e={blockedOn:null,target:e,priority:n};for(var a=0;a<va.length&&n!==0&&n<va[a].priority;a++);va.splice(a,0,e),a===0&&dh(e)}};var ph=l.version;if(ph!=="19.2.0")throw Error(h(527,ph,"19.2.0"));fe.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(h(188)):(e=Object.keys(e).join(","),Error(h(268,e)));return e=A(n),e=e!==null?D(e):null,e=e===null?null:e.stateNode,e};var $p={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dc.isDisabled&&dc.supportsFiber)try{St=dc.inject($p),Ne=dc}catch{}}return Fo.createRoot=function(e,n){if(!C(e))throw Error(h(299));var a=!1,c="",p=A0,y=S0,v=w0;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(p=n.onUncaughtError),n.onCaughtError!==void 0&&(y=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=ih(e,1,!1,null,null,a,c,null,p,y,v,gh),e[gi]=n.current,ad(e),new wd(n)},Fo.hydrateRoot=function(e,n,a){if(!C(e))throw Error(h(299));var c=!1,p="",y=A0,v=S0,O=w0,k=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(O=a.onRecoverableError),a.formState!==void 0&&(k=a.formState)),n=ih(e,1,!0,n,a??null,c,p,k,y,v,O,gh),n.context=rh(null),a=n.current,c=vi(),c=kn(c),p=ua(c),p.callback=null,da(a,p,c),a=c,n.current.lanes=a,ar(n,a),gr(n),e[gi]=n.current,ad(e),new uc(n)},Fo.version="19.2.0",Fo}var vh;function dx(){if(vh)return Nd.exports;vh=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(l){console.error(l)}}return d(),Nd.exports=ux(),Nd.exports}var fx=dx();/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Th="popstate";function hx(d={}){function l(h,C){let{pathname:b,search:w,hash:_}=h.location;return kd("",{pathname:b,search:w,hash:_},C.state&&C.state.usr||null,C.state&&C.state.key||"default")}function u(h,C){return typeof C=="string"?C:Xo(C)}return px(l,u,null,d)}function on(d,l){if(d===!1||d===null||typeof d>"u")throw new Error(l)}function tr(d,l){if(!d){typeof console<"u"&&console.warn(l);try{throw new Error(l)}catch{}}}function gx(){return Math.random().toString(36).substring(2,10)}function Nh(d,l){return{usr:d.state,key:d.key,idx:l}}function kd(d,l,u=null,h){return{pathname:typeof d=="string"?d:d.pathname,search:"",hash:"",...typeof l=="string"?Xs(l):l,state:u,key:l&&l.key||h||gx()}}function Xo({pathname:d="/",search:l="",hash:u=""}){return l&&l!=="?"&&(d+=l.charAt(0)==="?"?l:"?"+l),u&&u!=="#"&&(d+=u.charAt(0)==="#"?u:"#"+u),d}function Xs(d){let l={};if(d){let u=d.indexOf("#");u>=0&&(l.hash=d.substring(u),d=d.substring(0,u));let h=d.indexOf("?");h>=0&&(l.search=d.substring(h),d=d.substring(0,h)),d&&(l.pathname=d)}return l}function px(d,l,u,h={}){let{window:C=document.defaultView,v5Compat:b=!1}=h,w=C.history,_="POP",I=null,A=D();A==null&&(A=0,w.replaceState({...w.state,idx:A},""));function D(){return(w.state||{idx:null}).idx}function M(){_="POP";let J=D(),xe=J==null?null:J-A;A=J,I&&I({action:_,location:ne.location,delta:xe})}function P(J,xe){_="PUSH";let ce=kd(ne.location,J,xe);A=D()+1;let X=Nh(ce,A),Ee=ne.createHref(ce);try{w.pushState(X,"",Ee)}catch(Fe){if(Fe instanceof DOMException&&Fe.name==="DataCloneError")throw Fe;C.location.assign(Ee)}b&&I&&I({action:_,location:ne.location,delta:1})}function G(J,xe){_="REPLACE";let ce=kd(ne.location,J,xe);A=D();let X=Nh(ce,A),Ee=ne.createHref(ce);w.replaceState(X,"",Ee),b&&I&&I({action:_,location:ne.location,delta:0})}function ee(J){return xx(J)}let ne={get action(){return _},get location(){return d(C,w)},listen(J){if(I)throw new Error("A history only accepts one active listener");return C.addEventListener(Th,M),I=J,()=>{C.removeEventListener(Th,M),I=null}},createHref(J){return l(C,J)},createURL:ee,encodeLocation(J){let xe=ee(J);return{pathname:xe.pathname,search:xe.search,hash:xe.hash}},push:P,replace:G,go(J){return w.go(J)}};return ne}function xx(d,l=!1){let u="http://localhost";typeof window<"u"&&(u=window.location.origin!=="null"?window.location.origin:window.location.href),on(u,"No window.location.(origin|href) available to create URL");let h=typeof d=="string"?d:Xo(d);return h=h.replace(/ $/,"%20"),!l&&h.startsWith("//")&&(h=u+h),new URL(h,u)}function ig(d,l,u="/"){return mx(d,l,u,!1)}function mx(d,l,u,h){let C=typeof l=="string"?Xs(l):l,b=Vr(C.pathname||"/",u);if(b==null)return null;let w=rg(d);yx(w);let _=null;for(let I=0;_==null&&I<w.length;++I){let A=Rx(b);_=Nx(w[I],A,h)}return _}function rg(d,l=[],u=[],h="",C=!1){let b=(w,_,I=C,A)=>{let D={relativePath:A===void 0?w.path||"":A,caseSensitive:w.caseSensitive===!0,childrenIndex:_,route:w};if(D.relativePath.startsWith("/")){if(!D.relativePath.startsWith(h)&&I)return;on(D.relativePath.startsWith(h),`Absolute route path "${D.relativePath}" nested under path "${h}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),D.relativePath=D.relativePath.slice(h.length)}let M=Hr([h,D.relativePath]),P=u.concat(D);w.children&&w.children.length>0&&(on(w.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${M}".`),rg(w.children,l,P,M,I)),!(w.path==null&&!w.index)&&l.push({path:M,score:vx(M,w.index),routesMeta:P})};return d.forEach((w,_)=>{if(w.path===""||!w.path?.includes("?"))b(w,_);else for(let I of ag(w.path))b(w,_,!0,I)}),l}function ag(d){let l=d.split("/");if(l.length===0)return[];let[u,...h]=l,C=u.endsWith("?"),b=u.replace(/\?$/,"");if(h.length===0)return C?[b,""]:[b];let w=ag(h.join("/")),_=[];return _.push(...w.map(I=>I===""?b:[b,I].join("/"))),C&&_.push(...w),_.map(I=>d.startsWith("/")&&I===""?"/":I)}function yx(d){d.sort((l,u)=>l.score!==u.score?u.score-l.score:Tx(l.routesMeta.map(h=>h.childrenIndex),u.routesMeta.map(h=>h.childrenIndex)))}var bx=/^:[\w-]+$/,Cx=3,Ex=2,Ax=1,Sx=10,wx=-2,Ih=d=>d==="*";function vx(d,l){let u=d.split("/"),h=u.length;return u.some(Ih)&&(h+=wx),l&&(h+=Ex),u.filter(C=>!Ih(C)).reduce((C,b)=>C+(bx.test(b)?Cx:b===""?Ax:Sx),h)}function Tx(d,l){return d.length===l.length&&d.slice(0,-1).every((h,C)=>h===l[C])?d[d.length-1]-l[l.length-1]:0}function Nx(d,l,u=!1){let{routesMeta:h}=d,C={},b="/",w=[];for(let _=0;_<h.length;++_){let I=h[_],A=_===h.length-1,D=b==="/"?l:l.slice(b.length)||"/",M=Ac({path:I.relativePath,caseSensitive:I.caseSensitive,end:A},D),P=I.route;if(!M&&A&&u&&!h[h.length-1].route.index&&(M=Ac({path:I.relativePath,caseSensitive:I.caseSensitive,end:!1},D)),!M)return null;Object.assign(C,M.params),w.push({params:C,pathname:Hr([b,M.pathname]),pathnameBase:Dx(Hr([b,M.pathnameBase])),route:P}),M.pathnameBase!=="/"&&(b=Hr([b,M.pathnameBase]))}return w}function Ac(d,l){typeof d=="string"&&(d={path:d,caseSensitive:!1,end:!0});let[u,h]=Ix(d.path,d.caseSensitive,d.end),C=l.match(u);if(!C)return null;let b=C[0],w=b.replace(/(.)\/+$/,"$1"),_=C.slice(1);return{params:h.reduce((A,{paramName:D,isOptional:M},P)=>{if(D==="*"){let ee=_[P]||"";w=b.slice(0,b.length-ee.length).replace(/(.)\/+$/,"$1")}const G=_[P];return M&&!G?A[D]=void 0:A[D]=(G||"").replace(/%2F/g,"/"),A},{}),pathname:b,pathnameBase:w,pattern:d}}function Ix(d,l=!1,u=!0){tr(d==="*"||!d.endsWith("*")||d.endsWith("/*"),`Route path "${d}" will be treated as if it were "${d.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${d.replace(/\*$/,"/*")}".`);let h=[],C="^"+d.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(w,_,I)=>(h.push({paramName:_,isOptional:I!=null}),I?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return d.endsWith("*")?(h.push({paramName:"*"}),C+=d==="*"||d==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):u?C+="\\/*$":d!==""&&d!=="/"&&(C+="(?:(?=\\/|$))"),[new RegExp(C,l?void 0:"i"),h]}function Rx(d){try{return d.split("/").map(l=>decodeURIComponent(l).replace(/\//g,"%2F")).join("/")}catch(l){return tr(!1,`The URL path "${d}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${l}).`),d}}function Vr(d,l){if(l==="/")return d;if(!d.toLowerCase().startsWith(l.toLowerCase()))return null;let u=l.endsWith("/")?l.length-1:l.length,h=d.charAt(u);return h&&h!=="/"?null:d.slice(u)||"/"}function _x(d,l="/"){let{pathname:u,search:h="",hash:C=""}=typeof d=="string"?Xs(d):d;return{pathname:u?u.startsWith("/")?u:Ox(u,l):l,search:Bx(h),hash:Lx(C)}}function Ox(d,l){let u=l.replace(/\/+$/,"").split("/");return d.split("/").forEach(C=>{C===".."?u.length>1&&u.pop():C!=="."&&u.push(C)}),u.length>1?u.join("/"):"/"}function Od(d,l,u,h){return`Cannot include a '${d}' character in a manually specified \`to.${l}\` field [${JSON.stringify(h)}].  Please separate it out to the \`to.${u}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Mx(d){return d.filter((l,u)=>u===0||l.route.path&&l.route.path.length>0)}function Qd(d){let l=Mx(d);return l.map((u,h)=>h===l.length-1?u.pathname:u.pathnameBase)}function Kd(d,l,u,h=!1){let C;typeof d=="string"?C=Xs(d):(C={...d},on(!C.pathname||!C.pathname.includes("?"),Od("?","pathname","search",C)),on(!C.pathname||!C.pathname.includes("#"),Od("#","pathname","hash",C)),on(!C.search||!C.search.includes("#"),Od("#","search","hash",C)));let b=d===""||C.pathname==="",w=b?"/":C.pathname,_;if(w==null)_=u;else{let M=l.length-1;if(!h&&w.startsWith("..")){let P=w.split("/");for(;P[0]==="..";)P.shift(),M-=1;C.pathname=P.join("/")}_=M>=0?l[M]:"/"}let I=_x(C,_),A=w&&w!=="/"&&w.endsWith("/"),D=(b||w===".")&&u.endsWith("/");return!I.pathname.endsWith("/")&&(A||D)&&(I.pathname+="/"),I}var Hr=d=>d.join("/").replace(/\/\/+/g,"/"),Dx=d=>d.replace(/\/+$/,"").replace(/^\/*/,"/"),Bx=d=>!d||d==="?"?"":d.startsWith("?")?d:"?"+d,Lx=d=>!d||d==="#"?"":d.startsWith("#")?d:"#"+d;function jx(d){return d!=null&&typeof d.status=="number"&&typeof d.statusText=="string"&&typeof d.internal=="boolean"&&"data"in d}var sg=["POST","PUT","PATCH","DELETE"];new Set(sg);var kx=["GET",...sg];new Set(kx);var Ws=j.createContext(null);Ws.displayName="DataRouter";var Tc=j.createContext(null);Tc.displayName="DataRouterState";j.createContext(!1);var og=j.createContext({isTransitioning:!1});og.displayName="ViewTransition";var zx=j.createContext(new Map);zx.displayName="Fetchers";var Ux=j.createContext(null);Ux.displayName="Await";var nr=j.createContext(null);nr.displayName="Navigation";var Wo=j.createContext(null);Wo.displayName="Location";var ir=j.createContext({outlet:null,matches:[],isDataRoute:!1});ir.displayName="Route";var Jd=j.createContext(null);Jd.displayName="RouteError";function Fx(d,{relative:l}={}){on(qs(),"useHref() may be used only in the context of a <Router> component.");let{basename:u,navigator:h}=j.useContext(nr),{hash:C,pathname:b,search:w}=qo(d,{relative:l}),_=b;return u!=="/"&&(_=b==="/"?u:Hr([u,b])),h.createHref({pathname:_,search:w,hash:C})}function qs(){return j.useContext(Wo)!=null}function Oa(){return on(qs(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Wo).location}var lg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function cg(d){j.useContext(nr).static||j.useLayoutEffect(d)}function $d(){let{isDataRoute:d}=j.useContext(ir);return d?em():Px()}function Px(){on(qs(),"useNavigate() may be used only in the context of a <Router> component.");let d=j.useContext(Ws),{basename:l,navigator:u}=j.useContext(nr),{matches:h}=j.useContext(ir),{pathname:C}=Oa(),b=JSON.stringify(Qd(h)),w=j.useRef(!1);return cg(()=>{w.current=!0}),j.useCallback((I,A={})=>{if(tr(w.current,lg),!w.current)return;if(typeof I=="number"){u.go(I);return}let D=Kd(I,JSON.parse(b),C,A.relative==="path");d==null&&l!=="/"&&(D.pathname=D.pathname==="/"?l:Hr([l,D.pathname])),(A.replace?u.replace:u.push)(D,A.state,A)},[l,u,b,C,d])}j.createContext(null);function Hx(){let{matches:d}=j.useContext(ir),l=d[d.length-1];return l?l.params:{}}function qo(d,{relative:l}={}){let{matches:u}=j.useContext(ir),{pathname:h}=Oa(),C=JSON.stringify(Qd(u));return j.useMemo(()=>Kd(d,JSON.parse(C),h,l==="path"),[d,C,h,l])}function Vx(d,l){return ug(d,l)}function ug(d,l,u,h,C){on(qs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:b}=j.useContext(nr),{matches:w}=j.useContext(ir),_=w[w.length-1],I=_?_.params:{},A=_?_.pathname:"/",D=_?_.pathnameBase:"/",M=_&&_.route;{let ce=M&&M.path||"";dg(A,!M||ce.endsWith("*")||ce.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${A}" (under <Route path="${ce}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ce}"> to <Route path="${ce==="/"?"*":`${ce}/*`}">.`)}let P=Oa(),G;if(l){let ce=typeof l=="string"?Xs(l):l;on(D==="/"||ce.pathname?.startsWith(D),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${D}" but pathname "${ce.pathname}" was given in the \`location\` prop.`),G=ce}else G=P;let ee=G.pathname||"/",ne=ee;if(D!=="/"){let ce=D.replace(/^\//,"").split("/");ne="/"+ee.replace(/^\//,"").split("/").slice(ce.length).join("/")}let J=ig(d,{pathname:ne});tr(M||J!=null,`No routes matched location "${G.pathname}${G.search}${G.hash}" `),tr(J==null||J[J.length-1].route.element!==void 0||J[J.length-1].route.Component!==void 0||J[J.length-1].route.lazy!==void 0,`Matched leaf route at location "${G.pathname}${G.search}${G.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let xe=qx(J&&J.map(ce=>Object.assign({},ce,{params:Object.assign({},I,ce.params),pathname:Hr([D,b.encodeLocation?b.encodeLocation(ce.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ce.pathname]),pathnameBase:ce.pathnameBase==="/"?D:Hr([D,b.encodeLocation?b.encodeLocation(ce.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ce.pathnameBase])})),w,u,h,C);return l&&xe?j.createElement(Wo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...G},navigationType:"POP"}},xe):xe}function Gx(){let d=$x(),l=jx(d)?`${d.status} ${d.statusText}`:d instanceof Error?d.message:JSON.stringify(d),u=d instanceof Error?d.stack:null,h="rgba(200,200,200, 0.5)",C={padding:"0.5rem",backgroundColor:h},b={padding:"2px 4px",backgroundColor:h},w=null;return console.error("Error handled by React Router default ErrorBoundary:",d),w=j.createElement(j.Fragment,null,j.createElement("p",null,"💿 Hey developer 👋"),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:b},"ErrorBoundary")," or"," ",j.createElement("code",{style:b},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},l),u?j.createElement("pre",{style:C},u):null,w)}var Yx=j.createElement(Gx,null),Xx=class extends j.Component{constructor(d){super(d),this.state={location:d.location,revalidation:d.revalidation,error:d.error}}static getDerivedStateFromError(d){return{error:d}}static getDerivedStateFromProps(d,l){return l.location!==d.location||l.revalidation!=="idle"&&d.revalidation==="idle"?{error:d.error,location:d.location,revalidation:d.revalidation}:{error:d.error!==void 0?d.error:l.error,location:l.location,revalidation:d.revalidation||l.revalidation}}componentDidCatch(d,l){this.props.unstable_onError?this.props.unstable_onError(d,l):console.error("React Router caught the following error during render",d)}render(){return this.state.error!==void 0?j.createElement(ir.Provider,{value:this.props.routeContext},j.createElement(Jd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Wx({routeContext:d,match:l,children:u}){let h=j.useContext(Ws);return h&&h.static&&h.staticContext&&(l.route.errorElement||l.route.ErrorBoundary)&&(h.staticContext._deepestRenderedBoundaryId=l.route.id),j.createElement(ir.Provider,{value:d},u)}function qx(d,l=[],u=null,h=null,C=null){if(d==null){if(!u)return null;if(u.errors)d=u.matches;else if(l.length===0&&!u.initialized&&u.matches.length>0)d=u.matches;else return null}let b=d,w=u?.errors;if(w!=null){let A=b.findIndex(D=>D.route.id&&w?.[D.route.id]!==void 0);on(A>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(w).join(",")}`),b=b.slice(0,Math.min(b.length,A+1))}let _=!1,I=-1;if(u)for(let A=0;A<b.length;A++){let D=b[A];if((D.route.HydrateFallback||D.route.hydrateFallbackElement)&&(I=A),D.route.id){let{loaderData:M,errors:P}=u,G=D.route.loader&&!M.hasOwnProperty(D.route.id)&&(!P||P[D.route.id]===void 0);if(D.route.lazy||G){_=!0,I>=0?b=b.slice(0,I+1):b=[b[0]];break}}}return b.reduceRight((A,D,M)=>{let P,G=!1,ee=null,ne=null;u&&(P=w&&D.route.id?w[D.route.id]:void 0,ee=D.route.errorElement||Yx,_&&(I<0&&M===0?(dg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),G=!0,ne=null):I===M&&(G=!0,ne=D.route.hydrateFallbackElement||null)));let J=l.concat(b.slice(0,M+1)),xe=()=>{let ce;return P?ce=ee:G?ce=ne:D.route.Component?ce=j.createElement(D.route.Component,null):D.route.element?ce=D.route.element:ce=A,j.createElement(Wx,{match:D,routeContext:{outlet:A,matches:J,isDataRoute:u!=null},children:ce})};return u&&(D.route.ErrorBoundary||D.route.errorElement||M===0)?j.createElement(Xx,{location:u.location,revalidation:u.revalidation,component:ee,error:P,children:xe(),routeContext:{outlet:null,matches:J,isDataRoute:!0},unstable_onError:h}):xe()},null)}function ef(d){return`${d} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Zx(d){let l=j.useContext(Ws);return on(l,ef(d)),l}function Qx(d){let l=j.useContext(Tc);return on(l,ef(d)),l}function Kx(d){let l=j.useContext(ir);return on(l,ef(d)),l}function tf(d){let l=Kx(d),u=l.matches[l.matches.length-1];return on(u.route.id,`${d} can only be used on routes that contain a unique "id"`),u.route.id}function Jx(){return tf("useRouteId")}function $x(){let d=j.useContext(Jd),l=Qx("useRouteError"),u=tf("useRouteError");return d!==void 0?d:l.errors?.[u]}function em(){let{router:d}=Zx("useNavigate"),l=tf("useNavigate"),u=j.useRef(!1);return cg(()=>{u.current=!0}),j.useCallback(async(C,b={})=>{tr(u.current,lg),u.current&&(typeof C=="number"?d.navigate(C):await d.navigate(C,{fromRouteId:l,...b}))},[d,l])}var Rh={};function dg(d,l,u){!l&&!Rh[d]&&(Rh[d]=!0,tr(!1,u))}j.memo(tm);function tm({routes:d,future:l,state:u,unstable_onError:h}){return ug(d,void 0,u,h,l)}function zd({to:d,replace:l,state:u,relative:h}){on(qs(),"<Navigate> may be used only in the context of a <Router> component.");let{static:C}=j.useContext(nr);tr(!C,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:b}=j.useContext(ir),{pathname:w}=Oa(),_=$d(),I=Kd(d,Qd(b),w,h==="path"),A=JSON.stringify(I);return j.useEffect(()=>{_(JSON.parse(A),{replace:l,state:u,relative:h})},[_,A,h,l,u]),null}function Ia(d){on(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function nm({basename:d="/",children:l=null,location:u,navigationType:h="POP",navigator:C,static:b=!1}){on(!qs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let w=d.replace(/^\/*/,"/"),_=j.useMemo(()=>({basename:w,navigator:C,static:b,future:{}}),[w,C,b]);typeof u=="string"&&(u=Xs(u));let{pathname:I="/",search:A="",hash:D="",state:M=null,key:P="default"}=u,G=j.useMemo(()=>{let ee=Vr(I,w);return ee==null?null:{location:{pathname:ee,search:A,hash:D,state:M,key:P},navigationType:h}},[w,I,A,D,M,P,h]);return tr(G!=null,`<Router basename="${w}"> is not able to match the URL "${I}${A}${D}" because it does not start with the basename, so the <Router> won't render anything.`),G==null?null:j.createElement(nr.Provider,{value:_},j.createElement(Wo.Provider,{children:l,value:G}))}function im({children:d,location:l}){return Vx(Ud(d),l)}function Ud(d,l=[]){let u=[];return j.Children.forEach(d,(h,C)=>{if(!j.isValidElement(h))return;let b=[...l,C];if(h.type===j.Fragment){u.push.apply(u,Ud(h.props.children,b));return}on(h.type===Ia,`[${typeof h.type=="string"?h.type:h.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),on(!h.props.index||!h.props.children,"An index route cannot have child routes.");let w={id:h.props.id||b.join("-"),caseSensitive:h.props.caseSensitive,element:h.props.element,Component:h.props.Component,index:h.props.index,path:h.props.path,middleware:h.props.middleware,loader:h.props.loader,action:h.props.action,hydrateFallbackElement:h.props.hydrateFallbackElement,HydrateFallback:h.props.HydrateFallback,errorElement:h.props.errorElement,ErrorBoundary:h.props.ErrorBoundary,hasErrorBoundary:h.props.hasErrorBoundary===!0||h.props.ErrorBoundary!=null||h.props.errorElement!=null,shouldRevalidate:h.props.shouldRevalidate,handle:h.props.handle,lazy:h.props.lazy};h.props.children&&(w.children=Ud(h.props.children,b)),u.push(w)}),u}var xc="get",mc="application/x-www-form-urlencoded";function Nc(d){return d!=null&&typeof d.tagName=="string"}function rm(d){return Nc(d)&&d.tagName.toLowerCase()==="button"}function am(d){return Nc(d)&&d.tagName.toLowerCase()==="form"}function sm(d){return Nc(d)&&d.tagName.toLowerCase()==="input"}function om(d){return!!(d.metaKey||d.altKey||d.ctrlKey||d.shiftKey)}function lm(d,l){return d.button===0&&(!l||l==="_self")&&!om(d)}var hc=null;function cm(){if(hc===null)try{new FormData(document.createElement("form"),0),hc=!1}catch{hc=!0}return hc}var um=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Md(d){return d!=null&&!um.has(d)?(tr(!1,`"${d}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${mc}"`),null):d}function dm(d,l){let u,h,C,b,w;if(am(d)){let _=d.getAttribute("action");h=_?Vr(_,l):null,u=d.getAttribute("method")||xc,C=Md(d.getAttribute("enctype"))||mc,b=new FormData(d)}else if(rm(d)||sm(d)&&(d.type==="submit"||d.type==="image")){let _=d.form;if(_==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let I=d.getAttribute("formaction")||_.getAttribute("action");if(h=I?Vr(I,l):null,u=d.getAttribute("formmethod")||_.getAttribute("method")||xc,C=Md(d.getAttribute("formenctype"))||Md(_.getAttribute("enctype"))||mc,b=new FormData(_,d),!cm()){let{name:A,type:D,value:M}=d;if(D==="image"){let P=A?`${A}.`:"";b.append(`${P}x`,"0"),b.append(`${P}y`,"0")}else A&&b.append(A,M)}}else{if(Nc(d))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');u=xc,h=null,C=mc,w=d}return b&&C==="text/plain"&&(w=b,b=void 0),{action:h,method:u.toLowerCase(),encType:C,formData:b,body:w}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function nf(d,l){if(d===!1||d===null||typeof d>"u")throw new Error(l)}function fm(d,l,u){let h=typeof d=="string"?new URL(d,typeof window>"u"?"server://singlefetch/":window.location.origin):d;return h.pathname==="/"?h.pathname=`_root.${u}`:l&&Vr(h.pathname,l)==="/"?h.pathname=`${l.replace(/\/$/,"")}/_root.${u}`:h.pathname=`${h.pathname.replace(/\/$/,"")}.${u}`,h}async function hm(d,l){if(d.id in l)return l[d.id];try{let u=await import(d.module);return l[d.id]=u,u}catch(u){return console.error(`Error loading route module \`${d.module}\`, reloading page...`),console.error(u),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gm(d){return d==null?!1:d.href==null?d.rel==="preload"&&typeof d.imageSrcSet=="string"&&typeof d.imageSizes=="string":typeof d.rel=="string"&&typeof d.href=="string"}async function pm(d,l,u){let h=await Promise.all(d.map(async C=>{let b=l.routes[C.route.id];if(b){let w=await hm(b,u);return w.links?w.links():[]}return[]}));return bm(h.flat(1).filter(gm).filter(C=>C.rel==="stylesheet"||C.rel==="preload").map(C=>C.rel==="stylesheet"?{...C,rel:"prefetch",as:"style"}:{...C,rel:"prefetch"}))}function _h(d,l,u,h,C,b){let w=(I,A)=>u[A]?I.route.id!==u[A].route.id:!0,_=(I,A)=>u[A].pathname!==I.pathname||u[A].route.path?.endsWith("*")&&u[A].params["*"]!==I.params["*"];return b==="assets"?l.filter((I,A)=>w(I,A)||_(I,A)):b==="data"?l.filter((I,A)=>{let D=h.routes[I.route.id];if(!D||!D.hasLoader)return!1;if(w(I,A)||_(I,A))return!0;if(I.route.shouldRevalidate){let M=I.route.shouldRevalidate({currentUrl:new URL(C.pathname+C.search+C.hash,window.origin),currentParams:u[0]?.params||{},nextUrl:new URL(d,window.origin),nextParams:I.params,defaultShouldRevalidate:!0});if(typeof M=="boolean")return M}return!0}):[]}function xm(d,l,{includeHydrateFallback:u}={}){return mm(d.map(h=>{let C=l.routes[h.route.id];if(!C)return[];let b=[C.module];return C.clientActionModule&&(b=b.concat(C.clientActionModule)),C.clientLoaderModule&&(b=b.concat(C.clientLoaderModule)),u&&C.hydrateFallbackModule&&(b=b.concat(C.hydrateFallbackModule)),C.imports&&(b=b.concat(C.imports)),b}).flat(1))}function mm(d){return[...new Set(d)]}function ym(d){let l={},u=Object.keys(d).sort();for(let h of u)l[h]=d[h];return l}function bm(d,l){let u=new Set;return new Set(l),d.reduce((h,C)=>{let b=JSON.stringify(ym(C));return u.has(b)||(u.add(b),h.push({key:b,link:C})),h},[])}function fg(){let d=j.useContext(Ws);return nf(d,"You must render this element inside a <DataRouterContext.Provider> element"),d}function Cm(){let d=j.useContext(Tc);return nf(d,"You must render this element inside a <DataRouterStateContext.Provider> element"),d}var rf=j.createContext(void 0);rf.displayName="FrameworkContext";function hg(){let d=j.useContext(rf);return nf(d,"You must render this element inside a <HydratedRouter> element"),d}function Em(d,l){let u=j.useContext(rf),[h,C]=j.useState(!1),[b,w]=j.useState(!1),{onFocus:_,onBlur:I,onMouseEnter:A,onMouseLeave:D,onTouchStart:M}=l,P=j.useRef(null);j.useEffect(()=>{if(d==="render"&&w(!0),d==="viewport"){let ne=xe=>{xe.forEach(ce=>{w(ce.isIntersecting)})},J=new IntersectionObserver(ne,{threshold:.5});return P.current&&J.observe(P.current),()=>{J.disconnect()}}},[d]),j.useEffect(()=>{if(h){let ne=setTimeout(()=>{w(!0)},100);return()=>{clearTimeout(ne)}}},[h]);let G=()=>{C(!0)},ee=()=>{C(!1),w(!1)};return u?d!=="intent"?[b,P,{}]:[b,P,{onFocus:Po(_,G),onBlur:Po(I,ee),onMouseEnter:Po(A,G),onMouseLeave:Po(D,ee),onTouchStart:Po(M,G)}]:[!1,P,{}]}function Po(d,l){return u=>{d&&d(u),u.defaultPrevented||l(u)}}function Am({page:d,...l}){let{router:u}=fg(),h=j.useMemo(()=>ig(u.routes,d,u.basename),[u.routes,d,u.basename]);return h?j.createElement(wm,{page:d,matches:h,...l}):null}function Sm(d){let{manifest:l,routeModules:u}=hg(),[h,C]=j.useState([]);return j.useEffect(()=>{let b=!1;return pm(d,l,u).then(w=>{b||C(w)}),()=>{b=!0}},[d,l,u]),h}function wm({page:d,matches:l,...u}){let h=Oa(),{manifest:C,routeModules:b}=hg(),{basename:w}=fg(),{loaderData:_,matches:I}=Cm(),A=j.useMemo(()=>_h(d,l,I,C,h,"data"),[d,l,I,C,h]),D=j.useMemo(()=>_h(d,l,I,C,h,"assets"),[d,l,I,C,h]),M=j.useMemo(()=>{if(d===h.pathname+h.search+h.hash)return[];let ee=new Set,ne=!1;if(l.forEach(xe=>{let ce=C.routes[xe.route.id];!ce||!ce.hasLoader||(!A.some(X=>X.route.id===xe.route.id)&&xe.route.id in _&&b[xe.route.id]?.shouldRevalidate||ce.hasClientLoader?ne=!0:ee.add(xe.route.id))}),ee.size===0)return[];let J=fm(d,w,"data");return ne&&ee.size>0&&J.searchParams.set("_routes",l.filter(xe=>ee.has(xe.route.id)).map(xe=>xe.route.id).join(",")),[J.pathname+J.search]},[w,_,h,C,A,l,d,b]),P=j.useMemo(()=>xm(D,C),[D,C]),G=Sm(D);return j.createElement(j.Fragment,null,M.map(ee=>j.createElement("link",{key:ee,rel:"prefetch",as:"fetch",href:ee,...u})),P.map(ee=>j.createElement("link",{key:ee,rel:"modulepreload",href:ee,...u})),G.map(({key:ee,link:ne})=>j.createElement("link",{key:ee,nonce:u.nonce,...ne})))}function vm(...d){return l=>{d.forEach(u=>{typeof u=="function"?u(l):u!=null&&(u.current=l)})}}var gg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{gg&&(window.__reactRouterVersion="7.9.4")}catch{}function Tm({basename:d,children:l,window:u}){let h=j.useRef();h.current==null&&(h.current=hx({window:u,v5Compat:!0}));let C=h.current,[b,w]=j.useState({action:C.action,location:C.location}),_=j.useCallback(I=>{j.startTransition(()=>w(I))},[w]);return j.useLayoutEffect(()=>C.listen(_),[C,_]),j.createElement(nm,{basename:d,children:l,location:b.location,navigationType:b.action,navigator:C})}var pg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Un=j.forwardRef(function({onClick:l,discover:u="render",prefetch:h="none",relative:C,reloadDocument:b,replace:w,state:_,target:I,to:A,preventScrollReset:D,viewTransition:M,...P},G){let{basename:ee}=j.useContext(nr),ne=typeof A=="string"&&pg.test(A),J,xe=!1;if(typeof A=="string"&&ne&&(J=A,gg))try{let de=new URL(window.location.href),De=A.startsWith("//")?new URL(de.protocol+A):new URL(A),tt=Vr(De.pathname,ee);De.origin===de.origin&&tt!=null?A=tt+De.search+De.hash:xe=!0}catch{tr(!1,`<Link to="${A}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ce=Fx(A,{relative:C}),[X,Ee,Fe]=Em(h,P),ge=_m(A,{replace:w,state:_,target:I,preventScrollReset:D,relative:C,viewTransition:M});function te(de){l&&l(de),de.defaultPrevented||ge(de)}let Te=j.createElement("a",{...P,...Fe,href:J||ce,onClick:xe||b?l:te,ref:vm(G,Ee),target:I,"data-discover":!ne&&u==="render"?"true":void 0});return X&&!ne?j.createElement(j.Fragment,null,Te,j.createElement(Am,{page:ce})):Te});Un.displayName="Link";var Nm=j.forwardRef(function({"aria-current":l="page",caseSensitive:u=!1,className:h="",end:C=!1,style:b,to:w,viewTransition:_,children:I,...A},D){let M=qo(w,{relative:A.relative}),P=Oa(),G=j.useContext(Tc),{navigator:ee,basename:ne}=j.useContext(nr),J=G!=null&&Lm(M)&&_===!0,xe=ee.encodeLocation?ee.encodeLocation(M).pathname:M.pathname,ce=P.pathname,X=G&&G.navigation&&G.navigation.location?G.navigation.location.pathname:null;u||(ce=ce.toLowerCase(),X=X?X.toLowerCase():null,xe=xe.toLowerCase()),X&&ne&&(X=Vr(X,ne)||X);const Ee=xe!=="/"&&xe.endsWith("/")?xe.length-1:xe.length;let Fe=ce===xe||!C&&ce.startsWith(xe)&&ce.charAt(Ee)==="/",ge=X!=null&&(X===xe||!C&&X.startsWith(xe)&&X.charAt(xe.length)==="/"),te={isActive:Fe,isPending:ge,isTransitioning:J},Te=Fe?l:void 0,de;typeof h=="function"?de=h(te):de=[h,Fe?"active":null,ge?"pending":null,J?"transitioning":null].filter(Boolean).join(" ");let De=typeof b=="function"?b(te):b;return j.createElement(Un,{...A,"aria-current":Te,className:de,ref:D,style:De,to:w,viewTransition:_},typeof I=="function"?I(te):I)});Nm.displayName="NavLink";var Im=j.forwardRef(({discover:d="render",fetcherKey:l,navigate:u,reloadDocument:h,replace:C,state:b,method:w=xc,action:_,onSubmit:I,relative:A,preventScrollReset:D,viewTransition:M,...P},G)=>{let ee=Dm(),ne=Bm(_,{relative:A}),J=w.toLowerCase()==="get"?"get":"post",xe=typeof _=="string"&&pg.test(_),ce=X=>{if(I&&I(X),X.defaultPrevented)return;X.preventDefault();let Ee=X.nativeEvent.submitter,Fe=Ee?.getAttribute("formmethod")||w;ee(Ee||X.currentTarget,{fetcherKey:l,method:Fe,navigate:u,replace:C,state:b,relative:A,preventScrollReset:D,viewTransition:M})};return j.createElement("form",{ref:G,method:J,action:ne,onSubmit:h?I:ce,...P,"data-discover":!xe&&d==="render"?"true":void 0})});Im.displayName="Form";function Rm(d){return`${d} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xg(d){let l=j.useContext(Ws);return on(l,Rm(d)),l}function _m(d,{target:l,replace:u,state:h,preventScrollReset:C,relative:b,viewTransition:w}={}){let _=$d(),I=Oa(),A=qo(d,{relative:b});return j.useCallback(D=>{if(lm(D,l)){D.preventDefault();let M=u!==void 0?u:Xo(I)===Xo(A);_(d,{replace:M,state:h,preventScrollReset:C,relative:b,viewTransition:w})}},[I,_,A,u,h,l,d,C,b,w])}var Om=0,Mm=()=>`__${String(++Om)}__`;function Dm(){let{router:d}=xg("useSubmit"),{basename:l}=j.useContext(nr),u=Jx();return j.useCallback(async(h,C={})=>{let{action:b,method:w,encType:_,formData:I,body:A}=dm(h,l);if(C.navigate===!1){let D=C.fetcherKey||Mm();await d.fetch(D,u,C.action||b,{preventScrollReset:C.preventScrollReset,formData:I,body:A,formMethod:C.method||w,formEncType:C.encType||_,flushSync:C.flushSync})}else await d.navigate(C.action||b,{preventScrollReset:C.preventScrollReset,formData:I,body:A,formMethod:C.method||w,formEncType:C.encType||_,replace:C.replace,state:C.state,fromRouteId:u,flushSync:C.flushSync,viewTransition:C.viewTransition})},[d,l,u])}function Bm(d,{relative:l}={}){let{basename:u}=j.useContext(nr),h=j.useContext(ir);on(h,"useFormAction must be used inside a RouteContext");let[C]=h.matches.slice(-1),b={...qo(d||".",{relative:l})},w=Oa();if(d==null){b.search=w.search;let _=new URLSearchParams(b.search),I=_.getAll("index");if(I.some(D=>D==="")){_.delete("index"),I.filter(M=>M).forEach(M=>_.append("index",M));let D=_.toString();b.search=D?`?${D}`:""}}return(!d||d===".")&&C.route.index&&(b.search=b.search?b.search.replace(/^\?/,"?index&"):"?index"),u!=="/"&&(b.pathname=b.pathname==="/"?u:Hr([u,b.pathname])),Xo(b)}function Lm(d,{relative:l}={}){let u=j.useContext(og);on(u!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:h}=xg("useViewTransitionState"),C=qo(d,{relative:l});if(!u.isTransitioning)return!1;let b=Vr(u.currentLocation.pathname,h)||u.currentLocation.pathname,w=Vr(u.nextLocation.pathname,h)||u.nextLocation.pathname;return Ac(C.pathname,w)!=null||Ac(C.pathname,b)!=null}const At={MENU_ITEMS:"restaurant_menu_items",ORDERS:"restaurant_orders",ORDER_ITEMS:"restaurant_order_items",MESSAGES:"restaurant_messages"};function An(d,l=[]){try{const u=localStorage.getItem(d);return u?JSON.parse(u):l}catch(u){return console.error(`Error reading from localStorage key ${d}:`,u),l}}function ni(d,l){try{localStorage.setItem(d,JSON.stringify(l))}catch(u){console.error(`Error saving to localStorage key ${d}:`,u)}}function jm(){An(At.MENU_ITEMS).length===0&&km()}function km(){const d=[{id:"1",name:"Hamburguesa Clásica",description:"Carne de res, lechuga, tomate, cebolla y salsa especial",price:12.99,image:void 0,tags:["principal","carne"],variants:[{name:"Tamaño",options:["Normal","Grande"],required:!0},{name:"Punto de cocción",options:["Poco hecho","Término medio","Bien cocido"],required:!0}],in_stock:1},{id:"2",name:"Pizza Margherita",description:"Salsa de tomate, mozzarella fresca y albahaca",price:15.5,image:void 0,tags:["principal","vegetariano"],variants:[{name:"Tamaño",options:["Personal","Mediana","Familiar"],required:!0}],in_stock:1},{id:"3",name:"Ensalada César",description:"Lechuga romana, crutones, parmesano y aderezo césar",price:9.99,image:void 0,tags:["ensalada","vegetariano"],variants:[{name:"Proteína adicional",options:["Sin proteína","Pollo","Camarones"],required:!1}],in_stock:1}];ni(At.MENU_ITEMS,d)}const Sn={getMenuItems:{all:()=>An(At.MENU_ITEMS)},insertMenuItem:{run:(d,l,u,h,C,b,w,_)=>{const I=An(At.MENU_ITEMS),A={id:d,name:l,description:u,price:h,image:C,tags:JSON.parse(b),variants:JSON.parse(w),in_stock:_};I.push(A),ni(At.MENU_ITEMS,I)}},updateMenuItem:{run:(d,l,u,h,C,b,w,_)=>{const I=An(At.MENU_ITEMS),A=I.findIndex(D=>D.id===_);A!==-1&&(I[A]={id:_,name:d,description:l,price:u,image:h,tags:JSON.parse(C),variants:JSON.parse(b),in_stock:w},ni(At.MENU_ITEMS,I))}},deleteMenuItem:{run:()=>{ni(At.MENU_ITEMS,[])}},getOrders:{all:()=>An(At.ORDERS)},getOrdersForTable:{all:d=>An(At.ORDERS).filter(u=>u.table_id===d)},getOrder:{get:d=>An(At.ORDERS).find(u=>u.id===d)},insertOrder:{run:(d,l,u,h,C,b,w,_,I,A,D)=>{const M=An(At.ORDERS),P={id:d,table_id:l,status:u,created_at:h,editable_until:C,notes:b,suggestions:w,questions:_,eta_minutes:I,payment_status:A,waiter_notes:D};M.push(P),ni(At.ORDERS,M)}},updateOrderStatus:{run:(d,l)=>{const u=An(At.ORDERS),h=u.findIndex(C=>C.id===l);h!==-1&&(u[h].status=d,ni(At.ORDERS,u))}},updateOrderDetails:{run:(d,l,u,h)=>{const C=An(At.ORDERS),b=C.findIndex(w=>w.id===h);b!==-1&&(C[b].notes=d,C[b].suggestions=l,C[b].questions=u,ni(At.ORDERS,C))}},updateOrderEta:{run:(d,l)=>{const u=An(At.ORDERS),h=u.findIndex(C=>C.id===l);h!==-1&&(u[h].eta_minutes=d,ni(At.ORDERS,u))}},updateOrderPaymentStatus:{run:(d,l)=>{const u=An(At.ORDERS),h=u.findIndex(C=>C.id===l);h!==-1&&(u[h].payment_status=d,ni(At.ORDERS,u))}},updateOrderWaiterNotes:{run:(d,l)=>{const u=An(At.ORDERS),h=u.findIndex(C=>C.id===l);h!==-1&&(u[h].waiter_notes=d,ni(At.ORDERS,u))}},deleteOrder:{run:d=>{const u=An(At.ORDERS).filter(h=>h.id!==d);ni(At.ORDERS,u)}},setTablePaid:{run:(d,l)=>{const h=An(At.ORDERS).map(C=>C.table_id===l?{...C,payment_status:d}:C);ni(At.ORDERS,h)}},getOrderItems:{all:d=>An(At.ORDER_ITEMS).filter(u=>u.order_id===d)},insertOrderItem:{run:(d,l,u,h)=>{const C=An(At.ORDER_ITEMS),b={order_id:d,menu_item_id:l,qty:u,options:h};C.push(b),ni(At.ORDER_ITEMS,C)}},deleteOrderItems:{run:d=>{const u=An(At.ORDER_ITEMS).filter(h=>h.order_id!==d);ni(At.ORDER_ITEMS,u)}},getMessagesForTable:{all:d=>An(At.MESSAGES).filter(u=>u.table_id===d)},getAllMessages:{all:()=>An(At.MESSAGES)},insertMessage:{run:(d,l,u,h,C)=>{const b=An(At.MESSAGES),w={id:d,table_id:l,from_sender:u,text:h,created_at:C};b.push(w),ni(At.MESSAGES,b)}}};jm();const Fd=new Set,Ma=()=>Fd.forEach(d=>d()),af=d=>(Fd.add(d),()=>Fd.delete(d));function Yo(){try{return Sn.getMenuItems.all().map(l=>({id:l.id,name:l.name,description:l.description||void 0,price:l.price,image:l.image||void 0,tags:Array.isArray(l.tags)?l.tags:l.tags?JSON.parse(l.tags):[],variants:Array.isArray(l.variants)?l.variants:l.variants?JSON.parse(l.variants):[],active:!!l.in_stock}))}catch(d){return console.error("Error getting menu:",d),[]}}function Sc(){try{const d=Sn.getOrders.all(),l=[];for(const u of d){const C=Sn.getOrderItems.all(u.id).map(b=>({menuItemId:b.menu_item_id,qty:b.qty,options:b.options?JSON.parse(b.options):void 0}));l.push({id:u.id,tableId:u.table_id,items:C,status:u.status,createdAt:u.created_at,editableUntil:u.editable_until||void 0,notes:u.notes||void 0,suggestions:u.suggestions||void 0,questions:u.questions||void 0,etaMinutes:u.eta_minutes||void 0,paymentStatus:u.payment_status||"pendiente",waiterNotes:u.waiter_notes||void 0,total:0,timestamp:u.created_at})}return l}catch(d){return console.error("Error getting orders:",d),[]}}function zm(d,l){try{const u=`${Date.now()}`,h=new Date().toISOString(),C=new Date(Date.now()+300*1e3).toISOString();Sn.insertOrder.run(u,d,"pendiente",h,C,null,null,null,null,"pendiente",null);for(const w of l)Sn.insertOrderItem.run(u,w.menuItemId,w.qty,w.options?JSON.stringify(w.options):"");const b={id:u,tableId:d,items:l,status:"pendiente",createdAt:h,editableUntil:C,paymentStatus:"pendiente",total:0,timestamp:h};return Ma(),b}catch(u){throw console.error("Error adding order:",u),u}}function Gs(d,l){try{Sn.updateOrderStatus.run(l,d),Ma()}catch(u){console.error("Error updating order status:",u)}}function Oh(d,l,u,h,C){try{Sn.updateOrderDetails.run(u||null,h||null,C||null,d),Sn.deleteOrderItems.run(d);for(const b of l)Sn.insertOrderItem.run(d,b.menuItemId,b.qty,b.options?JSON.stringify(b.options):"");Ma()}catch(b){console.error("Error updating order details:",b)}}function Um(d,l){try{const h=Sn.getOrder.get(d)?.waiter_notes||"",b=`[${new Date().toLocaleTimeString()}] ${l}`,w=h?`${h}
${b}`:b;Sn.updateOrderWaiterNotes.run(w,d),Ma()}catch(u){console.error("Error adding waiter note:",u)}}function Fm(d){try{Sn.deleteOrderItems.run(d),Sn.deleteOrder.run(d),Ma()}catch(l){console.error("Error canceling order:",l)}}function Pm(d,l){try{Sn.updateOrderEta.run(l,d),Ma()}catch(u){console.error("Error setting ETA:",u)}}function Pd(d,l){try{if(Sn.updateOrderPaymentStatus.run(l,d),l==="pagado"){const u=Sn.getOrder.get(d);if(u){const h=u.table_id;Ji(h).every(w=>w.paymentStatus==="pagado")&&Hm(h)}}Ma()}catch(u){console.error("Error setting payment status:",u)}}async function Hm(d){try{const l=await fetch("/api/tables");if(l.ok){const C=((await l.json()).data||[]).find(b=>b.number.toString()===d);C&&((await fetch(`/api/tables/${C.id}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"OUT_OF_SERVICE"})})).ok?console.log(`Mesa ${d} marcada como OUT_OF_SERVICE para limpieza`):console.error("Error al actualizar estado de mesa a OUT_OF_SERVICE"))}}catch(l){console.error("Error updating table status to OUT_OF_SERVICE:",l)}}function Ji(d){try{const l=Sn.getOrdersForTable.all(d),u=[];for(const h of l){const b=Sn.getOrderItems.all(h.id).map(w=>({menuItemId:w.menu_item_id,qty:w.qty,options:w.options?JSON.parse(w.options):void 0}));u.push({id:h.id,tableId:h.table_id,items:b,status:h.status,createdAt:h.created_at,editableUntil:h.editable_until||void 0,notes:h.notes||void 0,suggestions:h.suggestions||void 0,questions:h.questions||void 0,etaMinutes:h.eta_minutes||void 0,paymentStatus:h.payment_status||"pendiente",waiterNotes:h.waiter_notes||void 0,total:0,timestamp:h.created_at})}return u}catch(l){return console.error("Error getting orders for table:",l),[]}}function Mh(d){try{return Sn.getMessagesForTable.all(d).map(u=>({id:u.id,tableId:u.table_id,from:u.from_sender,text:u.text,createdAt:u.created_at}))}catch(l){return console.error("Error getting messages for table:",l),[]}}function mg(d,l,u){try{const h=`${Date.now()}`,C=new Date().toISOString();Sn.insertMessage.run(h,d,l,u,C),Ma()}catch(h){console.error("Error sending message to table:",h)}}function Dh(){try{return Sn.getAllMessages.all().map(l=>({id:l.id,tableId:l.table_id,from:l.from_sender,text:l.text,createdAt:l.created_at}))}catch(d){return console.error("Error getting all messages:",d),[]}}function Vs(d){try{return Ji(d).sort((u,h)=>new Date(h.createdAt).getTime()-new Date(u.createdAt).getTime())[0]}catch(l){console.error("Error getting latest order for table:",l);return}}const mr=Object.create(null);mr.open="0";mr.close="1";mr.ping="2";mr.pong="3";mr.message="4";mr.upgrade="5";mr.noop="6";const yc=Object.create(null);Object.keys(mr).forEach(d=>{yc[mr[d]]=d});const Hd={type:"error",data:"parser error"},yg=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",bg=typeof ArrayBuffer=="function",Cg=d=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(d):d&&d.buffer instanceof ArrayBuffer,sf=({type:d,data:l},u,h)=>yg&&l instanceof Blob?u?h(l):Bh(l,h):bg&&(l instanceof ArrayBuffer||Cg(l))?u?h(l):Bh(new Blob([l]),h):h(mr[d]+(l||"")),Bh=(d,l)=>{const u=new FileReader;return u.onload=function(){const h=u.result.split(",")[1];l("b"+(h||""))},u.readAsDataURL(d)};function Lh(d){return d instanceof Uint8Array?d:d instanceof ArrayBuffer?new Uint8Array(d):new Uint8Array(d.buffer,d.byteOffset,d.byteLength)}let Dd;function Vm(d,l){if(yg&&d.data instanceof Blob)return d.data.arrayBuffer().then(Lh).then(l);if(bg&&(d.data instanceof ArrayBuffer||Cg(d.data)))return l(Lh(d.data));sf(d,!1,u=>{Dd||(Dd=new TextEncoder),l(Dd.encode(u))})}const jh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let d=0;d<jh.length;d++)Vo[jh.charCodeAt(d)]=d;const Gm=d=>{let l=d.length*.75,u=d.length,h,C=0,b,w,_,I;d[d.length-1]==="="&&(l--,d[d.length-2]==="="&&l--);const A=new ArrayBuffer(l),D=new Uint8Array(A);for(h=0;h<u;h+=4)b=Vo[d.charCodeAt(h)],w=Vo[d.charCodeAt(h+1)],_=Vo[d.charCodeAt(h+2)],I=Vo[d.charCodeAt(h+3)],D[C++]=b<<2|w>>4,D[C++]=(w&15)<<4|_>>2,D[C++]=(_&3)<<6|I&63;return A},Ym=typeof ArrayBuffer=="function",of=(d,l)=>{if(typeof d!="string")return{type:"message",data:Eg(d,l)};const u=d.charAt(0);return u==="b"?{type:"message",data:Xm(d.substring(1),l)}:yc[u]?d.length>1?{type:yc[u],data:d.substring(1)}:{type:yc[u]}:Hd},Xm=(d,l)=>{if(Ym){const u=Gm(d);return Eg(u,l)}else return{base64:!0,data:d}},Eg=(d,l)=>{switch(l){case"blob":return d instanceof Blob?d:new Blob([d]);case"arraybuffer":default:return d instanceof ArrayBuffer?d:d.buffer}},Ag="",Wm=(d,l)=>{const u=d.length,h=new Array(u);let C=0;d.forEach((b,w)=>{sf(b,!1,_=>{h[w]=_,++C===u&&l(h.join(Ag))})})},qm=(d,l)=>{const u=d.split(Ag),h=[];for(let C=0;C<u.length;C++){const b=of(u[C],l);if(h.push(b),b.type==="error")break}return h};function Zm(){return new TransformStream({transform(d,l){Vm(d,u=>{const h=u.length;let C;if(h<126)C=new Uint8Array(1),new DataView(C.buffer).setUint8(0,h);else if(h<65536){C=new Uint8Array(3);const b=new DataView(C.buffer);b.setUint8(0,126),b.setUint16(1,h)}else{C=new Uint8Array(9);const b=new DataView(C.buffer);b.setUint8(0,127),b.setBigUint64(1,BigInt(h))}d.data&&typeof d.data!="string"&&(C[0]|=128),l.enqueue(C),l.enqueue(u)})}})}let Bd;function gc(d){return d.reduce((l,u)=>l+u.length,0)}function pc(d,l){if(d[0].length===l)return d.shift();const u=new Uint8Array(l);let h=0;for(let C=0;C<l;C++)u[C]=d[0][h++],h===d[0].length&&(d.shift(),h=0);return d.length&&h<d[0].length&&(d[0]=d[0].slice(h)),u}function Qm(d,l){Bd||(Bd=new TextDecoder);const u=[];let h=0,C=-1,b=!1;return new TransformStream({transform(w,_){for(u.push(w);;){if(h===0){if(gc(u)<1)break;const I=pc(u,1);b=(I[0]&128)===128,C=I[0]&127,C<126?h=3:C===126?h=1:h=2}else if(h===1){if(gc(u)<2)break;const I=pc(u,2);C=new DataView(I.buffer,I.byteOffset,I.length).getUint16(0),h=3}else if(h===2){if(gc(u)<8)break;const I=pc(u,8),A=new DataView(I.buffer,I.byteOffset,I.length),D=A.getUint32(0);if(D>Math.pow(2,21)-1){_.enqueue(Hd);break}C=D*Math.pow(2,32)+A.getUint32(4),h=3}else{if(gc(u)<C)break;const I=pc(u,C);_.enqueue(of(b?I:Bd.decode(I),l)),h=0}if(C===0||C>d){_.enqueue(Hd);break}}}})}const Sg=4;function _n(d){if(d)return Km(d)}function Km(d){for(var l in _n.prototype)d[l]=_n.prototype[l];return d}_n.prototype.on=_n.prototype.addEventListener=function(d,l){return this._callbacks=this._callbacks||{},(this._callbacks["$"+d]=this._callbacks["$"+d]||[]).push(l),this};_n.prototype.once=function(d,l){function u(){this.off(d,u),l.apply(this,arguments)}return u.fn=l,this.on(d,u),this};_n.prototype.off=_n.prototype.removeListener=_n.prototype.removeAllListeners=_n.prototype.removeEventListener=function(d,l){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var u=this._callbacks["$"+d];if(!u)return this;if(arguments.length==1)return delete this._callbacks["$"+d],this;for(var h,C=0;C<u.length;C++)if(h=u[C],h===l||h.fn===l){u.splice(C,1);break}return u.length===0&&delete this._callbacks["$"+d],this};_n.prototype.emit=function(d){this._callbacks=this._callbacks||{};for(var l=new Array(arguments.length-1),u=this._callbacks["$"+d],h=1;h<arguments.length;h++)l[h-1]=arguments[h];if(u){u=u.slice(0);for(var h=0,C=u.length;h<C;++h)u[h].apply(this,l)}return this};_n.prototype.emitReserved=_n.prototype.emit;_n.prototype.listeners=function(d){return this._callbacks=this._callbacks||{},this._callbacks["$"+d]||[]};_n.prototype.hasListeners=function(d){return!!this.listeners(d).length};const Ic=typeof Promise=="function"&&typeof Promise.resolve=="function"?l=>Promise.resolve().then(l):(l,u)=>u(l,0),Hi=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Jm="arraybuffer";function wg(d,...l){return l.reduce((u,h)=>(d.hasOwnProperty(h)&&(u[h]=d[h]),u),{})}const $m=Hi.setTimeout,e2=Hi.clearTimeout;function Rc(d,l){l.useNativeTimers?(d.setTimeoutFn=$m.bind(Hi),d.clearTimeoutFn=e2.bind(Hi)):(d.setTimeoutFn=Hi.setTimeout.bind(Hi),d.clearTimeoutFn=Hi.clearTimeout.bind(Hi))}const t2=1.33;function n2(d){return typeof d=="string"?i2(d):Math.ceil((d.byteLength||d.size)*t2)}function i2(d){let l=0,u=0;for(let h=0,C=d.length;h<C;h++)l=d.charCodeAt(h),l<128?u+=1:l<2048?u+=2:l<55296||l>=57344?u+=3:(h++,u+=4);return u}function vg(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function r2(d){let l="";for(let u in d)d.hasOwnProperty(u)&&(l.length&&(l+="&"),l+=encodeURIComponent(u)+"="+encodeURIComponent(d[u]));return l}function a2(d){let l={},u=d.split("&");for(let h=0,C=u.length;h<C;h++){let b=u[h].split("=");l[decodeURIComponent(b[0])]=decodeURIComponent(b[1])}return l}class s2 extends Error{constructor(l,u,h){super(l),this.description=u,this.context=h,this.type="TransportError"}}class lf extends _n{constructor(l){super(),this.writable=!1,Rc(this,l),this.opts=l,this.query=l.query,this.socket=l.socket,this.supportsBinary=!l.forceBase64}onError(l,u,h){return super.emitReserved("error",new s2(l,u,h)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(l){this.readyState==="open"&&this.write(l)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(l){const u=of(l,this.socket.binaryType);this.onPacket(u)}onPacket(l){super.emitReserved("packet",l)}onClose(l){this.readyState="closed",super.emitReserved("close",l)}pause(l){}createUri(l,u={}){return l+"://"+this._hostname()+this._port()+this.opts.path+this._query(u)}_hostname(){const l=this.opts.hostname;return l.indexOf(":")===-1?l:"["+l+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(l){const u=r2(l);return u.length?"?"+u:""}}class o2 extends lf{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(l){this.readyState="pausing";const u=()=>{this.readyState="paused",l()};if(this._polling||!this.writable){let h=0;this._polling&&(h++,this.once("pollComplete",function(){--h||u()})),this.writable||(h++,this.once("drain",function(){--h||u()}))}else u()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(l){const u=h=>{if(this.readyState==="opening"&&h.type==="open"&&this.onOpen(),h.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(h)};qm(l,this.socket.binaryType).forEach(u),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const l=()=>{this.write([{type:"close"}])};this.readyState==="open"?l():this.once("open",l)}write(l){this.writable=!1,Wm(l,u=>{this.doWrite(u,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const l=this.opts.secure?"https":"http",u=this.query||{};return this.opts.timestampRequests!==!1&&(u[this.opts.timestampParam]=vg()),!this.supportsBinary&&!u.sid&&(u.b64=1),this.createUri(l,u)}}let Tg=!1;try{Tg=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const l2=Tg;function c2(){}class u2 extends o2{constructor(l){if(super(l),typeof location<"u"){const u=location.protocol==="https:";let h=location.port;h||(h=u?"443":"80"),this.xd=typeof location<"u"&&l.hostname!==location.hostname||h!==l.port}}doWrite(l,u){const h=this.request({method:"POST",data:l});h.on("success",u),h.on("error",(C,b)=>{this.onError("xhr post error",C,b)})}doPoll(){const l=this.request();l.on("data",this.onData.bind(this)),l.on("error",(u,h)=>{this.onError("xhr poll error",u,h)}),this.pollXhr=l}}class xr extends _n{constructor(l,u,h){super(),this.createRequest=l,Rc(this,h),this._opts=h,this._method=h.method||"GET",this._uri=u,this._data=h.data!==void 0?h.data:null,this._create()}_create(){var l;const u=wg(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");u.xdomain=!!this._opts.xd;const h=this._xhr=this.createRequest(u);try{h.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){h.setDisableHeaderCheck&&h.setDisableHeaderCheck(!0);for(let C in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(C)&&h.setRequestHeader(C,this._opts.extraHeaders[C])}}catch{}if(this._method==="POST")try{h.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{h.setRequestHeader("Accept","*/*")}catch{}(l=this._opts.cookieJar)===null||l===void 0||l.addCookies(h),"withCredentials"in h&&(h.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(h.timeout=this._opts.requestTimeout),h.onreadystatechange=()=>{var C;h.readyState===3&&((C=this._opts.cookieJar)===null||C===void 0||C.parseCookies(h.getResponseHeader("set-cookie"))),h.readyState===4&&(h.status===200||h.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof h.status=="number"?h.status:0)},0))},h.send(this._data)}catch(C){this.setTimeoutFn(()=>{this._onError(C)},0);return}typeof document<"u"&&(this._index=xr.requestsCount++,xr.requests[this._index]=this)}_onError(l){this.emitReserved("error",l,this._xhr),this._cleanup(!0)}_cleanup(l){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=c2,l)try{this._xhr.abort()}catch{}typeof document<"u"&&delete xr.requests[this._index],this._xhr=null}}_onLoad(){const l=this._xhr.responseText;l!==null&&(this.emitReserved("data",l),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}xr.requestsCount=0;xr.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",kh);else if(typeof addEventListener=="function"){const d="onpagehide"in Hi?"pagehide":"unload";addEventListener(d,kh,!1)}}function kh(){for(let d in xr.requests)xr.requests.hasOwnProperty(d)&&xr.requests[d].abort()}const d2=(function(){const d=Ng({xdomain:!1});return d&&d.responseType!==null})();class f2 extends u2{constructor(l){super(l);const u=l&&l.forceBase64;this.supportsBinary=d2&&!u}request(l={}){return Object.assign(l,{xd:this.xd},this.opts),new xr(Ng,this.uri(),l)}}function Ng(d){const l=d.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!l||l2))return new XMLHttpRequest}catch{}if(!l)try{return new Hi[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Ig=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class h2 extends lf{get name(){return"websocket"}doOpen(){const l=this.uri(),u=this.opts.protocols,h=Ig?{}:wg(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(h.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(l,u,h)}catch(C){return this.emitReserved("error",C)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=l=>this.onClose({description:"websocket connection closed",context:l}),this.ws.onmessage=l=>this.onData(l.data),this.ws.onerror=l=>this.onError("websocket error",l)}write(l){this.writable=!1;for(let u=0;u<l.length;u++){const h=l[u],C=u===l.length-1;sf(h,this.supportsBinary,b=>{try{this.doWrite(h,b)}catch{}C&&Ic(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const l=this.opts.secure?"wss":"ws",u=this.query||{};return this.opts.timestampRequests&&(u[this.opts.timestampParam]=vg()),this.supportsBinary||(u.b64=1),this.createUri(l,u)}}const Ld=Hi.WebSocket||Hi.MozWebSocket;class g2 extends h2{createSocket(l,u,h){return Ig?new Ld(l,u,h):u?new Ld(l,u):new Ld(l)}doWrite(l,u){this.ws.send(u)}}class p2 extends lf{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(l){return this.emitReserved("error",l)}this._transport.closed.then(()=>{this.onClose()}).catch(l=>{this.onError("webtransport error",l)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(l=>{const u=Qm(Number.MAX_SAFE_INTEGER,this.socket.binaryType),h=l.readable.pipeThrough(u).getReader(),C=Zm();C.readable.pipeTo(l.writable),this._writer=C.writable.getWriter();const b=()=>{h.read().then(({done:_,value:I})=>{_||(this.onPacket(I),b())}).catch(_=>{})};b();const w={type:"open"};this.query.sid&&(w.data=`{"sid":"${this.query.sid}"}`),this._writer.write(w).then(()=>this.onOpen())})})}write(l){this.writable=!1;for(let u=0;u<l.length;u++){const h=l[u],C=u===l.length-1;this._writer.write(h).then(()=>{C&&Ic(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var l;(l=this._transport)===null||l===void 0||l.close()}}const x2={websocket:g2,webtransport:p2,polling:f2},m2=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,y2=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Vd(d){if(d.length>8e3)throw"URI too long";const l=d,u=d.indexOf("["),h=d.indexOf("]");u!=-1&&h!=-1&&(d=d.substring(0,u)+d.substring(u,h).replace(/:/g,";")+d.substring(h,d.length));let C=m2.exec(d||""),b={},w=14;for(;w--;)b[y2[w]]=C[w]||"";return u!=-1&&h!=-1&&(b.source=l,b.host=b.host.substring(1,b.host.length-1).replace(/;/g,":"),b.authority=b.authority.replace("[","").replace("]","").replace(/;/g,":"),b.ipv6uri=!0),b.pathNames=b2(b,b.path),b.queryKey=C2(b,b.query),b}function b2(d,l){const u=/\/{2,9}/g,h=l.replace(u,"/").split("/");return(l.slice(0,1)=="/"||l.length===0)&&h.splice(0,1),l.slice(-1)=="/"&&h.splice(h.length-1,1),h}function C2(d,l){const u={};return l.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(h,C,b){C&&(u[C]=b)}),u}const Gd=typeof addEventListener=="function"&&typeof removeEventListener=="function",bc=[];Gd&&addEventListener("offline",()=>{bc.forEach(d=>d())},!1);class Ra extends _n{constructor(l,u){if(super(),this.binaryType=Jm,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,l&&typeof l=="object"&&(u=l,l=null),l){const h=Vd(l);u.hostname=h.host,u.secure=h.protocol==="https"||h.protocol==="wss",u.port=h.port,h.query&&(u.query=h.query)}else u.host&&(u.hostname=Vd(u.host).host);Rc(this,u),this.secure=u.secure!=null?u.secure:typeof location<"u"&&location.protocol==="https:",u.hostname&&!u.port&&(u.port=this.secure?"443":"80"),this.hostname=u.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=u.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},u.transports.forEach(h=>{const C=h.prototype.name;this.transports.push(C),this._transportsByName[C]=h}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},u),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=a2(this.opts.query)),Gd&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},bc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(l){const u=Object.assign({},this.opts.query);u.EIO=Sg,u.transport=l,this.id&&(u.sid=this.id);const h=Object.assign({},this.opts,{query:u,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[l]);return new this._transportsByName[l](h)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const l=this.opts.rememberUpgrade&&Ra.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const u=this.createTransport(l);u.open(),this.setTransport(u)}setTransport(l){this.transport&&this.transport.removeAllListeners(),this.transport=l,l.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",u=>this._onClose("transport close",u))}onOpen(){this.readyState="open",Ra.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(l){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",l),this.emitReserved("heartbeat"),l.type){case"open":this.onHandshake(JSON.parse(l.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const u=new Error("server error");u.code=l.data,this._onError(u);break;case"message":this.emitReserved("data",l.data),this.emitReserved("message",l.data);break}}onHandshake(l){this.emitReserved("handshake",l),this.id=l.sid,this.transport.query.sid=l.sid,this._pingInterval=l.pingInterval,this._pingTimeout=l.pingTimeout,this._maxPayload=l.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const l=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+l,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},l),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const l=this._getWritablePackets();this.transport.send(l),this._prevBufferLen=l.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let u=1;for(let h=0;h<this.writeBuffer.length;h++){const C=this.writeBuffer[h].data;if(C&&(u+=n2(C)),h>0&&u>this._maxPayload)return this.writeBuffer.slice(0,h);u+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const l=Date.now()>this._pingTimeoutTime;return l&&(this._pingTimeoutTime=0,Ic(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),l}write(l,u,h){return this._sendPacket("message",l,u,h),this}send(l,u,h){return this._sendPacket("message",l,u,h),this}_sendPacket(l,u,h,C){if(typeof u=="function"&&(C=u,u=void 0),typeof h=="function"&&(C=h,h=null),this.readyState==="closing"||this.readyState==="closed")return;h=h||{},h.compress=h.compress!==!1;const b={type:l,data:u,options:h};this.emitReserved("packetCreate",b),this.writeBuffer.push(b),C&&this.once("flush",C),this.flush()}close(){const l=()=>{this._onClose("forced close"),this.transport.close()},u=()=>{this.off("upgrade",u),this.off("upgradeError",u),l()},h=()=>{this.once("upgrade",u),this.once("upgradeError",u)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?h():l()}):this.upgrading?h():l()),this}_onError(l){if(Ra.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",l),this._onClose("transport error",l)}_onClose(l,u){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Gd&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const h=bc.indexOf(this._offlineEventListener);h!==-1&&bc.splice(h,1)}this.readyState="closed",this.id=null,this.emitReserved("close",l,u),this.writeBuffer=[],this._prevBufferLen=0}}}Ra.protocol=Sg;class E2 extends Ra{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let l=0;l<this._upgrades.length;l++)this._probe(this._upgrades[l])}_probe(l){let u=this.createTransport(l),h=!1;Ra.priorWebsocketSuccess=!1;const C=()=>{h||(u.send([{type:"ping",data:"probe"}]),u.once("packet",M=>{if(!h)if(M.type==="pong"&&M.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",u),!u)return;Ra.priorWebsocketSuccess=u.name==="websocket",this.transport.pause(()=>{h||this.readyState!=="closed"&&(D(),this.setTransport(u),u.send([{type:"upgrade"}]),this.emitReserved("upgrade",u),u=null,this.upgrading=!1,this.flush())})}else{const P=new Error("probe error");P.transport=u.name,this.emitReserved("upgradeError",P)}}))};function b(){h||(h=!0,D(),u.close(),u=null)}const w=M=>{const P=new Error("probe error: "+M);P.transport=u.name,b(),this.emitReserved("upgradeError",P)};function _(){w("transport closed")}function I(){w("socket closed")}function A(M){u&&M.name!==u.name&&b()}const D=()=>{u.removeListener("open",C),u.removeListener("error",w),u.removeListener("close",_),this.off("close",I),this.off("upgrading",A)};u.once("open",C),u.once("error",w),u.once("close",_),this.once("close",I),this.once("upgrading",A),this._upgrades.indexOf("webtransport")!==-1&&l!=="webtransport"?this.setTimeoutFn(()=>{h||u.open()},200):u.open()}onHandshake(l){this._upgrades=this._filterUpgrades(l.upgrades),super.onHandshake(l)}_filterUpgrades(l){const u=[];for(let h=0;h<l.length;h++)~this.transports.indexOf(l[h])&&u.push(l[h]);return u}}let A2=class extends E2{constructor(l,u={}){const h=typeof l=="object"?l:u;(!h.transports||h.transports&&typeof h.transports[0]=="string")&&(h.transports=(h.transports||["polling","websocket","webtransport"]).map(C=>x2[C]).filter(C=>!!C)),super(l,h)}};function S2(d,l="",u){let h=d;u=u||typeof location<"u"&&location,d==null&&(d=u.protocol+"//"+u.host),typeof d=="string"&&(d.charAt(0)==="/"&&(d.charAt(1)==="/"?d=u.protocol+d:d=u.host+d),/^(https?|wss?):\/\//.test(d)||(typeof u<"u"?d=u.protocol+"//"+d:d="https://"+d),h=Vd(d)),h.port||(/^(http|ws)$/.test(h.protocol)?h.port="80":/^(http|ws)s$/.test(h.protocol)&&(h.port="443")),h.path=h.path||"/";const b=h.host.indexOf(":")!==-1?"["+h.host+"]":h.host;return h.id=h.protocol+"://"+b+":"+h.port+l,h.href=h.protocol+"://"+b+(u&&u.port===h.port?"":":"+h.port),h}const w2=typeof ArrayBuffer=="function",v2=d=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(d):d.buffer instanceof ArrayBuffer,Rg=Object.prototype.toString,T2=typeof Blob=="function"||typeof Blob<"u"&&Rg.call(Blob)==="[object BlobConstructor]",N2=typeof File=="function"||typeof File<"u"&&Rg.call(File)==="[object FileConstructor]";function cf(d){return w2&&(d instanceof ArrayBuffer||v2(d))||T2&&d instanceof Blob||N2&&d instanceof File}function Cc(d,l){if(!d||typeof d!="object")return!1;if(Array.isArray(d)){for(let u=0,h=d.length;u<h;u++)if(Cc(d[u]))return!0;return!1}if(cf(d))return!0;if(d.toJSON&&typeof d.toJSON=="function"&&arguments.length===1)return Cc(d.toJSON(),!0);for(const u in d)if(Object.prototype.hasOwnProperty.call(d,u)&&Cc(d[u]))return!0;return!1}function I2(d){const l=[],u=d.data,h=d;return h.data=Yd(u,l),h.attachments=l.length,{packet:h,buffers:l}}function Yd(d,l){if(!d)return d;if(cf(d)){const u={_placeholder:!0,num:l.length};return l.push(d),u}else if(Array.isArray(d)){const u=new Array(d.length);for(let h=0;h<d.length;h++)u[h]=Yd(d[h],l);return u}else if(typeof d=="object"&&!(d instanceof Date)){const u={};for(const h in d)Object.prototype.hasOwnProperty.call(d,h)&&(u[h]=Yd(d[h],l));return u}return d}function R2(d,l){return d.data=Xd(d.data,l),delete d.attachments,d}function Xd(d,l){if(!d)return d;if(d&&d._placeholder===!0){if(typeof d.num=="number"&&d.num>=0&&d.num<l.length)return l[d.num];throw new Error("illegal attachments")}else if(Array.isArray(d))for(let u=0;u<d.length;u++)d[u]=Xd(d[u],l);else if(typeof d=="object")for(const u in d)Object.prototype.hasOwnProperty.call(d,u)&&(d[u]=Xd(d[u],l));return d}const _2=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],O2=5;var vt;(function(d){d[d.CONNECT=0]="CONNECT",d[d.DISCONNECT=1]="DISCONNECT",d[d.EVENT=2]="EVENT",d[d.ACK=3]="ACK",d[d.CONNECT_ERROR=4]="CONNECT_ERROR",d[d.BINARY_EVENT=5]="BINARY_EVENT",d[d.BINARY_ACK=6]="BINARY_ACK"})(vt||(vt={}));class M2{constructor(l){this.replacer=l}encode(l){return(l.type===vt.EVENT||l.type===vt.ACK)&&Cc(l)?this.encodeAsBinary({type:l.type===vt.EVENT?vt.BINARY_EVENT:vt.BINARY_ACK,nsp:l.nsp,data:l.data,id:l.id}):[this.encodeAsString(l)]}encodeAsString(l){let u=""+l.type;return(l.type===vt.BINARY_EVENT||l.type===vt.BINARY_ACK)&&(u+=l.attachments+"-"),l.nsp&&l.nsp!=="/"&&(u+=l.nsp+","),l.id!=null&&(u+=l.id),l.data!=null&&(u+=JSON.stringify(l.data,this.replacer)),u}encodeAsBinary(l){const u=I2(l),h=this.encodeAsString(u.packet),C=u.buffers;return C.unshift(h),C}}function zh(d){return Object.prototype.toString.call(d)==="[object Object]"}class uf extends _n{constructor(l){super(),this.reviver=l}add(l){let u;if(typeof l=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");u=this.decodeString(l);const h=u.type===vt.BINARY_EVENT;h||u.type===vt.BINARY_ACK?(u.type=h?vt.EVENT:vt.ACK,this.reconstructor=new D2(u),u.attachments===0&&super.emitReserved("decoded",u)):super.emitReserved("decoded",u)}else if(cf(l)||l.base64)if(this.reconstructor)u=this.reconstructor.takeBinaryData(l),u&&(this.reconstructor=null,super.emitReserved("decoded",u));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+l)}decodeString(l){let u=0;const h={type:Number(l.charAt(0))};if(vt[h.type]===void 0)throw new Error("unknown packet type "+h.type);if(h.type===vt.BINARY_EVENT||h.type===vt.BINARY_ACK){const b=u+1;for(;l.charAt(++u)!=="-"&&u!=l.length;);const w=l.substring(b,u);if(w!=Number(w)||l.charAt(u)!=="-")throw new Error("Illegal attachments");h.attachments=Number(w)}if(l.charAt(u+1)==="/"){const b=u+1;for(;++u&&!(l.charAt(u)===","||u===l.length););h.nsp=l.substring(b,u)}else h.nsp="/";const C=l.charAt(u+1);if(C!==""&&Number(C)==C){const b=u+1;for(;++u;){const w=l.charAt(u);if(w==null||Number(w)!=w){--u;break}if(u===l.length)break}h.id=Number(l.substring(b,u+1))}if(l.charAt(++u)){const b=this.tryParse(l.substr(u));if(uf.isPayloadValid(h.type,b))h.data=b;else throw new Error("invalid payload")}return h}tryParse(l){try{return JSON.parse(l,this.reviver)}catch{return!1}}static isPayloadValid(l,u){switch(l){case vt.CONNECT:return zh(u);case vt.DISCONNECT:return u===void 0;case vt.CONNECT_ERROR:return typeof u=="string"||zh(u);case vt.EVENT:case vt.BINARY_EVENT:return Array.isArray(u)&&(typeof u[0]=="number"||typeof u[0]=="string"&&_2.indexOf(u[0])===-1);case vt.ACK:case vt.BINARY_ACK:return Array.isArray(u)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class D2{constructor(l){this.packet=l,this.buffers=[],this.reconPack=l}takeBinaryData(l){if(this.buffers.push(l),this.buffers.length===this.reconPack.attachments){const u=R2(this.reconPack,this.buffers);return this.finishedReconstruction(),u}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const B2=Object.freeze(Object.defineProperty({__proto__:null,Decoder:uf,Encoder:M2,get PacketType(){return vt},protocol:O2},Symbol.toStringTag,{value:"Module"}));function $i(d,l,u){return d.on(l,u),function(){d.off(l,u)}}const L2=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class _g extends _n{constructor(l,u,h){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=l,this.nsp=u,h&&h.auth&&(this.auth=h.auth),this._opts=Object.assign({},h),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const l=this.io;this.subs=[$i(l,"open",this.onopen.bind(this)),$i(l,"packet",this.onpacket.bind(this)),$i(l,"error",this.onerror.bind(this)),$i(l,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...l){return l.unshift("message"),this.emit.apply(this,l),this}emit(l,...u){var h,C,b;if(L2.hasOwnProperty(l))throw new Error('"'+l.toString()+'" is a reserved event name');if(u.unshift(l),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(u),this;const w={type:vt.EVENT,data:u};if(w.options={},w.options.compress=this.flags.compress!==!1,typeof u[u.length-1]=="function"){const D=this.ids++,M=u.pop();this._registerAckCallback(D,M),w.id=D}const _=(C=(h=this.io.engine)===null||h===void 0?void 0:h.transport)===null||C===void 0?void 0:C.writable,I=this.connected&&!(!((b=this.io.engine)===null||b===void 0)&&b._hasPingExpired());return this.flags.volatile&&!_||(I?(this.notifyOutgoingListeners(w),this.packet(w)):this.sendBuffer.push(w)),this.flags={},this}_registerAckCallback(l,u){var h;const C=(h=this.flags.timeout)!==null&&h!==void 0?h:this._opts.ackTimeout;if(C===void 0){this.acks[l]=u;return}const b=this.io.setTimeoutFn(()=>{delete this.acks[l];for(let _=0;_<this.sendBuffer.length;_++)this.sendBuffer[_].id===l&&this.sendBuffer.splice(_,1);u.call(this,new Error("operation has timed out"))},C),w=(..._)=>{this.io.clearTimeoutFn(b),u.apply(this,_)};w.withError=!0,this.acks[l]=w}emitWithAck(l,...u){return new Promise((h,C)=>{const b=(w,_)=>w?C(w):h(_);b.withError=!0,u.push(b),this.emit(l,...u)})}_addToQueue(l){let u;typeof l[l.length-1]=="function"&&(u=l.pop());const h={id:this._queueSeq++,tryCount:0,pending:!1,args:l,flags:Object.assign({fromQueue:!0},this.flags)};l.push((C,...b)=>h!==this._queue[0]?void 0:(C!==null?h.tryCount>this._opts.retries&&(this._queue.shift(),u&&u(C)):(this._queue.shift(),u&&u(null,...b)),h.pending=!1,this._drainQueue())),this._queue.push(h),this._drainQueue()}_drainQueue(l=!1){if(!this.connected||this._queue.length===0)return;const u=this._queue[0];u.pending&&!l||(u.pending=!0,u.tryCount++,this.flags=u.flags,this.emit.apply(this,u.args))}packet(l){l.nsp=this.nsp,this.io._packet(l)}onopen(){typeof this.auth=="function"?this.auth(l=>{this._sendConnectPacket(l)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(l){this.packet({type:vt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},l):l})}onerror(l){this.connected||this.emitReserved("connect_error",l)}onclose(l,u){this.connected=!1,delete this.id,this.emitReserved("disconnect",l,u),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(l=>{if(!this.sendBuffer.some(h=>String(h.id)===l)){const h=this.acks[l];delete this.acks[l],h.withError&&h.call(this,new Error("socket has been disconnected"))}})}onpacket(l){if(l.nsp===this.nsp)switch(l.type){case vt.CONNECT:l.data&&l.data.sid?this.onconnect(l.data.sid,l.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case vt.EVENT:case vt.BINARY_EVENT:this.onevent(l);break;case vt.ACK:case vt.BINARY_ACK:this.onack(l);break;case vt.DISCONNECT:this.ondisconnect();break;case vt.CONNECT_ERROR:this.destroy();const h=new Error(l.data.message);h.data=l.data.data,this.emitReserved("connect_error",h);break}}onevent(l){const u=l.data||[];l.id!=null&&u.push(this.ack(l.id)),this.connected?this.emitEvent(u):this.receiveBuffer.push(Object.freeze(u))}emitEvent(l){if(this._anyListeners&&this._anyListeners.length){const u=this._anyListeners.slice();for(const h of u)h.apply(this,l)}super.emit.apply(this,l),this._pid&&l.length&&typeof l[l.length-1]=="string"&&(this._lastOffset=l[l.length-1])}ack(l){const u=this;let h=!1;return function(...C){h||(h=!0,u.packet({type:vt.ACK,id:l,data:C}))}}onack(l){const u=this.acks[l.id];typeof u=="function"&&(delete this.acks[l.id],u.withError&&l.data.unshift(null),u.apply(this,l.data))}onconnect(l,u){this.id=l,this.recovered=u&&this._pid===u,this._pid=u,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(l=>this.emitEvent(l)),this.receiveBuffer=[],this.sendBuffer.forEach(l=>{this.notifyOutgoingListeners(l),this.packet(l)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(l=>l()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:vt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(l){return this.flags.compress=l,this}get volatile(){return this.flags.volatile=!0,this}timeout(l){return this.flags.timeout=l,this}onAny(l){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(l),this}prependAny(l){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(l),this}offAny(l){if(!this._anyListeners)return this;if(l){const u=this._anyListeners;for(let h=0;h<u.length;h++)if(l===u[h])return u.splice(h,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(l){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(l),this}prependAnyOutgoing(l){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(l),this}offAnyOutgoing(l){if(!this._anyOutgoingListeners)return this;if(l){const u=this._anyOutgoingListeners;for(let h=0;h<u.length;h++)if(l===u[h])return u.splice(h,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(l){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const u=this._anyOutgoingListeners.slice();for(const h of u)h.apply(this,l.data)}}}function Zs(d){d=d||{},this.ms=d.min||100,this.max=d.max||1e4,this.factor=d.factor||2,this.jitter=d.jitter>0&&d.jitter<=1?d.jitter:0,this.attempts=0}Zs.prototype.duration=function(){var d=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var l=Math.random(),u=Math.floor(l*this.jitter*d);d=(Math.floor(l*10)&1)==0?d-u:d+u}return Math.min(d,this.max)|0};Zs.prototype.reset=function(){this.attempts=0};Zs.prototype.setMin=function(d){this.ms=d};Zs.prototype.setMax=function(d){this.max=d};Zs.prototype.setJitter=function(d){this.jitter=d};class Wd extends _n{constructor(l,u){var h;super(),this.nsps={},this.subs=[],l&&typeof l=="object"&&(u=l,l=void 0),u=u||{},u.path=u.path||"/socket.io",this.opts=u,Rc(this,u),this.reconnection(u.reconnection!==!1),this.reconnectionAttempts(u.reconnectionAttempts||1/0),this.reconnectionDelay(u.reconnectionDelay||1e3),this.reconnectionDelayMax(u.reconnectionDelayMax||5e3),this.randomizationFactor((h=u.randomizationFactor)!==null&&h!==void 0?h:.5),this.backoff=new Zs({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(u.timeout==null?2e4:u.timeout),this._readyState="closed",this.uri=l;const C=u.parser||B2;this.encoder=new C.Encoder,this.decoder=new C.Decoder,this._autoConnect=u.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(l){return arguments.length?(this._reconnection=!!l,l||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(l){return l===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=l,this)}reconnectionDelay(l){var u;return l===void 0?this._reconnectionDelay:(this._reconnectionDelay=l,(u=this.backoff)===null||u===void 0||u.setMin(l),this)}randomizationFactor(l){var u;return l===void 0?this._randomizationFactor:(this._randomizationFactor=l,(u=this.backoff)===null||u===void 0||u.setJitter(l),this)}reconnectionDelayMax(l){var u;return l===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=l,(u=this.backoff)===null||u===void 0||u.setMax(l),this)}timeout(l){return arguments.length?(this._timeout=l,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(l){if(~this._readyState.indexOf("open"))return this;this.engine=new A2(this.uri,this.opts);const u=this.engine,h=this;this._readyState="opening",this.skipReconnect=!1;const C=$i(u,"open",function(){h.onopen(),l&&l()}),b=_=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",_),l?l(_):this.maybeReconnectOnOpen()},w=$i(u,"error",b);if(this._timeout!==!1){const _=this._timeout,I=this.setTimeoutFn(()=>{C(),b(new Error("timeout")),u.close()},_);this.opts.autoUnref&&I.unref(),this.subs.push(()=>{this.clearTimeoutFn(I)})}return this.subs.push(C),this.subs.push(w),this}connect(l){return this.open(l)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const l=this.engine;this.subs.push($i(l,"ping",this.onping.bind(this)),$i(l,"data",this.ondata.bind(this)),$i(l,"error",this.onerror.bind(this)),$i(l,"close",this.onclose.bind(this)),$i(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(l){try{this.decoder.add(l)}catch(u){this.onclose("parse error",u)}}ondecoded(l){Ic(()=>{this.emitReserved("packet",l)},this.setTimeoutFn)}onerror(l){this.emitReserved("error",l)}socket(l,u){let h=this.nsps[l];return h?this._autoConnect&&!h.active&&h.connect():(h=new _g(this,l,u),this.nsps[l]=h),h}_destroy(l){const u=Object.keys(this.nsps);for(const h of u)if(this.nsps[h].active)return;this._close()}_packet(l){const u=this.encoder.encode(l);for(let h=0;h<u.length;h++)this.engine.write(u[h],l.options)}cleanup(){this.subs.forEach(l=>l()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(l,u){var h;this.cleanup(),(h=this.engine)===null||h===void 0||h.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",l,u),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const l=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const u=this.backoff.duration();this._reconnecting=!0;const h=this.setTimeoutFn(()=>{l.skipReconnect||(this.emitReserved("reconnect_attempt",l.backoff.attempts),!l.skipReconnect&&l.open(C=>{C?(l._reconnecting=!1,l.reconnect(),this.emitReserved("reconnect_error",C)):l.onreconnect()}))},u);this.opts.autoUnref&&h.unref(),this.subs.push(()=>{this.clearTimeoutFn(h)})}}onreconnect(){const l=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",l)}}const Ho={};function Ec(d,l){typeof d=="object"&&(l=d,d=void 0),l=l||{};const u=S2(d,l.path||"/socket.io"),h=u.source,C=u.id,b=u.path,w=Ho[C]&&b in Ho[C].nsps,_=l.forceNew||l["force new connection"]||l.multiplex===!1||w;let I;return _?I=new Wd(h,l):(Ho[C]||(Ho[C]=new Wd(h,l)),I=Ho[C]),u.query&&!l.query&&(l.query=u.queryKey),I.socket(u.path,l)}Object.assign(Ec,{Manager:Wd,Socket:_g,io:Ec,connect:Ec});class j2{socket=null;isConnected=!1;reconnectAttempts=0;maxReconnectAttempts=5;listeners=new Map;constructor(){this.connect()}connect(){try{const l="https://qr-restaurant-backend-l8gu1ke8y-gueremys-projects.vercel.app";console.log("🔌 Conectando a Socket.io:",l),this.socket=Ec(l,{transports:["websocket","polling"],timeout:2e4,forceNew:!0,auth:{token:"dev-token"}}),this.setupEventListeners()}catch(l){console.error("Error connecting to socket server:",l),this.handleReconnect()}}setupEventListeners(){this.socket&&(this.socket.on("connect",()=>{console.log("✅ Conectado al servidor Socket.io"),this.isConnected=!0,this.reconnectAttempts=0;const l=localStorage.getItem("token");l&&this.socket?.emit("authenticate",{token:l})}),this.socket.on("disconnect",l=>{console.log("❌ Desconectado del servidor Socket.io:",l),this.isConnected=!1,l==="io server disconnect"&&this.handleReconnect()}),this.socket.on("connect_error",l=>{console.error("Error de conexión Socket.io:",l),this.handleReconnect()}),this.socket.on("new-order",l=>{this.emitToListeners("new-order",l)}),this.socket.on("order-status-changed",l=>{this.emitToListeners("order-status-changed",l)}),this.socket.on("order-ready",l=>{this.emitToListeners("order-ready",l)}),this.socket.on("table-status-changed",l=>{this.emitToListeners("table-status-changed",l)}),this.socket.on("table-notification",l=>{this.emitToListeners("table-notification",l)}),this.socket.on("emergency",l=>{this.emitToListeners("emergency",l)}),this.socket.on("low-stock",l=>{this.emitToListeners("low-stock",l)}))}handleReconnect(){if(this.reconnectAttempts<this.maxReconnectAttempts){this.reconnectAttempts++;const l=Math.min(1e3*Math.pow(2,this.reconnectAttempts),3e4);console.log(`🔄 Reintentando conexión en ${l}ms (intento ${this.reconnectAttempts}/${this.maxReconnectAttempts})`),setTimeout(()=>{this.connect()},l)}else console.error("❌ Máximo número de intentos de reconexión alcanzado")}emitToListeners(l,u){const h=this.listeners.get(l);h&&h.forEach(C=>{try{C(u)}catch(b){console.error(`Error en listener de evento ${l}:`,b)}})}on(l,u){this.listeners.has(l)||this.listeners.set(l,[]),this.listeners.get(l)?.push(u)}off(l,u){if(!u){this.listeners.delete(l);return}const h=this.listeners.get(l);if(h){const C=h.indexOf(u);C>-1&&h.splice(C,1)}}joinRoom(l){this.socket&&this.isConnected&&(this.socket.emit("join-room",l),console.log(`📍 Unido a la sala: ${l}`))}leaveRoom(l){this.socket&&this.isConnected&&(this.socket.emit("leave-room",l),console.log(`🚪 Saliendo de la sala: ${l}`))}joinTable(l){this.joinRoom(`table-${l}`)}leaveTable(l){this.leaveRoom(`table-${l}`)}emit(l,u){this.socket&&this.isConnected?this.socket.emit(l,u):console.warn("Socket no conectado, no se puede enviar evento:",l)}isSocketConnected(){return this.isConnected}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null,this.isConnected=!1)}}const ln=new j2,_c=(d={})=>{const{room:l,tableId:u,autoConnect:h=!0}=d,[C,b]=j.useState(!1),[w,_]=j.useState([]);j.useEffect(()=>{const ee=()=>{b(ln.isSocketConnected())};ee();const ne=setInterval(ee,1e3);return()=>clearInterval(ne)},[]),j.useEffect(()=>(C&&h&&(l&&ln.joinRoom(l),u&&ln.joinTable(u)),()=>{l&&ln.leaveRoom(l),u&&ln.leaveTable(u)}),[C,l,u,h]);const I=j.useCallback(ee=>{_(ne=>[ee,...ne.slice(0,49)])},[]),A=j.useCallback(()=>{_([])},[]),D=j.useCallback(ee=>{_(ne=>ne.filter((J,xe)=>xe!==ee))},[]),M=j.useCallback(ee=>{ln.joinRoom(ee)},[]),P=j.useCallback(ee=>{ln.leaveRoom(ee)},[]),G=j.useCallback((ee,ne)=>{ln.emit(ee,ne)},[]);return{isConnected:C,notifications:w,addNotification:I,clearNotifications:A,removeNotification:D,joinRoom:M,leaveRoom:P,emit:G,socketService:ln}},df=()=>{const[d,l]=j.useState([]);j.useEffect(()=>{const h=w=>{l(_=>[w,..._.slice(0,19)])},C=w=>{l(_=>[w,..._.slice(0,19)])},b=w=>{l(_=>[w,..._.slice(0,19)])};return ln.on("new-order",h),ln.on("order-status-changed",C),ln.on("order-ready",b),()=>{ln.off("new-order",h),ln.off("order-status-changed",C),ln.off("order-ready",b)}},[]);const u=j.useCallback(()=>{l([])},[]);return{orderNotifications:d,clearOrderNotifications:u}},k2=d=>{const[l,u]=j.useState([]);j.useEffect(()=>{const C=w=>{(!d||w.data.tableId===d)&&u(_=>[w,..._.slice(0,9)])},b=w=>{(!d||w.data.tableId===d)&&u(_=>[w,..._.slice(0,9)])};return ln.on("table-status-changed",C),ln.on("table-notification",b),()=>{ln.off("table-status-changed",C),ln.off("table-notification",b)}},[d]);const h=j.useCallback(()=>{u([])},[]);return{tableNotifications:l,clearTableNotifications:h}},z2=()=>{const[d,l]=j.useState([]);j.useEffect(()=>{const h=b=>{l(w=>[b,...w.slice(0,9)])},C=b=>{l(w=>[b,...w.slice(0,9)])};return ln.on("emergency",h),ln.on("low-stock",C),()=>{ln.off("emergency",h),ln.off("low-stock",C)}},[]);const u=j.useCallback(()=>{l([])},[]);return{systemNotifications:d,clearSystemNotifications:u}};function U2(){const{tableId:d="1"}=Hx(),[l,u]=j.useState([]),[h,C]=j.useState("todos"),[b,w]=j.useState({}),[_,I]=j.useState("Sin pedido"),[A,D]=j.useState(""),[M,P]=j.useState(""),[G,ee]=j.useState(""),[ne,J]=j.useState(Mh(d)),[xe,ce]=j.useState(null),[X,Ee]=j.useState(null),[Fe,ge]=j.useState([]);_c({tableId:d}),k2(d);const te=async()=>{try{const V=localStorage.getItem("token"),ae=await fetch("/api/tables",{headers:{Authorization:`Bearer ${V}`,"Content-Type":"application/json"}});if(ae.ok){const Ve=((await ae.json()).data||[]).find(Le=>Le.number.toString()===d);if(Ve){const Le=await fetch(`/api/orders?tableId=${Ve.id}`,{headers:{Authorization:`Bearer ${V}`,"Content-Type":"application/json"}});if(Le.ok){const Pe=await Le.json();ge(Pe.data||[])}}}}catch(V){console.error("Error loading backend orders:",V)}};j.useEffect(()=>{(async()=>{try{const ae=localStorage.getItem("token"),ye=await fetch("/api/products",{headers:{Authorization:`Bearer ${ae}`,"Content-Type":"application/json"}});if(ye.ok){const Le=((await ye.json()).data||[]).map(Pe=>({id:Pe.id,name:Pe.name,description:Pe.description,price:Pe.price,image:Pe.image,category:Pe.category?.name,tags:[],variants:[],active:Pe.active}));u(Le)}else console.error("Error loading menu from API"),u(Yo())}catch(ae){console.error("Error loading menu:",ae),u(Yo())}})()},[]),j.useEffect(()=>{te()},[d]),j.useEffect(()=>{d&&(async()=>{try{const ae=localStorage.getItem("token"),ye=await fetch("/api/tables",{headers:{Authorization:`Bearer ${ae}`,"Content-Type":"application/json"}});if(ye.ok){const Le=((await ye.json()).data||[]).find(Pe=>Pe.number.toString()===d);Le&&Le.status==="AVAILABLE"&&(await fetch(`/api/tables/${Le.id}/status`,{method:"PATCH",headers:{Authorization:`Bearer ${ae}`,"Content-Type":"application/json"},body:JSON.stringify({status:"OCCUPIED"})})).ok&&console.log(`Mesa ${d} marcada como ocupada automáticamente`)}}catch(ae){console.error("Error al marcar mesa como ocupada:",ae)}})()},[d]);const[Te,de]=j.useState(null),[De,tt]=j.useState(1),[Me,nt]=j.useState(""),[st,oe]=j.useState(""),[$,fe]=j.useState(""),[Ge,Z]=j.useState([]),[be,z]=j.useState(!1),[re,ve]=j.useState(null),[Re,Ke]=j.useState(!1),[Se,ot]=j.useState([]),[ft,Bt]=j.useState([]),[Yn,cn]=j.useState(!1),[hi,pt]=j.useState(!1),[Kt,_e]=j.useState(""),[Xe,Oe]=j.useState(""),[We,Qe]=j.useState("");j.useEffect(()=>{const V=af(()=>{u(Yo());const ye=Vs(d);I(ye?`Estado: ${ye.status}`:"Sin pedido"),J(Mh(d));const Be=Ji(d).filter(Ve=>Ve.paymentStatus!=="pagado");ot(Ve=>{const Le=Ve.filter(Pe=>Be.some(ht=>ht.id===Pe));return Le.length===0&&Be.length>0&&be?Be.map(Pe=>Pe.id):Le})}),ae=Vs(d);return I(ae?`Estado: ${ae.status}`:"Sin pedido"),()=>{V()}},[d,be]),j.useEffect(()=>{if(!ne||ne.length===0)return;const V=[...ne].sort((ae,ye)=>ae.createdAt>ye.createdAt?-1:1)[0];if(V&&V.from==="cocina"&&V.id!==X){ce(V.text),Ee(V.id);const ae=setTimeout(()=>ce(null),4e3);return()=>clearTimeout(ae)}},[ne,X]);const ii=j.useMemo(()=>h==="todos"?l:h==="vegano"||h==="sin_gluten"?l.filter(V=>V.tags?.includes(h)):l.filter(V=>{const ae=V.category?.toLowerCase();switch(h){case"bebidas":return ae==="bebidas"||ae==="bebida";case"postres":return ae==="postres"||ae==="postre";case"entradas":return ae==="entradas"||ae==="entrada"||ae==="aperitivos";case"platos_principales":return ae==="platos principales"||ae==="plato principal"||ae==="principales";default:return!0}}),[l,h]),ke=j.useMemo(()=>[{key:"entradas",name:"Entradas",emoji:"🥗"},{key:"platos_principales",name:"Platos Principales",emoji:"🍽️"},{key:"bebidas",name:"Bebidas",emoji:"🥤"},{key:"postres",name:"Postres",emoji:"🍰"}].map(ae=>{const ye=l.filter(Be=>{const Ve=Be.category?.toLowerCase();switch(ae.key){case"entradas":return Ve==="entradas"||Ve==="entrada"||Ve==="aperitivos";case"platos_principales":return Ve==="platos principales"||Ve==="plato principal"||Ve==="principales";case"bebidas":return Ve==="bebidas"||Ve==="bebida";case"postres":return Ve==="postres"||Ve==="postre";default:return!1}});return{...ae,items:ye}}).filter(ae=>ae.items.length>0),[l]),yr=(V,ae)=>{w(ye=>{const Be={...ye},Ve=Be[V]?.qty||0,Le=Math.max(0,Ve+ae);return Le===0?delete Be[V]:Be[V]={...Be[V],qty:Le},Be})},Da=V=>{de(V),tt(1),nt(""),oe(""),fe(""),Z([])},Jt=()=>{de(null),fe(""),Z([])},Ba=()=>{if(!Te)return;const V=`${Te.id}_${Date.now()}`;w(ae=>{const ye={...ae};return ye[V]={qty:De,options:{side:Me||void 0,variant:st||void 0,comments:$||void 0,accompaniments:Ge.length>0?Ge:void 0}},ye}),de(null)},Xn=async()=>{const V=Object.entries(b).map(([ae,ye])=>({menuItemId:ae.split("_")[0],qty:ye.qty,options:ye.options}));if(V.length!==0)try{const ae=localStorage.getItem("token"),ye=await fetch("/api/tables",{headers:{Authorization:`Bearer ${ae}`,"Content-Type":"application/json"}});if(!ye.ok)throw new Error("Error al obtener información de la mesa");const Le=((await ye.json()).data||[]).find(jt=>jt.number.toString()===d);if(!Le)throw new Error("Mesa no encontrada");const Pe={tableId:Le.id,items:V.map(jt=>({productId:jt.menuItemId,quantity:jt.qty,notes:jt.options?JSON.stringify(jt.options):void 0})),notes:[A,M,G].filter(Boolean).join(" | ")},ht=await fetch("/api/orders",{method:"POST",headers:{Authorization:`Bearer ${ae}`,"Content-Type":"application/json"},body:JSON.stringify(Pe)});if(!ht.ok)throw new Error("Error al crear el pedido");const xn=await ht.json();console.log("Pedido creado exitosamente:",xn),w({}),D(""),P(""),ee(""),I("Pedido enviado")}catch(ae){console.error("Error al enviar pedido:",ae);const ye=zm(d,V);Oh(ye.id,V,A,M,G),w({}),D(""),P(""),ee("");const Be=Vs(d);I(Be?`Estado: ${Be.status}`:"Sin pedido")}},La=()=>{const V=Vs(d);if(!V)return;const ae=Object.entries(b).map(([ye,Be])=>({menuItemId:ye,qty:Be.qty,options:Be.options}));Oh(V.id,ae,A,M,G)},qn=()=>{const V=Vs(d);V&&Fm(V.id)},On=j.useMemo(()=>Object.entries(b).reduce((V,[ae,ye])=>{const Be=ae.includes("_")?ae.split("_")[0]:ae,Ve=l.find(Pe=>Pe.id===Be)?.price||0,Le=typeof ye=="number"?ye:ye.qty||0;return V+Ve*Le},0),[b,l]),Ri=j.useMemo(()=>Fe.length>0?Fe.filter(V=>V.paymentStatus!=="PAID"):Ji(d).filter(V=>V.paymentStatus!=="pagado"),[d,Fe]),Gr=V=>l.find(ae=>ae.id===V)?.price||0,as=V=>Fe.length>0?V.orderItems?.reduce((ae,ye)=>ae+ye.quantity*ye.product.price,0)||0:V.items?.reduce((ae,ye)=>ae+ye.qty*Gr(ye.menuItemId),0)||0,St=j.useMemo(()=>Yn?ft.reduce((V,{orderId:ae,itemIndex:ye})=>{const Be=Ri.find(Ve=>Ve.id===ae);if(!Be)return V;if(Fe.length>0){const Ve=Be.orderItems?.[ye];return V+(Ve?Ve.quantity*Ve.product.price:0)}else{const Ve=Be.items?.[ye],Le=l.find(Pe=>Pe.id===Ve?.menuItemId);return V+(Le&&Ve?Le.price*Ve.qty:0)}},0):Ri.filter(ae=>Se.includes(ae.id)).reduce((ae,ye)=>ae+as(ye),0),[Se,ft,Yn,Ri,l,Fe]),Ne=j.useMemo(()=>{const V=Ji(d);return V.length===0?!1:V.every(ae=>ae.paymentStatus==="pagado")},[d]),Lt=j.useMemo(()=>Ji(d).some(ae=>ae.paymentStatus!=="pagado"),[d]);return x.jsxs("div",{className:"container",children:[x.jsxs("header",{className:"header",children:[x.jsxs("div",{style:{textAlign:"left"},children:[x.jsx("h2",{children:"Menú Digital"}),x.jsxs("div",{children:["Mesa ",d," | ",x.jsx("span",{children:_})]})]}),x.jsxs("nav",{style:{display:"flex",gap:12,alignItems:"center"},children:[x.jsx(Un,{to:"/mesero",children:"Mesero"}),x.jsx(Un,{to:"/cocina",children:"Cocina"}),x.jsx(Un,{to:"/admin",children:"Admin"}),Ne?x.jsx("span",{className:"badge success",children:"Pagado ✓"}):Lt?x.jsx("span",{className:"badge pending",children:"Pendiente ⏳"}):null]})]}),x.jsxs("div",{className:"page-grid",children:[x.jsxs("div",{children:[x.jsx("h3",{children:"Platillos Disponibles"}),x.jsxs("div",{className:"filter-bar",style:{display:"flex",gap:"8px",marginBottom:"16px",flexWrap:"wrap"},children:[x.jsx("button",{className:h==="todos"?"active":"",onClick:()=>C("todos"),style:{padding:"8px 16px",border:h==="todos"?"2px solid #3b82f6":"2px solid #e5e7eb",borderRadius:"8px",backgroundColor:h==="todos"?"#3b82f6":"#f9fafb",color:h==="todos"?"white":"#374151",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"🍽️ Todos"}),x.jsx("button",{className:h==="entradas"?"active":"",onClick:()=>C("entradas"),style:{padding:"8px 16px",border:h==="entradas"?"2px solid #3b82f6":"2px solid #e5e7eb",borderRadius:"8px",backgroundColor:h==="entradas"?"#3b82f6":"#f9fafb",color:h==="entradas"?"white":"#374151",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"🥗 Entradas"}),x.jsx("button",{className:h==="platos_principales"?"active":"",onClick:()=>C("platos_principales"),style:{padding:"8px 16px",border:h==="platos_principales"?"2px solid #3b82f6":"2px solid #e5e7eb",borderRadius:"8px",backgroundColor:h==="platos_principales"?"#3b82f6":"#f9fafb",color:h==="platos_principales"?"white":"#374151",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"🍖 Platos principales"}),x.jsx("button",{className:h==="bebidas"?"active":"",onClick:()=>C("bebidas"),style:{padding:"8px 16px",border:h==="bebidas"?"2px solid #3b82f6":"2px solid #e5e7eb",borderRadius:"8px",backgroundColor:h==="bebidas"?"#3b82f6":"#f9fafb",color:h==="bebidas"?"white":"#374151",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"🥤 Bebidas"}),x.jsx("button",{className:h==="postres"?"active":"",onClick:()=>C("postres"),style:{padding:"8px 16px",border:h==="postres"?"2px solid #3b82f6":"2px solid #e5e7eb",borderRadius:"8px",backgroundColor:h==="postres"?"#3b82f6":"#f9fafb",color:h==="postres"?"white":"#374151",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"🍰 Postres"})]}),x.jsxs("section",{className:"card",style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb"},children:[x.jsx("h3",{style:{margin:"0 0 16px 0",color:"#1f2937",fontSize:"18px",fontWeight:"600"},children:"Menú"}),h==="todos"?x.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:ke.map(V=>x.jsxs("div",{children:[x.jsxs("h4",{style:{margin:"0 0 12px 0",color:"#1f2937",fontSize:"16px",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px",borderBottom:"2px solid #e5e7eb",paddingBottom:"8px"},children:[x.jsx("span",{children:V.emoji}),V.name]}),x.jsx("ul",{className:"menu-list",style:{listStyle:"none",padding:0,margin:0,display:"grid",gap:"12px"},children:V.items.map(ae=>x.jsxs("li",{className:"menu-item product-card",onClick:()=>Da(ae),style:{cursor:"pointer",backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"16px",display:"flex",alignItems:"center",gap:"12px",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[x.jsx("div",{className:"product-media",children:ae.image?x.jsx("img",{src:ae.image,alt:ae.name,className:"product-image",style:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"8px"}}):x.jsx("div",{className:"product-image placeholder","aria-hidden":"true",style:{width:"60px",height:"60px",backgroundColor:"#f3f4f6",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"#9ca3af",fontSize:"24px"},children:"🍽️"})}),x.jsxs("div",{className:"product-body",style:{flex:1},children:[x.jsxs("div",{className:"product-header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"4px"},children:[x.jsx("div",{className:"product-title",style:{fontWeight:"600",color:"#1f2937",fontSize:"16px"},children:ae.name}),x.jsxs("div",{className:"product-price",style:{fontWeight:"700",color:"#059669",fontSize:"16px"},children:["$",ae.price]})]}),ae.description&&x.jsx("div",{className:"product-desc",style:{color:"#6b7280",fontSize:"14px",marginBottom:"8px"},children:ae.description}),x.jsxs("div",{className:"product-tags",style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:[ae.tags?.map(ye=>x.jsx("span",{className:"chip",style:{backgroundColor:"#dbeafe",color:"#1e40af",padding:"2px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"500"},children:ye},ye)),!ae.active&&x.jsx("span",{className:"chip danger",style:{backgroundColor:"#fee2e2",color:"#dc2626",padding:"2px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"500"},children:"Agotado"})]})]}),x.jsx("button",{className:"add-fab","aria-label":"Agregar 1",disabled:!ae.active,onClick:ye=>{ye.stopPropagation(),yr(ae.id,1)},style:{width:"36px",height:"36px",borderRadius:"50%",border:"none",backgroundColor:ae.active?"#3b82f6":"#d1d5db",color:"white",fontSize:"20px",fontWeight:"bold",cursor:ae.active?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},children:"+"})]},ae.id))})]},V.key))}):x.jsx("ul",{className:"menu-list",style:{listStyle:"none",padding:0,margin:0,display:"grid",gap:"12px"},children:ii.map(V=>x.jsxs("li",{className:"menu-item product-card",onClick:()=>Da(V),style:{cursor:"pointer",backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"16px",display:"flex",alignItems:"center",gap:"12px",transition:"all 0.2s ease",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[x.jsx("div",{className:"product-media",children:V.image?x.jsx("img",{src:V.image,alt:V.name,className:"product-image",style:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"8px"}}):x.jsx("div",{className:"product-image placeholder","aria-hidden":"true",style:{width:"60px",height:"60px",backgroundColor:"#f3f4f6",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",color:"#9ca3af",fontSize:"24px"},children:"🍽️"})}),x.jsxs("div",{className:"product-body",style:{flex:1},children:[x.jsxs("div",{className:"product-header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"4px"},children:[x.jsx("div",{className:"product-title",style:{fontWeight:"600",color:"#1f2937",fontSize:"16px"},children:V.name}),x.jsxs("div",{className:"product-price",style:{fontWeight:"700",color:"#059669",fontSize:"16px"},children:["$",V.price]})]}),V.description&&x.jsx("div",{className:"product-desc",style:{color:"#6b7280",fontSize:"14px",marginBottom:"8px"},children:V.description}),x.jsxs("div",{className:"product-tags",style:{display:"flex",gap:"4px",flexWrap:"wrap"},children:[V.tags?.map(ae=>x.jsx("span",{className:"chip",style:{backgroundColor:"#dbeafe",color:"#1e40af",padding:"2px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"500"},children:ae},ae)),!V.active&&x.jsx("span",{className:"chip danger",style:{backgroundColor:"#fee2e2",color:"#dc2626",padding:"2px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"500"},children:"Agotado"})]})]}),x.jsx("button",{className:"add-fab","aria-label":"Agregar 1",disabled:!V.active,onClick:ae=>{ae.stopPropagation(),yr(V.id,1)},style:{width:"36px",height:"36px",borderRadius:"50%",border:"none",backgroundColor:V.active?"#3b82f6":"#d1d5db",color:"white",fontSize:"20px",fontWeight:"bold",cursor:V.active?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"},children:"+"})]},V.id))})]})]}),x.jsx("aside",{})]}),xe&&x.jsx("div",{className:"toast",role:"status","aria-live":"polite",children:xe}),Te&&x.jsx("div",{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":`Detalle ${Te.name}`,onClick:Jt,children:x.jsxs("div",{className:"modal",onClick:V=>V.stopPropagation(),children:[x.jsxs("div",{className:"modal-header",children:[x.jsx("div",{className:"modal-title",children:Te.name}),x.jsx("button",{className:"modal-close","aria-label":"Cerrar",onClick:Jt,children:"×"})]}),x.jsxs("div",{className:"modal-body",children:[x.jsx("div",{className:"modal-media",children:Te.image?x.jsx("img",{src:Te.image,alt:Te.name}):x.jsx("div",{className:"product-image placeholder","aria-hidden":"true"})}),x.jsxs("div",{className:"modal-info",children:[x.jsxs("div",{className:"modal-price",children:["$",Te.price]}),Te.description&&x.jsx("p",{className:"modal-desc",children:Te.description}),Te.tags&&Te.tags.length>0&&x.jsxs("div",{children:[x.jsx("div",{style:{fontWeight:600,marginBottom:4},children:"Alérgenos / tags"}),x.jsx("div",{className:"product-tags",children:Te.tags.map(V=>x.jsx("span",{className:"chip",children:V},V))})]}),Te.variants&&Te.variants.length>0?x.jsx("div",{className:"product-options",style:{marginTop:8},children:x.jsxs("select",{value:st,onChange:V=>oe(V.target.value),"aria-label":"Variante",children:[x.jsx("option",{value:"",children:"Variante"}),Te.variants.map(V=>x.jsx("option",{value:V,children:V},V))]})}):null,Te?.hasAccompaniments!==!1&&x.jsxs("div",{className:"product-options",style:{marginTop:8},children:[Te?.defaultAccompaniments&&Te.defaultAccompaniments.length>0&&x.jsxs("div",{style:{marginBottom:8},children:[x.jsx("div",{style:{fontWeight:600,marginBottom:4,fontSize:"14px"},children:"Acompañamientos incluidos:"}),x.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px",marginBottom:"8px"},children:Te.defaultAccompaniments.map(V=>x.jsx("button",{onClick:()=>{nt(ae=>ae===V?"":V)},style:{padding:"4px 8px",fontSize:"12px",border:"1px solid #d1d5db",borderRadius:"4px",backgroundColor:Me===V?"#3b82f6":"#f3f4f6",color:Me===V?"white":"#374151",cursor:"pointer",transition:"all 0.2s ease"},children:V},V))})]}),x.jsx("input",{type:"text",placeholder:"Otro acompañamiento personalizado...",value:Me&&!Te?.defaultAccompaniments?.includes(Me)?Me:"",onChange:V=>nt(V.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}})]}),x.jsx("div",{style:{marginTop:8},children:x.jsx("textarea",{placeholder:"Sugerencia para cocina o acompañamiento adicional (ej: sin sal, término medio, extra queso, etc.)",value:$,onChange:V=>fe(V.target.value),className:"mobile-textarea",style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",minHeight:"80px",resize:"vertical"}})}),x.jsxs("div",{className:"product-actions",style:{marginTop:8},children:[x.jsx("button",{onClick:()=>tt(Math.max(1,De-1)),className:"mobile-button",style:{padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:"white",cursor:"pointer"},children:"-"}),x.jsx("span",{style:{padding:"8px 16px",fontWeight:"600"},children:De}),x.jsx("button",{onClick:()=>tt(De+1),className:"mobile-button",style:{padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:"white",cursor:"pointer"},children:"+"}),x.jsx("button",{className:"primary mobile-button",onClick:Ba,style:{padding:"12px 20px",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"6px",fontWeight:"600",cursor:"pointer"},children:"Agregar"})]})]})]})]})}),be&&x.jsx("div",{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":`Confirmar pago efectivo mesa ${d}`,onClick:()=>z(!1),children:x.jsxs("div",{className:"modal",onClick:V=>V.stopPropagation(),children:[x.jsxs("div",{className:"modal-header",children:[x.jsxs("div",{className:"modal-title",children:["Confirmar pago efectivo — Mesa ",d]}),x.jsx("button",{className:"modal-close","aria-label":"Cerrar",onClick:()=>z(!1),children:"×"})]}),x.jsx("div",{className:"modal-body",style:{gridTemplateColumns:"1fr"},children:x.jsxs("div",{className:"modal-info",children:[x.jsx("div",{children:"Seleccione los pedidos impagos que se van a pagar:"}),x.jsx("div",{style:{marginTop:8},children:Ri.map(V=>x.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 0"},children:[x.jsx("input",{type:"checkbox",checked:Se.includes(V.id),onChange:ae=>{const ye=ae.target.checked;ot(Be=>ye?[...Be,V.id]:Be.filter(Ve=>Ve!==V.id))}}),x.jsxs("span",{children:["Pedido #",V.id," — $",as(V)]})]},V.id))}),x.jsxs("div",{style:{marginTop:8,fontWeight:700},children:["Total: $",St]}),x.jsx("div",{style:{marginTop:8},children:x.jsx("input",{type:"number",placeholder:"Monto recibido en efectivo",value:Kt,onChange:V=>_e(V.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}})}),Kt&&St>0&&x.jsx("div",{style:{marginTop:8},children:(parseFloat(Kt)||0)>=St?x.jsxs("div",{style:{fontSize:"14px",color:"#059669",fontWeight:600},children:["Vuelto: $",Math.max(0,(parseFloat(Kt)||0)-St)]}):x.jsxs("div",{style:{fontSize:"14px",color:"#dc2626",fontWeight:600},children:["Falta: $",St-(parseFloat(Kt)||0)," (se pagará con Webpay)"]})}),x.jsxs("div",{className:"product-actions",style:{marginTop:16},children:[x.jsx("button",{onClick:()=>z(!1),children:"Cancelar"}),x.jsx("button",{className:"primary",disabled:Se.length===0||!Kt||(parseFloat(Kt)||0)<=0,onClick:async()=>{const V=parseFloat(Kt)||0,ae=St-V;V>=St?(Fe.length>0?Se.forEach(async ye=>{try{const Be=localStorage.getItem("token");await fetch(`/api/orders/${ye}/payment`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Be}`},body:JSON.stringify({paymentStatus:"PAID"})})}catch(Be){console.error("Error updating payment status:",Be)}}):Se.forEach(ye=>Pd(ye,"pagado")),z(!1),ot([]),_e(""),te()):(alert(`Pago mixto: $${V} en efectivo recibido. Proceder con Webpay por $${ae}`),confirm(`¿Confirmar pago Webpay de $${ae}?`)&&(Fe.length>0?Se.forEach(async ye=>{try{const Be=localStorage.getItem("token");await fetch(`/api/orders/${ye}/payment`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Be}`},body:JSON.stringify({paymentStatus:"PAID",paymentMethod:"mixed",cashAmount:V,webpayAmount:ae})})}catch(Be){console.error("Error updating payment status:",Be)}}):Se.forEach(ye=>Pd(ye,"pagado")),z(!1),ot([]),_e(""),te()))},children:(parseFloat(Kt)||0)>=St?"💰 Confirmar pago en efectivo":"💳 Confirmar pago mixto (Efectivo + Webpay)"})]})]})})]})}),x.jsxs("section",{className:"card",style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",margin:"20px auto",maxWidth:"800px"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[x.jsx("span",{style:{fontSize:"20px"},children:"❓"}),x.jsx("span",{style:{fontWeight:"600",color:"#1f2937",fontSize:"16px"},children:"Preguntas y Solicitudes"})]}),x.jsx("div",{style:{marginBottom:"12px"},children:x.jsx("textarea",{placeholder:"¿Tienes alguna pregunta sobre el menú o solicitud especial? Escríbela aquí y el mesero te responderá...",value:G,onChange:V=>ee(V.target.value),className:"mobile-textarea",style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"14px",minHeight:"80px",resize:"vertical",fontFamily:"inherit"}})}),x.jsx("button",{onClick:()=>{G.trim()&&(mg(d,"mesero",`Pregunta/Solicitud del cliente: ${G}`),ee(""),alert("Tu pregunta ha sido enviada al mesero. Te responderá pronto."))},disabled:!G.trim(),className:"mobile-button",style:{padding:"8px 16px",backgroundColor:G.trim()?"#3b82f6":"#d1d5db",color:"white",border:"none",borderRadius:"6px",fontWeight:"500",fontSize:"14px",cursor:G.trim()?"pointer":"not-allowed",transition:"all 0.2s ease"},children:"📤 Enviar pregunta al mesero"})]}),x.jsx("button",{onClick:()=>pt(!hi),style:{position:"fixed",bottom:"20px",right:"20px",width:"60px",height:"60px",borderRadius:"50%",border:"none",backgroundColor:"#dc2626",color:"white",fontSize:"24px",fontWeight:"600",cursor:"pointer",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",transition:"all 0.3s ease",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},title:"Historial de Pedidos - Nuevo Pedido (Carrito)",children:"🛒"}),hi&&x.jsxs("div",{style:{position:"fixed",bottom:"90px",right:"20px",width:"350px",maxHeight:"70vh",backgroundColor:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)",border:"1px solid #e5e7eb",zIndex:1001,overflowY:"auto"},children:[x.jsxs("div",{style:{backgroundColor:"#f8fafc",borderRadius:"8px",padding:"16px",marginBottom:"16px"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[x.jsx("span",{style:{fontSize:"18px"},children:"🛒"}),x.jsx("span",{style:{fontWeight:"600",color:"#1f2937",fontSize:"16px"},children:"Nuevo Pedido (Carrito)"})]}),Object.keys(b).length===0?x.jsx("p",{style:{color:"#6b7280",fontStyle:"italic",textAlign:"center",padding:"20px 0"},children:"El carrito está vacío. Agrega un platillo."}):x.jsx("ul",{style:{listStyle:"none",padding:0,margin:"0 0 16px 0"},children:Object.entries(b).map(([V,ae])=>{const ye=V.includes("|")?V.split("|")[0]:V,Be=l.find(Ve=>Ve.id===ye);return x.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",padding:"8px 0",borderBottom:"1px solid #f3f4f6"},children:[x.jsxs("div",{style:{flex:1},children:[x.jsxs("div",{style:{color:"#374151",fontWeight:"500"},children:[Be?.name," x ",ae.qty]}),ae.options&&x.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"2px"},children:[ae.options.variant&&x.jsxs("span",{children:["• ",ae.options.variant]}),ae.options.side&&x.jsxs("span",{children:["• ",ae.options.side]}),ae.options.accompaniments&&ae.options.accompaniments.length>0&&x.jsxs("span",{children:["• ",ae.options.accompaniments.join(", ")]}),ae.options.comments&&x.jsxs("span",{children:["• ",ae.options.comments]})]})]}),x.jsxs("span",{style:{fontWeight:"600",color:"#059669"},children:["$",ae.qty*(Be?.price||0)]})]},V)})}),x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:"700",fontSize:"18px",color:"#1f2937",padding:"12px 0",borderTop:"2px solid #e5e7eb",marginBottom:"16px"},children:[x.jsx("div",{children:"TOTAL:"}),x.jsxs("div",{children:["$",On]})]}),x.jsx("button",{className:"send-order-btn",onClick:Xn,disabled:Object.keys(b).length===0,style:{width:"100%",padding:"12px 20px",backgroundColor:Object.keys(b).length===0?"#d1d5db":"#059669",color:"white",border:"none",borderRadius:"8px",fontWeight:"600",fontSize:"16px",cursor:Object.keys(b).length===0?"not-allowed":"pointer",transition:"all 0.2s ease"},children:"Enviar pedido a Cocina"}),x.jsx(F2,{tableId:d,editLatestOrder:La,cancelLatestOrder:qn})]}),x.jsxs("div",{style:{backgroundColor:"#fef3c7",borderRadius:"8px",padding:"16px",marginBottom:"16px"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[x.jsx("span",{style:{fontSize:"18px"},children:"📊"}),x.jsx("span",{style:{fontWeight:"600",color:"#1f2937",fontSize:"16px"},children:"Resumen de cuenta"})]}),(()=>{const V=Ji(d).filter(Pe=>Pe.paymentStatus!=="pagado"),ae=Fe.length>0,ye=Fe.filter(Pe=>Pe.paymentStatus!=="PAID");if((ae?ye:V).length===0)return x.jsx("p",{style:{color:"#6b7280",fontStyle:"italic",textAlign:"center",padding:"20px 0"},children:"Sin consumos pendientes"});const Ve={};let Le=0;return ae?ye.forEach(Pe=>{Pe.orderItems.forEach(ht=>{const xn=ht.product.id;Ve[xn]||(Ve[xn]={qty:0,name:ht.product.name,price:ht.product.price}),Ve[xn].qty+=ht.quantity,Le+=ht.quantity*ht.product.price})}):V.forEach(Pe=>{Pe.items.forEach(ht=>{const xn=l.find(ja=>ja.id===ht.menuItemId),jt=ht.menuItemId;Ve[jt]||(Ve[jt]={qty:0,name:xn?.name||ht.menuItemId,price:xn?.price||0}),Ve[jt].qty+=ht.qty,Le+=ht.qty*(xn?.price||0)})}),x.jsxs("div",{children:[x.jsx("ul",{style:{listStyle:"none",padding:0,margin:"0 0 16px 0"},children:Object.entries(Ve).map(([Pe,{qty:ht,name:xn,price:jt}])=>x.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderBottom:"1px solid #f3f4f6"},children:[x.jsxs("span",{style:{color:"#374151"},children:[xn," x ",ht]}),x.jsxs("span",{style:{fontWeight:"600",color:"#059669"},children:["$",ht*jt]})]},Pe))}),x.jsxs("div",{style:{marginTop:"16px",padding:"12px 0",borderTop:"2px solid #e5e7eb",fontWeight:"700",fontSize:"18px",color:"#1f2937",display:"flex",justifyContent:"space-between"},children:[x.jsx("span",{children:"Total:"}),x.jsxs("span",{children:["$",Le]})]}),x.jsxs("div",{style:{marginTop:"16px",display:"flex",gap:"8px",flexWrap:"wrap"},children:[x.jsx("button",{className:"primary",onClick:()=>{ve("cash"),Ke(!1),ot(Ri.map(Pe=>Pe.id)),z(!0)},style:{padding:"10px 20px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Pagar en efectivo"}),x.jsx("button",{onClick:()=>{ve("webpay"),Ke(!1),ot(Ri.map(Pe=>Pe.id)),z(!0)},style:{padding:"10px 20px",backgroundColor:"#f9fafb",color:"#374151",border:"2px solid #e5e7eb",borderRadius:"8px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Pagar con Webpay"})]})]})})()]}),(()=>{const V=Ji(d).filter(ye=>ye.status!=="entregado"),ae=Fe.length>0?Fe.filter(ye=>ye.status!=="DELIVERED"&&ye.status!=="CANCELLED"):V;return ae.length===0?null:x.jsxs("div",{style:{backgroundColor:"#f0f9ff",borderRadius:"8px",padding:"16px",marginBottom:"16px"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[x.jsx("span",{style:{fontSize:"18px"},children:"🍽️"}),x.jsx("span",{style:{fontWeight:"600",color:"#1f2937",fontSize:"16px"},children:"Estado de tus Pedidos"})]}),x.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:ae.sort((ye,Be)=>ye.createdAt>Be.createdAt?-1:1).map(ye=>{const Be=Fe.length>0,Ve=Be?ye.orderItems:ye.items,Le=Be?Ve.reduce((Pe,ht)=>Pe+ht.quantity*ht.product.price,0):Ve.reduce((Pe,ht)=>Pe+ht.qty*(l.find(xn=>xn.id===ht.menuItemId)?.price||0),0);return x.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"16px",border:"1px solid #e2e8f0",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[x.jsxs("div",{children:[x.jsxs("div",{style:{fontWeight:"600",color:"#1f2937",marginBottom:"4px"},children:["Pedido #",ye.id]}),x.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"8px"},children:new Date(ye.createdAt).toLocaleTimeString()}),x.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 12px",borderRadius:"16px",fontSize:"13px",fontWeight:"600",backgroundColor:(Be?ye.status==="PENDING":ye.status==="pendiente")?"#fef3c7":(Be?ye.status==="PREPARING":ye.status==="en_cocina")?"#fed7aa":(Be?ye.status==="READY":ye.status==="listo")?"#dcfce7":"#f3f4f6",color:(Be?ye.status==="PENDING":ye.status==="pendiente")?"#92400e":(Be?ye.status==="PREPARING":ye.status==="en_cocina")?"#c2410c":(Be?ye.status==="READY":ye.status==="listo")?"#166534":"#374151"},children:[(Be?ye.status==="PENDING":ye.status==="pendiente")&&"⏳ Pendiente",(Be?ye.status==="PREPARING":ye.status==="en_cocina")&&"👨‍🍳 En Cocina",(Be?ye.status==="READY":ye.status==="listo")&&"✅ Listo para retirar"]})]}),x.jsxs("div",{style:{fontWeight:"700",color:"#059669",fontSize:"16px"},children:["$",Le]})]}),x.jsxs("div",{style:{marginBottom:"8px"},children:[x.jsx("div",{style:{fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"6px"},children:"Platos:"}),x.jsx("ul",{style:{listStyle:"none",padding:0,margin:0,display:"flex",flexDirection:"column",gap:"2px"},children:Ve.map(Pe=>x.jsxs("li",{style:{fontSize:"13px",color:"#6b7280",display:"flex",justifyContent:"space-between"},children:[x.jsx("span",{children:Be?Pe.product.name:l.find(ht=>ht.id===Pe.menuItemId)?.name||Pe.menuItemId}),x.jsxs("span",{children:["x",Be?Pe.quantity:Pe.qty]})]},Be?Pe.id:Pe.menuItemId))})]}),(Be?ye.status==="READY":ye.status==="listo")&&x.jsx("div",{style:{backgroundColor:"#dcfce7",border:"1px solid #16a34a",borderRadius:"6px",padding:"8px 12px",marginTop:"8px"},children:x.jsx("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",fontWeight:"600",color:"#166534"},children:"🔔 ¡Tu pedido está listo! Puedes retirarlo en el mostrador."})})]},ye.id)})})]})})(),x.jsxs("div",{style:{backgroundColor:"#f1f5f9",borderRadius:"8px",padding:"16px"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[x.jsx("span",{style:{fontSize:"18px"},children:"📋"}),x.jsx("span",{style:{fontWeight:"600",color:"#1f2937",fontSize:"16px"},children:"Historial de Pedidos"})]}),x.jsxs("div",{className:"history-list",children:[Ji(d).sort((V,ae)=>V.createdAt>ae.createdAt?-1:1).map(V=>{const ae=V.items.reduce((ye,Be)=>ye+Be.qty*(l.find(Ve=>Ve.id===Be.menuItemId)?.price||0),0);return x.jsxs("div",{style:{backgroundColor:"white",borderRadius:"6px",padding:"12px",marginBottom:"8px",border:"1px solid #e2e8f0"},children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[x.jsxs("div",{children:[x.jsxs("div",{style:{fontWeight:"600",color:"#1f2937"},children:["Pedido #",V.id]}),x.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:new Date(V.createdAt).toLocaleTimeString()}),x.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:[x.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"2px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"500",backgroundColor:V.status==="pendiente"?"#fef3c7":V.status==="en_cocina"?"#fed7aa":V.status==="listo"?"#dcfce7":V.status==="entregado"?"#dbeafe":"#f3f4f6",color:V.status==="pendiente"?"#92400e":V.status==="en_cocina"?"#c2410c":V.status==="listo"?"#166534":V.status==="entregado"?"#1e40af":"#374151"},children:[V.status==="pendiente"&&"⏳",V.status==="en_cocina"&&"👨‍🍳",V.status==="listo"&&"✅",V.status==="entregado"&&"🚚",V.status==="pendiente"?"Pendiente":V.status==="en_cocina"?"En Cocina":V.status==="listo"?"Listo para retirar":V.status==="entregado"?"Entregado":V.status]}),x.jsx("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"2px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"500",backgroundColor:(V.paymentStatus||"pendiente")==="pagado"?"#dcfce7":"#fef3c7",color:(V.paymentStatus||"pendiente")==="pagado"?"#166534":"#92400e"},children:(V.paymentStatus||"pendiente")==="pagado"?"✅ Pagado":"💳 Pendiente"})]})]}),x.jsxs("div",{style:{fontWeight:"600",color:"#059669"},children:["$",ae]})]}),x.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:V.items.map(ye=>x.jsxs("li",{style:{fontSize:"14px",color:"#374151",marginBottom:"2px"},children:[l.find(Be=>Be.id===ye.menuItemId)?.name||ye.menuItemId," x ",ye.qty]},ye.menuItemId))})]},V.id)}),(()=>{const ae=Ji(d).reduce((ye,Be)=>ye+Be.items.reduce((Ve,Le)=>Ve+Le.qty*(l.find(Pe=>Pe.id===Le.menuItemId)?.price||0),0),0);return x.jsxs("div",{style:{fontWeight:"700",fontSize:"16px",color:"#1f2937",textAlign:"center",padding:"12px",backgroundColor:"white",borderRadius:"6px",border:"2px solid #059669"},children:["Suma total: $",ae]})})()]})]})]})]})}function F2({tableId:d,editLatestOrder:l,cancelLatestOrder:u}){const[h,C]=j.useState(0),b=Vs(d);if(j.useEffect(()=>{if(!b?.editableUntil)return;const M=()=>{const G=new Date,ee=new Date(b.editableUntil),ne=Math.max(0,ee.getTime()-G.getTime());C(ne)};M();const P=setInterval(M,1e3);return()=>clearInterval(P)},[b?.editableUntil]),!b)return null;const w=new Date,_=b.editableUntil?new Date(b.editableUntil):void 0,I=_?w<=_:!1,A=Math.floor(h/(1e3*60)),D=Math.floor(h%(1e3*60)/1e3);return x.jsxs("div",{style:{marginTop:"16px",padding:"16px",backgroundColor:I?"#fef3c7":"#f3f4f6",borderRadius:"12px",border:`2px solid ${I?"#f59e0b":"#e5e7eb"}`,display:"flex",flexDirection:"column",gap:"12px"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"8px"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[x.jsx("span",{style:{fontSize:"16px",fontWeight:"600",color:I?"#92400e":"#6b7280"},children:I?"⏰ Tiempo para editar/cancelar:":"🔒 Tiempo de edición expirado"}),I&&x.jsxs("span",{style:{fontSize:"18px",fontWeight:"700",color:A<1?"#ef4444":"#92400e",backgroundColor:"white",padding:"4px 8px",borderRadius:"6px",border:`1px solid ${A<1?"#ef4444":"#f59e0b"}`},children:[A,":",D.toString().padStart(2,"0")]})]}),x.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[I&&x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:l,style:{padding:"8px 16px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"6px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"✏️ Editar pedido"}),x.jsx("button",{onClick:u,style:{padding:"8px 16px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"6px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"🗑️ Cancelar pedido"})]}),b.paymentStatus==="pagado"&&x.jsx("span",{style:{padding:"8px 12px",backgroundColor:"#dcfce7",color:"#166534",borderRadius:"6px",fontWeight:"500",fontSize:"14px"},children:"✅ Pagado"})]})]}),!I&&x.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#6b7280",fontStyle:"italic"},children:"Los pedidos solo pueden editarse o cancelarse dentro de los primeros 3 minutos después de realizados."})]})}var ze;(function(d){d[d.QR_CODE=0]="QR_CODE",d[d.AZTEC=1]="AZTEC",d[d.CODABAR=2]="CODABAR",d[d.CODE_39=3]="CODE_39",d[d.CODE_93=4]="CODE_93",d[d.CODE_128=5]="CODE_128",d[d.DATA_MATRIX=6]="DATA_MATRIX",d[d.MAXICODE=7]="MAXICODE",d[d.ITF=8]="ITF",d[d.EAN_13=9]="EAN_13",d[d.EAN_8=10]="EAN_8",d[d.PDF_417=11]="PDF_417",d[d.RSS_14=12]="RSS_14",d[d.RSS_EXPANDED=13]="RSS_EXPANDED",d[d.UPC_A=14]="UPC_A",d[d.UPC_E=15]="UPC_E",d[d.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ze||(ze={}));var Uh=new Map([[ze.QR_CODE,"QR_CODE"],[ze.AZTEC,"AZTEC"],[ze.CODABAR,"CODABAR"],[ze.CODE_39,"CODE_39"],[ze.CODE_93,"CODE_93"],[ze.CODE_128,"CODE_128"],[ze.DATA_MATRIX,"DATA_MATRIX"],[ze.MAXICODE,"MAXICODE"],[ze.ITF,"ITF"],[ze.EAN_13,"EAN_13"],[ze.EAN_8,"EAN_8"],[ze.PDF_417,"PDF_417"],[ze.RSS_14,"RSS_14"],[ze.RSS_EXPANDED,"RSS_EXPANDED"],[ze.UPC_A,"UPC_A"],[ze.UPC_E,"UPC_E"],[ze.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Fh;(function(d){d[d.UNKNOWN=0]="UNKNOWN",d[d.URL=1]="URL"})(Fh||(Fh={}));function P2(d){return Object.values(ze).includes(d)}var _a;(function(d){d[d.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",d[d.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(_a||(_a={}));var er=(function(){function d(){}return d.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",d.SCAN_DEFAULT_FPS=2,d.DEFAULT_DISABLE_FLIP=!1,d.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,d.DEFAULT_SUPPORTED_SCAN_TYPE=[_a.SCAN_TYPE_CAMERA,_a.SCAN_TYPE_FILE],d})(),Og=(function(){function d(l,u){this.format=l,this.formatName=u}return d.prototype.toString=function(){return this.formatName},d.create=function(l){if(!Uh.has(l))throw"".concat(l," not in html5QrcodeSupportedFormatsTextMap");return new d(l,Uh.get(l))},d})(),Ph=(function(){function d(){}return d.createFromText=function(l){var u={text:l};return{decodedText:l,result:u}},d.createFromQrcodeResult=function(l){return{decodedText:l.text,result:l}},d})(),qd;(function(d){d[d.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",d[d.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",d[d.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(qd||(qd={}));var Mg=(function(){function d(){}return d.createFrom=function(l){return{errorMessage:l,type:qd.UNKWOWN_ERROR}},d})(),Dg=(function(){function d(l){this.verbose=l}return d.prototype.log=function(l){this.verbose&&console.log(l)},d.prototype.warn=function(l){this.verbose&&console.warn(l)},d.prototype.logError=function(l,u){(this.verbose||u===!0)&&console.error(l)},d.prototype.logErrors=function(l){if(l.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(l)},d})();function pr(d){return typeof d>"u"||d===null}function H2(d,l,u){return d>u?u:d<l?l:d}var Ys=(function(){function d(){}return d.codeParseError=function(l){return"QR code parse error, error = ".concat(l)},d.errorGettingUserMedia=function(l){return"Error getting userMedia, error = ".concat(l)},d.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},d.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},d.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},d.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},d.scannerPaused=function(){return"Scanner paused"},d})(),Vt=(function(){function d(){}return d.scanningStatus=function(){return"Scanning"},d.idleStatus=function(){return"Idle"},d.errorStatus=function(){return"Error"},d.permissionStatus=function(){return"Permission"},d.noCameraFoundErrorStatus=function(){return"No Cameras"},d.lastMatch=function(l){return"Last Match: ".concat(l)},d.codeScannerTitle=function(){return"Code Scanner"},d.cameraPermissionTitle=function(){return"Request Camera Permissions"},d.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},d.noCameraFound=function(){return"No camera found"},d.scanButtonStopScanningText=function(){return"Stop Scanning"},d.scanButtonStartScanningText=function(){return"Start Scanning"},d.torchOnButton=function(){return"Switch On Torch"},d.torchOffButton=function(){return"Switch Off Torch"},d.torchOnFailedMessage=function(){return"Failed to turn on torch"},d.torchOffFailedMessage=function(){return"Failed to turn off torch"},d.scanButtonScanningStarting=function(){return"Launching Camera..."},d.textIfCameraScanSelected=function(){return"Scan an Image File"},d.textIfFileScanSelected=function(){return"Scan using camera directly"},d.selectCamera=function(){return"Select Camera"},d.fileSelectionChooseImage=function(){return"Choose Image"},d.fileSelectionChooseAnother=function(){return"Choose Another"},d.fileSelectionNoImageSelected=function(){return"No image choosen"},d.anonymousCameraPrefix=function(){return"Anonymous Camera"},d.dragAndDropMessage=function(){return"Or drop an image to scan"},d.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},d.zoom=function(){return"zoom"},d.loadingImage=function(){return"Loading image..."},d.cameraScanAltText=function(){return"Camera based scan"},d.fileScanAltText=function(){return"Fule based scan"},d})(),Hh=(function(){function d(){}return d.poweredBy=function(){return"Powered by "},d.reportIssues=function(){return"Report issues"},d})(),Bg=(function(){function d(){}return d.isMediaStreamConstraintsValid=function(l,u){if(typeof l!="object"){var h=typeof l;return u.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(h,"."),!0),!1}for(var C=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],b=new Set(C),w=Object.keys(l),_=0,I=w;_<I.length;_++){var A=I[_];if(b.has(A))return u.logError("".concat(A," is not supported videoConstaints."),!0),!1}return!0},d})(),Go={exports:{}},V2=Go.exports,Vh;function G2(){return Vh||(Vh=1,(function(d,l){(function(u,h){h(l)})(V2,(function(u){function h(T){return T==null}var C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,t){T.__proto__=t}||function(T,t){for(var i in t)t.hasOwnProperty(i)&&(T[i]=t[i])};function b(T,t){C(T,t);function i(){this.constructor=T}T.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function w(T,t){var i=Object.setPrototypeOf;i?i(T,t):T.__proto__=t}function _(T,t){t===void 0&&(t=T.constructor);var i=Error.captureStackTrace;i&&i(T,t)}var I=(function(T){b(t,T);function t(i){var r=this.constructor,s=T.call(this,i)||this;return Object.defineProperty(s,"name",{value:r.name,enumerable:!1}),w(s,r.prototype),_(s),s}return t})(Error);class A extends I{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}A.kind="Exception";class D extends A{}D.kind="ArgumentException";class M extends A{}M.kind="IllegalArgumentException";class P{constructor(t){if(this.binarizer=t,t===null)throw new M("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,i){return this.binarizer.getBlackRow(t,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,i,r,s){const o=this.binarizer.getLuminanceSource().crop(t,i,r,s);return new P(this.binarizer.createBinarizer(o))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new P(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new P(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class G extends A{static getChecksumInstance(){return new G}}G.kind="ChecksumException";class ee{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class ne{static arraycopy(t,i,r,s,o){for(;o--;)r[s++]=t[i++]}static currentTimeMillis(){return Date.now()}}class J extends A{}J.kind="IndexOutOfBoundsException";class xe extends J{constructor(t=void 0,i=void 0){super(i),this.index=t,this.message=i}}xe.kind="ArrayIndexOutOfBoundsException";class ce{static fill(t,i){for(let r=0,s=t.length;r<s;r++)t[r]=i}static fillWithin(t,i,r,s){ce.rangeCheck(t.length,i,r);for(let o=i;o<r;o++)t[o]=s}static rangeCheck(t,i,r){if(i>r)throw new M("fromIndex("+i+") > toIndex("+r+")");if(i<0)throw new xe(i);if(r>t)throw new xe(r)}static asList(...t){return t}static create(t,i,r){return Array.from({length:t}).map(o=>Array.from({length:i}).fill(r))}static createInt32Array(t,i,r){return Array.from({length:t}).map(o=>Int32Array.from({length:i}).fill(r))}static equals(t,i){if(!t||!i||!t.length||!i.length||t.length!==i.length)return!1;for(let r=0,s=t.length;r<s;r++)if(t[r]!==i[r])return!1;return!0}static hashCode(t){if(t===null)return 0;let i=1;for(const r of t)i=31*i+r;return i}static fillUint8Array(t,i){for(let r=0;r!==t.length;r++)t[r]=i}static copyOf(t,i){return t.slice(0,i)}static copyOfUint8Array(t,i){if(t.length<=i){const r=new Uint8Array(i);return r.set(t),r}return t.slice(0,i)}static copyOfRange(t,i,r){const s=r-i,o=new Int32Array(s);return ne.arraycopy(t,i,o,0,s),o}static binarySearch(t,i,r){r===void 0&&(r=ce.numberComparator);let s=0,o=t.length-1;for(;s<=o;){const f=o+s>>1,g=r(i,t[f]);if(g>0)s=f+1;else if(g<0)o=f-1;else return f}return-s-1}static numberComparator(t,i){return t-i}}class X{static numberOfTrailingZeros(t){let i;if(t===0)return 32;let r=31;return i=t<<16,i!==0&&(r-=16,t=i),i=t<<8,i!==0&&(r-=8,t=i),i=t<<4,i!==0&&(r-=4,t=i),i=t<<2,i!==0&&(r-=2,t=i),r-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let i=1;return t>>>16||(i+=16,t<<=16),t>>>24||(i+=8,t<<=8),t>>>28||(i+=4,t<<=4),t>>>30||(i+=2,t<<=2),i-=t>>>31,i}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,i){return Math.trunc(t/i)}static parseInt(t,i=void 0){return parseInt(t,i)}}X.MIN_VALUE_32_BITS=-2147483648,X.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ee{constructor(t,i){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,i==null?this.bits=Ee.makeArray(t):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const i=Ee.makeArray(t);ne.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const i=this.size;if(t>=i)return i;const r=this.bits;let s=Math.floor(t/32),o=r[s];o&=~((1<<(t&31))-1);const f=r.length;for(;o===0;){if(++s===f)return i;o=r[s]}const g=s*32+X.numberOfTrailingZeros(o);return g>i?i:g}getNextUnset(t){const i=this.size;if(t>=i)return i;const r=this.bits;let s=Math.floor(t/32),o=~r[s];o&=~((1<<(t&31))-1);const f=r.length;for(;o===0;){if(++s===f)return i;o=~r[s]}const g=s*32+X.numberOfTrailingZeros(o);return g>i?i:g}setBulk(t,i){this.bits[Math.floor(t/32)]=i}setRange(t,i){if(i<t||t<0||i>this.size)throw new M;if(i===t)return;i--;const r=Math.floor(t/32),s=Math.floor(i/32),o=this.bits;for(let f=r;f<=s;f++){const g=f>r?0:t&31,E=(2<<(f<s?31:i&31))-(1<<g);o[f]|=E}}clear(){const t=this.bits.length,i=this.bits;for(let r=0;r<t;r++)i[r]=0}isRange(t,i,r){if(i<t||t<0||i>this.size)throw new M;if(i===t)return!0;i--;const s=Math.floor(t/32),o=Math.floor(i/32),f=this.bits;for(let g=s;g<=o;g++){const m=g>s?0:t&31,S=(2<<(g<o?31:i&31))-(1<<m)&4294967295;if((f[g]&S)!==(r?S:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,i){if(i<0||i>32)throw new M("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let r=i;r>0;r--)this.appendBit((t>>r-1&1)===1)}appendBitArray(t){const i=t.size;this.ensureCapacity(this.size+i);for(let r=0;r<i;r++)this.appendBit(t.get(r))}xor(t){if(this.size!==t.size)throw new M("Sizes don't match");const i=this.bits;for(let r=0,s=i.length;r<s;r++)i[r]^=t.bits[r]}toBytes(t,i,r,s){for(let o=0;o<s;o++){let f=0;for(let g=0;g<8;g++)this.get(t)&&(f|=1<<7-g),t++;i[r+o]=f}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),r=i+1,s=this.bits;for(let o=0;o<r;o++){let f=s[o];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,t[i-o]=f}if(this.size!==r*32){const o=r*32-this.size;let f=t[0]>>>o;for(let g=1;g<r;g++){const m=t[g];f|=m<<32-o,t[g-1]=f,f=m>>>o}t[r-1]=f}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof Ee))return!1;const i=t;return this.size===i.size&&ce.equals(this.bits,i.bits)}hashCode(){return 31*this.size+ce.hashCode(this.bits)}toString(){let t="";for(let i=0,r=this.size;i<r;i++)(i&7)===0&&(t+=" "),t+=this.get(i)?"X":".";return t}clone(){return new Ee(this.size,this.bits.slice())}}var Fe;(function(T){T[T.OTHER=0]="OTHER",T[T.PURE_BARCODE=1]="PURE_BARCODE",T[T.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",T[T.TRY_HARDER=3]="TRY_HARDER",T[T.CHARACTER_SET=4]="CHARACTER_SET",T[T.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",T[T.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",T[T.ASSUME_GS1=7]="ASSUME_GS1",T[T.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",T[T.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",T[T.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Fe||(Fe={}));var ge=Fe;class te extends A{static getFormatInstance(){return new te}}te.kind="FormatException";var Te;(function(T){T[T.Cp437=0]="Cp437",T[T.ISO8859_1=1]="ISO8859_1",T[T.ISO8859_2=2]="ISO8859_2",T[T.ISO8859_3=3]="ISO8859_3",T[T.ISO8859_4=4]="ISO8859_4",T[T.ISO8859_5=5]="ISO8859_5",T[T.ISO8859_6=6]="ISO8859_6",T[T.ISO8859_7=7]="ISO8859_7",T[T.ISO8859_8=8]="ISO8859_8",T[T.ISO8859_9=9]="ISO8859_9",T[T.ISO8859_10=10]="ISO8859_10",T[T.ISO8859_11=11]="ISO8859_11",T[T.ISO8859_13=12]="ISO8859_13",T[T.ISO8859_14=13]="ISO8859_14",T[T.ISO8859_15=14]="ISO8859_15",T[T.ISO8859_16=15]="ISO8859_16",T[T.SJIS=16]="SJIS",T[T.Cp1250=17]="Cp1250",T[T.Cp1251=18]="Cp1251",T[T.Cp1252=19]="Cp1252",T[T.Cp1256=20]="Cp1256",T[T.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",T[T.UTF8=22]="UTF8",T[T.ASCII=23]="ASCII",T[T.Big5=24]="Big5",T[T.GB18030=25]="GB18030",T[T.EUC_KR=26]="EUC_KR"})(Te||(Te={}));class de{constructor(t,i,r,...s){this.valueIdentifier=t,this.name=r,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=s,de.VALUE_IDENTIFIER_TO_ECI.set(t,this),de.NAME_TO_ECI.set(r,this);const o=this.values;for(let f=0,g=o.length;f!==g;f++){const m=o[f];de.VALUES_TO_ECI.set(m,this)}for(const f of s)de.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new te("incorect value");const i=de.VALUES_TO_ECI.get(t);if(i===void 0)throw new te("incorect value");return i}static getCharacterSetECIByName(t){const i=de.NAME_TO_ECI.get(t);if(i===void 0)throw new te("incorect value");return i}equals(t){if(!(t instanceof de))return!1;const i=t;return this.getName()===i.getName()}}de.VALUE_IDENTIFIER_TO_ECI=new Map,de.VALUES_TO_ECI=new Map,de.NAME_TO_ECI=new Map,de.Cp437=new de(Te.Cp437,Int32Array.from([0,2]),"Cp437"),de.ISO8859_1=new de(Te.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),de.ISO8859_2=new de(Te.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),de.ISO8859_3=new de(Te.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),de.ISO8859_4=new de(Te.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),de.ISO8859_5=new de(Te.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),de.ISO8859_6=new de(Te.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),de.ISO8859_7=new de(Te.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),de.ISO8859_8=new de(Te.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),de.ISO8859_9=new de(Te.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),de.ISO8859_10=new de(Te.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),de.ISO8859_11=new de(Te.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),de.ISO8859_13=new de(Te.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),de.ISO8859_14=new de(Te.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),de.ISO8859_15=new de(Te.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),de.ISO8859_16=new de(Te.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),de.SJIS=new de(Te.SJIS,20,"SJIS","Shift_JIS"),de.Cp1250=new de(Te.Cp1250,21,"Cp1250","windows-1250"),de.Cp1251=new de(Te.Cp1251,22,"Cp1251","windows-1251"),de.Cp1252=new de(Te.Cp1252,23,"Cp1252","windows-1252"),de.Cp1256=new de(Te.Cp1256,24,"Cp1256","windows-1256"),de.UnicodeBigUnmarked=new de(Te.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),de.UTF8=new de(Te.UTF8,26,"UTF8","UTF-8"),de.ASCII=new de(Te.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),de.Big5=new de(Te.Big5,28,"Big5"),de.GB18030=new de(Te.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),de.EUC_KR=new de(Te.EUC_KR,30,"EUC_KR","EUC-KR");class De extends A{}De.kind="UnsupportedOperationException";class tt{static decode(t,i){const r=this.encodingName(i);return this.customDecoder?this.customDecoder(t,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(t,r):new TextDecoder(r).decode(t)}static shouldDecodeOnFallback(t){return!tt.isBrowser()&&t==="ISO-8859-1"}static encode(t,i){const r=this.encodingName(i);return this.customEncoder?this.customEncoder(t,r):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof de?t:de.getCharacterSetECIByName(t)}static decodeFallback(t,i){const r=this.encodingCharacterSet(i);if(tt.isDecodeFallbackSupported(r)){let s="";for(let o=0,f=t.length;o<f;o++){let g=t[o].toString(16);g.length<2&&(g="0"+g),s+="%"+g}return decodeURIComponent(s)}if(r.equals(de.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new De(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(de.UTF8)||t.equals(de.ISO8859_1)||t.equals(de.ASCII)}static encodeFallback(t){const r=btoa(unescape(encodeURIComponent(t))).split(""),s=[];for(let o=0;o<r.length;o++)s.push(r[o].charCodeAt(0));return new Uint8Array(s)}}class Me{static castAsNonUtf8Char(t,i=null){const r=i?i.getName():this.ISO88591;return tt.decode(new Uint8Array([t]),r)}static guessEncoding(t,i){if(i!=null&&i.get(ge.CHARACTER_SET)!==void 0)return i.get(ge.CHARACTER_SET).toString();const r=t.length;let s=!0,o=!0,f=!0,g=0,m=0,E=0,S=0,N=0,R=0,L=0,U=0,F=0,W=0,se=0;const Ie=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let we=0;we<r&&(s||o||f);we++){const Ae=t[we]&255;f&&(g>0?(Ae&128)===0?f=!1:g--:(Ae&128)!==0&&((Ae&64)===0?f=!1:(g++,(Ae&32)===0?m++:(g++,(Ae&16)===0?E++:(g++,(Ae&8)===0?S++:f=!1))))),s&&(Ae>127&&Ae<160?s=!1:Ae>159&&(Ae<192||Ae===215||Ae===247)&&se++),o&&(N>0?Ae<64||Ae===127||Ae>252?o=!1:N--:Ae===128||Ae===160||Ae>239?o=!1:Ae>160&&Ae<224?(R++,U=0,L++,L>F&&(F=L)):Ae>127?(N++,L=0,U++,U>W&&(W=U)):(L=0,U=0))}return f&&g>0&&(f=!1),o&&N>0&&(o=!1),f&&(Ie||m+E+S>0)?Me.UTF8:o&&(Me.ASSUME_SHIFT_JIS||F>=3||W>=3)?Me.SHIFT_JIS:s&&o?F===2&&R===2||se*10>=r?Me.SHIFT_JIS:Me.ISO88591:s?Me.ISO88591:o?Me.SHIFT_JIS:f?Me.UTF8:Me.PLATFORM_DEFAULT_ENCODING}static format(t,...i){let r=-1;function s(f,g,m,E,S,N){if(f==="%%")return"%";if(i[++r]===void 0)return;f=E?parseInt(E.substr(1)):void 0;let R=S?parseInt(S.substr(1)):void 0,L;switch(N){case"s":L=i[r];break;case"c":L=i[r][0];break;case"f":L=parseFloat(i[r]).toFixed(f);break;case"p":L=parseFloat(i[r]).toPrecision(f);break;case"e":L=parseFloat(i[r]).toExponential(f);break;case"x":L=parseInt(i[r]).toString(R||16);break;case"d":L=parseFloat(parseInt(i[r],R||10).toPrecision(f)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(R);let U=parseInt(m),F=m&&m[0]+""=="0"?"0":" ";for(;L.length<U;)L=g!==void 0?L+F:F+L;return L}let o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(o,s)}static getBytes(t,i){return tt.encode(t,i)}static getCharCode(t,i=0){return t.charCodeAt(i)}static getCharAt(t){return String.fromCharCode(t)}}Me.SHIFT_JIS=de.SJIS.getName(),Me.GB2312="GB2312",Me.ISO88591=de.ISO8859_1.getName(),Me.EUC_JP="EUC_JP",Me.UTF8=de.UTF8.getName(),Me.PLATFORM_DEFAULT_ENCODING=Me.UTF8,Me.ASSUME_SHIFT_JIS=!1;class nt{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=Me.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,i,r){for(let s=i;i<i+r;s++)this.append(t[s]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,i){this.value=this.value.substr(0,t)+i+this.value.substr(t+1)}substring(t,i){return this.value.substring(t,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,i){this.value=this.value.substr(0,t)+i+this.value.substr(t+i.length)}}class st{constructor(t,i,r,s){if(this.width=t,this.height=i,this.rowSize=r,this.bits=s,i==null&&(i=t),this.height=i,t<1||i<1)throw new M("Both dimensions must be greater than 0");r==null&&(r=Math.floor((t+31)/32)),this.rowSize=r,s==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const i=t.length,r=t[0].length,s=new st(r,i);for(let o=0;o<i;o++){const f=t[o];for(let g=0;g<r;g++)f[g]&&s.set(g,o)}return s}static parseFromString(t,i,r){if(t===null)throw new M("stringRepresentation cannot be null");const s=new Array(t.length);let o=0,f=0,g=-1,m=0,E=0;for(;E<t.length;)if(t.charAt(E)===`
`||t.charAt(E)==="\r"){if(o>f){if(g===-1)g=o-f;else if(o-f!==g)throw new M("row lengths do not match");f=o,m++}E++}else if(t.substring(E,E+i.length)===i)E+=i.length,s[o]=!0,o++;else if(t.substring(E,E+r.length)===r)E+=r.length,s[o]=!1,o++;else throw new M("illegal character encountered: "+t.substring(E));if(o>f){if(g===-1)g=o-f;else if(o-f!==g)throw new M("row lengths do not match");m++}const S=new st(g,m);for(let N=0;N<o;N++)s[N]&&S.set(Math.floor(N%g),Math.floor(N/g));return S}get(t,i){const r=i*this.rowSize+Math.floor(t/32);return(this.bits[r]>>>(t&31)&1)!==0}set(t,i){const r=i*this.rowSize+Math.floor(t/32);this.bits[r]|=1<<(t&31)&4294967295}unset(t,i){const r=i*this.rowSize+Math.floor(t/32);this.bits[r]&=~(1<<(t&31)&4294967295)}flip(t,i){const r=i*this.rowSize+Math.floor(t/32);this.bits[r]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new M("input matrix dimensions do not match");const i=new Ee(Math.floor(this.width/32)+1),r=this.rowSize,s=this.bits;for(let o=0,f=this.height;o<f;o++){const g=o*r,m=t.getRow(o,i).getBitArray();for(let E=0;E<r;E++)s[g+E]^=m[E]}}clear(){const t=this.bits,i=t.length;for(let r=0;r<i;r++)t[r]=0}setRegion(t,i,r,s){if(i<0||t<0)throw new M("Left and top must be nonnegative");if(s<1||r<1)throw new M("Height and width must be at least 1");const o=t+r,f=i+s;if(f>this.height||o>this.width)throw new M("The region must fit inside the matrix");const g=this.rowSize,m=this.bits;for(let E=i;E<f;E++){const S=E*g;for(let N=t;N<o;N++)m[S+Math.floor(N/32)]|=1<<(N&31)&4294967295}}getRow(t,i){i==null||i.getSize()<this.width?i=new Ee(this.width):i.clear();const r=this.rowSize,s=this.bits,o=t*r;for(let f=0;f<r;f++)i.setBulk(f*32,s[o+f]);return i}setRow(t,i){ne.arraycopy(i.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),i=this.getHeight();let r=new Ee(t),s=new Ee(t);for(let o=0,f=Math.floor((i+1)/2);o<f;o++)r=this.getRow(o,r),s=this.getRow(i-1-o,s),r.reverse(),s.reverse(),this.setRow(o,s),this.setRow(i-1-o,r)}getEnclosingRectangle(){const t=this.width,i=this.height,r=this.rowSize,s=this.bits;let o=t,f=i,g=-1,m=-1;for(let E=0;E<i;E++)for(let S=0;S<r;S++){const N=s[E*r+S];if(N!==0){if(E<f&&(f=E),E>m&&(m=E),S*32<o){let R=0;for(;(N<<31-R&4294967295)===0;)R++;S*32+R<o&&(o=S*32+R)}if(S*32+31>g){let R=31;for(;!(N>>>R);)R--;S*32+R>g&&(g=S*32+R)}}}return g<o||m<f?null:Int32Array.from([o,f,g-o+1,m-f+1])}getTopLeftOnBit(){const t=this.rowSize,i=this.bits;let r=0;for(;r<i.length&&i[r]===0;)r++;if(r===i.length)return null;const s=r/t;let o=r%t*32;const f=i[r];let g=0;for(;(f<<31-g&4294967295)===0;)g++;return o+=g,Int32Array.from([o,s])}getBottomRightOnBit(){const t=this.rowSize,i=this.bits;let r=i.length-1;for(;r>=0&&i[r]===0;)r--;if(r<0)return null;const s=Math.floor(r/t);let o=Math.floor(r%t)*32;const f=i[r];let g=31;for(;!(f>>>g);)g--;return o+=g,Int32Array.from([o,s])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof st))return!1;const i=t;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&ce.equals(this.bits,i.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+ce.hashCode(this.bits),t}toString(t="X ",i="  ",r=`
`){return this.buildToString(t,i,r)}buildToString(t,i,r){let s=new nt;for(let o=0,f=this.height;o<f;o++){for(let g=0,m=this.width;g<m;g++)s.append(this.get(g,o)?t:i);s.append(r)}return s.toString()}clone(){return new st(this.width,this.height,this.rowSize,this.bits.slice())}}class oe extends A{static getNotFoundInstance(){return new oe}}oe.kind="NotFoundException";class $ extends ee{constructor(t){super(t),this.luminances=$.EMPTY,this.buckets=new Int32Array($.LUMINANCE_BUCKETS)}getBlackRow(t,i){const r=this.getLuminanceSource(),s=r.getWidth();i==null||i.getSize()<s?i=new Ee(s):i.clear(),this.initArrays(s);const o=r.getRow(t,this.luminances),f=this.buckets;for(let m=0;m<s;m++)f[(o[m]&255)>>$.LUMINANCE_SHIFT]++;const g=$.estimateBlackPoint(f);if(s<3)for(let m=0;m<s;m++)(o[m]&255)<g&&i.set(m);else{let m=o[0]&255,E=o[1]&255;for(let S=1;S<s-1;S++){const N=o[S+1]&255;(E*4-m-N)/2<g&&i.set(S),m=E,E=N}}return i}getBlackMatrix(){const t=this.getLuminanceSource(),i=t.getWidth(),r=t.getHeight(),s=new st(i,r);this.initArrays(i);const o=this.buckets;for(let m=1;m<5;m++){const E=Math.floor(r*m/5),S=t.getRow(E,this.luminances),N=Math.floor(i*4/5);for(let R=Math.floor(i/5);R<N;R++){const L=S[R]&255;o[L>>$.LUMINANCE_SHIFT]++}}const f=$.estimateBlackPoint(o),g=t.getMatrix();for(let m=0;m<r;m++){const E=m*i;for(let S=0;S<i;S++)(g[E+S]&255)<f&&s.set(S,m)}return s}createBinarizer(t){return new $(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const i=this.buckets;for(let r=0;r<$.LUMINANCE_BUCKETS;r++)i[r]=0}static estimateBlackPoint(t){const i=t.length;let r=0,s=0,o=0;for(let S=0;S<i;S++)t[S]>o&&(s=S,o=t[S]),t[S]>r&&(r=t[S]);let f=0,g=0;for(let S=0;S<i;S++){const N=S-s,R=t[S]*N*N;R>g&&(f=S,g=R)}if(s>f){const S=s;s=f,f=S}if(f-s<=i/16)throw new oe;let m=f-1,E=-1;for(let S=f-1;S>s;S--){const N=S-s,R=N*N*(f-S)*(r-t[S]);R>E&&(m=S,E=R)}return m<<$.LUMINANCE_SHIFT}}$.LUMINANCE_BITS=5,$.LUMINANCE_SHIFT=8-$.LUMINANCE_BITS,$.LUMINANCE_BUCKETS=1<<$.LUMINANCE_BITS,$.EMPTY=Uint8ClampedArray.from([0]);class fe extends ${constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),i=t.getWidth(),r=t.getHeight();if(i>=fe.MINIMUM_DIMENSION&&r>=fe.MINIMUM_DIMENSION){const s=t.getMatrix();let o=i>>fe.BLOCK_SIZE_POWER;(i&fe.BLOCK_SIZE_MASK)!==0&&o++;let f=r>>fe.BLOCK_SIZE_POWER;(r&fe.BLOCK_SIZE_MASK)!==0&&f++;const g=fe.calculateBlackPoints(s,o,f,i,r),m=new st(i,r);fe.calculateThresholdForBlock(s,o,f,i,r,g,m),this.matrix=m}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new fe(t)}static calculateThresholdForBlock(t,i,r,s,o,f,g){const m=o-fe.BLOCK_SIZE,E=s-fe.BLOCK_SIZE;for(let S=0;S<r;S++){let N=S<<fe.BLOCK_SIZE_POWER;N>m&&(N=m);const R=fe.cap(S,2,r-3);for(let L=0;L<i;L++){let U=L<<fe.BLOCK_SIZE_POWER;U>E&&(U=E);const F=fe.cap(L,2,i-3);let W=0;for(let Ie=-2;Ie<=2;Ie++){const we=f[R+Ie];W+=we[F-2]+we[F-1]+we[F]+we[F+1]+we[F+2]}const se=W/25;fe.thresholdBlock(t,U,N,se,s,g)}}}static cap(t,i,r){return t<i?i:t>r?r:t}static thresholdBlock(t,i,r,s,o,f){for(let g=0,m=r*o+i;g<fe.BLOCK_SIZE;g++,m+=o)for(let E=0;E<fe.BLOCK_SIZE;E++)(t[m+E]&255)<=s&&f.set(i+E,r+g)}static calculateBlackPoints(t,i,r,s,o){const f=o-fe.BLOCK_SIZE,g=s-fe.BLOCK_SIZE,m=new Array(r);for(let E=0;E<r;E++){m[E]=new Int32Array(i);let S=E<<fe.BLOCK_SIZE_POWER;S>f&&(S=f);for(let N=0;N<i;N++){let R=N<<fe.BLOCK_SIZE_POWER;R>g&&(R=g);let L=0,U=255,F=0;for(let se=0,Ie=S*s+R;se<fe.BLOCK_SIZE;se++,Ie+=s){for(let we=0;we<fe.BLOCK_SIZE;we++){const Ae=t[Ie+we]&255;L+=Ae,Ae<U&&(U=Ae),Ae>F&&(F=Ae)}if(F-U>fe.MIN_DYNAMIC_RANGE)for(se++,Ie+=s;se<fe.BLOCK_SIZE;se++,Ie+=s)for(let we=0;we<fe.BLOCK_SIZE;we++)L+=t[Ie+we]&255}let W=L>>fe.BLOCK_SIZE_POWER*2;if(F-U<=fe.MIN_DYNAMIC_RANGE&&(W=U/2,E>0&&N>0)){const se=(m[E-1][N]+2*m[E][N-1]+m[E-1][N-1])/4;U<se&&(W=se)}m[E][N]=W}}return m}}fe.BLOCK_SIZE_POWER=3,fe.BLOCK_SIZE=1<<fe.BLOCK_SIZE_POWER,fe.BLOCK_SIZE_MASK=fe.BLOCK_SIZE-1,fe.MINIMUM_DIMENSION=fe.BLOCK_SIZE*5,fe.MIN_DYNAMIC_RANGE=24;class Ge{constructor(t,i){this.width=t,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,i,r,s){throw new De("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new De("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new De("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let i=new nt;for(let r=0;r<this.height;r++){const s=this.getRow(r,t);for(let o=0;o<this.width;o++){const f=s[o]&255;let g;f<64?g="#":f<128?g="+":f<192?g=".":g=" ",i.append(g)}i.append(`
`)}return i.toString()}}class Z extends Ge{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,i){const r=this.delegate.getRow(t,i),s=this.getWidth();for(let o=0;o<s;o++)r[o]=255-(r[o]&255);return r}getMatrix(){const t=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),r=new Uint8ClampedArray(i);for(let s=0;s<i;s++)r[s]=255-(t[s]&255);return r}isCropSupported(){return this.delegate.isCropSupported()}crop(t,i,r,s){return new Z(this.delegate.crop(t,i,r,s))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Z(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Z(this.delegate.rotateCounterClockwise45())}}class be extends Ge{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=be.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const i=t.getContext("2d").getImageData(0,0,t.width,t.height);return be.toGrayscaleBuffer(i.data,t.width,t.height)}static toGrayscaleBuffer(t,i,r){const s=new Uint8ClampedArray(i*r);for(let o=0,f=0,g=t.length;o<g;o+=4,f++){let m;if(t[o+3]===0)m=255;else{const S=t[o],N=t[o+1],R=t[o+2];m=306*S+601*N+117*R+512>>10}s[f]=m}return s}getRow(t,i){if(t<0||t>=this.getHeight())throw new M("Requested row is outside the image: "+t);const r=this.getWidth(),s=t*r;return i===null?i=this.buffer.slice(s,s+r):(i.length<r&&(i=new Uint8ClampedArray(r)),i.set(this.buffer.slice(s,s+r))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,i,r,s){return super.crop(t,i,r,s),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const i=this.getTempCanvasElement(),r=i.getContext("2d"),s=t*be.DEGREE_TO_RADIANS,o=this.canvas.width,f=this.canvas.height,g=Math.ceil(Math.abs(Math.cos(s))*o+Math.abs(Math.sin(s))*f),m=Math.ceil(Math.abs(Math.sin(s))*o+Math.abs(Math.cos(s))*f);return i.width=g,i.height=m,r.translate(g/2,m/2),r.rotate(s),r.drawImage(this.canvas,o/-2,f/-2),this.buffer=be.makeBufferFromCanvasImageData(i),this}invert(){return new Z(this)}}be.DEGREE_TO_RADIANS=Math.PI/180;class z{constructor(t,i,r){this.deviceId=t,this.label=i,this.kind="videoinput",this.groupId=r||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var re=(globalThis||fc||self||window||void 0)&&(globalThis||fc||self||window||void 0).__awaiter||function(T,t,i,r){function s(o){return o instanceof i?o:new i(function(f){f(o)})}return new(i||(i=Promise))(function(o,f){function g(S){try{E(r.next(S))}catch(N){f(N)}}function m(S){try{E(r.throw(S))}catch(N){f(N)}}function E(S){S.done?o(S.value):s(S.value).then(g,m)}E((r=r.apply(T,t||[])).next())})};class ve{constructor(t,i=500,r){this.reader=t,this.timeBetweenScansMillis=i,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return re(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const r of t){const s=r.kind==="video"?"videoinput":r.kind;if(s!=="videoinput")continue;const o=r.deviceId||r.id,f=r.label||`Video device ${i.length+1}`,g=r.groupId,m={deviceId:o,label:f,kind:s,groupId:g};i.push(m)}return i})}getVideoInputDevices(){return re(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new z(i.deviceId,i.label))})}findDeviceById(t){return re(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(r=>r.deviceId===t):null})}decodeFromInputVideoDevice(t,i){return re(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,i)})}decodeOnceFromVideoDevice(t,i){return re(this,void 0,void 0,function*(){this.reset();let r;t?r={deviceId:{exact:t}}:r={facingMode:"environment"};const s={video:r};return yield this.decodeOnceFromConstraints(s,i)})}decodeOnceFromConstraints(t,i){return re(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(r,i)})}decodeOnceFromStream(t,i){return re(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(t,i);return yield this.decodeOnce(r)})}decodeFromInputVideoDeviceContinuously(t,i,r){return re(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,i,r)})}decodeFromVideoDevice(t,i,r){return re(this,void 0,void 0,function*(){let s;t?s={deviceId:{exact:t}}:s={facingMode:"environment"};const o={video:s};return yield this.decodeFromConstraints(o,i,r)})}decodeFromConstraints(t,i,r){return re(this,void 0,void 0,function*(){const s=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(s,i,r)})}decodeFromStream(t,i,r){return re(this,void 0,void 0,function*(){this.reset();const s=yield this.attachStreamToVideo(t,i);return yield this.decodeContinuously(s,r)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,i){return re(this,void 0,void 0,function*(){const r=this.prepareVideoElement(i);return this.addVideoSource(r,t),this.videoElement=r,this.stream=t,yield this.playVideoOnLoadAsync(r),r})}playVideoOnLoadAsync(t){return new Promise((i,r)=>this.playVideoOnLoad(t,()=>i()))}playVideoOnLoad(t,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",i),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return re(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,i){const r=document.getElementById(t);if(!r)throw new D(`element with id '${t}' not found`);if(r.nodeName.toLowerCase()!==i.toLowerCase())throw new D(`element with id '${t}' must be an ${i} element`);return r}decodeFromImage(t,i){if(!t&&!i)throw new D("either imageElement with a src set or an url must be provided");return i&&!t?this.decodeFromImageUrl(i):this.decodeFromImageElement(t)}decodeFromVideo(t,i){if(!t&&!i)throw new D("Either an element with a src set or an URL must be provided");return i&&!t?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,i,r){if(t===void 0&&i===void 0)throw new D("Either an element with a src set or an URL must be provided");return i&&!t?this.decodeFromVideoUrlContinuously(i,r):this.decodeFromVideoElementContinuously(t,r)}decodeFromImageElement(t){if(!t)throw new D("An image element must be provided.");this.reset();const i=this.prepareImageElement(t);this.imageElement=i;let r;return this.isImageLoaded(i)?r=this.decodeOnce(i,!1,!0):r=this._decodeOnLoadImage(i),r}decodeFromVideoElement(t){const i=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(t,i){const r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(r,i)}_decodeFromVideoElementSetup(t){if(!t)throw new D("A video element must be provided.");this.reset();const i=this.prepareVideoElement(t);return this.videoElement=i,i}decodeFromImageUrl(t){if(!t)throw new D("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const r=this._decodeOnLoadImage(i);return i.src=t,r}decodeFromVideoUrl(t){if(!t)throw new D("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),r=this.decodeFromVideoElement(i);return i.src=t,r}decodeFromVideoUrlContinuously(t,i){if(!t)throw new D("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),s=this.decodeFromVideoElementContinuously(r,i);return r.src=t,s}_decodeOnLoadImage(t){return new Promise((i,r)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(i,r),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return re(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,i){return re(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,i)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let i;return typeof t>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof t=="string"&&(i=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(i=t),i}prepareVideoElement(t){let i;return!t&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof t=="string"&&(i=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(i=t),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(t,i=!0,r=!0){this._stopAsyncDecode=!1;const s=(o,f)=>{if(this._stopAsyncDecode){f(new oe("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const g=this.decode(t);o(g)}catch(g){const m=i&&g instanceof oe,S=(g instanceof G||g instanceof te)&&r;if(m||S)return setTimeout(s,this._timeBetweenDecodingAttempts,o,f);f(g)}};return new Promise((o,f)=>s(o,f))}decodeContinuously(t,i){this._stopContinuousDecode=!1;const r=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const s=this.decode(t);i(s,null),setTimeout(r,this.timeBetweenScansMillis)}catch(s){i(null,s);const o=s instanceof G||s instanceof te,f=s instanceof oe;(o||f)&&setTimeout(r,this._timeBetweenDecodingAttempts)}};r()}decode(t){const i=this.createBinaryBitmap(t);return this.decodeBitmap(i)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,i,r){i||(i={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),r||(r=this.captureCanvasContext),r.drawImage(t,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(t,i,r=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),r||(r=this.captureCanvasContext),r.drawImage(t,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const i=this.getCaptureCanvas(t),r=new be(i),s=new fe(r);return new P(s)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const r=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=r}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const i=this.createCaptureCanvas(t);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let r,s;return typeof t<"u"&&(t instanceof HTMLVideoElement?(r=t.videoWidth,s=t.videoHeight):t instanceof HTMLImageElement&&(r=t.naturalWidth||t.width,s=t.naturalHeight||t.height)),i.style.width=r+"px",i.style.height=s+"px",i.width=r,i.height=s,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,i){try{t.srcObject=i}catch{t.src=URL.createObjectURL(i)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class Re{constructor(t,i,r=i==null?0:8*i.length,s,o,f=ne.currentTimeMillis()){this.text=t,this.rawBytes=i,this.numBits=r,this.resultPoints=s,this.format=o,this.timestamp=f,this.text=t,this.rawBytes=i,r==null?this.numBits=i==null?0:8*i.length:this.numBits=r,this.resultPoints=s,this.format=o,this.resultMetadata=null,f==null?this.timestamp=ne.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,i)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const i=this.resultPoints;if(i===null)this.resultPoints=t;else if(t!==null&&t.length>0){const r=new Array(i.length+t.length);ne.arraycopy(i,0,r,0,i.length),ne.arraycopy(t,0,r,i.length,t.length),this.resultPoints=r}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ke;(function(T){T[T.AZTEC=0]="AZTEC",T[T.CODABAR=1]="CODABAR",T[T.CODE_39=2]="CODE_39",T[T.CODE_93=3]="CODE_93",T[T.CODE_128=4]="CODE_128",T[T.DATA_MATRIX=5]="DATA_MATRIX",T[T.EAN_8=6]="EAN_8",T[T.EAN_13=7]="EAN_13",T[T.ITF=8]="ITF",T[T.MAXICODE=9]="MAXICODE",T[T.PDF_417=10]="PDF_417",T[T.QR_CODE=11]="QR_CODE",T[T.RSS_14=12]="RSS_14",T[T.RSS_EXPANDED=13]="RSS_EXPANDED",T[T.UPC_A=14]="UPC_A",T[T.UPC_E=15]="UPC_E",T[T.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ke||(Ke={}));var Se=Ke,ot;(function(T){T[T.OTHER=0]="OTHER",T[T.ORIENTATION=1]="ORIENTATION",T[T.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",T[T.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",T[T.ISSUE_NUMBER=4]="ISSUE_NUMBER",T[T.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",T[T.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",T[T.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",T[T.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",T[T.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",T[T.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ot||(ot={}));var ft=ot;class Bt{constructor(t,i,r,s,o=-1,f=-1){this.rawBytes=t,this.text=i,this.byteSegments=r,this.ecLevel=s,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=f,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Yn{exp(t){return this.expTable[t]}log(t){if(t===0)throw new M;return this.logTable[t]}static addOrSubtract(t,i){return t^i}}class cn{constructor(t,i){if(i.length===0)throw new M;this.field=t;const r=i.length;if(r>1&&i[0]===0){let s=1;for(;s<r&&i[s]===0;)s++;s===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-s),ne.arraycopy(i,s,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const i=this.coefficients;let r;if(t===1){r=0;for(let f=0,g=i.length;f!==g;f++){const m=i[f];r=Yn.addOrSubtract(r,m)}return r}r=i[0];const s=i.length,o=this.field;for(let f=1;f<s;f++)r=Yn.addOrSubtract(o.multiply(t,r),i[f]);return r}addOrSubtract(t){if(!this.field.equals(t.field))throw new M("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let i=this.coefficients,r=t.coefficients;if(i.length>r.length){const f=i;i=r,r=f}let s=new Int32Array(r.length);const o=r.length-i.length;ne.arraycopy(r,0,s,0,o);for(let f=o;f<r.length;f++)s[f]=Yn.addOrSubtract(i[f-o],r[f]);return new cn(this.field,s)}multiply(t){if(!this.field.equals(t.field))throw new M("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const i=this.coefficients,r=i.length,s=t.coefficients,o=s.length,f=new Int32Array(r+o-1),g=this.field;for(let m=0;m<r;m++){const E=i[m];for(let S=0;S<o;S++)f[m+S]=Yn.addOrSubtract(f[m+S],g.multiply(E,s[S]))}return new cn(g,f)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const i=this.coefficients.length,r=this.field,s=new Int32Array(i),o=this.coefficients;for(let f=0;f<i;f++)s[f]=r.multiply(o[f],t);return new cn(r,s)}multiplyByMonomial(t,i){if(t<0)throw new M;if(i===0)return this.field.getZero();const r=this.coefficients,s=r.length,o=new Int32Array(s+t),f=this.field;for(let g=0;g<s;g++)o[g]=f.multiply(r[g],i);return new cn(f,o)}divide(t){if(!this.field.equals(t.field))throw new M("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new M("Divide by 0");const i=this.field;let r=i.getZero(),s=this;const o=t.getCoefficient(t.getDegree()),f=i.inverse(o);for(;s.getDegree()>=t.getDegree()&&!s.isZero();){const g=s.getDegree()-t.getDegree(),m=i.multiply(s.getCoefficient(s.getDegree()),f),E=t.multiplyByMonomial(g,m),S=i.buildMonomial(g,m);r=r.addOrSubtract(S),s=s.addOrSubtract(E)}return[r,s]}toString(){let t="";for(let i=this.getDegree();i>=0;i--){let r=this.getCoefficient(i);if(r!==0){if(r<0?(t+=" - ",r=-r):t.length>0&&(t+=" + "),i===0||r!==1){const s=this.field.log(r);s===0?t+="1":s===1?t+="a":(t+="a^",t+=s)}i!==0&&(i===1?t+="x":(t+="x^",t+=i))}}return t}}class hi extends A{}hi.kind="ArithmeticException";class pt extends Yn{constructor(t,i,r){super(),this.primitive=t,this.size=i,this.generatorBase=r;const s=new Int32Array(i);let o=1;for(let g=0;g<i;g++)s[g]=o,o*=2,o>=i&&(o^=t,o&=i-1);this.expTable=s;const f=new Int32Array(i);for(let g=0;g<i-1;g++)f[s[g]]=g;this.logTable=f,this.zero=new cn(this,Int32Array.from([0])),this.one=new cn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,i){if(t<0)throw new M;if(i===0)return this.zero;const r=new Int32Array(t+1);return r[0]=i,new cn(this,r)}inverse(t){if(t===0)throw new hi;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,i){return t===0||i===0?0:this.expTable[(this.logTable[t]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+X.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}pt.AZTEC_DATA_12=new pt(4201,4096,1),pt.AZTEC_DATA_10=new pt(1033,1024,1),pt.AZTEC_DATA_6=new pt(67,64,1),pt.AZTEC_PARAM=new pt(19,16,1),pt.QR_CODE_FIELD_256=new pt(285,256,0),pt.DATA_MATRIX_FIELD_256=new pt(301,256,1),pt.AZTEC_DATA_8=pt.DATA_MATRIX_FIELD_256,pt.MAXICODE_FIELD_64=pt.AZTEC_DATA_6;class Kt extends A{}Kt.kind="ReedSolomonException";class _e extends A{}_e.kind="IllegalStateException";class Xe{constructor(t){this.field=t}decode(t,i){const r=this.field,s=new cn(r,t),o=new Int32Array(i);let f=!0;for(let L=0;L<i;L++){const U=s.evaluateAt(r.exp(L+r.getGeneratorBase()));o[o.length-1-L]=U,U!==0&&(f=!1)}if(f)return;const g=new cn(r,o),m=this.runEuclideanAlgorithm(r.buildMonomial(i,1),g,i),E=m[0],S=m[1],N=this.findErrorLocations(E),R=this.findErrorMagnitudes(S,N);for(let L=0;L<N.length;L++){const U=t.length-1-r.log(N[L]);if(U<0)throw new Kt("Bad error location");t[U]=pt.addOrSubtract(t[U],R[L])}}runEuclideanAlgorithm(t,i,r){if(t.getDegree()<i.getDegree()){const L=t;t=i,i=L}const s=this.field;let o=t,f=i,g=s.getZero(),m=s.getOne();for(;f.getDegree()>=(r/2|0);){let L=o,U=g;if(o=f,g=m,o.isZero())throw new Kt("r_{i-1} was zero");f=L;let F=s.getZero();const W=o.getCoefficient(o.getDegree()),se=s.inverse(W);for(;f.getDegree()>=o.getDegree()&&!f.isZero();){const Ie=f.getDegree()-o.getDegree(),we=s.multiply(f.getCoefficient(f.getDegree()),se);F=F.addOrSubtract(s.buildMonomial(Ie,we)),f=f.addOrSubtract(o.multiplyByMonomial(Ie,we))}if(m=F.multiply(g).addOrSubtract(U),f.getDegree()>=o.getDegree())throw new _e("Division algorithm failed to reduce polynomial?")}const E=m.getCoefficient(0);if(E===0)throw new Kt("sigmaTilde(0) was zero");const S=s.inverse(E),N=m.multiplyScalar(S),R=f.multiplyScalar(S);return[N,R]}findErrorLocations(t){const i=t.getDegree();if(i===1)return Int32Array.from([t.getCoefficient(1)]);const r=new Int32Array(i);let s=0;const o=this.field;for(let f=1;f<o.getSize()&&s<i;f++)t.evaluateAt(f)===0&&(r[s]=o.inverse(f),s++);if(s!==i)throw new Kt("Error locator degree does not match number of roots");return r}findErrorMagnitudes(t,i){const r=i.length,s=new Int32Array(r),o=this.field;for(let f=0;f<r;f++){const g=o.inverse(i[f]);let m=1;for(let E=0;E<r;E++)if(f!==E){const S=o.multiply(i[E],g),N=(S&1)===0?S|1:S&-2;m=o.multiply(m,N)}s[f]=o.multiply(t.evaluateAt(g),o.inverse(m)),o.getGeneratorBase()!==0&&(s[f]=o.multiply(s[f],g))}return s}}var Oe;(function(T){T[T.UPPER=0]="UPPER",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.DIGIT=3]="DIGIT",T[T.PUNCT=4]="PUNCT",T[T.BINARY=5]="BINARY"})(Oe||(Oe={}));class We{decode(t){this.ddata=t;let i=t.getBits(),r=this.extractBits(i),s=this.correctBits(r),o=We.convertBoolArrayToByteArray(s),f=We.getEncodedData(s),g=new Bt(o,f,null,null);return g.setNumBits(s.length),g}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let i=t.length,r=Oe.UPPER,s=Oe.UPPER,o="",f=0;for(;f<i;)if(s===Oe.BINARY){if(i-f<5)break;let g=We.readCode(t,f,5);if(f+=5,g===0){if(i-f<11)break;g=We.readCode(t,f,11)+31,f+=11}for(let m=0;m<g;m++){if(i-f<8){f=i;break}const E=We.readCode(t,f,8);o+=Me.castAsNonUtf8Char(E),f+=8}s=r}else{let g=s===Oe.DIGIT?4:5;if(i-f<g)break;let m=We.readCode(t,f,g);f+=g;let E=We.getCharacter(s,m);E.startsWith("CTRL_")?(r=s,s=We.getTable(E.charAt(5)),E.charAt(6)==="L"&&(r=s)):(o+=E,s=r)}return o}static getTable(t){switch(t){case"L":return Oe.LOWER;case"P":return Oe.PUNCT;case"M":return Oe.MIXED;case"D":return Oe.DIGIT;case"B":return Oe.BINARY;case"U":default:return Oe.UPPER}}static getCharacter(t,i){switch(t){case Oe.UPPER:return We.UPPER_TABLE[i];case Oe.LOWER:return We.LOWER_TABLE[i];case Oe.MIXED:return We.MIXED_TABLE[i];case Oe.PUNCT:return We.PUNCT_TABLE[i];case Oe.DIGIT:return We.DIGIT_TABLE[i];default:throw new _e("Bad table")}}correctBits(t){let i,r;this.ddata.getNbLayers()<=2?(r=6,i=pt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,i=pt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,i=pt.AZTEC_DATA_10):(r=12,i=pt.AZTEC_DATA_12);let s=this.ddata.getNbDatablocks(),o=t.length/r;if(o<s)throw new te;let f=t.length%r,g=new Int32Array(o);for(let R=0;R<o;R++,f+=r)g[R]=We.readCode(t,f,r);try{new Xe(i).decode(g,o-s)}catch(R){throw new te(R)}let m=(1<<r)-1,E=0;for(let R=0;R<s;R++){let L=g[R];if(L===0||L===m)throw new te;(L===1||L===m-1)&&E++}let S=new Array(s*r-E),N=0;for(let R=0;R<s;R++){let L=g[R];if(L===1||L===m-1)S.fill(L>1,N,N+r-1),N+=r-1;else for(let U=r-1;U>=0;--U)S[N++]=(L&1<<U)!==0}return S}extractBits(t){let i=this.ddata.isCompact(),r=this.ddata.getNbLayers(),s=(i?11:14)+r*4,o=new Int32Array(s),f=new Array(this.totalBitsInLayer(r,i));if(i)for(let g=0;g<o.length;g++)o[g]=g;else{let g=s+1+2*X.truncDivision(X.truncDivision(s,2)-1,15),m=s/2,E=X.truncDivision(g,2);for(let S=0;S<m;S++){let N=S+X.truncDivision(S,15);o[m-S-1]=E-N-1,o[m+S]=E+N+1}}for(let g=0,m=0;g<r;g++){let E=(r-g)*4+(i?9:12),S=g*2,N=s-1-S;for(let R=0;R<E;R++){let L=R*2;for(let U=0;U<2;U++)f[m+L+U]=t.get(o[S+U],o[S+R]),f[m+2*E+L+U]=t.get(o[S+R],o[N-U]),f[m+4*E+L+U]=t.get(o[N-U],o[N-R]),f[m+6*E+L+U]=t.get(o[N-R],o[S+U])}m+=E*8}return f}static readCode(t,i,r){let s=0;for(let o=i;o<i+r;o++)s<<=1,t[o]&&(s|=1);return s}static readByte(t,i){let r=t.length-i;return r>=8?We.readCode(t,i,8):We.readCode(t,i,r)<<8-r}static convertBoolArrayToByteArray(t){let i=new Uint8Array((t.length+7)/8);for(let r=0;r<i.length;r++)i[r]=We.readByte(t,8*r);return i}totalBitsInLayer(t,i){return((i?88:112)+16*t)*t}}We.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],We.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],We.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],We.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],We.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Qe{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,i,r,s){const o=t-r,f=i-s;return Math.sqrt(o*o+f*f)}static sum(t){let i=0;for(let r=0,s=t.length;r!==s;r++){const o=t[r];i+=o}return i}}class ii{static floatToIntBits(t){return t}}ii.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ke{constructor(t,i){this.x=t,this.y=i}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof ke){const i=t;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*ii.floatToIntBits(this.x)+ii.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const i=this.distance(t[0],t[1]),r=this.distance(t[1],t[2]),s=this.distance(t[0],t[2]);let o,f,g;if(r>=i&&r>=s?(f=t[0],o=t[1],g=t[2]):s>=r&&s>=i?(f=t[1],o=t[0],g=t[2]):(f=t[2],o=t[0],g=t[1]),this.crossProductZ(o,f,g)<0){const m=o;o=g,g=m}t[0]=o,t[1]=f,t[2]=g}static distance(t,i){return Qe.distance(t.x,t.y,i.x,i.y)}static crossProductZ(t,i,r){const s=i.x,o=i.y;return(r.x-s)*(t.y-o)-(r.y-o)*(t.x-s)}}class yr{constructor(t,i){this.bits=t,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class Da extends yr{constructor(t,i,r,s,o){super(t,i),this.compact=r,this.nbDatablocks=s,this.nbLayers=o}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Jt{constructor(t,i,r,s){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),i==null&&(i=Jt.INIT_SIZE),r==null&&(r=t.getWidth()/2|0),s==null&&(s=t.getHeight()/2|0);const o=i/2|0;if(this.leftInit=r-o,this.rightInit=r+o,this.upInit=s-o,this.downInit=s+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new oe}detect(){let t=this.leftInit,i=this.rightInit,r=this.upInit,s=this.downInit,o=!1,f=!0,g=!1,m=!1,E=!1,S=!1,N=!1;const R=this.width,L=this.height;for(;f;){f=!1;let U=!0;for(;(U||!m)&&i<R;)U=this.containsBlackPoint(r,s,i,!1),U?(i++,f=!0,m=!0):m||i++;if(i>=R){o=!0;break}let F=!0;for(;(F||!E)&&s<L;)F=this.containsBlackPoint(t,i,s,!0),F?(s++,f=!0,E=!0):E||s++;if(s>=L){o=!0;break}let W=!0;for(;(W||!S)&&t>=0;)W=this.containsBlackPoint(r,s,t,!1),W?(t--,f=!0,S=!0):S||t--;if(t<0){o=!0;break}let se=!0;for(;(se||!N)&&r>=0;)se=this.containsBlackPoint(t,i,r,!0),se?(r--,f=!0,N=!0):N||r--;if(r<0){o=!0;break}f&&(g=!0)}if(!o&&g){const U=i-t;let F=null;for(let we=1;F===null&&we<U;we++)F=this.getBlackPointOnSegment(t,s-we,t+we,s);if(F==null)throw new oe;let W=null;for(let we=1;W===null&&we<U;we++)W=this.getBlackPointOnSegment(t,r+we,t+we,r);if(W==null)throw new oe;let se=null;for(let we=1;se===null&&we<U;we++)se=this.getBlackPointOnSegment(i,r+we,i-we,r);if(se==null)throw new oe;let Ie=null;for(let we=1;Ie===null&&we<U;we++)Ie=this.getBlackPointOnSegment(i,s-we,i-we,s);if(Ie==null)throw new oe;return this.centerEdges(Ie,F,se,W)}else throw new oe}getBlackPointOnSegment(t,i,r,s){const o=Qe.round(Qe.distance(t,i,r,s)),f=(r-t)/o,g=(s-i)/o,m=this.image;for(let E=0;E<o;E++){const S=Qe.round(t+E*f),N=Qe.round(i+E*g);if(m.get(S,N))return new ke(S,N)}return null}centerEdges(t,i,r,s){const o=t.getX(),f=t.getY(),g=i.getX(),m=i.getY(),E=r.getX(),S=r.getY(),N=s.getX(),R=s.getY(),L=Jt.CORR;return o<this.width/2?[new ke(N-L,R+L),new ke(g+L,m+L),new ke(E-L,S-L),new ke(o+L,f-L)]:[new ke(N+L,R+L),new ke(g+L,m-L),new ke(E-L,S+L),new ke(o-L,f-L)]}containsBlackPoint(t,i,r,s){const o=this.image;if(s){for(let f=t;f<=i;f++)if(o.get(f,r))return!0}else for(let f=t;f<=i;f++)if(o.get(r,f))return!0;return!1}}Jt.INIT_SIZE=10,Jt.CORR=1;class Ba{static checkAndNudgePoints(t,i){const r=t.getWidth(),s=t.getHeight();let o=!0;for(let f=0;f<i.length&&o;f+=2){const g=Math.floor(i[f]),m=Math.floor(i[f+1]);if(g<-1||g>r||m<-1||m>s)throw new oe;o=!1,g===-1?(i[f]=0,o=!0):g===r&&(i[f]=r-1,o=!0),m===-1?(i[f+1]=0,o=!0):m===s&&(i[f+1]=s-1,o=!0)}o=!0;for(let f=i.length-2;f>=0&&o;f-=2){const g=Math.floor(i[f]),m=Math.floor(i[f+1]);if(g<-1||g>r||m<-1||m>s)throw new oe;o=!1,g===-1?(i[f]=0,o=!0):g===r&&(i[f]=r-1,o=!0),m===-1?(i[f+1]=0,o=!0):m===s&&(i[f+1]=s-1,o=!0)}}}class Xn{constructor(t,i,r,s,o,f,g,m,E){this.a11=t,this.a21=i,this.a31=r,this.a12=s,this.a22=o,this.a32=f,this.a13=g,this.a23=m,this.a33=E}static quadrilateralToQuadrilateral(t,i,r,s,o,f,g,m,E,S,N,R,L,U,F,W){const se=Xn.quadrilateralToSquare(t,i,r,s,o,f,g,m);return Xn.squareToQuadrilateral(E,S,N,R,L,U,F,W).times(se)}transformPoints(t){const i=t.length,r=this.a11,s=this.a12,o=this.a13,f=this.a21,g=this.a22,m=this.a23,E=this.a31,S=this.a32,N=this.a33;for(let R=0;R<i;R+=2){const L=t[R],U=t[R+1],F=o*L+m*U+N;t[R]=(r*L+f*U+E)/F,t[R+1]=(s*L+g*U+S)/F}}transformPointsWithValues(t,i){const r=this.a11,s=this.a12,o=this.a13,f=this.a21,g=this.a22,m=this.a23,E=this.a31,S=this.a32,N=this.a33,R=t.length;for(let L=0;L<R;L++){const U=t[L],F=i[L],W=o*U+m*F+N;t[L]=(r*U+f*F+E)/W,i[L]=(s*U+g*F+S)/W}}static squareToQuadrilateral(t,i,r,s,o,f,g,m){const E=t-r+o-g,S=i-s+f-m;if(E===0&&S===0)return new Xn(r-t,o-r,t,s-i,f-s,i,0,0,1);{const N=r-o,R=g-o,L=s-f,U=m-f,F=N*U-R*L,W=(E*U-R*S)/F,se=(N*S-E*L)/F;return new Xn(r-t+W*r,g-t+se*g,t,s-i+W*s,m-i+se*m,i,W,se,1)}}static quadrilateralToSquare(t,i,r,s,o,f,g,m){return Xn.squareToQuadrilateral(t,i,r,s,o,f,g,m).buildAdjoint()}buildAdjoint(){return new Xn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new Xn(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class La extends Ba{sampleGrid(t,i,r,s,o,f,g,m,E,S,N,R,L,U,F,W,se,Ie,we){const Ae=Xn.quadrilateralToQuadrilateral(s,o,f,g,m,E,S,N,R,L,U,F,W,se,Ie,we);return this.sampleGridWithTransform(t,i,r,Ae)}sampleGridWithTransform(t,i,r,s){if(i<=0||r<=0)throw new oe;const o=new st(i,r),f=new Float32Array(2*i);for(let g=0;g<r;g++){const m=f.length,E=g+.5;for(let S=0;S<m;S+=2)f[S]=S/2+.5,f[S+1]=E;s.transformPoints(f),Ba.checkAndNudgePoints(t,f);try{for(let S=0;S<m;S+=2)t.get(Math.floor(f[S]),Math.floor(f[S+1]))&&o.set(S/2,g)}catch{throw new oe}}return o}}class qn{static setGridSampler(t){qn.gridSampler=t}static getInstance(){return qn.gridSampler}}qn.gridSampler=new La;class On{constructor(t,i){this.x=t,this.y=i}toResultPoint(){return new ke(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ri{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let i=this.getMatrixCenter(),r=this.getBullsEyeCorners(i);if(t){let f=r[0];r[0]=r[2],r[2]=f}this.extractParameters(r);let s=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),o=this.getMatrixCornerPoints(r);return new Da(s,o,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new oe;let i=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(t[0],t[1],i),this.sampleLine(t[1],t[2],i),this.sampleLine(t[2],t[3],i),this.sampleLine(t[3],t[0],i)]);this.shift=this.getRotation(r,i);let s=0;for(let f=0;f<4;f++){let g=r[(this.shift+f)%4];this.compact?(s<<=7,s+=g>>1&127):(s<<=10,s+=(g>>2&992)+(g>>1&31))}let o=this.getCorrectedParameterData(s,this.compact);this.compact?(this.nbLayers=(o>>6)+1,this.nbDataBlocks=(o&63)+1):(this.nbLayers=(o>>11)+1,this.nbDataBlocks=(o&2047)+1)}getRotation(t,i){let r=0;t.forEach((s,o,f)=>{let g=(s>>i-2<<1)+(s&1);r=(r<<3)+g}),r=((r&1)<<11)+(r>>1);for(let s=0;s<4;s++)if(X.bitCount(r^this.EXPECTED_CORNER_BITS[s])<=2)return s;throw new oe}getCorrectedParameterData(t,i){let r,s;i?(r=7,s=2):(r=10,s=4);let o=r-s,f=new Int32Array(r);for(let m=r-1;m>=0;--m)f[m]=t&15,t>>=4;try{new Xe(pt.AZTEC_PARAM).decode(f,o)}catch{throw new oe}let g=0;for(let m=0;m<s;m++)g=(g<<4)+f[m];return g}getBullsEyeCorners(t){let i=t,r=t,s=t,o=t,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let N=this.getFirstDifferent(i,f,1,-1),R=this.getFirstDifferent(r,f,1,1),L=this.getFirstDifferent(s,f,-1,1),U=this.getFirstDifferent(o,f,-1,-1);if(this.nbCenterLayers>2){let F=this.distancePoint(U,N)*this.nbCenterLayers/(this.distancePoint(o,i)*(this.nbCenterLayers+2));if(F<.75||F>1.25||!this.isWhiteOrBlackRectangle(N,R,L,U))break}i=N,r=R,s=L,o=U,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new oe;this.compact=this.nbCenterLayers===5;let g=new ke(i.getX()+.5,i.getY()-.5),m=new ke(r.getX()+.5,r.getY()+.5),E=new ke(s.getX()-.5,s.getY()+.5),S=new ke(o.getX()-.5,o.getY()-.5);return this.expandSquare([g,m,E,S],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,i,r,s;try{let g=new Jt(this.image).detect();t=g[0],i=g[1],r=g[2],s=g[3]}catch{let m=this.image.getWidth()/2,E=this.image.getHeight()/2;t=this.getFirstDifferent(new On(m+7,E-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new On(m+7,E+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new On(m-7,E+7),!1,-1,1).toResultPoint(),s=this.getFirstDifferent(new On(m-7,E-7),!1,-1,-1).toResultPoint()}let o=Qe.round((t.getX()+s.getX()+i.getX()+r.getX())/4),f=Qe.round((t.getY()+s.getY()+i.getY()+r.getY())/4);try{let g=new Jt(this.image,15,o,f).detect();t=g[0],i=g[1],r=g[2],s=g[3]}catch{t=this.getFirstDifferent(new On(o+7,f-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new On(o+7,f+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new On(o-7,f+7),!1,-1,1).toResultPoint(),s=this.getFirstDifferent(new On(o-7,f-7),!1,-1,-1).toResultPoint()}return o=Qe.round((t.getX()+s.getX()+i.getX()+r.getX())/4),f=Qe.round((t.getY()+s.getY()+i.getY()+r.getY())/4),new On(o,f)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,i,r,s,o){let f=qn.getInstance(),g=this.getDimension(),m=g/2-this.nbCenterLayers,E=g/2+this.nbCenterLayers;return f.sampleGrid(t,g,g,m,m,E,m,E,E,m,E,i.getX(),i.getY(),r.getX(),r.getY(),s.getX(),s.getY(),o.getX(),o.getY())}sampleLine(t,i,r){let s=0,o=this.distanceResultPoint(t,i),f=o/r,g=t.getX(),m=t.getY(),E=f*(i.getX()-t.getX())/o,S=f*(i.getY()-t.getY())/o;for(let N=0;N<r;N++)this.image.get(Qe.round(g+N*E),Qe.round(m+N*S))&&(s|=1<<r-N-1);return s}isWhiteOrBlackRectangle(t,i,r,s){let o=3;t=new On(t.getX()-o,t.getY()+o),i=new On(i.getX()-o,i.getY()-o),r=new On(r.getX()+o,r.getY()-o),s=new On(s.getX()+o,s.getY()+o);let f=this.getColor(s,t);if(f===0)return!1;let g=this.getColor(t,i);return g!==f||(g=this.getColor(i,r),g!==f)?!1:(g=this.getColor(r,s),g===f)}getColor(t,i){let r=this.distancePoint(t,i),s=(i.getX()-t.getX())/r,o=(i.getY()-t.getY())/r,f=0,g=t.getX(),m=t.getY(),E=this.image.get(t.getX(),t.getY()),S=Math.ceil(r);for(let R=0;R<S;R++)g+=s,m+=o,this.image.get(Qe.round(g),Qe.round(m))!==E&&f++;let N=f/r;return N>.1&&N<.9?0:N<=.1===E?1:-1}getFirstDifferent(t,i,r,s){let o=t.getX()+r,f=t.getY()+s;for(;this.isValid(o,f)&&this.image.get(o,f)===i;)o+=r,f+=s;for(o-=r,f-=s;this.isValid(o,f)&&this.image.get(o,f)===i;)o+=r;for(o-=r;this.isValid(o,f)&&this.image.get(o,f)===i;)f+=s;return f-=s,new On(o,f)}expandSquare(t,i,r){let s=r/(2*i),o=t[0].getX()-t[2].getX(),f=t[0].getY()-t[2].getY(),g=(t[0].getX()+t[2].getX())/2,m=(t[0].getY()+t[2].getY())/2,E=new ke(g+s*o,m+s*f),S=new ke(g-s*o,m-s*f);o=t[1].getX()-t[3].getX(),f=t[1].getY()-t[3].getY(),g=(t[1].getX()+t[3].getX())/2,m=(t[1].getY()+t[3].getY())/2;let N=new ke(g+s*o,m+s*f),R=new ke(g-s*o,m-s*f);return[E,N,S,R]}isValid(t,i){return t>=0&&t<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(t){let i=Qe.round(t.getX()),r=Qe.round(t.getY());return this.isValid(i,r)}distancePoint(t,i){return Qe.distance(t.getX(),t.getY(),i.getX(),i.getY())}distanceResultPoint(t,i){return Qe.distance(t.getX(),t.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(X.truncDivision(this.nbLayers-4,8)+1)+15}}class Gr{decode(t,i=null){let r=null,s=new Ri(t.getBlackMatrix()),o=null,f=null;try{let S=s.detectMirror(!1);o=S.getPoints(),this.reportFoundResultPoints(i,o),f=new We().decode(S)}catch(S){r=S}if(f==null)try{let S=s.detectMirror(!0);o=S.getPoints(),this.reportFoundResultPoints(i,o),f=new We().decode(S)}catch(S){throw r??S}let g=new Re(f.getText(),f.getRawBytes(),f.getNumBits(),o,Se.AZTEC,ne.currentTimeMillis()),m=f.getByteSegments();m!=null&&g.putMetadata(ft.BYTE_SEGMENTS,m);let E=f.getECLevel();return E!=null&&g.putMetadata(ft.ERROR_CORRECTION_LEVEL,E),g}reportFoundResultPoints(t,i){if(t!=null){let r=t.get(ge.NEED_RESULT_POINT_CALLBACK);r!=null&&i.forEach((s,o,f)=>{r.foundPossibleResultPoint(s)})}}reset(){}}class as extends ve{constructor(t=500){super(new Gr,t)}}class St{decode(t,i){try{return this.doDecode(t,i)}catch{if(i&&i.get(ge.TRY_HARDER)===!0&&t.isRotateSupported()){const o=t.rotateCounterClockwise(),f=this.doDecode(o,i),g=f.getResultMetadata();let m=270;g!==null&&g.get(ft.ORIENTATION)===!0&&(m=m+g.get(ft.ORIENTATION)%360),f.putMetadata(ft.ORIENTATION,m);const E=f.getResultPoints();if(E!==null){const S=o.getHeight();for(let N=0;N<E.length;N++)E[N]=new ke(S-E[N].getY()-1,E[N].getX())}return f}else throw new oe}}reset(){}doDecode(t,i){const r=t.getWidth(),s=t.getHeight();let o=new Ee(r);const f=i&&i.get(ge.TRY_HARDER)===!0,g=Math.max(1,s>>(f?8:5));let m;f?m=s:m=15;const E=Math.trunc(s/2);for(let S=0;S<m;S++){const N=Math.trunc((S+1)/2),R=(S&1)===0,L=E+g*(R?N:-N);if(L<0||L>=s)break;try{o=t.getBlackRow(L,o)}catch{continue}for(let U=0;U<2;U++){if(U===1&&(o.reverse(),i&&i.get(ge.NEED_RESULT_POINT_CALLBACK)===!0)){const F=new Map;i.forEach((W,se)=>F.set(se,W)),F.delete(ge.NEED_RESULT_POINT_CALLBACK),i=F}try{const F=this.decodeRow(L,o,i);if(U===1){F.putMetadata(ft.ORIENTATION,180);const W=F.getResultPoints();W!==null&&(W[0]=new ke(r-W[0].getX()-1,W[0].getY()),W[1]=new ke(r-W[1].getX()-1,W[1].getY()))}return F}catch{}}}throw new oe}static recordPattern(t,i,r){const s=r.length;for(let E=0;E<s;E++)r[E]=0;const o=t.getSize();if(i>=o)throw new oe;let f=!t.get(i),g=0,m=i;for(;m<o;){if(t.get(m)!==f)r[g]++;else{if(++g===s)break;r[g]=1,f=!f}m++}if(!(g===s||g===s-1&&m===o))throw new oe}static recordPatternInReverse(t,i,r){let s=r.length,o=t.get(i);for(;i>0&&s>=0;)t.get(--i)!==o&&(s--,o=!o);if(s>=0)throw new oe;St.recordPattern(t,i+1,r)}static patternMatchVariance(t,i,r){const s=t.length;let o=0,f=0;for(let E=0;E<s;E++)o+=t[E],f+=i[E];if(o<f)return Number.POSITIVE_INFINITY;const g=o/f;r*=g;let m=0;for(let E=0;E<s;E++){const S=t[E],N=i[E]*g,R=S>N?S-N:N-S;if(R>r)return Number.POSITIVE_INFINITY;m+=R}return m/o}}class Ne extends St{static findStartPattern(t){const i=t.getSize(),r=t.getNextSet(0);let s=0,o=Int32Array.from([0,0,0,0,0,0]),f=r,g=!1;const m=6;for(let E=r;E<i;E++)if(t.get(E)!==g)o[s]++;else{if(s===m-1){let S=Ne.MAX_AVG_VARIANCE,N=-1;for(let R=Ne.CODE_START_A;R<=Ne.CODE_START_C;R++){const L=St.patternMatchVariance(o,Ne.CODE_PATTERNS[R],Ne.MAX_INDIVIDUAL_VARIANCE);L<S&&(S=L,N=R)}if(N>=0&&t.isRange(Math.max(0,f-(E-f)/2),f,!1))return Int32Array.from([f,E,N]);f+=o[0]+o[1],o=o.slice(2,o.length-1),o[s-1]=0,o[s]=0,s--}else s++;o[s]=1,g=!g}throw new oe}static decodeCode(t,i,r){St.recordPattern(t,r,i);let s=Ne.MAX_AVG_VARIANCE,o=-1;for(let f=0;f<Ne.CODE_PATTERNS.length;f++){const g=Ne.CODE_PATTERNS[f],m=this.patternMatchVariance(i,g,Ne.MAX_INDIVIDUAL_VARIANCE);m<s&&(s=m,o=f)}if(o>=0)return o;throw new oe}decodeRow(t,i,r){const s=r&&r.get(ge.ASSUME_GS1)===!0,o=Ne.findStartPattern(i),f=o[2];let g=0;const m=new Uint8Array(20);m[g++]=f;let E;switch(f){case Ne.CODE_START_A:E=Ne.CODE_CODE_A;break;case Ne.CODE_START_B:E=Ne.CODE_CODE_B;break;case Ne.CODE_START_C:E=Ne.CODE_CODE_C;break;default:throw new te}let S=!1,N=!1,R="",L=o[0],U=o[1];const F=Int32Array.from([0,0,0,0,0,0]);let W=0,se=0,Ie=f,we=0,Ae=!0,dt=!1,rt=!1;for(;!S;){const vr=N;switch(N=!1,W=se,se=Ne.decodeCode(i,F,U),m[g++]=se,se!==Ne.CODE_STOP&&(Ae=!0),se!==Ne.CODE_STOP&&(we++,Ie+=we*se),L=U,U+=F.reduce((cl,ao)=>cl+ao,0),se){case Ne.CODE_START_A:case Ne.CODE_START_B:case Ne.CODE_START_C:throw new te}switch(E){case Ne.CODE_CODE_A:if(se<64)rt===dt?R+=String.fromCharCode(32+se):R+=String.fromCharCode(32+se+128),rt=!1;else if(se<96)rt===dt?R+=String.fromCharCode(se-64):R+=String.fromCharCode(se+64),rt=!1;else switch(se!==Ne.CODE_STOP&&(Ae=!1),se){case Ne.CODE_FNC_1:s&&(R.length===0?R+="]C1":R+="");break;case Ne.CODE_FNC_2:case Ne.CODE_FNC_3:break;case Ne.CODE_FNC_4_A:!dt&&rt?(dt=!0,rt=!1):dt&&rt?(dt=!1,rt=!1):rt=!0;break;case Ne.CODE_SHIFT:N=!0,E=Ne.CODE_CODE_B;break;case Ne.CODE_CODE_B:E=Ne.CODE_CODE_B;break;case Ne.CODE_CODE_C:E=Ne.CODE_CODE_C;break;case Ne.CODE_STOP:S=!0;break}break;case Ne.CODE_CODE_B:if(se<96)rt===dt?R+=String.fromCharCode(32+se):R+=String.fromCharCode(32+se+128),rt=!1;else switch(se!==Ne.CODE_STOP&&(Ae=!1),se){case Ne.CODE_FNC_1:s&&(R.length===0?R+="]C1":R+="");break;case Ne.CODE_FNC_2:case Ne.CODE_FNC_3:break;case Ne.CODE_FNC_4_B:!dt&&rt?(dt=!0,rt=!1):dt&&rt?(dt=!1,rt=!1):rt=!0;break;case Ne.CODE_SHIFT:N=!0,E=Ne.CODE_CODE_A;break;case Ne.CODE_CODE_A:E=Ne.CODE_CODE_A;break;case Ne.CODE_CODE_C:E=Ne.CODE_CODE_C;break;case Ne.CODE_STOP:S=!0;break}break;case Ne.CODE_CODE_C:if(se<100)se<10&&(R+="0"),R+=se;else switch(se!==Ne.CODE_STOP&&(Ae=!1),se){case Ne.CODE_FNC_1:s&&(R.length===0?R+="]C1":R+="");break;case Ne.CODE_CODE_A:E=Ne.CODE_CODE_A;break;case Ne.CODE_CODE_B:E=Ne.CODE_CODE_B;break;case Ne.CODE_STOP:S=!0;break}break}vr&&(E=E===Ne.CODE_CODE_A?Ne.CODE_CODE_B:Ne.CODE_CODE_A)}const fn=U-L;if(U=i.getNextUnset(U),!i.isRange(U,Math.min(i.getSize(),U+(U-L)/2),!1))throw new oe;if(Ie-=we*W,Ie%103!==W)throw new G;const oi=R.length;if(oi===0)throw new oe;oi>0&&Ae&&(E===Ne.CODE_CODE_C?R=R.substring(0,oi-2):R=R.substring(0,oi-1));const Fn=(o[1]+o[0])/2,Ut=L+fn/2,Ln=m.length,ei=new Uint8Array(Ln);for(let vr=0;vr<Ln;vr++)ei[vr]=m[vr];const ra=[new ke(Fn,t),new ke(Ut,t)];return new Re(R,ei,0,ra,Se.CODE_128,new Date().getTime())}}Ne.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ne.MAX_AVG_VARIANCE=.25,Ne.MAX_INDIVIDUAL_VARIANCE=.7,Ne.CODE_SHIFT=98,Ne.CODE_CODE_C=99,Ne.CODE_CODE_B=100,Ne.CODE_CODE_A=101,Ne.CODE_FNC_1=102,Ne.CODE_FNC_2=97,Ne.CODE_FNC_3=96,Ne.CODE_FNC_4_A=101,Ne.CODE_FNC_4_B=100,Ne.CODE_START_A=103,Ne.CODE_START_B=104,Ne.CODE_START_C=105,Ne.CODE_STOP=106;class Lt extends St{constructor(t=!1,i=!1){super(),this.usingCheckDigit=t,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,i,r){let s=this.counters;s.fill(0),this.decodeRowResult="";let o=Lt.findAsteriskPattern(i,s),f=i.getNextSet(o[1]),g=i.getSize(),m,E;do{Lt.recordPattern(i,f,s);let F=Lt.toNarrowWidePattern(s);if(F<0)throw new oe;m=Lt.patternToChar(F),this.decodeRowResult+=m,E=f;for(let W of s)f+=W;f=i.getNextSet(f)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let S=0;for(let F of s)S+=F;let N=f-E-S;if(f!==g&&N*2<S)throw new oe;if(this.usingCheckDigit){let F=this.decodeRowResult.length-1,W=0;for(let se=0;se<F;se++)W+=Lt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(se));if(this.decodeRowResult.charAt(F)!==Lt.ALPHABET_STRING.charAt(W%43))throw new G;this.decodeRowResult=this.decodeRowResult.substring(0,F)}if(this.decodeRowResult.length===0)throw new oe;let R;this.extendedMode?R=Lt.decodeExtended(this.decodeRowResult):R=this.decodeRowResult;let L=(o[1]+o[0])/2,U=E+S/2;return new Re(R,null,0,[new ke(L,t),new ke(U,t)],Se.CODE_39,new Date().getTime())}static findAsteriskPattern(t,i){let r=t.getSize(),s=t.getNextSet(0),o=0,f=s,g=!1,m=i.length;for(let E=s;E<r;E++)if(t.get(E)!==g)i[o]++;else{if(o===m-1){if(this.toNarrowWidePattern(i)===Lt.ASTERISK_ENCODING&&t.isRange(Math.max(0,f-Math.floor((E-f)/2)),f,!1))return[f,E];f+=i[0]+i[1],i.copyWithin(0,2,2+o-1),i[o-1]=0,i[o]=0,o--}else o++;i[o]=1,g=!g}throw new oe}static toNarrowWidePattern(t){let i=t.length,r=0,s;do{let o=2147483647;for(let m of t)m<o&&m>r&&(o=m);r=o,s=0;let f=0,g=0;for(let m=0;m<i;m++){let E=t[m];E>r&&(g|=1<<i-1-m,s++,f+=E)}if(s===3){for(let m=0;m<i&&s>0;m++){let E=t[m];if(E>r&&(s--,E*2>=f))return-1}return g}}while(s>3);return-1}static patternToChar(t){for(let i=0;i<Lt.CHARACTER_ENCODINGS.length;i++)if(Lt.CHARACTER_ENCODINGS[i]===t)return Lt.ALPHABET_STRING.charAt(i);if(t===Lt.ASTERISK_ENCODING)return"*";throw new oe}static decodeExtended(t){let i=t.length,r="";for(let s=0;s<i;s++){let o=t.charAt(s);if(o==="+"||o==="$"||o==="%"||o==="/"){let f=t.charAt(s+1),g="\0";switch(o){case"+":if(f>="A"&&f<="Z")g=String.fromCharCode(f.charCodeAt(0)+32);else throw new te;break;case"$":if(f>="A"&&f<="Z")g=String.fromCharCode(f.charCodeAt(0)-64);else throw new te;break;case"%":if(f>="A"&&f<="E")g=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")g=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")g=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")g=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")g="\0";else if(f==="V")g="@";else if(f==="W")g="`";else if(f==="X"||f==="Y"||f==="Z")g="";else throw new te;break;case"/":if(f>="A"&&f<="O")g=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")g=":";else throw new te;break}r+=g,s++}else r+=o}return r}}Lt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Lt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Lt.ASTERISK_ENCODING=148;class V extends St{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,i,r){let s=this.decodeStart(i),o=this.decodeEnd(i),f=new nt;V.decodeMiddle(i,s[1],o[0],f);let g=f.toString(),m=null;r!=null&&(m=r.get(ge.ALLOWED_LENGTHS)),m==null&&(m=V.DEFAULT_ALLOWED_LENGTHS);let E=g.length,S=!1,N=0;for(let U of m){if(E===U){S=!0;break}U>N&&(N=U)}if(!S&&E>N&&(S=!0),!S)throw new te;const R=[new ke(s[1],t),new ke(o[0],t)];return new Re(g,null,0,R,Se.ITF,new Date().getTime())}static decodeMiddle(t,i,r,s){let o=new Int32Array(10),f=new Int32Array(5),g=new Int32Array(5);for(o.fill(0),f.fill(0),g.fill(0);i<r;){St.recordPattern(t,i,o);for(let E=0;E<5;E++){let S=2*E;f[E]=o[S],g[E]=o[S+1]}let m=V.decodeDigit(f);s.append(m.toString()),m=this.decodeDigit(g),s.append(m.toString()),o.forEach(function(E){i+=E})}}decodeStart(t){let i=V.skipWhiteSpace(t),r=V.findGuardPattern(t,i,V.START_PATTERN);return this.narrowLineWidth=(r[1]-r[0])/4,this.validateQuietZone(t,r[0]),r}validateQuietZone(t,i){let r=this.narrowLineWidth*10;r=r<i?r:i;for(let s=i-1;r>0&&s>=0&&!t.get(s);s--)r--;if(r!==0)throw new oe}static skipWhiteSpace(t){const i=t.getSize(),r=t.getNextSet(0);if(r===i)throw new oe;return r}decodeEnd(t){t.reverse();try{let i=V.skipWhiteSpace(t),r;try{r=V.findGuardPattern(t,i,V.END_PATTERN_REVERSED[0])}catch(o){o instanceof oe&&(r=V.findGuardPattern(t,i,V.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,r[0]);let s=r[0];return r[0]=t.getSize()-r[1],r[1]=t.getSize()-s,r}finally{t.reverse()}}static findGuardPattern(t,i,r){let s=r.length,o=new Int32Array(s),f=t.getSize(),g=!1,m=0,E=i;o.fill(0);for(let S=i;S<f;S++)if(t.get(S)!==g)o[m]++;else{if(m===s-1){if(St.patternMatchVariance(o,r,V.MAX_INDIVIDUAL_VARIANCE)<V.MAX_AVG_VARIANCE)return[E,S];E+=o[0]+o[1],ne.arraycopy(o,2,o,0,m-1),o[m-1]=0,o[m]=0,m--}else m++;o[m]=1,g=!g}throw new oe}static decodeDigit(t){let i=V.MAX_AVG_VARIANCE,r=-1,s=V.PATTERNS.length;for(let o=0;o<s;o++){let f=V.PATTERNS[o],g=St.patternMatchVariance(t,f,V.MAX_INDIVIDUAL_VARIANCE);g<i?(i=g,r=o):g===i&&(r=-1)}if(r>=0)return r%10;throw new oe}}V.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],V.MAX_AVG_VARIANCE=.38,V.MAX_INDIVIDUAL_VARIANCE=.5,V.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],V.START_PATTERN=Int32Array.from([1,1,1,1]),V.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class ae extends St{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let i=!1,r,s=0,o=Int32Array.from([0,0,0]);for(;!i;){o=Int32Array.from([0,0,0]),r=ae.findGuardPattern(t,s,!1,this.START_END_PATTERN,o);let f=r[0];s=r[1];let g=f-(s-f);g>=0&&(i=t.isRange(g,f,!1))}return r}static checkChecksum(t){return ae.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let i=t.length;if(i===0)return!1;let r=parseInt(t.charAt(i-1),10);return ae.getStandardUPCEANChecksum(t.substring(0,i-1))===r}static getStandardUPCEANChecksum(t){let i=t.length,r=0;for(let s=i-1;s>=0;s-=2){let o=t.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new te;r+=o}r*=3;for(let s=i-2;s>=0;s-=2){let o=t.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new te;r+=o}return(1e3-r)%10}static decodeEnd(t,i){return ae.findGuardPattern(t,i,!1,ae.START_END_PATTERN,new Int32Array(ae.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,i,r,s){return this.findGuardPattern(t,i,r,s,new Int32Array(s.length))}static findGuardPattern(t,i,r,s,o){let f=t.getSize();i=r?t.getNextUnset(i):t.getNextSet(i);let g=0,m=i,E=s.length,S=r;for(let N=i;N<f;N++)if(t.get(N)!==S)o[g]++;else{if(g===E-1){if(St.patternMatchVariance(o,s,ae.MAX_INDIVIDUAL_VARIANCE)<ae.MAX_AVG_VARIANCE)return Int32Array.from([m,N]);m+=o[0]+o[1];let R=o.slice(2,o.length-1);for(let L=0;L<g-1;L++)o[L]=R[L];o[g-1]=0,o[g]=0,g--}else g++;o[g]=1,S=!S}throw new oe}static decodeDigit(t,i,r,s){this.recordPattern(t,r,i);let o=this.MAX_AVG_VARIANCE,f=-1,g=s.length;for(let m=0;m<g;m++){let E=s[m],S=St.patternMatchVariance(i,E,ae.MAX_INDIVIDUAL_VARIANCE);S<o&&(o=S,f=m)}if(f>=0)return f;throw new oe}}ae.MAX_AVG_VARIANCE=.48,ae.MAX_INDIVIDUAL_VARIANCE=.7,ae.START_END_PATTERN=Int32Array.from([1,1,1]),ae.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),ae.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ae.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class ye{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,i,r){let s=this.decodeRowStringBuffer,o=this.decodeMiddle(i,r,s),f=s.toString(),g=ye.parseExtensionString(f),m=[new ke((r[0]+r[1])/2,t),new ke(o,t)],E=new Re(f,null,0,m,Se.UPC_EAN_EXTENSION,new Date().getTime());return g!=null&&E.putAllMetadata(g),E}decodeMiddle(t,i,r){let s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;let o=t.getSize(),f=i[1],g=0;for(let E=0;E<5&&f<o;E++){let S=ae.decodeDigit(t,s,f,ae.L_AND_G_PATTERNS);r+=String.fromCharCode(48+S%10);for(let N of s)f+=N;S>=10&&(g|=1<<4-E),E!==4&&(f=t.getNextSet(f),f=t.getNextUnset(f))}if(r.length!==5)throw new oe;let m=this.determineCheckDigit(g);if(ye.extensionChecksum(r.toString())!==m)throw new oe;return f}static extensionChecksum(t){let i=t.length,r=0;for(let s=i-2;s>=0;s-=2)r+=t.charAt(s).charCodeAt(0)-48;r*=3;for(let s=i-1;s>=0;s-=2)r+=t.charAt(s).charCodeAt(0)-48;return r*=3,r%10}determineCheckDigit(t){for(let i=0;i<10;i++)if(t===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new oe}static parseExtensionString(t){if(t.length!==5)return null;let i=ye.parseExtension5String(t);return i==null?null:new Map([[ft.SUGGESTED_PRICE,i]])}static parseExtension5String(t){let i;switch(t.charAt(0)){case"0":i="£";break;case"5":i="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let r=parseInt(t.substring(1)),s=(r/100).toString(),o=r%100,f=o<10?"0"+o:o.toString();return i+s+"."+f}}class Be{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,i,r){let s=this.decodeRowStringBuffer,o=this.decodeMiddle(i,r,s),f=s.toString(),g=Be.parseExtensionString(f),m=[new ke((r[0]+r[1])/2,t),new ke(o,t)],E=new Re(f,null,0,m,Se.UPC_EAN_EXTENSION,new Date().getTime());return g!=null&&E.putAllMetadata(g),E}decodeMiddle(t,i,r){let s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;let o=t.getSize(),f=i[1],g=0;for(let m=0;m<2&&f<o;m++){let E=ae.decodeDigit(t,s,f,ae.L_AND_G_PATTERNS);r+=String.fromCharCode(48+E%10);for(let S of s)f+=S;E>=10&&(g|=1<<1-m),m!==1&&(f=t.getNextSet(f),f=t.getNextUnset(f))}if(r.length!==2)throw new oe;if(parseInt(r.toString())%4!==g)throw new oe;return f}static parseExtensionString(t){return t.length!==2?null:new Map([[ft.ISSUE_NUMBER,parseInt(t)]])}}class Ve{static decodeRow(t,i,r){let s=ae.findGuardPattern(i,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new ye().decodeRow(t,i,s)}catch{return new Be().decodeRow(t,i,s)}}}Ve.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Le extends ae{constructor(){super(),this.decodeRowStringBuffer="",Le.L_AND_G_PATTERNS=Le.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let i=Le.L_PATTERNS[t-10],r=new Int32Array(i.length);for(let s=0;s<i.length;s++)r[s]=i[i.length-s-1];Le.L_AND_G_PATTERNS[t]=r}}decodeRow(t,i,r){let s=Le.findStartGuardPattern(i),o=r==null?null:r.get(ge.NEED_RESULT_POINT_CALLBACK);if(o!=null){const Ae=new ke((s[0]+s[1])/2,t);o.foundPossibleResultPoint(Ae)}let f=this.decodeMiddle(i,s,this.decodeRowStringBuffer),g=f.rowOffset,m=f.resultString;if(o!=null){const Ae=new ke(g,t);o.foundPossibleResultPoint(Ae)}let E=this.decodeEnd(i,g);if(o!=null){const Ae=new ke((E[0]+E[1])/2,t);o.foundPossibleResultPoint(Ae)}let S=E[1],N=S+(S-E[0]);if(N>=i.getSize()||!i.isRange(S,N,!1))throw new oe;let R=m.toString();if(R.length<8)throw new te;if(!Le.checkChecksum(R))throw new G;let L=(s[1]+s[0])/2,U=(E[1]+E[0])/2,F=this.getBarcodeFormat(),W=[new ke(L,t),new ke(U,t)],se=new Re(R,null,0,W,F,new Date().getTime()),Ie=0;try{let Ae=Ve.decodeRow(t,i,E[1]);se.putMetadata(ft.UPC_EAN_EXTENSION,Ae.getText()),se.putAllMetadata(Ae.getResultMetadata()),se.addResultPoints(Ae.getResultPoints()),Ie=Ae.getText().length}catch{}let we=r==null?null:r.get(ge.ALLOWED_EAN_EXTENSIONS);if(we!=null){let Ae=!1;for(let dt in we)if(Ie.toString()===dt){Ae=!0;break}if(!Ae)throw new oe}return se}decodeEnd(t,i){return Le.findGuardPattern(t,i,!1,Le.START_END_PATTERN,new Int32Array(Le.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return Le.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let i=t.length;if(i===0)return!1;let r=parseInt(t.charAt(i-1),10);return Le.getStandardUPCEANChecksum(t.substring(0,i-1))===r}static getStandardUPCEANChecksum(t){let i=t.length,r=0;for(let s=i-1;s>=0;s-=2){let o=t.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new te;r+=o}r*=3;for(let s=i-2;s>=0;s-=2){let o=t.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new te;r+=o}return(1e3-r)%10}}class Pe extends Le{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,i,r){let s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;let o=t.getSize(),f=i[1],g=0;for(let E=0;E<6&&f<o;E++){let S=Le.decodeDigit(t,s,f,Le.L_AND_G_PATTERNS);r+=String.fromCharCode(48+S%10);for(let N of s)f+=N;S>=10&&(g|=1<<5-E)}r=Pe.determineFirstDigit(r,g),f=Le.findGuardPattern(t,f,!0,Le.MIDDLE_PATTERN,new Int32Array(Le.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<6&&f<o;E++){let S=Le.decodeDigit(t,s,f,Le.L_PATTERNS);r+=String.fromCharCode(48+S);for(let N of s)f+=N}return{rowOffset:f,resultString:r}}getBarcodeFormat(){return Se.EAN_13}static determineFirstDigit(t,i){for(let r=0;r<10;r++)if(i===this.FIRST_DIGIT_ENCODINGS[r])return t=String.fromCharCode(48+r)+t,t;throw new oe}}Pe.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ht extends Le{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,i,r){const s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;let o=t.getSize(),f=i[1];for(let m=0;m<4&&f<o;m++){let E=Le.decodeDigit(t,s,f,Le.L_PATTERNS);r+=String.fromCharCode(48+E);for(let S of s)f+=S}f=Le.findGuardPattern(t,f,!0,Le.MIDDLE_PATTERN,new Int32Array(Le.MIDDLE_PATTERN.length).fill(0))[1];for(let m=0;m<4&&f<o;m++){let E=Le.decodeDigit(t,s,f,Le.L_PATTERNS);r+=String.fromCharCode(48+E);for(let S of s)f+=S}return{rowOffset:f,resultString:r}}getBarcodeFormat(){return Se.EAN_8}}class xn extends Le{constructor(){super(...arguments),this.ean13Reader=new Pe}getBarcodeFormat(){return Se.UPC_A}decode(t,i){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,i,r){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,i,r))}decodeMiddle(t,i,r){return this.ean13Reader.decodeMiddle(t,i,r)}maybeReturnResult(t){let i=t.getText();if(i.charAt(0)==="0"){let r=new Re(i.substring(1),null,null,t.getResultPoints(),Se.UPC_A);return t.getResultMetadata()!=null&&r.putAllMetadata(t.getResultMetadata()),r}else throw new oe}reset(){this.ean13Reader.reset()}}class jt extends Le{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,i,r){const s=this.decodeMiddleCounters.map(E=>E);s[0]=0,s[1]=0,s[2]=0,s[3]=0;const o=t.getSize();let f=i[1],g=0;for(let E=0;E<6&&f<o;E++){const S=jt.decodeDigit(t,s,f,jt.L_AND_G_PATTERNS);r+=String.fromCharCode(48+S%10);for(let N of s)f+=N;S>=10&&(g|=1<<5-E)}let m=jt.determineNumSysAndCheckDigit(r,g);return{rowOffset:f,resultString:m}}decodeEnd(t,i){return jt.findGuardPatternWithoutCounters(t,i,!0,jt.MIDDLE_END_PATTERN)}checkChecksum(t){return Le.checkChecksum(jt.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,i){for(let r=0;r<=1;r++)for(let s=0;s<10;s++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[r][s]){let o=String.fromCharCode(48+r),f=String.fromCharCode(48+s);return o+t+f}throw oe.getNotFoundInstance()}getBarcodeFormat(){return Se.UPC_E}static convertUPCEtoUPCA(t){const i=t.slice(1,7).split("").map(o=>o.charCodeAt(0)),r=new nt;r.append(t.charAt(0));let s=i[5];switch(s){case 0:case 1:case 2:r.appendChars(i,0,2),r.append(s),r.append("0000"),r.appendChars(i,2,3);break;case 3:r.appendChars(i,0,3),r.append("00000"),r.appendChars(i,3,2);break;case 4:r.appendChars(i,0,4),r.append("00000"),r.append(i[4]);break;default:r.appendChars(i,0,5),r.append("0000"),r.append(s);break}return t.length>=8&&r.append(t.charAt(7)),r.toString()}}jt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),jt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ja extends St{constructor(t){super();let i=t==null?null:t.get(ge.POSSIBLE_FORMATS),r=[];h(i)?(r.push(new Pe),r.push(new xn),r.push(new ht),r.push(new jt)):(i.indexOf(Se.EAN_13)>-1&&r.push(new Pe),i.indexOf(Se.UPC_A)>-1&&r.push(new xn),i.indexOf(Se.EAN_8)>-1&&r.push(new ht),i.indexOf(Se.UPC_E)>-1&&r.push(new jt)),this.readers=r}decodeRow(t,i,r){for(let s of this.readers)try{const o=s.decodeRow(t,i,r),f=o.getBarcodeFormat()===Se.EAN_13&&o.getText().charAt(0)==="0",g=r==null?null:r.get(ge.POSSIBLE_FORMATS),m=g==null||g.includes(Se.UPC_A);if(f&&m){const E=o.getRawBytes(),S=new Re(o.getText().substring(1),E,E?E.length:null,o.getResultPoints(),Se.UPC_A);return S.putAllMetadata(o.getResultMetadata()),S}return o}catch{}throw new oe}reset(){for(let t of this.readers)t.reset()}}class Mn extends St{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,i){for(let r=0;r<i.length;r++)if(St.patternMatchVariance(t,i[r],Mn.MAX_INDIVIDUAL_VARIANCE)<Mn.MAX_AVG_VARIANCE)return r;throw new oe}static count(t){return Qe.sum(new Int32Array(t))}static increment(t,i){let r=0,s=i[0];for(let o=1;o<t.length;o++)i[o]>s&&(s=i[o],r=o);t[r]++}static decrement(t,i){let r=0,s=i[0];for(let o=1;o<t.length;o++)i[o]<s&&(s=i[o],r=o);t[r]--}static isFinderPattern(t){let i=t[0]+t[1],r=i+t[2]+t[3],s=i/r;if(s>=Mn.MIN_FINDER_PATTERN_RATIO&&s<=Mn.MAX_FINDER_PATTERN_RATIO){let o=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;for(let g of t)g>f&&(f=g),g<o&&(o=g);return f<10*o}return!1}}Mn.MAX_AVG_VARIANCE=.2,Mn.MAX_INDIVIDUAL_VARIANCE=.45,Mn.MIN_FINDER_PATTERN_RATIO=9.5/12,Mn.MAX_FINDER_PATTERN_RATIO=12.5/14;class rr{constructor(t,i){this.value=t,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof rr))return!1;const i=t;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ar{constructor(t,i,r,s,o){this.value=t,this.startEnd=i,this.value=t,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new ke(r,o)),this.resultPoints.push(new ke(s,o))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof ar))return!1;const i=t;return this.value===i.value}hashCode(){return this.value}}class _i{constructor(){}static getRSSvalue(t,i,r){let s=0;for(let m of t)s+=m;let o=0,f=0,g=t.length;for(let m=0;m<g-1;m++){let E;for(E=1,f|=1<<m;E<t[m];E++,f&=~(1<<m)){let S=_i.combins(s-E-1,g-m-2);if(r&&f===0&&s-E-(g-m-1)>=g-m-1&&(S-=_i.combins(s-E-(g-m),g-m-2)),g-m-1>1){let N=0;for(let R=s-E-(g-m-2);R>i;R--)N+=_i.combins(s-E-R-1,g-m-3);S-=N*(g-1-m)}else s-E>i&&S--;o+=S}s-=E}return o}static combins(t,i){let r,s;t-i>i?(s=i,r=t-i):(s=t-i,r=i);let o=1,f=1;for(let g=t;g>r;g--)o*=g,f<=s&&(o/=f,f++);for(;f<=s;)o/=f,f++;return o}}class Zo{static buildBitArray(t){let i=t.length*2-1;t[t.length-1].getRightChar()==null&&(i-=1);let r=12*i,s=new Ee(r),o=0,g=t[0].getRightChar().getValue();for(let m=11;m>=0;--m)(g&1<<m)!=0&&s.set(o),o++;for(let m=1;m<t.length;++m){let E=t[m],S=E.getLeftChar().getValue();for(let N=11;N>=0;--N)(S&1<<N)!=0&&s.set(o),o++;if(E.getRightChar()!=null){let N=E.getRightChar().getValue();for(let R=11;R>=0;--R)(N&1<<R)!=0&&s.set(o),o++}}return s}}class sr{constructor(t,i){i?this.decodedInformation=null:(this.finished=t,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ss{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class kn extends ss{constructor(t,i){super(t),this.value=i}getValue(){return this.value}isFNC1(){return this.value===kn.FNC1}}kn.FNC1="$";class Vi extends ss{constructor(t,i,r){super(t),r?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Zn extends ss{constructor(t,i,r){if(super(t),i<0||i>10||r<0||r>10)throw new te;this.firstDigit=i,this.secondDigit=r}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Zn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Zn.FNC1}isAnyFNC1(){return this.firstDigit===Zn.FNC1||this.secondDigit===Zn.FNC1}}Zn.FNC1=10;class je{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new oe;let i=t.substring(0,2);for(let o of je.TWO_DIGIT_DATA_LENGTH)if(o[0]===i)return o[1]===je.VARIABLE_LENGTH?je.processVariableAI(2,o[2],t):je.processFixedAI(2,o[1],t);if(t.length<3)throw new oe;let r=t.substring(0,3);for(let o of je.THREE_DIGIT_DATA_LENGTH)if(o[0]===r)return o[1]===je.VARIABLE_LENGTH?je.processVariableAI(3,o[2],t):je.processFixedAI(3,o[1],t);for(let o of je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(o[0]===r)return o[1]===je.VARIABLE_LENGTH?je.processVariableAI(4,o[2],t):je.processFixedAI(4,o[1],t);if(t.length<4)throw new oe;let s=t.substring(0,4);for(let o of je.FOUR_DIGIT_DATA_LENGTH)if(o[0]===s)return o[1]===je.VARIABLE_LENGTH?je.processVariableAI(4,o[2],t):je.processFixedAI(4,o[1],t);throw new oe}static processFixedAI(t,i,r){if(r.length<t)throw new oe;let s=r.substring(0,t);if(r.length<t+i)throw new oe;let o=r.substring(t,t+i),f=r.substring(t+i),g="("+s+")"+o,m=je.parseFieldsInGeneralPurpose(f);return m==null?g:g+m}static processVariableAI(t,i,r){let s=r.substring(0,t),o;r.length<t+i?o=r.length:o=t+i;let f=r.substring(t,o),g=r.substring(o),m="("+s+")"+f,E=je.parseFieldsInGeneralPurpose(g);return E==null?m:m+E}}je.VARIABLE_LENGTH=[],je.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",je.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",je.VARIABLE_LENGTH,20],["22",je.VARIABLE_LENGTH,29],["30",je.VARIABLE_LENGTH,8],["37",je.VARIABLE_LENGTH,8],["90",je.VARIABLE_LENGTH,30],["91",je.VARIABLE_LENGTH,30],["92",je.VARIABLE_LENGTH,30],["93",je.VARIABLE_LENGTH,30],["94",je.VARIABLE_LENGTH,30],["95",je.VARIABLE_LENGTH,30],["96",je.VARIABLE_LENGTH,30],["97",je.VARIABLE_LENGTH,3],["98",je.VARIABLE_LENGTH,30],["99",je.VARIABLE_LENGTH,30]],je.THREE_DIGIT_DATA_LENGTH=[["240",je.VARIABLE_LENGTH,30],["241",je.VARIABLE_LENGTH,30],["242",je.VARIABLE_LENGTH,6],["250",je.VARIABLE_LENGTH,30],["251",je.VARIABLE_LENGTH,30],["253",je.VARIABLE_LENGTH,17],["254",je.VARIABLE_LENGTH,20],["400",je.VARIABLE_LENGTH,30],["401",je.VARIABLE_LENGTH,30],["402",17],["403",je.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",je.VARIABLE_LENGTH,20],["421",je.VARIABLE_LENGTH,15],["422",3],["423",je.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",je.VARIABLE_LENGTH,15],["391",je.VARIABLE_LENGTH,18],["392",je.VARIABLE_LENGTH,15],["393",je.VARIABLE_LENGTH,18],["703",je.VARIABLE_LENGTH,30]],je.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",je.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",je.VARIABLE_LENGTH,20],["8003",je.VARIABLE_LENGTH,30],["8004",je.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",je.VARIABLE_LENGTH,30],["8008",je.VARIABLE_LENGTH,12],["8018",18],["8020",je.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",je.VARIABLE_LENGTH,70],["8200",je.VARIABLE_LENGTH,70]];class Qn{constructor(t){this.buffer=new nt,this.information=t}decodeAllCodes(t,i){let r=i,s=null;do{let o=this.decodeGeneralPurposeField(r,s),f=je.parseFieldsInGeneralPurpose(o.getNewString());if(f!=null&&t.append(f),o.isRemaining()?s=""+o.getRemainingValue():s=null,r===o.getNewPosition())break;r=o.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let i=t;i<t+3;++i)if(this.information.get(i))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let o=this.extractNumericValueFromBitArray(t,4);return o===0?new Zn(this.information.getSize(),Zn.FNC1,Zn.FNC1):new Zn(this.information.getSize(),o-1,Zn.FNC1)}let i=this.extractNumericValueFromBitArray(t,7),r=(i-8)/11,s=(i-8)%11;return new Zn(t+7,r,s)}extractNumericValueFromBitArray(t,i){return Qn.extractNumericValueFromBitArray(this.information,t,i)}static extractNumericValueFromBitArray(t,i,r){let s=0;for(let o=0;o<r;++o)t.get(i+o)&&(s|=1<<r-o-1);return s}decodeGeneralPurposeField(t,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(t);let r=this.parseBlocks();return r!=null&&r.isRemaining()?new Vi(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Vi(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,i;do{let r=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),t=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),t=i.isFinished()):(i=this.parseNumericBlock(),t=i.isFinished()),!(r!==this.current.getPosition())&&!t)break}while(!t);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let i;return t.isSecondDigitFNC1()?i=new Vi(this.current.getPosition(),this.buffer.toString()):i=new Vi(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new sr(!0,i)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let i=new Vi(this.current.getPosition(),this.buffer.toString());return new sr(!0,i)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new sr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let i=new Vi(this.current.getPosition(),this.buffer.toString());return new sr(!0,i)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new sr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let i=new Vi(this.current.getPosition(),this.buffer.toString());return new sr(!0,i)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new sr(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,5);if(i>=5&&i<16)return!0;if(t+7>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<116)return!0;if(t+8>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(t,8);return s>=232&&s<253}decodeIsoIec646(t){let i=this.extractNumericValueFromBitArray(t,5);if(i===15)return new kn(t+5,kn.FNC1);if(i>=5&&i<15)return new kn(t+5,"0"+(i-5));let r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<90)return new kn(t+7,""+(r+1));if(r>=90&&r<116)return new kn(t+7,""+(r+7));let s=this.extractNumericValueFromBitArray(t,8),o;switch(s){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new te}return new kn(t+8,o)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,5);if(i>=5&&i<16)return!0;if(t+6>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,6);return r>=16&&r<63}decodeAlphanumeric(t){let i=this.extractNumericValueFromBitArray(t,5);if(i===15)return new kn(t+5,kn.FNC1);if(i>=5&&i<15)return new kn(t+5,"0"+(i-5));let r=this.extractNumericValueFromBitArray(t,6);if(r>=32&&r<58)return new kn(t+6,""+(r+33));let s;switch(r){case 58:s="*";break;case 59:s=",";break;case 60:s="-";break;case 61:s=".";break;case 62:s="/";break;default:throw new _e("Decoding invalid alphanumeric value: "+r)}return new kn(t+6,s)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let i=0;i<5&&i+t<this.information.getSize();++i)if(i===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+i))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let i=t;i<t+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let i=0;i<4&&i+t<this.information.getSize();++i)if(this.information.get(t+i))return!1;return!0}}class mn{constructor(t){this.information=t,this.generalDecoder=new Qn(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ft extends mn{constructor(t){super(t)}encodeCompressedGtin(t,i){t.append("(01)");let r=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,i,r)}encodeCompressedGtinWithoutAI(t,i,r){for(let s=0;s<4;++s){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*s,10);o/100===0&&t.append("0"),o/10===0&&t.append("0"),t.append(o)}Ft.appendCheckDigit(t,r)}static appendCheckDigit(t,i){let r=0;for(let s=0;s<13;s++){let o=t.charAt(s+i).charCodeAt(0)-48;r+=(s&1)===0?3*o:o}r=10-r%10,r===10&&(r=0),t.append(r)}}Ft.GTIN_SIZE=40;class gi extends Ft{constructor(t){super(t)}parseInformation(){let t=new nt;t.append("(01)");let i=t.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray(gi.HEADER_SIZE,4);return t.append(r),this.encodeCompressedGtinWithoutAI(t,gi.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(t,gi.HEADER_SIZE+44)}}gi.HEADER_SIZE=4;class Yr extends mn{constructor(t){super(t)}parseInformation(){let t=new nt;return this.getGeneralDecoder().decodeAllCodes(t,Yr.HEADER_SIZE)}}Yr.HEADER_SIZE=5;class os extends Ft{constructor(t){super(t)}encodeCompressedWeight(t,i,r){let s=this.getGeneralDecoder().extractNumericValueFromBitArray(i,r);this.addWeightCode(t,s);let o=this.checkWeight(s),f=1e5;for(let g=0;g<5;++g)o/f===0&&t.append("0"),f/=10;t.append(o)}}class Oi extends os{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=Oi.HEADER_SIZE+os.GTIN_SIZE+Oi.WEIGHT_SIZE)throw new oe;let t=new nt;return this.encodeCompressedGtin(t,Oi.HEADER_SIZE),this.encodeCompressedWeight(t,Oi.HEADER_SIZE+os.GTIN_SIZE,Oi.WEIGHT_SIZE),t.toString()}}Oi.HEADER_SIZE=5,Oi.WEIGHT_SIZE=15;class Qo extends Oi{constructor(t){super(t)}addWeightCode(t,i){t.append("(3103)")}checkWeight(t){return t}}class ka extends Oi{constructor(t){super(t)}addWeightCode(t,i){i<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class ri extends Ft{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<ri.HEADER_SIZE+Ft.GTIN_SIZE)throw new oe;let t=new nt;this.encodeCompressedGtin(t,ri.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(ri.HEADER_SIZE+Ft.GTIN_SIZE,ri.LAST_DIGIT_SIZE);t.append("(392"),t.append(i),t.append(")");let r=this.getGeneralDecoder().decodeGeneralPurposeField(ri.HEADER_SIZE+Ft.GTIN_SIZE+ri.LAST_DIGIT_SIZE,null);return t.append(r.getNewString()),t.toString()}}ri.HEADER_SIZE=8,ri.LAST_DIGIT_SIZE=2;class un extends Ft{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<un.HEADER_SIZE+Ft.GTIN_SIZE)throw new oe;let t=new nt;this.encodeCompressedGtin(t,un.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(un.HEADER_SIZE+Ft.GTIN_SIZE,un.LAST_DIGIT_SIZE);t.append("(393"),t.append(i),t.append(")");let r=this.getGeneralDecoder().extractNumericValueFromBitArray(un.HEADER_SIZE+Ft.GTIN_SIZE+un.LAST_DIGIT_SIZE,un.FIRST_THREE_DIGITS_SIZE);r/100==0&&t.append("0"),r/10==0&&t.append("0"),t.append(r);let s=this.getGeneralDecoder().decodeGeneralPurposeField(un.HEADER_SIZE+Ft.GTIN_SIZE+un.LAST_DIGIT_SIZE+un.FIRST_THREE_DIGITS_SIZE,null);return t.append(s.getNewString()),t.toString()}}un.HEADER_SIZE=8,un.LAST_DIGIT_SIZE=2,un.FIRST_THREE_DIGITS_SIZE=10;class Ot extends os{constructor(t,i,r){super(t),this.dateCode=r,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=Ot.HEADER_SIZE+Ot.GTIN_SIZE+Ot.WEIGHT_SIZE+Ot.DATE_SIZE)throw new oe;let t=new nt;return this.encodeCompressedGtin(t,Ot.HEADER_SIZE),this.encodeCompressedWeight(t,Ot.HEADER_SIZE+Ot.GTIN_SIZE,Ot.WEIGHT_SIZE),this.encodeCompressedDate(t,Ot.HEADER_SIZE+Ot.GTIN_SIZE+Ot.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,i){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(i,Ot.DATE_SIZE);if(r==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let s=r%32;r/=32;let o=r%12+1;r/=12;let f=r;f/10==0&&t.append("0"),t.append(f),o/10==0&&t.append("0"),t.append(o),s/10==0&&t.append("0"),t.append(s)}addWeightCode(t,i){t.append("("),t.append(this.firstAIdigits),t.append(i/1e5),t.append(")")}checkWeight(t){return t%1e5}}Ot.HEADER_SIZE=8,Ot.WEIGHT_SIZE=20,Ot.DATE_SIZE=16;function Xr(T){try{if(T.get(1))return new gi(T);if(!T.get(2))return new Yr(T);switch(Qn.extractNumericValueFromBitArray(T,1,4)){case 4:return new Qo(T);case 5:return new ka(T)}switch(Qn.extractNumericValueFromBitArray(T,1,5)){case 12:return new ri(T);case 13:return new un(T)}switch(Qn.extractNumericValueFromBitArray(T,1,7)){case 56:return new Ot(T,"310","11");case 57:return new Ot(T,"320","11");case 58:return new Ot(T,"310","13");case 59:return new Ot(T,"320","13");case 60:return new Ot(T,"310","15");case 61:return new Ot(T,"320","15");case 62:return new Ot(T,"310","17");case 63:return new Ot(T,"320","17")}}catch(t){throw console.log(t),new _e("unknown decoder: "+T)}}class Kn{constructor(t,i,r,s){this.leftchar=t,this.rightchar=i,this.finderpattern=r,this.maybeLast=s}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,i){return t instanceof Kn?Kn.equalsOrNull(t.leftchar,i.leftchar)&&Kn.equalsOrNull(t.rightchar,i.rightchar)&&Kn.equalsOrNull(t.finderpattern,i.finderpattern):!1}static equalsOrNull(t,i){return t===null?i===null:Kn.equals(t,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class dn{constructor(t,i,r){this.pairs=t,this.rowNumber=i,this.wasReversed=r}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,i){return t instanceof dn?this.checkEqualitity(t,i)&&t.wasReversed===i.wasReversed:!1}checkEqualitity(t,i){if(!t||!i)return;let r;return t.forEach((s,o)=>{i.forEach(f=>{s.getLeftChar().getValue()===f.getLeftChar().getValue()&&s.getRightChar().getValue()===f.getRightChar().getValue()&&s.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(r=!0)})}),r}}class Ce extends Mn{constructor(t){super(...arguments),this.pairs=new Array(Ce.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,i,r){this.pairs.length=0,this.startFromEven=!1;try{return Ce.constructResult(this.decodeRow2pairs(t,i))}catch(s){this.verbose&&console.log(s)}return this.pairs.length=0,this.startFromEven=!0,Ce.constructResult(this.decodeRow2pairs(t,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,i){let r=!1;for(;!r;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,t))}catch(o){if(o instanceof oe){if(!this.pairs.length)throw new oe;r=!0}}if(this.checkChecksum())return this.pairs;let s;if(this.rows.length?s=!0:s=!1,this.storeRow(t,!1),s){let o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new oe}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(r){this.verbose&&console.log(r)}return t&&(this.rows=this.rows.reverse()),i}checkRows(t,i){for(let r=i;r<this.rows.length;r++){let s=this.rows[r];this.pairs.length=0;for(let f of t)this.pairs.push(f.getPairs());if(this.pairs.push(s.getPairs()),!Ce.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let o=new Array(t);o.push(s);try{return this.checkRows(o,r+1)}catch(f){this.verbose&&console.log(f)}}throw new oe}static isValidSequence(t){for(let i of Ce.FINDER_PATTERN_SEQUENCES){if(t.length>i.length)continue;let r=!0;for(let s=0;s<t.length;s++)if(t[s].getFinderPattern().getValue()!=i[s]){r=!1;break}if(r)return!0}return!1}storeRow(t,i){let r=0,s=!1,o=!1;for(;r<this.rows.length;){let f=this.rows[r];if(f.getRowNumber()>t){o=f.isEquivalent(this.pairs);break}s=f.isEquivalent(this.pairs),r++}o||s||Ce.isPartialRow(this.pairs,this.rows)||(this.rows.push(r,new dn(this.pairs,t,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,i){for(let r of i)if(r.getPairs().length!==t.length){for(let s of r.getPairs())for(let o of t)if(Kn.equals(s,o))break}}static isPartialRow(t,i){for(let r of i){let s=!0;for(let o of t){let f=!1;for(let g of r.getPairs())if(o.equals(g)){f=!0;break}if(!f){s=!1;break}}if(s)return!0}return!1}getRows(){return this.rows}static constructResult(t){let i=Zo.buildBitArray(t),s=Xr(i).parseInformation(),o=t[0].getFinderPattern().getResultPoints(),f=t[t.length-1].getFinderPattern().getResultPoints(),g=[o[0],o[1],f[0],f[1]];return new Re(s,null,null,g,Se.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),i=t.getLeftChar(),r=t.getRightChar();if(r==null)return!1;let s=r.getChecksumPortion(),o=2;for(let g=1;g<this.pairs.size();++g){let m=this.pairs.get(g);s+=m.getLeftChar().getChecksumPortion(),o++;let E=m.getRightChar();E!=null&&(s+=E.getChecksumPortion(),o++)}return s%=211,211*(o-4)+s==i.getValue()}static getNextSecondBar(t,i){let r;return t.get(i)?(r=t.getNextUnset(i),r=t.getNextSet(r)):(r=t.getNextSet(i),r=t.getNextUnset(r)),r}retrieveNextPair(t,i,r){let s=i.length%2==0;this.startFromEven&&(s=!s);let o,f=!0,g=-1;do this.findNextPair(t,i,g),o=this.parseFoundFinderPattern(t,r,s),o==null?g=Ce.getNextSecondBar(t,this.startEnd[0]):f=!1;while(f);let m=this.decodeDataCharacter(t,o,s,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new oe;let E;try{E=this.decodeDataCharacter(t,o,s,!1)}catch(S){E=null,this.verbose&&console.log(S)}return new Kn(m,E,o,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,i,r){let s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;let o=t.getSize(),f;r>=0?f=r:this.isEmptyPair(i)?f=0:f=i[i.length-1].getFinderPattern().getStartEnd()[1];let g=i.length%2!=0;this.startFromEven&&(g=!g);let m=!1;for(;f<o&&(m=!t.get(f),!!m);)f++;let E=0,S=f;for(let N=f;N<o;N++)if(t.get(N)!=m)s[E]++;else{if(E==3){if(g&&Ce.reverseCounters(s),Ce.isFinderPattern(s)){this.startEnd[0]=S,this.startEnd[1]=N;return}g&&Ce.reverseCounters(s),S+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,E--}else E++;s[E]=1,m=!m}throw new oe}static reverseCounters(t){let i=t.length;for(let r=0;r<i/2;++r){let s=t[r];t[r]=t[i-r-1],t[i-r-1]=s}}parseFoundFinderPattern(t,i,r){let s,o,f;if(r){let E=this.startEnd[0]-1;for(;E>=0&&!t.get(E);)E--;E++,s=this.startEnd[0]-E,o=E,f=this.startEnd[1]}else o=this.startEnd[0],f=t.getNextUnset(this.startEnd[1]+1),s=f-this.startEnd[1];let g=this.getDecodeFinderCounters();ne.arraycopy(g,0,g,1,g.length-1),g[0]=s;let m;try{m=this.parseFinderValue(g,Ce.FINDER_PATTERNS)}catch{return null}return new ar(m,[o,f],o,f,i)}decodeDataCharacter(t,i,r,s){let o=this.getDataCharacterCounters();for(let Ut=0;Ut<o.length;Ut++)o[Ut]=0;if(s)Ce.recordPatternInReverse(t,i.getStartEnd()[0],o);else{Ce.recordPattern(t,i.getStartEnd()[1],o);for(let Ut=0,Ln=o.length-1;Ut<Ln;Ut++,Ln--){let ei=o[Ut];o[Ut]=o[Ln],o[Ln]=ei}}let f=17,g=Qe.sum(new Int32Array(o))/f,m=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(g-m)/m>.3)throw new oe;let E=this.getOddCounts(),S=this.getEvenCounts(),N=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let Ut=0;Ut<o.length;Ut++){let Ln=1*o[Ut]/g,ei=Ln+.5;if(ei<1){if(Ln<.3)throw new oe;ei=1}else if(ei>8){if(Ln>8.7)throw new oe;ei=8}let ra=Ut/2;(Ut&1)==0?(E[ra]=ei,N[ra]=Ln-ei):(S[ra]=ei,R[ra]=Ln-ei)}this.adjustOddEvenCounts(f);let L=4*i.getValue()+(r?0:2)+(s?0:1)-1,U=0,F=0;for(let Ut=E.length-1;Ut>=0;Ut--){if(Ce.isNotA1left(i,r,s)){let Ln=Ce.WEIGHTS[L][2*Ut];F+=E[Ut]*Ln}U+=E[Ut]}let W=0;for(let Ut=S.length-1;Ut>=0;Ut--)if(Ce.isNotA1left(i,r,s)){let Ln=Ce.WEIGHTS[L][2*Ut+1];W+=S[Ut]*Ln}let se=F+W;if((U&1)!=0||U>13||U<4)throw new oe;let Ie=(13-U)/2,we=Ce.SYMBOL_WIDEST[Ie],Ae=9-we,dt=_i.getRSSvalue(E,we,!0),rt=_i.getRSSvalue(S,Ae,!1),fn=Ce.EVEN_TOTAL_SUBSET[Ie],oi=Ce.GSUM[Ie],Fn=dt*fn+rt+oi;return new rr(Fn,se)}static isNotA1left(t,i,r){return!(t.getValue()==0&&i&&r)}adjustOddEvenCounts(t){let i=Qe.sum(new Int32Array(this.getOddCounts())),r=Qe.sum(new Int32Array(this.getEvenCounts())),s=!1,o=!1;i>13?o=!0:i<4&&(s=!0);let f=!1,g=!1;r>13?g=!0:r<4&&(f=!0);let m=i+r-t,E=(i&1)==1,S=(r&1)==0;if(m==1)if(E){if(S)throw new oe;o=!0}else{if(!S)throw new oe;g=!0}else if(m==-1)if(E){if(S)throw new oe;s=!0}else{if(!S)throw new oe;f=!0}else if(m==0){if(E){if(!S)throw new oe;i<r?(s=!0,g=!0):(o=!0,f=!0)}else if(S)throw new oe}else throw new oe;if(s){if(o)throw new oe;Ce.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&Ce.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(g)throw new oe;Ce.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&Ce.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ce.SYMBOL_WIDEST=[7,5,4,3,1],Ce.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ce.GSUM=[0,348,1388,2948,3988],Ce.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ce.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ce.FINDER_PAT_A=0,Ce.FINDER_PAT_B=1,Ce.FINDER_PAT_C=2,Ce.FINDER_PAT_D=3,Ce.FINDER_PAT_E=4,Ce.FINDER_PAT_F=5,Ce.FINDER_PATTERN_SEQUENCES=[[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_C,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_E,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D,Ce.FINDER_PAT_C],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_E,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D,Ce.FINDER_PAT_D,Ce.FINDER_PAT_F],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_E,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_F,Ce.FINDER_PAT_F],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_D],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_E],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_F,Ce.FINDER_PAT_F],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_E,Ce.FINDER_PAT_F,Ce.FINDER_PAT_F]],Ce.MAX_PAIRS=11;class Ko extends rr{constructor(t,i,r){super(t,i),this.count=0,this.finderPattern=r}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class kt extends Mn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,i,r){const s=this.decodePair(i,!1,t,r);kt.addOrTally(this.possibleLeftPairs,s),i.reverse();let o=this.decodePair(i,!0,t,r);kt.addOrTally(this.possibleRightPairs,o),i.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let g of this.possibleRightPairs)if(g.getCount()>1&&kt.checkChecksum(f,g))return kt.constructResult(f,g)}throw new oe}static addOrTally(t,i){if(i==null)return;let r=!1;for(let s of t)if(s.getValue()===i.getValue()){s.incrementCount(),r=!0;break}r||t.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,i){let r=4537077*t.getValue()+i.getValue(),s=new String(r).toString(),o=new nt;for(let E=13-s.length;E>0;E--)o.append("0");o.append(s);let f=0;for(let E=0;E<13;E++){let S=o.charAt(E).charCodeAt(0)-48;f+=(E&1)===0?3*S:S}f=10-f%10,f===10&&(f=0),o.append(f.toString());let g=t.getFinderPattern().getResultPoints(),m=i.getFinderPattern().getResultPoints();return new Re(o.toString(),null,0,[g[0],g[1],m[0],m[1]],Se.RSS_14,new Date().getTime())}static checkChecksum(t,i){let r=(t.getChecksumPortion()+16*i.getChecksumPortion())%79,s=9*t.getFinderPattern().getValue()+i.getFinderPattern().getValue();return s>72&&s--,s>8&&s--,r===s}decodePair(t,i,r,s){try{let o=this.findFinderPattern(t,i),f=this.parseFoundFinderPattern(t,r,i,o),g=s==null?null:s.get(ge.NEED_RESULT_POINT_CALLBACK);if(g!=null){let S=(o[0]+o[1])/2;i&&(S=t.getSize()-1-S),g.foundPossibleResultPoint(new ke(S,r))}let m=this.decodeDataCharacter(t,f,!0),E=this.decodeDataCharacter(t,f,!1);return new Ko(1597*m.getValue()+E.getValue(),m.getChecksumPortion()+4*E.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(t,i,r){let s=this.getDataCharacterCounters();for(let W=0;W<s.length;W++)s[W]=0;if(r)St.recordPatternInReverse(t,i.getStartEnd()[0],s);else{St.recordPattern(t,i.getStartEnd()[1]+1,s);for(let W=0,se=s.length-1;W<se;W++,se--){let Ie=s[W];s[W]=s[se],s[se]=Ie}}let o=r?16:15,f=Qe.sum(new Int32Array(s))/o,g=this.getOddCounts(),m=this.getEvenCounts(),E=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors();for(let W=0;W<s.length;W++){let se=s[W]/f,Ie=Math.floor(se+.5);Ie<1?Ie=1:Ie>8&&(Ie=8);let we=Math.floor(W/2);(W&1)===0?(g[we]=Ie,E[we]=se-Ie):(m[we]=Ie,S[we]=se-Ie)}this.adjustOddEvenCounts(r,o);let N=0,R=0;for(let W=g.length-1;W>=0;W--)R*=9,R+=g[W],N+=g[W];let L=0,U=0;for(let W=m.length-1;W>=0;W--)L*=9,L+=m[W],U+=m[W];let F=R+3*L;if(r){if((N&1)!==0||N>12||N<4)throw new oe;let W=(12-N)/2,se=kt.OUTSIDE_ODD_WIDEST[W],Ie=9-se,we=_i.getRSSvalue(g,se,!1),Ae=_i.getRSSvalue(m,Ie,!0),dt=kt.OUTSIDE_EVEN_TOTAL_SUBSET[W],rt=kt.OUTSIDE_GSUM[W];return new rr(we*dt+Ae+rt,F)}else{if((U&1)!==0||U>10||U<4)throw new oe;let W=(10-U)/2,se=kt.INSIDE_ODD_WIDEST[W],Ie=9-se,we=_i.getRSSvalue(g,se,!0),Ae=_i.getRSSvalue(m,Ie,!1),dt=kt.INSIDE_ODD_TOTAL_SUBSET[W],rt=kt.INSIDE_GSUM[W];return new rr(Ae*dt+we+rt,F)}}findFinderPattern(t,i){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let s=t.getSize(),o=!1,f=0;for(;f<s&&(o=!t.get(f),i!==o);)f++;let g=0,m=f;for(let E=f;E<s;E++)if(t.get(E)!==o)r[g]++;else{if(g===3){if(Mn.isFinderPattern(r))return[m,E];m+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,g--}else g++;r[g]=1,o=!o}throw new oe}parseFoundFinderPattern(t,i,r,s){let o=t.get(s[0]),f=s[0]-1;for(;f>=0&&o!==t.get(f);)f--;f++;const g=s[0]-f,m=this.getDecodeFinderCounters(),E=new Int32Array(m.length);ne.arraycopy(m,0,E,1,m.length-1),E[0]=g;const S=this.parseFinderValue(E,kt.FINDER_PATTERNS);let N=f,R=s[1];return r&&(N=t.getSize()-1-N,R=t.getSize()-1-R),new ar(S,[f,s[1]],N,R,i)}adjustOddEvenCounts(t,i){let r=Qe.sum(new Int32Array(this.getOddCounts())),s=Qe.sum(new Int32Array(this.getEvenCounts())),o=!1,f=!1,g=!1,m=!1;t?(r>12?f=!0:r<4&&(o=!0),s>12?m=!0:s<4&&(g=!0)):(r>11?f=!0:r<5&&(o=!0),s>10?m=!0:s<4&&(g=!0));let E=r+s-i,S=(r&1)===(t?1:0),N=(s&1)===1;if(E===1)if(S){if(N)throw new oe;f=!0}else{if(!N)throw new oe;m=!0}else if(E===-1)if(S){if(N)throw new oe;o=!0}else{if(!N)throw new oe;g=!0}else if(E===0){if(S){if(!N)throw new oe;r<s?(o=!0,m=!0):(f=!0,g=!0)}else if(N)throw new oe}else throw new oe;if(o){if(f)throw new oe;Mn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Mn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(m)throw new oe;Mn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&Mn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}kt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],kt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],kt.OUTSIDE_GSUM=[0,161,961,2015,2715],kt.INSIDE_GSUM=[0,336,1036,1516],kt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],kt.INSIDE_ODD_WIDEST=[2,4,6,8],kt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class pi extends St{constructor(t,i){super(),this.readers=[],this.verbose=i===!0;const r=t?t.get(ge.POSSIBLE_FORMATS):null,s=t&&t.get(ge.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;r?((r.includes(Se.EAN_13)||r.includes(Se.UPC_A)||r.includes(Se.EAN_8)||r.includes(Se.UPC_E))&&this.readers.push(new ja(t)),r.includes(Se.CODE_39)&&this.readers.push(new Lt(s)),r.includes(Se.CODE_128)&&this.readers.push(new Ne),r.includes(Se.ITF)&&this.readers.push(new V),r.includes(Se.RSS_14)&&this.readers.push(new kt),r.includes(Se.RSS_EXPANDED)&&this.readers.push(new Ce(this.verbose))):(this.readers.push(new ja(t)),this.readers.push(new Lt),this.readers.push(new ja(t)),this.readers.push(new Ne),this.readers.push(new V),this.readers.push(new kt),this.readers.push(new Ce(this.verbose)))}decodeRow(t,i,r){for(let s=0;s<this.readers.length;s++)try{return this.readers[s].decodeRow(t,i,r)}catch{}throw new oe}reset(){this.readers.forEach(t=>t.reset())}}class Oc extends ve{constructor(t=500,i){super(new pi(i),t,i)}}class Nt{constructor(t,i,r){this.ecCodewords=t,this.ecBlocks=[i],r&&this.ecBlocks.push(r)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Tt{constructor(t,i){this.count=t,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class xt{constructor(t,i,r,s,o,f){this.versionNumber=t,this.symbolSizeRows=i,this.symbolSizeColumns=r,this.dataRegionSizeRows=s,this.dataRegionSizeColumns=o,this.ecBlocks=f;let g=0;const m=f.getECCodewords(),E=f.getECBlocks();for(let S of E)g+=S.getCount()*(S.getDataCodewords()+m);this.totalCodewords=g}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,i){if((t&1)!==0||(i&1)!==0)throw new te;for(let r of xt.VERSIONS)if(r.symbolSizeRows===t&&r.symbolSizeColumns===i)return r;throw new te}toString(){return""+this.versionNumber}static buildVersions(){return[new xt(1,10,10,8,8,new Nt(5,new Tt(1,3))),new xt(2,12,12,10,10,new Nt(7,new Tt(1,5))),new xt(3,14,14,12,12,new Nt(10,new Tt(1,8))),new xt(4,16,16,14,14,new Nt(12,new Tt(1,12))),new xt(5,18,18,16,16,new Nt(14,new Tt(1,18))),new xt(6,20,20,18,18,new Nt(18,new Tt(1,22))),new xt(7,22,22,20,20,new Nt(20,new Tt(1,30))),new xt(8,24,24,22,22,new Nt(24,new Tt(1,36))),new xt(9,26,26,24,24,new Nt(28,new Tt(1,44))),new xt(10,32,32,14,14,new Nt(36,new Tt(1,62))),new xt(11,36,36,16,16,new Nt(42,new Tt(1,86))),new xt(12,40,40,18,18,new Nt(48,new Tt(1,114))),new xt(13,44,44,20,20,new Nt(56,new Tt(1,144))),new xt(14,48,48,22,22,new Nt(68,new Tt(1,174))),new xt(15,52,52,24,24,new Nt(42,new Tt(2,102))),new xt(16,64,64,14,14,new Nt(56,new Tt(2,140))),new xt(17,72,72,16,16,new Nt(36,new Tt(4,92))),new xt(18,80,80,18,18,new Nt(48,new Tt(4,114))),new xt(19,88,88,20,20,new Nt(56,new Tt(4,144))),new xt(20,96,96,22,22,new Nt(68,new Tt(4,174))),new xt(21,104,104,24,24,new Nt(56,new Tt(6,136))),new xt(22,120,120,18,18,new Nt(68,new Tt(6,175))),new xt(23,132,132,20,20,new Nt(62,new Tt(8,163))),new xt(24,144,144,22,22,new Nt(62,new Tt(8,156),new Tt(2,155))),new xt(25,8,18,6,16,new Nt(7,new Tt(1,5))),new xt(26,8,32,6,14,new Nt(11,new Tt(1,10))),new xt(27,12,26,10,24,new Nt(14,new Tt(1,16))),new xt(28,12,36,10,16,new Nt(18,new Tt(1,22))),new xt(29,16,36,14,16,new Nt(24,new Tt(1,32))),new xt(30,16,48,14,22,new Nt(28,new Tt(1,49)))]}}xt.VERSIONS=xt.buildVersions();class Wr{constructor(t){const i=t.getHeight();if(i<8||i>144||(i&1)!==0)throw new te;this.version=Wr.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new st(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const i=t.getHeight(),r=t.getWidth();return xt.getVersionForDimensions(i,r)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let i=0,r=4,s=0;const o=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let g=!1,m=!1,E=!1,S=!1;do if(r===o&&s===0&&!g)t[i++]=this.readCorner1(o,f)&255,r-=2,s+=2,g=!0;else if(r===o-2&&s===0&&(f&3)!==0&&!m)t[i++]=this.readCorner2(o,f)&255,r-=2,s+=2,m=!0;else if(r===o+4&&s===2&&(f&7)===0&&!E)t[i++]=this.readCorner3(o,f)&255,r-=2,s+=2,E=!0;else if(r===o-2&&s===0&&(f&7)===4&&!S)t[i++]=this.readCorner4(o,f)&255,r-=2,s+=2,S=!0;else{do r<o&&s>=0&&!this.readMappingMatrix.get(s,r)&&(t[i++]=this.readUtah(r,s,o,f)&255),r-=2,s+=2;while(r>=0&&s<f);r+=1,s+=3;do r>=0&&s<f&&!this.readMappingMatrix.get(s,r)&&(t[i++]=this.readUtah(r,s,o,f)&255),r+=2,s-=2;while(r<o&&s>=0);r+=3,s+=1}while(r<o||s<f);if(i!==this.version.getTotalCodewords())throw new te;return t}readModule(t,i,r,s){return t<0&&(t+=r,i+=4-(r+4&7)),i<0&&(i+=s,t+=4-(s+4&7)),this.readMappingMatrix.set(i,t),this.mappingBitMatrix.get(i,t)}readUtah(t,i,r,s){let o=0;return this.readModule(t-2,i-2,r,s)&&(o|=1),o<<=1,this.readModule(t-2,i-1,r,s)&&(o|=1),o<<=1,this.readModule(t-1,i-2,r,s)&&(o|=1),o<<=1,this.readModule(t-1,i-1,r,s)&&(o|=1),o<<=1,this.readModule(t-1,i,r,s)&&(o|=1),o<<=1,this.readModule(t,i-2,r,s)&&(o|=1),o<<=1,this.readModule(t,i-1,r,s)&&(o|=1),o<<=1,this.readModule(t,i,r,s)&&(o|=1),o}readCorner1(t,i){let r=0;return this.readModule(t-1,0,t,i)&&(r|=1),r<<=1,this.readModule(t-1,1,t,i)&&(r|=1),r<<=1,this.readModule(t-1,2,t,i)&&(r|=1),r<<=1,this.readModule(0,i-2,t,i)&&(r|=1),r<<=1,this.readModule(0,i-1,t,i)&&(r|=1),r<<=1,this.readModule(1,i-1,t,i)&&(r|=1),r<<=1,this.readModule(2,i-1,t,i)&&(r|=1),r<<=1,this.readModule(3,i-1,t,i)&&(r|=1),r}readCorner2(t,i){let r=0;return this.readModule(t-3,0,t,i)&&(r|=1),r<<=1,this.readModule(t-2,0,t,i)&&(r|=1),r<<=1,this.readModule(t-1,0,t,i)&&(r|=1),r<<=1,this.readModule(0,i-4,t,i)&&(r|=1),r<<=1,this.readModule(0,i-3,t,i)&&(r|=1),r<<=1,this.readModule(0,i-2,t,i)&&(r|=1),r<<=1,this.readModule(0,i-1,t,i)&&(r|=1),r<<=1,this.readModule(1,i-1,t,i)&&(r|=1),r}readCorner3(t,i){let r=0;return this.readModule(t-1,0,t,i)&&(r|=1),r<<=1,this.readModule(t-1,i-1,t,i)&&(r|=1),r<<=1,this.readModule(0,i-3,t,i)&&(r|=1),r<<=1,this.readModule(0,i-2,t,i)&&(r|=1),r<<=1,this.readModule(0,i-1,t,i)&&(r|=1),r<<=1,this.readModule(1,i-3,t,i)&&(r|=1),r<<=1,this.readModule(1,i-2,t,i)&&(r|=1),r<<=1,this.readModule(1,i-1,t,i)&&(r|=1),r}readCorner4(t,i){let r=0;return this.readModule(t-3,0,t,i)&&(r|=1),r<<=1,this.readModule(t-2,0,t,i)&&(r|=1),r<<=1,this.readModule(t-1,0,t,i)&&(r|=1),r<<=1,this.readModule(0,i-2,t,i)&&(r|=1),r<<=1,this.readModule(0,i-1,t,i)&&(r|=1),r<<=1,this.readModule(1,i-1,t,i)&&(r|=1),r<<=1,this.readModule(2,i-1,t,i)&&(r|=1),r<<=1,this.readModule(3,i-1,t,i)&&(r|=1),r}extractDataRegion(t){const i=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(t.getHeight()!==i)throw new M("Dimension of bitMatrix must match the version size");const s=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),f=i/s|0,g=r/o|0,m=f*s,E=g*o,S=new st(E,m);for(let N=0;N<f;++N){const R=N*s;for(let L=0;L<g;++L){const U=L*o;for(let F=0;F<s;++F){const W=N*(s+2)+1+F,se=R+F;for(let Ie=0;Ie<o;++Ie){const we=L*(o+2)+1+Ie;if(t.get(we,W)){const Ae=U+Ie;S.set(Ae,se)}}}}}return S}}class qr{constructor(t,i){this.numDataCodewords=t,this.codewords=i}static getDataBlocks(t,i){const r=i.getECBlocks();let s=0;const o=r.getECBlocks();for(let F of o)s+=F.getCount();const f=new Array(s);let g=0;for(let F of o)for(let W=0;W<F.getCount();W++){const se=F.getDataCodewords(),Ie=r.getECCodewords()+se;f[g++]=new qr(se,new Uint8Array(Ie))}const E=f[0].codewords.length-r.getECCodewords(),S=E-1;let N=0;for(let F=0;F<S;F++)for(let W=0;W<g;W++)f[W].codewords[F]=t[N++];const R=i.getVersionNumber()===24,L=R?8:g;for(let F=0;F<L;F++)f[F].codewords[E-1]=t[N++];const U=f[0].codewords.length;for(let F=E;F<U;F++)for(let W=0;W<g;W++){const se=R?(W+8)%g:W,Ie=R&&se>7?F-1:F;f[se].codewords[Ie]=t[N++]}if(N!==t.length)throw new M;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class xi{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new M(""+t);let i=0,r=this.bitOffset,s=this.byteOffset;const o=this.bytes;if(r>0){const f=8-r,g=t<f?t:f,m=f-g,E=255>>8-g<<m;i=(o[s]&E)>>m,t-=g,r+=g,r===8&&(r=0,s++)}if(t>0){for(;t>=8;)i=i<<8|o[s]&255,s++,t-=8;if(t>0){const f=8-t,g=255>>f<<f;i=i<<t|(o[s]&g)>>f,r+=t}}return this.bitOffset=r,this.byteOffset=s,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var It;(function(T){T[T.PAD_ENCODE=0]="PAD_ENCODE",T[T.ASCII_ENCODE=1]="ASCII_ENCODE",T[T.C40_ENCODE=2]="C40_ENCODE",T[T.TEXT_ENCODE=3]="TEXT_ENCODE",T[T.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",T[T.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",T[T.BASE256_ENCODE=6]="BASE256_ENCODE"})(It||(It={}));class Gi{static decode(t){const i=new xi(t),r=new nt,s=new nt,o=new Array;let f=It.ASCII_ENCODE;do if(f===It.ASCII_ENCODE)f=this.decodeAsciiSegment(i,r,s);else{switch(f){case It.C40_ENCODE:this.decodeC40Segment(i,r);break;case It.TEXT_ENCODE:this.decodeTextSegment(i,r);break;case It.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,r);break;case It.EDIFACT_ENCODE:this.decodeEdifactSegment(i,r);break;case It.BASE256_ENCODE:this.decodeBase256Segment(i,r,o);break;default:throw new te}f=It.ASCII_ENCODE}while(f!==It.PAD_ENCODE&&i.available()>0);return s.length()>0&&r.append(s.toString()),new Bt(t,r.toString(),o.length===0?null:o,null)}static decodeAsciiSegment(t,i,r){let s=!1;do{let o=t.readBits(8);if(o===0)throw new te;if(o<=128)return s&&(o+=128),i.append(String.fromCharCode(o-1)),It.ASCII_ENCODE;if(o===129)return It.PAD_ENCODE;if(o<=229){const f=o-130;f<10&&i.append("0"),i.append(""+f)}else switch(o){case 230:return It.C40_ENCODE;case 231:return It.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:s=!0;break;case 236:i.append("[)>05"),r.insert(0,"");break;case 237:i.append("[)>06"),r.insert(0,"");break;case 238:return It.ANSIX12_ENCODE;case 239:return It.TEXT_ENCODE;case 240:return It.EDIFACT_ENCODE;case 241:break;default:if(o!==254||t.available()!==0)throw new te;break}}while(t.available()>0);return It.ASCII_ENCODE}static decodeC40Segment(t,i){let r=!1;const s=[];let o=0;do{if(t.available()===8)return;const f=t.readBits(8);if(f===254)return;this.parseTwoBytes(f,t.readBits(8),s);for(let g=0;g<3;g++){const m=s[g];switch(o){case 0:if(m<3)o=m+1;else if(m<this.C40_BASIC_SET_CHARS.length){const E=this.C40_BASIC_SET_CHARS[m];r?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),r=!1):i.append(E)}else throw new te;break;case 1:r?(i.append(String.fromCharCode(m+128)),r=!1):i.append(String.fromCharCode(m)),o=0;break;case 2:if(m<this.C40_SHIFT2_SET_CHARS.length){const E=this.C40_SHIFT2_SET_CHARS[m];r?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),r=!1):i.append(E)}else switch(m){case 27:i.append("");break;case 30:r=!0;break;default:throw new te}o=0;break;case 3:r?(i.append(String.fromCharCode(m+224)),r=!1):i.append(String.fromCharCode(m+96)),o=0;break;default:throw new te}}}while(t.available()>0)}static decodeTextSegment(t,i){let r=!1,s=[],o=0;do{if(t.available()===8)return;const f=t.readBits(8);if(f===254)return;this.parseTwoBytes(f,t.readBits(8),s);for(let g=0;g<3;g++){const m=s[g];switch(o){case 0:if(m<3)o=m+1;else if(m<this.TEXT_BASIC_SET_CHARS.length){const E=this.TEXT_BASIC_SET_CHARS[m];r?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),r=!1):i.append(E)}else throw new te;break;case 1:r?(i.append(String.fromCharCode(m+128)),r=!1):i.append(String.fromCharCode(m)),o=0;break;case 2:if(m<this.TEXT_SHIFT2_SET_CHARS.length){const E=this.TEXT_SHIFT2_SET_CHARS[m];r?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),r=!1):i.append(E)}else switch(m){case 27:i.append("");break;case 30:r=!0;break;default:throw new te}o=0;break;case 3:if(m<this.TEXT_SHIFT3_SET_CHARS.length){const E=this.TEXT_SHIFT3_SET_CHARS[m];r?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),r=!1):i.append(E),o=0}else throw new te;break;default:throw new te}}}while(t.available()>0)}static decodeAnsiX12Segment(t,i){const r=[];do{if(t.available()===8)return;const s=t.readBits(8);if(s===254)return;this.parseTwoBytes(s,t.readBits(8),r);for(let o=0;o<3;o++){const f=r[o];switch(f){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(f<14)i.append(String.fromCharCode(f+44));else if(f<40)i.append(String.fromCharCode(f+51));else throw new te;break}}}while(t.available()>0)}static parseTwoBytes(t,i,r){let s=(t<<8)+i-1,o=Math.floor(s/1600);r[0]=o,s-=o*1600,o=Math.floor(s/40),r[1]=o,r[2]=s-o*40}static decodeEdifactSegment(t,i){do{if(t.available()<=16)return;for(let r=0;r<4;r++){let s=t.readBits(6);if(s===31){const o=8-t.getBitOffset();o!==8&&t.readBits(o);return}(s&32)===0&&(s|=64),i.append(String.fromCharCode(s))}}while(t.available()>0)}static decodeBase256Segment(t,i,r){let s=1+t.getByteOffset();const o=this.unrandomize255State(t.readBits(8),s++);let f;if(o===0?f=t.available()/8|0:o<250?f=o:f=250*(o-249)+this.unrandomize255State(t.readBits(8),s++),f<0)throw new te;const g=new Uint8Array(f);for(let m=0;m<f;m++){if(t.available()<8)throw new te;g[m]=this.unrandomize255State(t.readBits(8),s++)}r.push(g);try{i.append(tt.decode(g,Me.ISO88591))}catch(m){throw new _e("Platform does not support required encoding: "+m.message)}}static unrandomize255State(t,i){const r=149*i%255+1,s=t-r;return s>=0?s:s+256}}Gi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Gi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Gi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Gi.TEXT_SHIFT2_SET_CHARS=Gi.C40_SHIFT2_SET_CHARS,Gi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Mc{constructor(){this.rsDecoder=new Xe(pt.DATA_MATRIX_FIELD_256)}decode(t){const i=new Wr(t),r=i.getVersion(),s=i.readCodewords(),o=qr.getDataBlocks(s,r);let f=0;for(let E of o)f+=E.getNumDataCodewords();const g=new Uint8Array(f),m=o.length;for(let E=0;E<m;E++){const S=o[E],N=S.getCodewords(),R=S.getNumDataCodewords();this.correctErrors(N,R);for(let L=0;L<R;L++)g[L*m+E]=N[L]}return Gi.decode(g)}correctErrors(t,i){const r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-i)}catch{throw new G}for(let s=0;s<i;s++)t[s]=r[s]}}class $t{constructor(t){this.image=t,this.rectangleDetector=new Jt(this.image)}detect(){const t=this.rectangleDetector.detect();let i=this.detectSolid1(t);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new oe;i=this.shiftToModuleCenter(i);const r=i[0],s=i[1],o=i[2],f=i[3];let g=this.transitionsBetween(r,f)+1,m=this.transitionsBetween(o,f)+1;(g&1)===1&&(g+=1),(m&1)===1&&(m+=1),4*g<7*m&&4*m<7*g&&(g=m=Math.max(g,m));let E=$t.sampleGrid(this.image,r,s,o,f,g,m);return new yr(E,[r,s,o,f])}static shiftPoint(t,i,r){let s=(i.getX()-t.getX())/(r+1),o=(i.getY()-t.getY())/(r+1);return new ke(t.getX()+s,t.getY()+o)}static moveAway(t,i,r){let s=t.getX(),o=t.getY();return s<i?s-=1:s+=1,o<r?o-=1:o+=1,new ke(s,o)}detectSolid1(t){let i=t[0],r=t[1],s=t[3],o=t[2],f=this.transitionsBetween(i,r),g=this.transitionsBetween(r,s),m=this.transitionsBetween(s,o),E=this.transitionsBetween(o,i),S=f,N=[o,i,r,s];return S>g&&(S=g,N[0]=i,N[1]=r,N[2]=s,N[3]=o),S>m&&(S=m,N[0]=r,N[1]=s,N[2]=o,N[3]=i),S>E&&(N[0]=s,N[1]=o,N[2]=i,N[3]=r),N}detectSolid2(t){let i=t[0],r=t[1],s=t[2],o=t[3],f=this.transitionsBetween(i,o),g=$t.shiftPoint(r,s,(f+1)*4),m=$t.shiftPoint(s,r,(f+1)*4),E=this.transitionsBetween(g,i),S=this.transitionsBetween(m,o);return E<S?(t[0]=i,t[1]=r,t[2]=s,t[3]=o):(t[0]=r,t[1]=s,t[2]=o,t[3]=i),t}correctTopRight(t){let i=t[0],r=t[1],s=t[2],o=t[3],f=this.transitionsBetween(i,o),g=this.transitionsBetween(r,o),m=$t.shiftPoint(i,r,(g+1)*4),E=$t.shiftPoint(s,r,(f+1)*4);f=this.transitionsBetween(m,o),g=this.transitionsBetween(E,o);let S=new ke(o.getX()+(s.getX()-r.getX())/(f+1),o.getY()+(s.getY()-r.getY())/(f+1)),N=new ke(o.getX()+(i.getX()-r.getX())/(g+1),o.getY()+(i.getY()-r.getY())/(g+1));if(!this.isValid(S))return this.isValid(N)?N:null;if(!this.isValid(N))return S;let R=this.transitionsBetween(m,S)+this.transitionsBetween(E,S),L=this.transitionsBetween(m,N)+this.transitionsBetween(E,N);return R>L?S:N}shiftToModuleCenter(t){let i=t[0],r=t[1],s=t[2],o=t[3],f=this.transitionsBetween(i,o)+1,g=this.transitionsBetween(s,o)+1,m=$t.shiftPoint(i,r,g*4),E=$t.shiftPoint(s,r,f*4);f=this.transitionsBetween(m,o)+1,g=this.transitionsBetween(E,o)+1,(f&1)===1&&(f+=1),(g&1)===1&&(g+=1);let S=(i.getX()+r.getX()+s.getX()+o.getX())/4,N=(i.getY()+r.getY()+s.getY()+o.getY())/4;i=$t.moveAway(i,S,N),r=$t.moveAway(r,S,N),s=$t.moveAway(s,S,N),o=$t.moveAway(o,S,N);let R,L;return m=$t.shiftPoint(i,r,g*4),m=$t.shiftPoint(m,o,f*4),R=$t.shiftPoint(r,i,g*4),R=$t.shiftPoint(R,s,f*4),E=$t.shiftPoint(s,o,g*4),E=$t.shiftPoint(E,r,f*4),L=$t.shiftPoint(o,s,g*4),L=$t.shiftPoint(L,i,f*4),[m,R,E,L]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,i,r,s,o,f,g){return qn.getInstance().sampleGrid(t,f,g,.5,.5,f-.5,.5,f-.5,g-.5,.5,g-.5,i.getX(),i.getY(),o.getX(),o.getY(),s.getX(),s.getY(),r.getX(),r.getY())}transitionsBetween(t,i){let r=Math.trunc(t.getX()),s=Math.trunc(t.getY()),o=Math.trunc(i.getX()),f=Math.trunc(i.getY()),g=Math.abs(f-s)>Math.abs(o-r);if(g){let F=r;r=s,s=F,F=o,o=f,f=F}let m=Math.abs(o-r),E=Math.abs(f-s),S=-m/2,N=s<f?1:-1,R=r<o?1:-1,L=0,U=this.image.get(g?s:r,g?r:s);for(let F=r,W=s;F!==o;F+=R){let se=this.image.get(g?W:F,g?F:W);if(se!==U&&(L++,U=se),S+=E,S>0){if(W===f)break;W+=N,S-=m}}return L}}class Yi{constructor(){this.decoder=new Mc}decode(t,i=null){let r,s;if(i!=null&&i.has(ge.PURE_BARCODE)){const E=Yi.extractPureBits(t.getBlackMatrix());r=this.decoder.decode(E),s=Yi.NO_POINTS}else{const E=new $t(t.getBlackMatrix()).detect();r=this.decoder.decode(E.getBits()),s=E.getPoints()}const o=r.getRawBytes(),f=new Re(r.getText(),o,8*o.length,s,Se.DATA_MATRIX,ne.currentTimeMillis()),g=r.getByteSegments();g!=null&&f.putMetadata(ft.BYTE_SEGMENTS,g);const m=r.getECLevel();return m!=null&&f.putMetadata(ft.ERROR_CORRECTION_LEVEL,m),f}reset(){}static extractPureBits(t){const i=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(i==null||r==null)throw new oe;const s=this.moduleSize(i,t);let o=i[1];const f=r[1];let g=i[0];const E=(r[0]-g+1)/s,S=(f-o+1)/s;if(E<=0||S<=0)throw new oe;const N=s/2;o+=N,g+=N;const R=new st(E,S);for(let L=0;L<S;L++){const U=o+L*s;for(let F=0;F<E;F++)t.get(g+F*s,U)&&R.set(F,L)}return R}static moduleSize(t,i){const r=i.getWidth();let s=t[0];const o=t[1];for(;s<r&&i.get(s,o);)s++;if(s===r)throw new oe;const f=s-t[0];if(f===0)throw new oe;return f}}Yi.NO_POINTS=[];class ls extends ve{constructor(t=500){super(new Yi,t)}}var Zr;(function(T){T[T.L=0]="L",T[T.M=1]="M",T[T.Q=2]="Q",T[T.H=3]="H"})(Zr||(Zr={}));class gt{constructor(t,i,r){this.value=t,this.stringValue=i,this.bits=r,gt.FOR_BITS.set(r,this),gt.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return gt.L;case"M":return gt.M;case"Q":return gt.Q;case"H":return gt.H;default:throw new D(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof gt))return!1;const i=t;return this.value===i.value}static forBits(t){if(t<0||t>=gt.FOR_BITS.size)throw new M;return gt.FOR_BITS.get(t)}}gt.FOR_BITS=new Map,gt.FOR_VALUE=new Map,gt.L=new gt(Zr.L,"L",1),gt.M=new gt(Zr.M,"M",0),gt.Q=new gt(Zr.Q,"Q",3),gt.H=new gt(Zr.H,"H",2);class wn{constructor(t){this.errorCorrectionLevel=gt.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,i){return X.bitCount(t^i)}static decodeFormatInformation(t,i){const r=wn.doDecodeFormatInformation(t,i);return r!==null?r:wn.doDecodeFormatInformation(t^wn.FORMAT_INFO_MASK_QR,i^wn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,i){let r=Number.MAX_SAFE_INTEGER,s=0;for(const o of wn.FORMAT_INFO_DECODE_LOOKUP){const f=o[0];if(f===t||f===i)return new wn(o[1]);let g=wn.numBitsDiffering(t,f);g<r&&(s=o[1],r=g),t!==i&&(g=wn.numBitsDiffering(i,f),g<r&&(s=o[1],r=g))}return r<=3?new wn(s):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof wn))return!1;const i=t;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}wn.FORMAT_INFO_MASK_QR=21522,wn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class q{constructor(t,...i){this.ecCodewordsPerBlock=t,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const i=this.ecBlocks;for(const r of i)t+=r.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class B{constructor(t,i){this.count=t,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class He{constructor(t,i,...r){this.versionNumber=t,this.alignmentPatternCenters=i,this.ecBlocks=r;let s=0;const o=r[0].getECCodewordsPerBlock(),f=r[0].getECBlocks();for(const g of f)s+=g.getCount()*(g.getDataCodewords()+o);this.totalCodewords=s}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new te;try{return this.getVersionForNumber((t-17)/4)}catch{throw new te}}static getVersionForNumber(t){if(t<1||t>40)throw new M;return He.VERSIONS[t-1]}static decodeVersionInformation(t){let i=Number.MAX_SAFE_INTEGER,r=0;for(let s=0;s<He.VERSION_DECODE_INFO.length;s++){const o=He.VERSION_DECODE_INFO[s];if(o===t)return He.getVersionForNumber(s+7);const f=wn.numBitsDiffering(t,o);f<i&&(r=s+7,i=f)}return i<=3?He.getVersionForNumber(r):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),i=new st(t);i.setRegion(0,0,9,9),i.setRegion(t-8,0,8,9),i.setRegion(0,t-8,9,8);const r=this.alignmentPatternCenters.length;for(let s=0;s<r;s++){const o=this.alignmentPatternCenters[s]-2;for(let f=0;f<r;f++)s===0&&(f===0||f===r-1)||s===r-1&&f===0||i.setRegion(this.alignmentPatternCenters[f]-2,o,5,5)}return i.setRegion(6,9,1,t-17),i.setRegion(9,6,t-17,1),this.versionNumber>6&&(i.setRegion(t-11,0,3,6),i.setRegion(0,t-11,6,3)),i}toString(){return""+this.versionNumber}}He.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),He.VERSIONS=[new He(1,new Int32Array(0),new q(7,new B(1,19)),new q(10,new B(1,16)),new q(13,new B(1,13)),new q(17,new B(1,9))),new He(2,Int32Array.from([6,18]),new q(10,new B(1,34)),new q(16,new B(1,28)),new q(22,new B(1,22)),new q(28,new B(1,16))),new He(3,Int32Array.from([6,22]),new q(15,new B(1,55)),new q(26,new B(1,44)),new q(18,new B(2,17)),new q(22,new B(2,13))),new He(4,Int32Array.from([6,26]),new q(20,new B(1,80)),new q(18,new B(2,32)),new q(26,new B(2,24)),new q(16,new B(4,9))),new He(5,Int32Array.from([6,30]),new q(26,new B(1,108)),new q(24,new B(2,43)),new q(18,new B(2,15),new B(2,16)),new q(22,new B(2,11),new B(2,12))),new He(6,Int32Array.from([6,34]),new q(18,new B(2,68)),new q(16,new B(4,27)),new q(24,new B(4,19)),new q(28,new B(4,15))),new He(7,Int32Array.from([6,22,38]),new q(20,new B(2,78)),new q(18,new B(4,31)),new q(18,new B(2,14),new B(4,15)),new q(26,new B(4,13),new B(1,14))),new He(8,Int32Array.from([6,24,42]),new q(24,new B(2,97)),new q(22,new B(2,38),new B(2,39)),new q(22,new B(4,18),new B(2,19)),new q(26,new B(4,14),new B(2,15))),new He(9,Int32Array.from([6,26,46]),new q(30,new B(2,116)),new q(22,new B(3,36),new B(2,37)),new q(20,new B(4,16),new B(4,17)),new q(24,new B(4,12),new B(4,13))),new He(10,Int32Array.from([6,28,50]),new q(18,new B(2,68),new B(2,69)),new q(26,new B(4,43),new B(1,44)),new q(24,new B(6,19),new B(2,20)),new q(28,new B(6,15),new B(2,16))),new He(11,Int32Array.from([6,30,54]),new q(20,new B(4,81)),new q(30,new B(1,50),new B(4,51)),new q(28,new B(4,22),new B(4,23)),new q(24,new B(3,12),new B(8,13))),new He(12,Int32Array.from([6,32,58]),new q(24,new B(2,92),new B(2,93)),new q(22,new B(6,36),new B(2,37)),new q(26,new B(4,20),new B(6,21)),new q(28,new B(7,14),new B(4,15))),new He(13,Int32Array.from([6,34,62]),new q(26,new B(4,107)),new q(22,new B(8,37),new B(1,38)),new q(24,new B(8,20),new B(4,21)),new q(22,new B(12,11),new B(4,12))),new He(14,Int32Array.from([6,26,46,66]),new q(30,new B(3,115),new B(1,116)),new q(24,new B(4,40),new B(5,41)),new q(20,new B(11,16),new B(5,17)),new q(24,new B(11,12),new B(5,13))),new He(15,Int32Array.from([6,26,48,70]),new q(22,new B(5,87),new B(1,88)),new q(24,new B(5,41),new B(5,42)),new q(30,new B(5,24),new B(7,25)),new q(24,new B(11,12),new B(7,13))),new He(16,Int32Array.from([6,26,50,74]),new q(24,new B(5,98),new B(1,99)),new q(28,new B(7,45),new B(3,46)),new q(24,new B(15,19),new B(2,20)),new q(30,new B(3,15),new B(13,16))),new He(17,Int32Array.from([6,30,54,78]),new q(28,new B(1,107),new B(5,108)),new q(28,new B(10,46),new B(1,47)),new q(28,new B(1,22),new B(15,23)),new q(28,new B(2,14),new B(17,15))),new He(18,Int32Array.from([6,30,56,82]),new q(30,new B(5,120),new B(1,121)),new q(26,new B(9,43),new B(4,44)),new q(28,new B(17,22),new B(1,23)),new q(28,new B(2,14),new B(19,15))),new He(19,Int32Array.from([6,30,58,86]),new q(28,new B(3,113),new B(4,114)),new q(26,new B(3,44),new B(11,45)),new q(26,new B(17,21),new B(4,22)),new q(26,new B(9,13),new B(16,14))),new He(20,Int32Array.from([6,34,62,90]),new q(28,new B(3,107),new B(5,108)),new q(26,new B(3,41),new B(13,42)),new q(30,new B(15,24),new B(5,25)),new q(28,new B(15,15),new B(10,16))),new He(21,Int32Array.from([6,28,50,72,94]),new q(28,new B(4,116),new B(4,117)),new q(26,new B(17,42)),new q(28,new B(17,22),new B(6,23)),new q(30,new B(19,16),new B(6,17))),new He(22,Int32Array.from([6,26,50,74,98]),new q(28,new B(2,111),new B(7,112)),new q(28,new B(17,46)),new q(30,new B(7,24),new B(16,25)),new q(24,new B(34,13))),new He(23,Int32Array.from([6,30,54,78,102]),new q(30,new B(4,121),new B(5,122)),new q(28,new B(4,47),new B(14,48)),new q(30,new B(11,24),new B(14,25)),new q(30,new B(16,15),new B(14,16))),new He(24,Int32Array.from([6,28,54,80,106]),new q(30,new B(6,117),new B(4,118)),new q(28,new B(6,45),new B(14,46)),new q(30,new B(11,24),new B(16,25)),new q(30,new B(30,16),new B(2,17))),new He(25,Int32Array.from([6,32,58,84,110]),new q(26,new B(8,106),new B(4,107)),new q(28,new B(8,47),new B(13,48)),new q(30,new B(7,24),new B(22,25)),new q(30,new B(22,15),new B(13,16))),new He(26,Int32Array.from([6,30,58,86,114]),new q(28,new B(10,114),new B(2,115)),new q(28,new B(19,46),new B(4,47)),new q(28,new B(28,22),new B(6,23)),new q(30,new B(33,16),new B(4,17))),new He(27,Int32Array.from([6,34,62,90,118]),new q(30,new B(8,122),new B(4,123)),new q(28,new B(22,45),new B(3,46)),new q(30,new B(8,23),new B(26,24)),new q(30,new B(12,15),new B(28,16))),new He(28,Int32Array.from([6,26,50,74,98,122]),new q(30,new B(3,117),new B(10,118)),new q(28,new B(3,45),new B(23,46)),new q(30,new B(4,24),new B(31,25)),new q(30,new B(11,15),new B(31,16))),new He(29,Int32Array.from([6,30,54,78,102,126]),new q(30,new B(7,116),new B(7,117)),new q(28,new B(21,45),new B(7,46)),new q(30,new B(1,23),new B(37,24)),new q(30,new B(19,15),new B(26,16))),new He(30,Int32Array.from([6,26,52,78,104,130]),new q(30,new B(5,115),new B(10,116)),new q(28,new B(19,47),new B(10,48)),new q(30,new B(15,24),new B(25,25)),new q(30,new B(23,15),new B(25,16))),new He(31,Int32Array.from([6,30,56,82,108,134]),new q(30,new B(13,115),new B(3,116)),new q(28,new B(2,46),new B(29,47)),new q(30,new B(42,24),new B(1,25)),new q(30,new B(23,15),new B(28,16))),new He(32,Int32Array.from([6,34,60,86,112,138]),new q(30,new B(17,115)),new q(28,new B(10,46),new B(23,47)),new q(30,new B(10,24),new B(35,25)),new q(30,new B(19,15),new B(35,16))),new He(33,Int32Array.from([6,30,58,86,114,142]),new q(30,new B(17,115),new B(1,116)),new q(28,new B(14,46),new B(21,47)),new q(30,new B(29,24),new B(19,25)),new q(30,new B(11,15),new B(46,16))),new He(34,Int32Array.from([6,34,62,90,118,146]),new q(30,new B(13,115),new B(6,116)),new q(28,new B(14,46),new B(23,47)),new q(30,new B(44,24),new B(7,25)),new q(30,new B(59,16),new B(1,17))),new He(35,Int32Array.from([6,30,54,78,102,126,150]),new q(30,new B(12,121),new B(7,122)),new q(28,new B(12,47),new B(26,48)),new q(30,new B(39,24),new B(14,25)),new q(30,new B(22,15),new B(41,16))),new He(36,Int32Array.from([6,24,50,76,102,128,154]),new q(30,new B(6,121),new B(14,122)),new q(28,new B(6,47),new B(34,48)),new q(30,new B(46,24),new B(10,25)),new q(30,new B(2,15),new B(64,16))),new He(37,Int32Array.from([6,28,54,80,106,132,158]),new q(30,new B(17,122),new B(4,123)),new q(28,new B(29,46),new B(14,47)),new q(30,new B(49,24),new B(10,25)),new q(30,new B(24,15),new B(46,16))),new He(38,Int32Array.from([6,32,58,84,110,136,162]),new q(30,new B(4,122),new B(18,123)),new q(28,new B(13,46),new B(32,47)),new q(30,new B(48,24),new B(14,25)),new q(30,new B(42,15),new B(32,16))),new He(39,Int32Array.from([6,26,54,82,110,138,166]),new q(30,new B(20,117),new B(4,118)),new q(28,new B(40,47),new B(7,48)),new q(30,new B(43,24),new B(22,25)),new q(30,new B(10,15),new B(67,16))),new He(40,Int32Array.from([6,30,58,86,114,142,170]),new q(30,new B(19,118),new B(6,119)),new q(28,new B(18,47),new B(31,48)),new q(30,new B(34,24),new B(34,25)),new q(30,new B(20,15),new B(61,16)))];var yn;(function(T){T[T.DATA_MASK_000=0]="DATA_MASK_000",T[T.DATA_MASK_001=1]="DATA_MASK_001",T[T.DATA_MASK_010=2]="DATA_MASK_010",T[T.DATA_MASK_011=3]="DATA_MASK_011",T[T.DATA_MASK_100=4]="DATA_MASK_100",T[T.DATA_MASK_101=5]="DATA_MASK_101",T[T.DATA_MASK_110=6]="DATA_MASK_110",T[T.DATA_MASK_111=7]="DATA_MASK_111"})(yn||(yn={}));class Jn{constructor(t,i){this.value=t,this.isMasked=i}unmaskBitMatrix(t,i){for(let r=0;r<i;r++)for(let s=0;s<i;s++)this.isMasked(r,s)&&t.flip(s,r)}}Jn.values=new Map([[yn.DATA_MASK_000,new Jn(yn.DATA_MASK_000,(T,t)=>(T+t&1)===0)],[yn.DATA_MASK_001,new Jn(yn.DATA_MASK_001,(T,t)=>(T&1)===0)],[yn.DATA_MASK_010,new Jn(yn.DATA_MASK_010,(T,t)=>t%3===0)],[yn.DATA_MASK_011,new Jn(yn.DATA_MASK_011,(T,t)=>(T+t)%3===0)],[yn.DATA_MASK_100,new Jn(yn.DATA_MASK_100,(T,t)=>(Math.floor(T/2)+Math.floor(t/3)&1)===0)],[yn.DATA_MASK_101,new Jn(yn.DATA_MASK_101,(T,t)=>T*t%6===0)],[yn.DATA_MASK_110,new Jn(yn.DATA_MASK_110,(T,t)=>T*t%6<3)],[yn.DATA_MASK_111,new Jn(yn.DATA_MASK_111,(T,t)=>(T+t+T*t%3&1)===0)]]);class Qr{constructor(t){const i=t.getHeight();if(i<21||(i&3)!==1)throw new te;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let o=0;o<6;o++)t=this.copyBit(o,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let o=5;o>=0;o--)t=this.copyBit(8,o,t);const i=this.bitMatrix.getHeight();let r=0;const s=i-7;for(let o=i-1;o>=s;o--)r=this.copyBit(8,o,r);for(let o=i-8;o<i;o++)r=this.copyBit(o,8,r);if(this.parsedFormatInfo=wn.decodeFormatInformation(t,r),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new te}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),i=Math.floor((t-17)/4);if(i<=6)return He.getVersionForNumber(i);let r=0;const s=t-11;for(let f=5;f>=0;f--)for(let g=t-9;g>=s;g--)r=this.copyBit(g,f,r);let o=He.decodeVersionInformation(r);if(o!==null&&o.getDimensionForVersion()===t)return this.parsedVersion=o,o;r=0;for(let f=5;f>=0;f--)for(let g=t-9;g>=s;g--)r=this.copyBit(f,g,r);if(o=He.decodeVersionInformation(r),o!==null&&o.getDimensionForVersion()===t)return this.parsedVersion=o,o;throw new te}copyBit(t,i,r){return(this.isMirror?this.bitMatrix.get(i,t):this.bitMatrix.get(t,i))?r<<1|1:r<<1}readCodewords(){const t=this.readFormatInformation(),i=this.readVersion(),r=Jn.values.get(t.getDataMask()),s=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,s);const o=i.buildFunctionPattern();let f=!0;const g=new Uint8Array(i.getTotalCodewords());let m=0,E=0,S=0;for(let N=s-1;N>0;N-=2){N===6&&N--;for(let R=0;R<s;R++){const L=f?s-1-R:R;for(let U=0;U<2;U++)o.get(N-U,L)||(S++,E<<=1,this.bitMatrix.get(N-U,L)&&(E|=1),S===8&&(g[m++]=E,S=0,E=0))}f=!f}if(m!==i.getTotalCodewords())throw new te;return g}remask(){if(this.parsedFormatInfo===null)return;const t=Jn.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,i)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let i=0,r=t.getWidth();i<r;i++)for(let s=i+1,o=t.getHeight();s<o;s++)t.get(i,s)!==t.get(s,i)&&(t.flip(s,i),t.flip(i,s))}}class Qs{constructor(t,i){this.numDataCodewords=t,this.codewords=i}static getDataBlocks(t,i,r){if(t.length!==i.getTotalCodewords())throw new M;const s=i.getECBlocksForLevel(r);let o=0;const f=s.getECBlocks();for(const U of f)o+=U.getCount();const g=new Array(o);let m=0;for(const U of f)for(let F=0;F<U.getCount();F++){const W=U.getDataCodewords(),se=s.getECCodewordsPerBlock()+W;g[m++]=new Qs(W,new Uint8Array(se))}const E=g[0].codewords.length;let S=g.length-1;for(;S>=0&&g[S].codewords.length!==E;)S--;S++;const N=E-s.getECCodewordsPerBlock();let R=0;for(let U=0;U<N;U++)for(let F=0;F<m;F++)g[F].codewords[U]=t[R++];for(let U=S;U<m;U++)g[U].codewords[N]=t[R++];const L=g[0].codewords.length;for(let U=N;U<L;U++)for(let F=0;F<m;F++){const W=F<S?U:U+1;g[F].codewords[W]=t[R++]}return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var $n;(function(T){T[T.TERMINATOR=0]="TERMINATOR",T[T.NUMERIC=1]="NUMERIC",T[T.ALPHANUMERIC=2]="ALPHANUMERIC",T[T.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",T[T.BYTE=4]="BYTE",T[T.ECI=5]="ECI",T[T.KANJI=6]="KANJI",T[T.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",T[T.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",T[T.HANZI=9]="HANZI"})($n||($n={}));class qe{constructor(t,i,r,s){this.value=t,this.stringValue=i,this.characterCountBitsForVersions=r,this.bits=s,qe.FOR_BITS.set(s,this),qe.FOR_VALUE.set(t,this)}static forBits(t){const i=qe.FOR_BITS.get(t);if(i===void 0)throw new M;return i}getCharacterCountBits(t){const i=t.getVersionNumber();let r;return i<=9?r=0:i<=26?r=1:r=2,this.characterCountBitsForVersions[r]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof qe))return!1;const i=t;return this.value===i.value}toString(){return this.stringValue}}qe.FOR_BITS=new Map,qe.FOR_VALUE=new Map,qe.TERMINATOR=new qe($n.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),qe.NUMERIC=new qe($n.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),qe.ALPHANUMERIC=new qe($n.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),qe.STRUCTURED_APPEND=new qe($n.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),qe.BYTE=new qe($n.BYTE,"BYTE",Int32Array.from([8,16,16]),4),qe.ECI=new qe($n.ECI,"ECI",Int32Array.from([0,0,0]),7),qe.KANJI=new qe($n.KANJI,"KANJI",Int32Array.from([8,10,12]),8),qe.FNC1_FIRST_POSITION=new qe($n.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),qe.FNC1_SECOND_POSITION=new qe($n.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),qe.HANZI=new qe($n.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Wt{static decode(t,i,r,s){const o=new xi(t);let f=new nt;const g=new Array;let m=-1,E=-1;try{let S=null,N=!1,R;do{if(o.available()<4)R=qe.TERMINATOR;else{const L=o.readBits(4);R=qe.forBits(L)}switch(R){case qe.TERMINATOR:break;case qe.FNC1_FIRST_POSITION:case qe.FNC1_SECOND_POSITION:N=!0;break;case qe.STRUCTURED_APPEND:if(o.available()<16)throw new te;m=o.readBits(8),E=o.readBits(8);break;case qe.ECI:const L=Wt.parseECIValue(o);if(S=de.getCharacterSetECIByValue(L),S===null)throw new te;break;case qe.HANZI:const U=o.readBits(4),F=o.readBits(R.getCharacterCountBits(i));U===Wt.GB2312_SUBSET&&Wt.decodeHanziSegment(o,f,F);break;default:const W=o.readBits(R.getCharacterCountBits(i));switch(R){case qe.NUMERIC:Wt.decodeNumericSegment(o,f,W);break;case qe.ALPHANUMERIC:Wt.decodeAlphanumericSegment(o,f,W,N);break;case qe.BYTE:Wt.decodeByteSegment(o,f,W,S,g,s);break;case qe.KANJI:Wt.decodeKanjiSegment(o,f,W);break;default:throw new te}break}}while(R!==qe.TERMINATOR)}catch{throw new te}return new Bt(t,f.toString(),g.length===0?null:g,r===null?null:r.toString(),m,E)}static decodeHanziSegment(t,i,r){if(r*13>t.available())throw new te;const s=new Uint8Array(2*r);let o=0;for(;r>0;){const f=t.readBits(13);let g=f/96<<8&4294967295|f%96;g<959?g+=41377:g+=42657,s[o]=g>>8&255,s[o+1]=g&255,o+=2,r--}try{i.append(tt.decode(s,Me.GB2312))}catch(f){throw new te(f)}}static decodeKanjiSegment(t,i,r){if(r*13>t.available())throw new te;const s=new Uint8Array(2*r);let o=0;for(;r>0;){const f=t.readBits(13);let g=f/192<<8&4294967295|f%192;g<7936?g+=33088:g+=49472,s[o]=g>>8,s[o+1]=g,o+=2,r--}try{i.append(tt.decode(s,Me.SHIFT_JIS))}catch(f){throw new te(f)}}static decodeByteSegment(t,i,r,s,o,f){if(8*r>t.available())throw new te;const g=new Uint8Array(r);for(let E=0;E<r;E++)g[E]=t.readBits(8);let m;s===null?m=Me.guessEncoding(g,f):m=s.getName();try{i.append(tt.decode(g,m))}catch(E){throw new te(E)}o.push(g)}static toAlphaNumericChar(t){if(t>=Wt.ALPHANUMERIC_CHARS.length)throw new te;return Wt.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,i,r,s){const o=i.length();for(;r>1;){if(t.available()<11)throw new te;const f=t.readBits(11);i.append(Wt.toAlphaNumericChar(Math.floor(f/45))),i.append(Wt.toAlphaNumericChar(f%45)),r-=2}if(r===1){if(t.available()<6)throw new te;i.append(Wt.toAlphaNumericChar(t.readBits(6)))}if(s)for(let f=o;f<i.length();f++)i.charAt(f)==="%"&&(f<i.length()-1&&i.charAt(f+1)==="%"?i.deleteCharAt(f+1):i.setCharAt(f,""))}static decodeNumericSegment(t,i,r){for(;r>=3;){if(t.available()<10)throw new te;const s=t.readBits(10);if(s>=1e3)throw new te;i.append(Wt.toAlphaNumericChar(Math.floor(s/100))),i.append(Wt.toAlphaNumericChar(Math.floor(s/10)%10)),i.append(Wt.toAlphaNumericChar(s%10)),r-=3}if(r===2){if(t.available()<7)throw new te;const s=t.readBits(7);if(s>=100)throw new te;i.append(Wt.toAlphaNumericChar(Math.floor(s/10))),i.append(Wt.toAlphaNumericChar(s%10))}else if(r===1){if(t.available()<4)throw new te;const s=t.readBits(4);if(s>=10)throw new te;i.append(Wt.toAlphaNumericChar(s))}}static parseECIValue(t){const i=t.readBits(8);if((i&128)===0)return i&127;if((i&192)===128){const r=t.readBits(8);return(i&63)<<8&4294967295|r}if((i&224)===192){const r=t.readBits(16);return(i&31)<<16&4294967295|r}throw new te}}Wt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Wt.GB2312_SUBSET=1;class Jo{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const i=t[0];t[0]=t[2],t[2]=i}}class Dc{constructor(){this.rsDecoder=new Xe(pt.QR_CODE_FIELD_256)}decodeBooleanArray(t,i){return this.decodeBitMatrix(st.parseFromBooleanArray(t),i)}decodeBitMatrix(t,i){const r=new Qr(t);let s=null;try{return this.decodeBitMatrixParser(r,i)}catch(o){s=o}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();const o=this.decodeBitMatrixParser(r,i);return o.setOther(new Jo(!0)),o}catch(o){throw s!==null?s:o}}decodeBitMatrixParser(t,i){const r=t.readVersion(),s=t.readFormatInformation().getErrorCorrectionLevel(),o=t.readCodewords(),f=Qs.getDataBlocks(o,r,s);let g=0;for(const S of f)g+=S.getNumDataCodewords();const m=new Uint8Array(g);let E=0;for(const S of f){const N=S.getCodewords(),R=S.getNumDataCodewords();this.correctErrors(N,R);for(let L=0;L<R;L++)m[E++]=N[L]}return Wt.decode(m,r,s,i)}correctErrors(t,i){const r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-i)}catch{throw new G}for(let s=0;s<i;s++)t[s]=r[s]}}class Kr extends ke{constructor(t,i,r){super(t,i),this.estimatedModuleSize=r}aboutEquals(t,i,r){if(Math.abs(i-this.getY())<=t&&Math.abs(r-this.getX())<=t){const s=Math.abs(t-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1}combineEstimate(t,i,r){const s=(this.getX()+i)/2,o=(this.getY()+t)/2,f=(this.estimatedModuleSize+r)/2;return new Kr(s,o,f)}}class ai{constructor(t,i,r,s,o,f,g){this.image=t,this.startX=i,this.startY=r,this.width=s,this.height=o,this.moduleSize=f,this.resultPointCallback=g,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,i=this.height,r=this.width,s=t+r,o=this.startY+i/2,f=new Int32Array(3),g=this.image;for(let m=0;m<i;m++){const E=o+((m&1)===0?Math.floor((m+1)/2):-Math.floor((m+1)/2));f[0]=0,f[1]=0,f[2]=0;let S=t;for(;S<s&&!g.get(S,E);)S++;let N=0;for(;S<s;){if(g.get(S,E))if(N===1)f[1]++;else if(N===2){if(this.foundPatternCross(f)){const R=this.handlePossibleCenter(f,E,S);if(R!==null)return R}f[0]=f[2],f[1]=1,f[2]=0,N=1}else f[++N]++;else N===1&&N++,f[N]++;S++}if(this.foundPatternCross(f)){const R=this.handlePossibleCenter(f,E,s);if(R!==null)return R}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new oe}static centerFromEnd(t,i){return i-t[2]-t[1]/2}foundPatternCross(t){const i=this.moduleSize,r=i/2;for(let s=0;s<3;s++)if(Math.abs(i-t[s])>=r)return!1;return!0}crossCheckVertical(t,i,r,s){const o=this.image,f=o.getHeight(),g=this.crossCheckStateCount;g[0]=0,g[1]=0,g[2]=0;let m=t;for(;m>=0&&o.get(i,m)&&g[1]<=r;)g[1]++,m--;if(m<0||g[1]>r)return NaN;for(;m>=0&&!o.get(i,m)&&g[0]<=r;)g[0]++,m--;if(g[0]>r)return NaN;for(m=t+1;m<f&&o.get(i,m)&&g[1]<=r;)g[1]++,m++;if(m===f||g[1]>r)return NaN;for(;m<f&&!o.get(i,m)&&g[2]<=r;)g[2]++,m++;if(g[2]>r)return NaN;const E=g[0]+g[1]+g[2];return 5*Math.abs(E-s)>=2*s?NaN:this.foundPatternCross(g)?ai.centerFromEnd(g,m):NaN}handlePossibleCenter(t,i,r){const s=t[0]+t[1]+t[2],o=ai.centerFromEnd(t,r),f=this.crossCheckVertical(i,o,2*t[1],s);if(!isNaN(f)){const g=(t[0]+t[1]+t[2])/3;for(const E of this.possibleCenters)if(E.aboutEquals(g,f,o))return E.combineEstimate(f,o,g);const m=new Kr(o,f,g);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null}}class za extends ke{constructor(t,i,r,s){super(t,i),this.estimatedModuleSize=r,this.count=s,s===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,i,r){if(Math.abs(i-this.getY())<=t&&Math.abs(r-this.getX())<=t){const s=Math.abs(t-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1}combineEstimate(t,i,r){const s=this.count+1,o=(this.count*this.getX()+i)/s,f=(this.count*this.getY()+t)/s,g=(this.count*this.estimatedModuleSize+r)/s;return new za(o,f,g,s)}}class Ks{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class en{constructor(t,i){this.image=t,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const i=t!=null&&t.get(ge.TRY_HARDER)!==void 0,r=t!=null&&t.get(ge.PURE_BARCODE)!==void 0,s=this.image,o=s.getHeight(),f=s.getWidth();let g=Math.floor(3*o/(4*en.MAX_MODULES));(g<en.MIN_SKIP||i)&&(g=en.MIN_SKIP);let m=!1;const E=new Int32Array(5);for(let N=g-1;N<o&&!m;N+=g){E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0;let R=0;for(let L=0;L<f;L++)if(s.get(L,N))(R&1)===1&&R++,E[R]++;else if((R&1)===0)if(R===4)if(en.foundPatternCross(E)){if(this.handlePossibleCenter(E,N,L,r)===!0)if(g=2,this.hasSkipped===!0)m=this.haveMultiplyConfirmedCenters();else{const F=this.findRowSkip();F>E[2]&&(N+=F-E[2]-g,L=f-1)}else{E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,R=3;continue}R=0,E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0}else E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,R=3;else E[++R]++;else E[R]++;en.foundPatternCross(E)&&this.handlePossibleCenter(E,N,f,r)===!0&&(g=E[0],this.hasSkipped&&(m=this.haveMultiplyConfirmedCenters()))}const S=this.selectBestPatterns();return ke.orderBestPatterns(S),new Ks(S)}static centerFromEnd(t,i){return i-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let i=0;for(let o=0;o<5;o++){const f=t[o];if(f===0)return!1;i+=f}if(i<7)return!1;const r=i/7,s=r/2;return Math.abs(r-t[0])<s&&Math.abs(r-t[1])<s&&Math.abs(3*r-t[2])<3*s&&Math.abs(r-t[3])<s&&Math.abs(r-t[4])<s}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,i,r,s){const o=this.getCrossCheckStateCount();let f=0;const g=this.image;for(;t>=f&&i>=f&&g.get(i-f,t-f);)o[2]++,f++;if(t<f||i<f)return!1;for(;t>=f&&i>=f&&!g.get(i-f,t-f)&&o[1]<=r;)o[1]++,f++;if(t<f||i<f||o[1]>r)return!1;for(;t>=f&&i>=f&&g.get(i-f,t-f)&&o[0]<=r;)o[0]++,f++;if(o[0]>r)return!1;const m=g.getHeight(),E=g.getWidth();for(f=1;t+f<m&&i+f<E&&g.get(i+f,t+f);)o[2]++,f++;if(t+f>=m||i+f>=E)return!1;for(;t+f<m&&i+f<E&&!g.get(i+f,t+f)&&o[3]<r;)o[3]++,f++;if(t+f>=m||i+f>=E||o[3]>=r)return!1;for(;t+f<m&&i+f<E&&g.get(i+f,t+f)&&o[4]<r;)o[4]++,f++;if(o[4]>=r)return!1;const S=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(S-s)<2*s&&en.foundPatternCross(o)}crossCheckVertical(t,i,r,s){const o=this.image,f=o.getHeight(),g=this.getCrossCheckStateCount();let m=t;for(;m>=0&&o.get(i,m);)g[2]++,m--;if(m<0)return NaN;for(;m>=0&&!o.get(i,m)&&g[1]<=r;)g[1]++,m--;if(m<0||g[1]>r)return NaN;for(;m>=0&&o.get(i,m)&&g[0]<=r;)g[0]++,m--;if(g[0]>r)return NaN;for(m=t+1;m<f&&o.get(i,m);)g[2]++,m++;if(m===f)return NaN;for(;m<f&&!o.get(i,m)&&g[3]<r;)g[3]++,m++;if(m===f||g[3]>=r)return NaN;for(;m<f&&o.get(i,m)&&g[4]<r;)g[4]++,m++;if(g[4]>=r)return NaN;const E=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(E-s)>=2*s?NaN:en.foundPatternCross(g)?en.centerFromEnd(g,m):NaN}crossCheckHorizontal(t,i,r,s){const o=this.image,f=o.getWidth(),g=this.getCrossCheckStateCount();let m=t;for(;m>=0&&o.get(m,i);)g[2]++,m--;if(m<0)return NaN;for(;m>=0&&!o.get(m,i)&&g[1]<=r;)g[1]++,m--;if(m<0||g[1]>r)return NaN;for(;m>=0&&o.get(m,i)&&g[0]<=r;)g[0]++,m--;if(g[0]>r)return NaN;for(m=t+1;m<f&&o.get(m,i);)g[2]++,m++;if(m===f)return NaN;for(;m<f&&!o.get(m,i)&&g[3]<r;)g[3]++,m++;if(m===f||g[3]>=r)return NaN;for(;m<f&&o.get(m,i)&&g[4]<r;)g[4]++,m++;if(g[4]>=r)return NaN;const E=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(E-s)>=s?NaN:en.foundPatternCross(g)?en.centerFromEnd(g,m):NaN}handlePossibleCenter(t,i,r,s){const o=t[0]+t[1]+t[2]+t[3]+t[4];let f=en.centerFromEnd(t,r),g=this.crossCheckVertical(i,Math.floor(f),t[2],o);if(!isNaN(g)&&(f=this.crossCheckHorizontal(Math.floor(f),Math.floor(g),t[2],o),!isNaN(f)&&(!s||this.crossCheckDiagonal(Math.floor(g),Math.floor(f),t[2],o)))){const m=o/7;let E=!1;const S=this.possibleCenters;for(let N=0,R=S.length;N<R;N++){const L=S[N];if(L.aboutEquals(m,g,f)){S[N]=L.combineEstimate(g,f,m),E=!0;break}}if(!E){const N=new za(f,g,m);S.push(N),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(N)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const r of this.possibleCenters)if(r.getCount()>=en.CENTER_QUORUM)if(i==null)i=r;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-r.getX())-Math.abs(i.getY()-r.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,i=0;const r=this.possibleCenters.length;for(const f of this.possibleCenters)f.getCount()>=en.CENTER_QUORUM&&(t++,i+=f.getEstimatedModuleSize());if(t<3)return!1;const s=i/r;let o=0;for(const f of this.possibleCenters)o+=Math.abs(f.getEstimatedModuleSize()-s);return o<=.05*i}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new oe;const i=this.possibleCenters;let r;if(t>3){let s=0,o=0;for(const m of this.possibleCenters){const E=m.getEstimatedModuleSize();s+=E,o+=E*E}r=s/t;let f=Math.sqrt(o/t-r*r);i.sort((m,E)=>{const S=Math.abs(E.getEstimatedModuleSize()-r),N=Math.abs(m.getEstimatedModuleSize()-r);return S<N?-1:S>N?1:0});const g=Math.max(.2*r,f);for(let m=0;m<i.length&&i.length>3;m++){const E=i[m];Math.abs(E.getEstimatedModuleSize()-r)>g&&(i.splice(m,1),m--)}}if(i.length>3){let s=0;for(const o of i)s+=o.getEstimatedModuleSize();r=s/i.length,i.sort((o,f)=>{if(f.getCount()===o.getCount()){const g=Math.abs(f.getEstimatedModuleSize()-r),m=Math.abs(o.getEstimatedModuleSize()-r);return g<m?1:g>m?-1:0}else return f.getCount()-o.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}en.CENTER_QUORUM=2,en.MIN_SKIP=3,en.MAX_MODULES=57;class Mi{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(ge.NEED_RESULT_POINT_CALLBACK);const r=new en(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(r)}processFinderPatternInfo(t){const i=t.getTopLeft(),r=t.getTopRight(),s=t.getBottomLeft(),o=this.calculateModuleSize(i,r,s);if(o<1)throw new oe("No pattern found in proccess finder.");const f=Mi.computeDimension(i,r,s,o),g=He.getProvisionalVersionForDimension(f),m=g.getDimensionForVersion()-7;let E=null;if(g.getAlignmentPatternCenters().length>0){const L=r.getX()-i.getX()+s.getX(),U=r.getY()-i.getY()+s.getY(),F=1-3/m,W=Math.floor(i.getX()+F*(L-i.getX())),se=Math.floor(i.getY()+F*(U-i.getY()));for(let Ie=4;Ie<=16;Ie<<=1)try{E=this.findAlignmentInRegion(o,W,se,Ie);break}catch(we){if(!(we instanceof oe))throw we}}const S=Mi.createTransform(i,r,s,E,f),N=Mi.sampleGrid(this.image,S,f);let R;return E===null?R=[s,i,r]:R=[s,i,r,E],new yr(N,R)}static createTransform(t,i,r,s,o){const f=o-3.5;let g,m,E,S;return s!==null?(g=s.getX(),m=s.getY(),E=f-3,S=E):(g=i.getX()-t.getX()+r.getX(),m=i.getY()-t.getY()+r.getY(),E=f,S=f),Xn.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,E,S,3.5,f,t.getX(),t.getY(),i.getX(),i.getY(),g,m,r.getX(),r.getY())}static sampleGrid(t,i,r){return qn.getInstance().sampleGridWithTransform(t,r,r,i)}static computeDimension(t,i,r,s){const o=Qe.round(ke.distance(t,i)/s),f=Qe.round(ke.distance(t,r)/s);let g=Math.floor((o+f)/2)+7;switch(g&3){case 0:g++;break;case 2:g--;break;case 3:throw new oe("Dimensions could be not found.")}return g}calculateModuleSize(t,i,r){return(this.calculateModuleSizeOneWay(t,i)+this.calculateModuleSizeOneWay(t,r))/2}calculateModuleSizeOneWay(t,i){const r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(i.getX()),Math.floor(i.getY())),s=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(r)?s/7:isNaN(s)?r/7:(r+s)/14}sizeOfBlackWhiteBlackRunBothWays(t,i,r,s){let o=this.sizeOfBlackWhiteBlackRun(t,i,r,s),f=1,g=t-(r-t);g<0?(f=t/(t-g),g=0):g>=this.image.getWidth()&&(f=(this.image.getWidth()-1-t)/(g-t),g=this.image.getWidth()-1);let m=Math.floor(i-(s-i)*f);return f=1,m<0?(f=i/(i-m),m=0):m>=this.image.getHeight()&&(f=(this.image.getHeight()-1-i)/(m-i),m=this.image.getHeight()-1),g=Math.floor(t+(g-t)*f),o+=this.sizeOfBlackWhiteBlackRun(t,i,g,m),o-1}sizeOfBlackWhiteBlackRun(t,i,r,s){const o=Math.abs(s-i)>Math.abs(r-t);if(o){let L=t;t=i,i=L,L=r,r=s,s=L}const f=Math.abs(r-t),g=Math.abs(s-i);let m=-f/2;const E=t<r?1:-1,S=i<s?1:-1;let N=0;const R=r+E;for(let L=t,U=i;L!==R;L+=E){const F=o?U:L,W=o?L:U;if(N===1===this.image.get(F,W)){if(N===2)return Qe.distance(L,U,t,i);N++}if(m+=g,m>0){if(U===s)break;U+=S,m-=f}}return N===2?Qe.distance(r+E,s,t,i):NaN}findAlignmentInRegion(t,i,r,s){const o=Math.floor(s*t),f=Math.max(0,i-o),g=Math.min(this.image.getWidth()-1,i+o);if(g-f<t*3)throw new oe("Alignment top exceeds estimated module size.");const m=Math.max(0,r-o),E=Math.min(this.image.getHeight()-1,r+o);if(E-m<t*3)throw new oe("Alignment bottom exceeds estimated module size.");return new ai(this.image,f,m,g-f,E-m,t,this.resultPointCallback).find()}}class Xi{constructor(){this.decoder=new Dc}getDecoder(){return this.decoder}decode(t,i){let r,s;if(i!=null&&i.get(ge.PURE_BARCODE)!==void 0){const m=Xi.extractPureBits(t.getBlackMatrix());r=this.decoder.decodeBitMatrix(m,i),s=Xi.NO_POINTS}else{const m=new Mi(t.getBlackMatrix()).detect(i);r=this.decoder.decodeBitMatrix(m.getBits(),i),s=m.getPoints()}r.getOther()instanceof Jo&&r.getOther().applyMirroredCorrection(s);const o=new Re(r.getText(),r.getRawBytes(),void 0,s,Se.QR_CODE,void 0),f=r.getByteSegments();f!==null&&o.putMetadata(ft.BYTE_SEGMENTS,f);const g=r.getECLevel();return g!==null&&o.putMetadata(ft.ERROR_CORRECTION_LEVEL,g),r.hasStructuredAppend()&&(o.putMetadata(ft.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),o.putMetadata(ft.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),o}reset(){}static extractPureBits(t){const i=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(i===null||r===null)throw new oe;const s=this.moduleSize(i,t);let o=i[1],f=r[1],g=i[0],m=r[0];if(g>=m||o>=f)throw new oe;if(f-o!==m-g&&(m=g+(f-o),m>=t.getWidth()))throw new oe;const E=Math.round((m-g+1)/s),S=Math.round((f-o+1)/s);if(E<=0||S<=0)throw new oe;if(S!==E)throw new oe;const N=Math.floor(s/2);o+=N,g+=N;const R=g+Math.floor((E-1)*s)-m;if(R>0){if(R>N)throw new oe;g-=R}const L=o+Math.floor((S-1)*s)-f;if(L>0){if(L>N)throw new oe;o-=L}const U=new st(E,S);for(let F=0;F<S;F++){const W=o+Math.floor(F*s);for(let se=0;se<E;se++)t.get(g+Math.floor(se*s),W)&&U.set(se,F)}return U}static moduleSize(t,i){const r=i.getHeight(),s=i.getWidth();let o=t[0],f=t[1],g=!0,m=0;for(;o<s&&f<r;){if(g!==i.get(o,f)){if(++m===5)break;g=!g}o++,f++}if(o===s||f===r)throw new oe;return(o-t[0])/7}}Xi.NO_POINTS=new Array;class Je{PDF417Common(){}static getBitCountSum(t){return Qe.sum(t)}static toIntArray(t){if(t==null||!t.length)return Je.EMPTY_INT_ARRAY;const i=new Int32Array(t.length);let r=0;for(const s of t)i[r++]=s;return i}static getCodeword(t){const i=ce.binarySearch(Je.SYMBOL_TABLE,t&262143);return i<0?-1:(Je.CODEWORD_TABLE[i]-1)%Je.NUMBER_OF_CODEWORDS}}Je.NUMBER_OF_CODEWORDS=929,Je.MAX_CODEWORDS_IN_BARCODE=Je.NUMBER_OF_CODEWORDS-1,Je.MIN_ROWS_IN_BARCODE=3,Je.MAX_ROWS_IN_BARCODE=90,Je.MODULES_IN_CODEWORD=17,Je.MODULES_IN_STOP_PATTERN=18,Je.BARS_IN_MODULE=8,Je.EMPTY_INT_ARRAY=new Int32Array([]),Je.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Je.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class $o{constructor(t,i){this.bits=t,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class it{static detectMultiple(t,i,r){let s=t.getBlackMatrix(),o=it.detect(r,s);return o.length||(s=s.clone(),s.rotate180(),o=it.detect(r,s)),new $o(s,o)}static detect(t,i){const r=new Array;let s=0,o=0,f=!1;for(;s<i.getHeight();){const g=it.findVertices(i,s,o);if(g[0]==null&&g[3]==null){if(!f)break;f=!1,o=0;for(const m of r)m[1]!=null&&(s=Math.trunc(Math.max(s,m[1].getY()))),m[3]!=null&&(s=Math.max(s,Math.trunc(m[3].getY())));s+=it.ROW_STEP;continue}if(f=!0,r.push(g),!t)break;g[2]!=null?(o=Math.trunc(g[2].getX()),s=Math.trunc(g[2].getY())):(o=Math.trunc(g[4].getX()),s=Math.trunc(g[4].getY()))}return r}static findVertices(t,i,r){const s=t.getHeight(),o=t.getWidth(),f=new Array(8);return it.copyToResult(f,it.findRowsWithPattern(t,s,o,i,r,it.START_PATTERN),it.INDEXES_START_PATTERN),f[4]!=null&&(r=Math.trunc(f[4].getX()),i=Math.trunc(f[4].getY())),it.copyToResult(f,it.findRowsWithPattern(t,s,o,i,r,it.STOP_PATTERN),it.INDEXES_STOP_PATTERN),f}static copyToResult(t,i,r){for(let s=0;s<r.length;s++)t[r[s]]=i[s]}static findRowsWithPattern(t,i,r,s,o,f){const g=new Array(4);let m=!1;const E=new Int32Array(f.length);for(;s<i;s+=it.ROW_STEP){let N=it.findGuardPattern(t,o,s,r,!1,f,E);if(N!=null){for(;s>0;){const R=it.findGuardPattern(t,o,--s,r,!1,f,E);if(R!=null)N=R;else{s++;break}}g[0]=new ke(N[0],s),g[1]=new ke(N[1],s),m=!0;break}}let S=s+1;if(m){let N=0,R=Int32Array.from([Math.trunc(g[0].getX()),Math.trunc(g[1].getX())]);for(;S<i;S++){const L=it.findGuardPattern(t,R[0],S,r,!1,f,E);if(L!=null&&Math.abs(R[0]-L[0])<it.MAX_PATTERN_DRIFT&&Math.abs(R[1]-L[1])<it.MAX_PATTERN_DRIFT)R=L,N=0;else{if(N>it.SKIPPED_ROW_COUNT_MAX)break;N++}}S-=N+1,g[2]=new ke(R[0],S),g[3]=new ke(R[1],S)}return S-s<it.BARCODE_MIN_HEIGHT&&ce.fill(g,null),g}static findGuardPattern(t,i,r,s,o,f,g){ce.fillWithin(g,0,g.length,0);let m=i,E=0;for(;t.get(m,r)&&m>0&&E++<it.MAX_PIXEL_DRIFT;)m--;let S=m,N=0,R=f.length;for(let L=o;S<s;S++)if(t.get(S,r)!==L)g[N]++;else{if(N===R-1){if(it.patternMatchVariance(g,f,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE)return new Int32Array([m,S]);m+=g[0]+g[1],ne.arraycopy(g,2,g,0,N-1),g[N-1]=0,g[N]=0,N--}else N++;g[N]=1,L=!L}return N===R-1&&it.patternMatchVariance(g,f,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE?new Int32Array([m,S-1]):null}static patternMatchVariance(t,i,r){let s=t.length,o=0,f=0;for(let E=0;E<s;E++)o+=t[E],f+=i[E];if(o<f)return 1/0;let g=o/f;r*=g;let m=0;for(let E=0;E<s;E++){let S=t[E],N=i[E]*g,R=S>N?S-N:N-S;if(R>r)return 1/0;m+=R}return m/o}}it.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),it.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),it.MAX_AVG_VARIANCE=.42,it.MAX_INDIVIDUAL_VARIANCE=.8,it.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),it.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),it.MAX_PIXEL_DRIFT=3,it.MAX_PATTERN_DRIFT=5,it.SKIPPED_ROW_COUNT_MAX=25,it.ROW_STEP=5,it.BARCODE_MIN_HEIGHT=10;class qt{constructor(t,i){if(i.length===0)throw new M;this.field=t;let r=i.length;if(r>1&&i[0]===0){let s=1;for(;s<r&&i[s]===0;)s++;s===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-s),ne.arraycopy(i,s,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let s=0;for(let o of this.coefficients)s=this.field.add(s,o);return s}let i=this.coefficients[0],r=this.coefficients.length;for(let s=1;s<r;s++)i=this.field.add(this.field.multiply(t,i),this.coefficients[s]);return i}add(t){if(!this.field.equals(t.field))throw new M("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let i=this.coefficients,r=t.coefficients;if(i.length>r.length){let f=i;i=r,r=f}let s=new Int32Array(r.length),o=r.length-i.length;ne.arraycopy(r,0,s,0,o);for(let f=o;f<r.length;f++)s[f]=this.field.add(i[f-o],r[f]);return new qt(this.field,s)}subtract(t){if(!this.field.equals(t.field))throw new M("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof qt?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new M("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new qt(this.field,new Int32Array([0]));let i=this.coefficients,r=i.length,s=t.coefficients,o=s.length,f=new Int32Array(r+o-1);for(let g=0;g<r;g++){let m=i[g];for(let E=0;E<o;E++)f[g+E]=this.field.add(f[g+E],this.field.multiply(m,s[E]))}return new qt(this.field,f)}negative(){let t=this.coefficients.length,i=new Int32Array(t);for(let r=0;r<t;r++)i[r]=this.field.subtract(0,this.coefficients[r]);return new qt(this.field,i)}multiplyScalar(t){if(t===0)return new qt(this.field,new Int32Array([0]));if(t===1)return this;let i=this.coefficients.length,r=new Int32Array(i);for(let s=0;s<i;s++)r[s]=this.field.multiply(this.coefficients[s],t);return new qt(this.field,r)}multiplyByMonomial(t,i){if(t<0)throw new M;if(i===0)return new qt(this.field,new Int32Array([0]));let r=this.coefficients.length,s=new Int32Array(r+t);for(let o=0;o<r;o++)s[o]=this.field.multiply(this.coefficients[o],i);return new qt(this.field,s)}toString(){let t=new nt;for(let i=this.getDegree();i>=0;i--){let r=this.getCoefficient(i);r!==0&&(r<0?(t.append(" - "),r=-r):t.length()>0&&t.append(" + "),(i===0||r!==1)&&t.append(r),i!==0&&(i===1?t.append("x"):(t.append("x^"),t.append(i))))}return t.toString()}}class Js{add(t,i){return(t+i)%this.modulus}subtract(t,i){return(this.modulus+t-i)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new M;return this.logTable[t]}inverse(t){if(t===0)throw new hi;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,i){return t===0||i===0?0:this.expTable[(this.logTable[t]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class br extends Js{constructor(t,i){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let r=1;for(let s=0;s<t;s++)this.expTable[s]=r,r=r*i%t;for(let s=0;s<t-1;s++)this.logTable[this.expTable[s]]=s;this.zero=new qt(this,new Int32Array([0])),this.one=new qt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,i){if(t<0)throw new M;if(i===0)return this.zero;let r=new Int32Array(t+1);return r[0]=i,new qt(this,r)}}br.PDF417_GF=new br(Je.NUMBER_OF_CODEWORDS,3);class Wi{constructor(){this.field=br.PDF417_GF}decode(t,i,r){let s=new qt(this.field,t),o=new Int32Array(i),f=!1;for(let U=i;U>0;U--){let F=s.evaluateAt(this.field.exp(U));o[i-U]=F,F!==0&&(f=!0)}if(!f)return 0;let g=this.field.getOne();if(r!=null)for(const U of r){let F=this.field.exp(t.length-1-U),W=new qt(this.field,new Int32Array([this.field.subtract(0,F),1]));g=g.multiply(W)}let m=new qt(this.field,o),E=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),m,i),S=E[0],N=E[1],R=this.findErrorLocations(S),L=this.findErrorMagnitudes(N,S,R);for(let U=0;U<R.length;U++){let F=t.length-1-this.field.log(R[U]);if(F<0)throw G.getChecksumInstance();t[F]=this.field.subtract(t[F],L[U])}return R.length}runEuclideanAlgorithm(t,i,r){if(t.getDegree()<i.getDegree()){let R=t;t=i,i=R}let s=t,o=i,f=this.field.getZero(),g=this.field.getOne();for(;o.getDegree()>=Math.round(r/2);){let R=s,L=f;if(s=o,f=g,s.isZero())throw G.getChecksumInstance();o=R;let U=this.field.getZero(),F=s.getCoefficient(s.getDegree()),W=this.field.inverse(F);for(;o.getDegree()>=s.getDegree()&&!o.isZero();){let se=o.getDegree()-s.getDegree(),Ie=this.field.multiply(o.getCoefficient(o.getDegree()),W);U=U.add(this.field.buildMonomial(se,Ie)),o=o.subtract(s.multiplyByMonomial(se,Ie))}g=U.multiply(f).subtract(L).negative()}let m=g.getCoefficient(0);if(m===0)throw G.getChecksumInstance();let E=this.field.inverse(m),S=g.multiply(E),N=o.multiply(E);return[S,N]}findErrorLocations(t){let i=t.getDegree(),r=new Int32Array(i),s=0;for(let o=1;o<this.field.getSize()&&s<i;o++)t.evaluateAt(o)===0&&(r[s]=this.field.inverse(o),s++);if(s!==i)throw G.getChecksumInstance();return r}findErrorMagnitudes(t,i,r){let s=i.getDegree(),o=new Int32Array(s);for(let E=1;E<=s;E++)o[s-E]=this.field.multiply(E,i.getCoefficient(E));let f=new qt(this.field,o),g=r.length,m=new Int32Array(g);for(let E=0;E<g;E++){let S=this.field.inverse(r[E]),N=this.field.subtract(0,t.evaluateAt(S)),R=this.field.inverse(f.evaluateAt(S));m[E]=this.field.multiply(N,R)}return m}}class qi{constructor(t,i,r,s,o){t instanceof qi?this.constructor_2(t):this.constructor_1(t,i,r,s,o)}constructor_1(t,i,r,s,o){const f=i==null||r==null,g=s==null||o==null;if(f&&g)throw new oe;f?(i=new ke(0,s.getY()),r=new ke(0,o.getY())):g&&(s=new ke(t.getWidth()-1,i.getY()),o=new ke(t.getWidth()-1,r.getY())),this.image=t,this.topLeft=i,this.bottomLeft=r,this.topRight=s,this.bottomRight=o,this.minX=Math.trunc(Math.min(i.getX(),r.getX())),this.maxX=Math.trunc(Math.max(s.getX(),o.getX())),this.minY=Math.trunc(Math.min(i.getY(),s.getY())),this.maxY=Math.trunc(Math.max(r.getY(),o.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,i){return t==null?i:i==null?t:new qi(t.image,t.topLeft,t.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(t,i,r){let s=this.topLeft,o=this.bottomLeft,f=this.topRight,g=this.bottomRight;if(t>0){let m=r?this.topLeft:this.topRight,E=Math.trunc(m.getY()-t);E<0&&(E=0);let S=new ke(m.getX(),E);r?s=S:f=S}if(i>0){let m=r?this.bottomLeft:this.bottomRight,E=Math.trunc(m.getY()+i);E>=this.image.getHeight()&&(E=this.image.getHeight()-1);let S=new ke(m.getX(),E);r?o=S:g=S}return new qi(this.image,s,o,f,g)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class cs{constructor(t,i,r,s){this.columnCount=t,this.errorCorrectionLevel=s,this.rowCountUpperPart=i,this.rowCountLowerPart=r,this.rowCount=i+r}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Jr{constructor(){this.buffer=""}static form(t,i){let r=-1;function s(f,g,m,E,S,N){if(f==="%%")return"%";if(i[++r]===void 0)return;f=E?parseInt(E.substr(1)):void 0;let R=S?parseInt(S.substr(1)):void 0,L;switch(N){case"s":L=i[r];break;case"c":L=i[r][0];break;case"f":L=parseFloat(i[r]).toFixed(f);break;case"p":L=parseFloat(i[r]).toPrecision(f);break;case"e":L=parseFloat(i[r]).toExponential(f);break;case"x":L=parseInt(i[r]).toString(R||16);break;case"d":L=parseFloat(parseInt(i[r],R||10).toPrecision(f)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(R);let U=parseInt(m),F=m&&m[0]+""=="0"?"0":" ";for(;L.length<U;)L=g!==void 0?L+F:F+L;return L}let o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(o,s)}format(t,...i){this.buffer+=Jr.form(t,i)}toString(){return this.buffer}}class or{constructor(t){this.boundingBox=new qi(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let i=this.getCodeword(t);if(i!=null)return i;for(let r=1;r<or.MAX_NEARBY_DISTANCE;r++){let s=this.imageRowToCodewordIndex(t)-r;if(s>=0&&(i=this.codewords[s],i!=null)||(s=this.imageRowToCodewordIndex(t)+r,s<this.codewords.length&&(i=this.codewords[s],i!=null)))return i}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,i){this.codewords[this.imageRowToCodewordIndex(t)]=i}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new Jr;let i=0;for(const r of this.codewords){if(r==null){t.format("%3d:    |   %n",i++);continue}t.format("%3d: %3d|%3d%n",i++,r.getRowNumber(),r.getValue())}return t.toString()}}or.MAX_NEARBY_DISTANCE=5;class lr{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let i=this.values.get(t);i==null&&(i=0),i++,this.values.set(t,i)}getValue(){let t=-1,i=new Array;for(const[r,s]of this.values.entries()){const o={getKey:()=>r,getValue:()=>s};o.getValue()>t?(t=o.getValue(),i=[],i.push(o.getKey())):o.getValue()===t&&i.push(o.getKey())}return Je.toIntArray(i)}getConfidence(t){return this.values.get(t)}}class $s extends or{constructor(t,i){super(t),this._isLeft=i}setRowNumbers(){for(let t of this.getCodewords())t?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,t);let r=this.getBoundingBox(),s=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(s.getY())),g=this.imageRowToCodewordIndex(Math.trunc(o.getY())),m=-1,E=1,S=0;for(let N=f;N<g;N++){if(i[N]==null)continue;let R=i[N],L=R.getRowNumber()-m;if(L===0)S++;else if(L===1)E=Math.max(E,S),S=1,m=R.getRowNumber();else if(L<0||R.getRowNumber()>=t.getRowCount()||L>N)i[N]=null;else{let U;E>2?U=(E-2)*L:U=L;let F=U>=N;for(let W=1;W<=U&&!F;W++)F=i[N-W]!=null;F?i[N]=null:(m=R.getRowNumber(),S=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let i=new Int32Array(t.getRowCount());for(let r of this.getCodewords())if(r!=null){let s=r.getRowNumber();if(s>=i.length)continue;i[s]++}return i}adjustIncompleteIndicatorColumnRowNumbers(t){let i=this.getBoundingBox(),r=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),f=this.imageRowToCodewordIndex(Math.trunc(s.getY())),g=this.getCodewords(),m=-1;for(let E=o;E<f;E++){if(g[E]==null)continue;let S=g[E];S.setRowNumberAsRowIndicatorColumn();let N=S.getRowNumber()-m;N===0||(N===1?m=S.getRowNumber():S.getRowNumber()>=t.getRowCount()?g[E]=null:m=S.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),i=new lr,r=new lr,s=new lr,o=new lr;for(let g of t){if(g==null)continue;g.setRowNumberAsRowIndicatorColumn();let m=g.getValue()%30,E=g.getRowNumber();switch(this._isLeft||(E+=2),E%3){case 0:r.setValue(m*3+1);break;case 1:o.setValue(m/3),s.setValue(m%3);break;case 2:i.setValue(m+1);break}}if(i.getValue().length===0||r.getValue().length===0||s.getValue().length===0||o.getValue().length===0||i.getValue()[0]<1||r.getValue()[0]+s.getValue()[0]<Je.MIN_ROWS_IN_BARCODE||r.getValue()[0]+s.getValue()[0]>Je.MAX_ROWS_IN_BARCODE)return null;let f=new cs(i.getValue()[0],r.getValue()[0],s.getValue()[0],o.getValue()[0]);return this.removeIncorrectCodewords(t,f),f}removeIncorrectCodewords(t,i){for(let r=0;r<t.length;r++){let s=t[r];if(t[r]==null)continue;let o=s.getValue()%30,f=s.getRowNumber();if(f>i.getRowCount()){t[r]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:o*3+1!==i.getRowCountUpperPart()&&(t[r]=null);break;case 1:(Math.trunc(o/3)!==i.getErrorCorrectionLevel()||o%3!==i.getRowCountLowerPart())&&(t[r]=null);break;case 2:o+1!==i.getColumnCount()&&(t[r]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class vn{constructor(t,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=Je.MAX_CODEWORDS_IN_BARCODE,i;do i=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let r=this.detectionResultColumns[i].getCodewords();for(let s=0;s<r.length;s++)r[s]!=null&&(r[s].hasValidRowNumber()||this.adjustRowNumbers(i,s,r))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<t.length;r++)if(t[r]!=null&&i[r]!=null&&t[r].getRowNumber()===i[r].getRowNumber())for(let s=1;s<=this.barcodeColumnCount;s++){let o=this.detectionResultColumns[s].getCodewords()[r];o!=null&&(o.setRowNumber(t[r].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[s].getCodewords()[r]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<i.length;r++){if(i[r]==null)continue;let s=i[r].getRowNumber(),o=0;for(let f=this.barcodeColumnCount+1;f>0&&o<this.ADJUST_ROW_NUMBER_SKIP;f--){let g=this.detectionResultColumns[f].getCodewords()[r];g!=null&&(o=vn.adjustRowNumberIfValid(s,o,g),g.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,i=this.detectionResultColumns[0].getCodewords();for(let r=0;r<i.length;r++){if(i[r]==null)continue;let s=i[r].getRowNumber(),o=0;for(let f=1;f<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;f++){let g=this.detectionResultColumns[f].getCodewords()[r];g!=null&&(o=vn.adjustRowNumberIfValid(s,o,g),g.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,i,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(t)?(r.setRowNumber(t),i=0):++i),i}adjustRowNumbers(t,i,r){if(!this.detectionResultColumns[t-1])return;let s=r[i],o=this.detectionResultColumns[t-1].getCodewords(),f=o;this.detectionResultColumns[t+1]!=null&&(f=this.detectionResultColumns[t+1].getCodewords());let g=new Array(14);g[2]=o[i],g[3]=f[i],i>0&&(g[0]=r[i-1],g[4]=o[i-1],g[5]=f[i-1]),i>1&&(g[8]=r[i-2],g[10]=o[i-2],g[11]=f[i-2]),i<r.length-1&&(g[1]=r[i+1],g[6]=o[i+1],g[7]=f[i+1]),i<r.length-2&&(g[9]=r[i+2],g[12]=o[i+2],g[13]=f[i+2]);for(let m of g)if(vn.adjustRowNumber(s,m))return}static adjustRowNumber(t,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===t.getBucket()?(t.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,i){this.detectionResultColumns[t]=i}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new Jr;for(let r=0;r<t.getCodewords().length;r++){i.format("CW %3d:",r);for(let s=0;s<this.barcodeColumnCount+2;s++){if(this.detectionResultColumns[s]==null){i.format("    |   ");continue}let o=this.detectionResultColumns[s].getCodewords()[r];if(o==null){i.format("    |   ");continue}i.format(" %3d|%3d",o.getRowNumber(),o.getValue())}i.format("%n")}return i.toString()}}class mi{constructor(t,i,r,s){this.rowNumber=mi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(i),this.bucket=Math.trunc(r),this.value=Math.trunc(s)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==mi.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}mi.BARCODE_ROW_UNKNOWN=-1;class Dn{static initialize(){for(let t=0;t<Je.SYMBOL_TABLE.length;t++){let i=Je.SYMBOL_TABLE[t],r=i&1;for(let s=0;s<Je.BARS_IN_MODULE;s++){let o=0;for(;(i&1)===r;)o+=1,i>>=1;r=i&1,Dn.RATIOS_TABLE[t]||(Dn.RATIOS_TABLE[t]=new Array(Je.BARS_IN_MODULE)),Dn.RATIOS_TABLE[t][Je.BARS_IN_MODULE-s-1]=Math.fround(o/Je.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let i=Dn.getDecodedCodewordValue(Dn.sampleBitCounts(t));return i!==-1?i:Dn.getClosestDecodedValue(t)}static sampleBitCounts(t){let i=Qe.sum(t),r=new Int32Array(Je.BARS_IN_MODULE),s=0,o=0;for(let f=0;f<Je.MODULES_IN_CODEWORD;f++){let g=i/(2*Je.MODULES_IN_CODEWORD)+f*i/Je.MODULES_IN_CODEWORD;o+t[s]<=g&&(o+=t[s],s++),r[s]++}return r}static getDecodedCodewordValue(t){let i=Dn.getBitValue(t);return Je.getCodeword(i)===-1?-1:i}static getBitValue(t){let i=0;for(let r=0;r<t.length;r++)for(let s=0;s<t[r];s++)i=i<<1|(r%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(t){let i=Qe.sum(t),r=new Array(Je.BARS_IN_MODULE);if(i>1)for(let f=0;f<r.length;f++)r[f]=Math.fround(t[f]/i);let s=ii.MAX_VALUE,o=-1;this.bSymbolTableReady||Dn.initialize();for(let f=0;f<Dn.RATIOS_TABLE.length;f++){let g=0,m=Dn.RATIOS_TABLE[f];for(let E=0;E<Je.BARS_IN_MODULE;E++){let S=Math.fround(m[E]-r[E]);if(g+=Math.fround(S*S),g>=s)break}g<s&&(s=g,o=Je.SYMBOL_TABLE[f])}return o}}Dn.bSymbolTableReady=!1,Dn.RATIOS_TABLE=new Array(Je.SYMBOL_TABLE.length).map(T=>new Array(Je.BARS_IN_MODULE));class $r{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class el{static parseLong(t,i=void 0){return parseInt(t,i)}}class us extends A{}us.kind="NullPointerException";class eo{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,i,r){if(t==null)throw new us;if(i<0||i>t.length||r<0||i+r>t.length||i+r<0)throw new J;if(r===0)return;for(let s=0;s<r;s++)this.write(t[i+s])}flush(){}close(){}}class Ua extends A{}class ds extends eo{constructor(t=32){if(super(),this.count=0,t<0)throw new M("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let r=this.buf.length<<1;if(r-t<0&&(r=t),r<0){if(t<0)throw new Ua;r=X.MAX_VALUE}this.buf=ce.copyOfUint8Array(this.buf,r)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,i,r){if(i<0||i>t.length||r<0||i+r-t.length>0)throw new J;this.ensureCapacity(this.count+r),ne.arraycopy(t,i,this.buf,this.count,r),this.count+=r}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return ce.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var Mt;(function(T){T[T.ALPHA=0]="ALPHA",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.PUNCT=3]="PUNCT",T[T.ALPHA_SHIFT=4]="ALPHA_SHIFT",T[T.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Mt||(Mt={}));function tl(){if(typeof window<"u")return window.BigInt||null;if(typeof fc<"u")return fc.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let fs;function cr(T){if(typeof fs>"u"&&(fs=tl()),fs===null)throw new Error("BigInt is not supported!");return fs(T)}function to(){let T=[];T[0]=cr(1);let t=cr(900);T[1]=t;for(let i=2;i<16;i++)T[i]=T[i-1]*t;return T}class le{static decode(t,i){let r=new nt(""),s=de.ISO8859_1;r.enableDecoding(s);let o=1,f=t[o++],g=new $r;for(;o<t[0];){switch(f){case le.TEXT_COMPACTION_MODE_LATCH:o=le.textCompaction(t,o,r);break;case le.BYTE_COMPACTION_MODE_LATCH:case le.BYTE_COMPACTION_MODE_LATCH_6:o=le.byteCompaction(f,t,s,o,r);break;case le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o++]);break;case le.NUMERIC_COMPACTION_MODE_LATCH:o=le.numericCompaction(t,o,r);break;case le.ECI_CHARSET:de.getCharacterSetECIByValue(t[o++]);break;case le.ECI_GENERAL_PURPOSE:o+=2;break;case le.ECI_USER_DEFINED:o++;break;case le.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=le.decodeMacroBlock(t,o,g);break;case le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case le.MACRO_PDF417_TERMINATOR:throw new te;default:o--,o=le.textCompaction(t,o,r);break}if(o<t.length)f=t[o++];else throw te.getFormatInstance()}if(r.length()===0)throw te.getFormatInstance();let m=new Bt(null,r.toString(),null,i);return m.setOther(g),m}static decodeMacroBlock(t,i,r){if(i+le.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw te.getFormatInstance();let s=new Int32Array(le.NUMBER_OF_SEQUENCE_CODEWORDS);for(let g=0;g<le.NUMBER_OF_SEQUENCE_CODEWORDS;g++,i++)s[g]=t[i];r.setSegmentIndex(X.parseInt(le.decodeBase900toBase10(s,le.NUMBER_OF_SEQUENCE_CODEWORDS)));let o=new nt;i=le.textCompaction(t,i,o),r.setFileId(o.toString());let f=-1;for(t[i]===le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=i+1);i<t[0];)switch(t[i]){case le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,t[i]){case le.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let g=new nt;i=le.textCompaction(t,i+1,g),r.setFileName(g.toString());break;case le.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let m=new nt;i=le.textCompaction(t,i+1,m),r.setSender(m.toString());break;case le.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let E=new nt;i=le.textCompaction(t,i+1,E),r.setAddressee(E.toString());break;case le.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let S=new nt;i=le.numericCompaction(t,i+1,S),r.setSegmentCount(X.parseInt(S.toString()));break;case le.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let N=new nt;i=le.numericCompaction(t,i+1,N),r.setTimestamp(el.parseLong(N.toString()));break;case le.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let R=new nt;i=le.numericCompaction(t,i+1,R),r.setChecksum(X.parseInt(R.toString()));break;case le.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let L=new nt;i=le.numericCompaction(t,i+1,L),r.setFileSize(el.parseLong(L.toString()));break;default:throw te.getFormatInstance()}break;case le.MACRO_PDF417_TERMINATOR:i++,r.setLastSegment(!0);break;default:throw te.getFormatInstance()}if(f!==-1){let g=i-f;r.isLastSegment()&&g--,r.setOptionalData(ce.copyOfRange(t,f,f+g))}return i}static textCompaction(t,i,r){let s=new Int32Array((t[0]-i)*2),o=new Int32Array((t[0]-i)*2),f=0,g=!1;for(;i<t[0]&&!g;){let m=t[i++];if(m<le.TEXT_COMPACTION_MODE_LATCH)s[f]=m/30,s[f+1]=m%30,f+=2;else switch(m){case le.TEXT_COMPACTION_MODE_LATCH:s[f++]=le.TEXT_COMPACTION_MODE_LATCH;break;case le.BYTE_COMPACTION_MODE_LATCH:case le.BYTE_COMPACTION_MODE_LATCH_6:case le.NUMERIC_COMPACTION_MODE_LATCH:case le.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case le.MACRO_PDF417_TERMINATOR:i--,g=!0;break;case le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s[f]=le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,m=t[i++],o[f]=m,f++;break}}return le.decodeTextCompaction(s,o,f,r),i}static decodeTextCompaction(t,i,r,s){let o=Mt.ALPHA,f=Mt.ALPHA,g=0;for(;g<r;){let m=t[g],E="";switch(o){case Mt.ALPHA:if(m<26)E=String.fromCharCode(65+m);else switch(m){case 26:E=" ";break;case le.LL:o=Mt.LOWER;break;case le.ML:o=Mt.MIXED;break;case le.PS:f=o,o=Mt.PUNCT_SHIFT;break;case le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(i[g]);break;case le.TEXT_COMPACTION_MODE_LATCH:o=Mt.ALPHA;break}break;case Mt.LOWER:if(m<26)E=String.fromCharCode(97+m);else switch(m){case 26:E=" ";break;case le.AS:f=o,o=Mt.ALPHA_SHIFT;break;case le.ML:o=Mt.MIXED;break;case le.PS:f=o,o=Mt.PUNCT_SHIFT;break;case le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(i[g]);break;case le.TEXT_COMPACTION_MODE_LATCH:o=Mt.ALPHA;break}break;case Mt.MIXED:if(m<le.PL)E=le.MIXED_CHARS[m];else switch(m){case le.PL:o=Mt.PUNCT;break;case 26:E=" ";break;case le.LL:o=Mt.LOWER;break;case le.AL:o=Mt.ALPHA;break;case le.PS:f=o,o=Mt.PUNCT_SHIFT;break;case le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(i[g]);break;case le.TEXT_COMPACTION_MODE_LATCH:o=Mt.ALPHA;break}break;case Mt.PUNCT:if(m<le.PAL)E=le.PUNCT_CHARS[m];else switch(m){case le.PAL:o=Mt.ALPHA;break;case le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(i[g]);break;case le.TEXT_COMPACTION_MODE_LATCH:o=Mt.ALPHA;break}break;case Mt.ALPHA_SHIFT:if(o=f,m<26)E=String.fromCharCode(65+m);else switch(m){case 26:E=" ";break;case le.TEXT_COMPACTION_MODE_LATCH:o=Mt.ALPHA;break}break;case Mt.PUNCT_SHIFT:if(o=f,m<le.PAL)E=le.PUNCT_CHARS[m];else switch(m){case le.PAL:o=Mt.ALPHA;break;case le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(i[g]);break;case le.TEXT_COMPACTION_MODE_LATCH:o=Mt.ALPHA;break}break}E!==""&&s.append(E),g++}}static byteCompaction(t,i,r,s,o){let f=new ds,g=0,m=0,E=!1;switch(t){case le.BYTE_COMPACTION_MODE_LATCH:let S=new Int32Array(6),N=i[s++];for(;s<i[0]&&!E;)switch(S[g++]=N,m=900*m+N,N=i[s++],N){case le.TEXT_COMPACTION_MODE_LATCH:case le.BYTE_COMPACTION_MODE_LATCH:case le.NUMERIC_COMPACTION_MODE_LATCH:case le.BYTE_COMPACTION_MODE_LATCH_6:case le.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case le.MACRO_PDF417_TERMINATOR:s--,E=!0;break;default:if(g%5===0&&g>0){for(let R=0;R<6;++R)f.write(Number(cr(m)>>cr(8*(5-R))));m=0,g=0}break}s===i[0]&&N<le.TEXT_COMPACTION_MODE_LATCH&&(S[g++]=N);for(let R=0;R<g;R++)f.write(S[R]);break;case le.BYTE_COMPACTION_MODE_LATCH_6:for(;s<i[0]&&!E;){let R=i[s++];if(R<le.TEXT_COMPACTION_MODE_LATCH)g++,m=900*m+R;else switch(R){case le.TEXT_COMPACTION_MODE_LATCH:case le.BYTE_COMPACTION_MODE_LATCH:case le.NUMERIC_COMPACTION_MODE_LATCH:case le.BYTE_COMPACTION_MODE_LATCH_6:case le.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case le.MACRO_PDF417_TERMINATOR:s--,E=!0;break}if(g%5===0&&g>0){for(let L=0;L<6;++L)f.write(Number(cr(m)>>cr(8*(5-L))));m=0,g=0}}break}return o.append(tt.decode(f.toByteArray(),r)),s}static numericCompaction(t,i,r){let s=0,o=!1,f=new Int32Array(le.MAX_NUMERIC_CODEWORDS);for(;i<t[0]&&!o;){let g=t[i++];if(i===t[0]&&(o=!0),g<le.TEXT_COMPACTION_MODE_LATCH)f[s]=g,s++;else switch(g){case le.TEXT_COMPACTION_MODE_LATCH:case le.BYTE_COMPACTION_MODE_LATCH:case le.BYTE_COMPACTION_MODE_LATCH_6:case le.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case le.MACRO_PDF417_TERMINATOR:i--,o=!0;break}(s%le.MAX_NUMERIC_CODEWORDS===0||g===le.NUMERIC_COMPACTION_MODE_LATCH||o)&&s>0&&(r.append(le.decodeBase900toBase10(f,s)),s=0)}return i}static decodeBase900toBase10(t,i){let r=cr(0);for(let o=0;o<i;o++)r+=le.EXP900[i-o-1]*cr(t[o]);let s=r.toString();if(s.charAt(0)!=="1")throw new te;return s.substring(1)}}le.TEXT_COMPACTION_MODE_LATCH=900,le.BYTE_COMPACTION_MODE_LATCH=901,le.NUMERIC_COMPACTION_MODE_LATCH=902,le.BYTE_COMPACTION_MODE_LATCH_6=924,le.ECI_USER_DEFINED=925,le.ECI_GENERAL_PURPOSE=926,le.ECI_CHARSET=927,le.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,le.MACRO_PDF417_TERMINATOR=922,le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,le.MAX_NUMERIC_CODEWORDS=15,le.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,le.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,le.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,le.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,le.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,le.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,le.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,le.PL=25,le.LL=27,le.AS=27,le.ML=28,le.AL=28,le.PS=29,le.PAL=29,le.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,le.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",le.EXP900=tl()?to():[],le.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ct{constructor(){}static decode(t,i,r,s,o,f,g){let m=new qi(t,i,r,s,o),E=null,S=null,N;for(let U=!0;;U=!1){if(i!=null&&(E=ct.getRowIndicatorColumn(t,m,i,!0,f,g)),s!=null&&(S=ct.getRowIndicatorColumn(t,m,s,!1,f,g)),N=ct.merge(E,S),N==null)throw oe.getNotFoundInstance();let F=N.getBoundingBox();if(U&&F!=null&&(F.getMinY()<m.getMinY()||F.getMaxY()>m.getMaxY()))m=F;else break}N.setBoundingBox(m);let R=N.getBarcodeColumnCount()+1;N.setDetectionResultColumn(0,E),N.setDetectionResultColumn(R,S);let L=E!=null;for(let U=1;U<=R;U++){let F=L?U:R-U;if(N.getDetectionResultColumn(F)!==void 0)continue;let W;F===0||F===R?W=new $s(m,F===0):W=new or(m),N.setDetectionResultColumn(F,W);let se=-1,Ie=se;for(let we=m.getMinY();we<=m.getMaxY();we++){if(se=ct.getStartColumn(N,F,we,L),se<0||se>m.getMaxX()){if(Ie===-1)continue;se=Ie}let Ae=ct.detectCodeword(t,m.getMinX(),m.getMaxX(),L,se,we,f,g);Ae!=null&&(W.setCodeword(we,Ae),Ie=se,f=Math.min(f,Ae.getWidth()),g=Math.max(g,Ae.getWidth()))}}return ct.createDecoderResult(N)}static merge(t,i){if(t==null&&i==null)return null;let r=ct.getBarcodeMetadata(t,i);if(r==null)return null;let s=qi.merge(ct.adjustBoundingBox(t),ct.adjustBoundingBox(i));return new vn(r,s)}static adjustBoundingBox(t){if(t==null)return null;let i=t.getRowHeights();if(i==null)return null;let r=ct.getMax(i),s=0;for(let g of i)if(s+=r-g,g>0)break;let o=t.getCodewords();for(let g=0;s>0&&o[g]==null;g++)s--;let f=0;for(let g=i.length-1;g>=0&&(f+=r-i[g],!(i[g]>0));g--);for(let g=o.length-1;f>0&&o[g]==null;g--)f--;return t.getBoundingBox().addMissingRows(s,f,t.isLeft())}static getMax(t){let i=-1;for(let r of t)i=Math.max(i,r);return i}static getBarcodeMetadata(t,i){let r;if(t==null||(r=t.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let s;return i==null||(s=i.getBarcodeMetadata())==null?r:r.getColumnCount()!==s.getColumnCount()&&r.getErrorCorrectionLevel()!==s.getErrorCorrectionLevel()&&r.getRowCount()!==s.getRowCount()?null:r}static getRowIndicatorColumn(t,i,r,s,o,f){let g=new $s(i,s);for(let m=0;m<2;m++){let E=m===0?1:-1,S=Math.trunc(Math.trunc(r.getX()));for(let N=Math.trunc(Math.trunc(r.getY()));N<=i.getMaxY()&&N>=i.getMinY();N+=E){let R=ct.detectCodeword(t,0,t.getWidth(),s,S,N,o,f);R!=null&&(g.setCodeword(N,R),s?S=R.getStartX():S=R.getEndX())}}return g}static adjustCodewordCount(t,i){let r=i[0][1],s=r.getValue(),o=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-ct.getNumberOfECCodeWords(t.getBarcodeECLevel());if(s.length===0){if(o<1||o>Je.MAX_CODEWORDS_IN_BARCODE)throw oe.getNotFoundInstance();r.setValue(o)}else s[0]!==o&&r.setValue(o)}static createDecoderResult(t){let i=ct.createBarcodeMatrix(t);ct.adjustCodewordCount(t,i);let r=new Array,s=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),o=[],f=new Array;for(let m=0;m<t.getBarcodeRowCount();m++)for(let E=0;E<t.getBarcodeColumnCount();E++){let S=i[m][E+1].getValue(),N=m*t.getBarcodeColumnCount()+E;S.length===0?r.push(N):S.length===1?s[N]=S[0]:(f.push(N),o.push(S))}let g=new Array(o.length);for(let m=0;m<g.length;m++)g[m]=o[m];return ct.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),s,Je.toIntArray(r),Je.toIntArray(f),g)}static createDecoderResultFromAmbiguousValues(t,i,r,s,o){let f=new Int32Array(s.length),g=100;for(;g-- >0;){for(let m=0;m<f.length;m++)i[s[m]]=o[m][f[m]];try{return ct.decodeCodewords(i,t,r)}catch(m){if(!(m instanceof G))throw m}if(f.length===0)throw G.getChecksumInstance();for(let m=0;m<f.length;m++)if(f[m]<o[m].length-1){f[m]++;break}else if(f[m]=0,m===f.length-1)throw G.getChecksumInstance()}throw G.getChecksumInstance()}static createBarcodeMatrix(t){let i=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let s=0;s<i.length;s++)for(let o=0;o<i[s].length;o++)i[s][o]=new lr;let r=0;for(let s of t.getDetectionResultColumns()){if(s!=null){for(let o of s.getCodewords())if(o!=null){let f=o.getRowNumber();if(f>=0){if(f>=i.length)continue;i[f][r].setValue(o.getValue())}}}r++}return i}static isValidBarcodeColumn(t,i){return i>=0&&i<=t.getBarcodeColumnCount()+1}static getStartColumn(t,i,r,s){let o=s?1:-1,f=null;if(ct.isValidBarcodeColumn(t,i-o)&&(f=t.getDetectionResultColumn(i-o).getCodeword(r)),f!=null)return s?f.getEndX():f.getStartX();if(f=t.getDetectionResultColumn(i).getCodewordNearby(r),f!=null)return s?f.getStartX():f.getEndX();if(ct.isValidBarcodeColumn(t,i-o)&&(f=t.getDetectionResultColumn(i-o).getCodewordNearby(r)),f!=null)return s?f.getEndX():f.getStartX();let g=0;for(;ct.isValidBarcodeColumn(t,i-o);){i-=o;for(let m of t.getDetectionResultColumn(i).getCodewords())if(m!=null)return(s?m.getEndX():m.getStartX())+o*g*(m.getEndX()-m.getStartX());g++}return s?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,i,r,s,o,f,g,m){o=ct.adjustCodewordStartColumn(t,i,r,s,o,f);let E=ct.getModuleBitCount(t,i,r,s,o,f);if(E==null)return null;let S,N=Qe.sum(E);if(s)S=o+N;else{for(let U=0;U<E.length/2;U++){let F=E[U];E[U]=E[E.length-1-U],E[E.length-1-U]=F}S=o,o=S-N}if(!ct.checkCodewordSkew(N,g,m))return null;let R=Dn.getDecodedValue(E),L=Je.getCodeword(R);return L===-1?null:new mi(o,S,ct.getCodewordBucketNumber(R),L)}static getModuleBitCount(t,i,r,s,o,f){let g=o,m=new Int32Array(8),E=0,S=s?1:-1,N=s;for(;(s?g<r:g>=i)&&E<m.length;)t.get(g,f)===N?(m[E]++,g+=S):(E++,N=!N);return E===m.length||g===(s?r:i)&&E===m.length-1?m:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,i,r,s,o,f){let g=o,m=s?-1:1;for(let E=0;E<2;E++){for(;(s?g>=i:g<r)&&s===t.get(g,f);){if(Math.abs(o-g)>ct.CODEWORD_SKEW_SIZE)return o;g+=m}m=-m,s=!s}return g}static checkCodewordSkew(t,i,r){return i-ct.CODEWORD_SKEW_SIZE<=t&&t<=r+ct.CODEWORD_SKEW_SIZE}static decodeCodewords(t,i,r){if(t.length===0)throw te.getFormatInstance();let s=1<<i+1,o=ct.correctErrors(t,r,s);ct.verifyCodewordCount(t,s);let f=le.decode(t,""+i);return f.setErrorsCorrected(o),f.setErasures(r.length),f}static correctErrors(t,i,r){if(i!=null&&i.length>r/2+ct.MAX_ERRORS||r<0||r>ct.MAX_EC_CODEWORDS)throw G.getChecksumInstance();return ct.errorCorrection.decode(t,r,i)}static verifyCodewordCount(t,i){if(t.length<4)throw te.getFormatInstance();let r=t[0];if(r>t.length)throw te.getFormatInstance();if(r===0)if(i<t.length)t[0]=t.length-i;else throw te.getFormatInstance()}static getBitCountForCodeword(t){let i=new Int32Array(8),r=0,s=i.length-1;for(;!((t&1)!==r&&(r=t&1,s--,s<0));)i[s]++,t>>=1;return i}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return ct.getCodewordBucketNumber(ct.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let i=new Jr;for(let r=0;r<t.length;r++){i.format("Row %2d: ",r);for(let s=0;s<t[r].length;s++){let o=t[r][s];o.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}i.format("%n")}return i.toString()}}ct.CODEWORD_SKEW_SIZE=2,ct.MAX_ERRORS=3,ct.MAX_EC_CODEWORDS=512,ct.errorCorrection=new Wi;class Bn{decode(t,i=null){let r=Bn.decode(t,i,!1);if(r==null||r.length===0||r[0]==null)throw oe.getNotFoundInstance();return r[0]}decodeMultiple(t,i=null){try{return Bn.decode(t,i,!0)}catch(r){throw r instanceof te||r instanceof G?oe.getNotFoundInstance():r}}static decode(t,i,r){const s=new Array,o=it.detectMultiple(t,i,r);for(const f of o.getPoints()){const g=ct.decode(o.getBits(),f[4],f[5],f[6],f[7],Bn.getMinCodewordWidth(f),Bn.getMaxCodewordWidth(f)),m=new Re(g.getText(),g.getRawBytes(),void 0,f,Se.PDF_417);m.putMetadata(ft.ERROR_CORRECTION_LEVEL,g.getECLevel());const E=g.getOther();E!=null&&m.putMetadata(ft.PDF417_EXTRA_METADATA,E),s.push(m)}return s.map(f=>f)}static getMaxWidth(t,i){return t==null||i==null?0:Math.trunc(Math.abs(t.getX()-i.getX()))}static getMinWidth(t,i){return t==null||i==null?X.MAX_VALUE:Math.trunc(Math.abs(t.getX()-i.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(Bn.getMaxWidth(t[0],t[4]),Bn.getMaxWidth(t[6],t[2])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN),Math.max(Bn.getMaxWidth(t[1],t[5]),Bn.getMaxWidth(t[7],t[3])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(Bn.getMinWidth(t[0],t[4]),Bn.getMinWidth(t[6],t[2])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN),Math.min(Bn.getMinWidth(t[1],t[5]),Bn.getMinWidth(t[7],t[3])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN)))}reset(){}}class hs extends A{}hs.kind="ReaderException";class nl{constructor(t,i){this.verbose=t===!0,i&&this.setHints(i)}decode(t,i){return i&&this.setHints(i),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const i=!h(t)&&t.get(ge.TRY_HARDER)===!0,r=h(t)?null:t.get(ge.POSSIBLE_FORMATS),s=new Array;if(!h(r)){const o=r.some(f=>f===Se.UPC_A||f===Se.UPC_E||f===Se.EAN_13||f===Se.EAN_8||f===Se.CODABAR||f===Se.CODE_39||f===Se.CODE_93||f===Se.CODE_128||f===Se.ITF||f===Se.RSS_14||f===Se.RSS_EXPANDED);o&&!i&&s.push(new pi(t,this.verbose)),r.includes(Se.QR_CODE)&&s.push(new Xi),r.includes(Se.DATA_MATRIX)&&s.push(new Yi),r.includes(Se.AZTEC)&&s.push(new Gr),r.includes(Se.PDF_417)&&s.push(new Bn),o&&i&&s.push(new pi(t,this.verbose))}s.length===0&&(i||s.push(new pi(t,this.verbose)),s.push(new Xi),s.push(new Yi),s.push(new Gr),s.push(new Bn),i&&s.push(new pi(t,this.verbose))),this.readers=s}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new hs("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(t,this.hints)}catch(r){if(r instanceof hs)continue}throw new oe("No MultiFormat Readers were able to detect the code.")}}class il extends ve{constructor(t=null,i=500){const r=new nl;r.setHints(t),super(r,i)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class Bc extends ve{constructor(t=500){super(new Bn,t)}}class Lc extends ve{constructor(t=500){super(new Xi,t)}}var no;(function(T){T[T.ERROR_CORRECTION=0]="ERROR_CORRECTION",T[T.CHARACTER_SET=1]="CHARACTER_SET",T[T.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",T[T.MIN_SIZE=3]="MIN_SIZE",T[T.MAX_SIZE=4]="MAX_SIZE",T[T.MARGIN=5]="MARGIN",T[T.PDF417_COMPACT=6]="PDF417_COMPACT",T[T.PDF417_COMPACTION=7]="PDF417_COMPACTION",T[T.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",T[T.AZTEC_LAYERS=9]="AZTEC_LAYERS",T[T.QR_VERSION=10]="QR_VERSION"})(no||(no={}));var bn=no;class Fa{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new cn(t,Int32Array.from([1])))}buildGenerator(t){const i=this.cachedGenerators;if(t>=i.length){let r=i[i.length-1];const s=this.field;for(let o=i.length;o<=t;o++){const f=r.multiply(new cn(s,Int32Array.from([1,s.exp(o-1+s.getGeneratorBase())])));i.push(f),r=f}}return i[t]}encode(t,i){if(i===0)throw new M("No error correction bytes");const r=t.length-i;if(r<=0)throw new M("No data bytes provided");const s=this.buildGenerator(i),o=new Int32Array(r);ne.arraycopy(t,0,o,0,r);let f=new cn(this.field,o);f=f.multiplyByMonomial(i,1);const m=f.divide(s)[1].getCoefficients(),E=i-m.length;for(let S=0;S<E;S++)t[r+S]=0;ne.arraycopy(m,0,t,r+E,m.length)}}class an{constructor(){}static applyMaskPenaltyRule1(t){return an.applyMaskPenaltyRule1Internal(t,!0)+an.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let i=0;const r=t.getArray(),s=t.getWidth(),o=t.getHeight();for(let f=0;f<o-1;f++){const g=r[f];for(let m=0;m<s-1;m++){const E=g[m];E===g[m+1]&&E===r[f+1][m]&&E===r[f+1][m+1]&&i++}}return an.N2*i}static applyMaskPenaltyRule3(t){let i=0;const r=t.getArray(),s=t.getWidth(),o=t.getHeight();for(let f=0;f<o;f++)for(let g=0;g<s;g++){const m=r[f];g+6<s&&m[g]===1&&m[g+1]===0&&m[g+2]===1&&m[g+3]===1&&m[g+4]===1&&m[g+5]===0&&m[g+6]===1&&(an.isWhiteHorizontal(m,g-4,g)||an.isWhiteHorizontal(m,g+7,g+11))&&i++,f+6<o&&r[f][g]===1&&r[f+1][g]===0&&r[f+2][g]===1&&r[f+3][g]===1&&r[f+4][g]===1&&r[f+5][g]===0&&r[f+6][g]===1&&(an.isWhiteVertical(r,g,f-4,f)||an.isWhiteVertical(r,g,f+7,f+11))&&i++}return i*an.N3}static isWhiteHorizontal(t,i,r){i=Math.max(i,0),r=Math.min(r,t.length);for(let s=i;s<r;s++)if(t[s]===1)return!1;return!0}static isWhiteVertical(t,i,r,s){r=Math.max(r,0),s=Math.min(s,t.length);for(let o=r;o<s;o++)if(t[o][i]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let i=0;const r=t.getArray(),s=t.getWidth(),o=t.getHeight();for(let m=0;m<o;m++){const E=r[m];for(let S=0;S<s;S++)E[S]===1&&i++}const f=t.getHeight()*t.getWidth();return Math.floor(Math.abs(i*2-f)*10/f)*an.N4}static getDataMaskBit(t,i,r){let s,o;switch(t){case 0:s=r+i&1;break;case 1:s=r&1;break;case 2:s=i%3;break;case 3:s=(r+i)%3;break;case 4:s=Math.floor(r/2)+Math.floor(i/3)&1;break;case 5:o=r*i,s=(o&1)+o%3;break;case 6:o=r*i,s=(o&1)+o%3&1;break;case 7:o=r*i,s=o%3+(r+i&1)&1;break;default:throw new M("Invalid mask pattern: "+t)}return s===0}static applyMaskPenaltyRule1Internal(t,i){let r=0;const s=i?t.getHeight():t.getWidth(),o=i?t.getWidth():t.getHeight(),f=t.getArray();for(let g=0;g<s;g++){let m=0,E=-1;for(let S=0;S<o;S++){const N=i?f[g][S]:f[S][g];N===E?m++:(m>=5&&(r+=an.N1+(m-5)),m=1,E=N)}m>=5&&(r+=an.N1+(m-5))}return r}}an.N1=3,an.N2=3,an.N3=40,an.N4=10;class gs{constructor(t,i){this.width=t,this.height=i;const r=new Array(i);for(let s=0;s!==i;s++)r[s]=new Uint8Array(t);this.bytes=r}getHeight(){return this.height}getWidth(){return this.width}get(t,i){return this.bytes[i][t]}getArray(){return this.bytes}setNumber(t,i,r){this.bytes[i][t]=r}setBoolean(t,i,r){this.bytes[i][t]=r?1:0}clear(t){for(const i of this.bytes)ce.fill(i,t)}equals(t){if(!(t instanceof gs))return!1;const i=t;if(this.width!==i.width||this.height!==i.height)return!1;for(let r=0,s=this.height;r<s;++r){const o=this.bytes[r],f=i.bytes[r];for(let g=0,m=this.width;g<m;++g)if(o[g]!==f[g])return!1}return!0}toString(){const t=new nt;for(let i=0,r=this.height;i<r;++i){const s=this.bytes[i];for(let o=0,f=this.width;o<f;++o)switch(s[o]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class Cr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new nt;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<Cr.NUM_MASK_PATTERNS}}Cr.NUM_MASK_PATTERNS=8;class zt extends A{}zt.kind="WriterException";class $e{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,i,r,s,o){$e.clearMatrix(o),$e.embedBasicPatterns(r,o),$e.embedTypeInfo(i,s,o),$e.maybeEmbedVersionInfo(r,o),$e.embedDataBits(t,s,o)}static embedBasicPatterns(t,i){$e.embedPositionDetectionPatternsAndSeparators(i),$e.embedDarkDotAtLeftBottomCorner(i),$e.maybeEmbedPositionAdjustmentPatterns(t,i),$e.embedTimingPatterns(i)}static embedTypeInfo(t,i,r){const s=new Ee;$e.makeTypeInfoBits(t,i,s);for(let o=0,f=s.getSize();o<f;++o){const g=s.get(s.getSize()-1-o),m=$e.TYPE_INFO_COORDINATES[o],E=m[0],S=m[1];if(r.setBoolean(E,S,g),o<8){const N=r.getWidth()-o-1;r.setBoolean(N,8,g)}else{const R=r.getHeight()-7+(o-8);r.setBoolean(8,R,g)}}}static maybeEmbedVersionInfo(t,i){if(t.getVersionNumber()<7)return;const r=new Ee;$e.makeVersionInfoBits(t,r);let s=17;for(let o=0;o<6;++o)for(let f=0;f<3;++f){const g=r.get(s);s--,i.setBoolean(o,i.getHeight()-11+f,g),i.setBoolean(i.getHeight()-11+f,o,g)}}static embedDataBits(t,i,r){let s=0,o=-1,f=r.getWidth()-1,g=r.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);g>=0&&g<r.getHeight();){for(let m=0;m<2;++m){const E=f-m;if(!$e.isEmpty(r.get(E,g)))continue;let S;s<t.getSize()?(S=t.get(s),++s):S=!1,i!==255&&an.getDataMaskBit(i,E,g)&&(S=!S),r.setBoolean(E,g,S)}g+=o}o=-o,g+=o,f-=2}if(s!==t.getSize())throw new zt("Not all bits consumed: "+s+"/"+t.getSize())}static findMSBSet(t){return 32-X.numberOfLeadingZeros(t)}static calculateBCHCode(t,i){if(i===0)throw new M("0 polynomial");const r=$e.findMSBSet(i);for(t<<=r-1;$e.findMSBSet(t)>=r;)t^=i<<$e.findMSBSet(t)-r;return t}static makeTypeInfoBits(t,i,r){if(!Cr.isValidMaskPattern(i))throw new zt("Invalid mask pattern");const s=t.getBits()<<3|i;r.appendBits(s,5);const o=$e.calculateBCHCode(s,$e.TYPE_INFO_POLY);r.appendBits(o,10);const f=new Ee;if(f.appendBits($e.TYPE_INFO_MASK_PATTERN,15),r.xor(f),r.getSize()!==15)throw new zt("should not happen but we got: "+r.getSize())}static makeVersionInfoBits(t,i){i.appendBits(t.getVersionNumber(),6);const r=$e.calculateBCHCode(t.getVersionNumber(),$e.VERSION_INFO_POLY);if(i.appendBits(r,12),i.getSize()!==18)throw new zt("should not happen but we got: "+i.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let i=8;i<t.getWidth()-8;++i){const r=(i+1)%2;$e.isEmpty(t.get(i,6))&&t.setNumber(i,6,r),$e.isEmpty(t.get(6,i))&&t.setNumber(6,i,r)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new zt;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,i,r){for(let s=0;s<8;++s){if(!$e.isEmpty(r.get(t+s,i)))throw new zt;r.setNumber(t+s,i,0)}}static embedVerticalSeparationPattern(t,i,r){for(let s=0;s<7;++s){if(!$e.isEmpty(r.get(t,i+s)))throw new zt;r.setNumber(t,i+s,0)}}static embedPositionAdjustmentPattern(t,i,r){for(let s=0;s<5;++s){const o=$e.POSITION_ADJUSTMENT_PATTERN[s];for(let f=0;f<5;++f)r.setNumber(t+f,i+s,o[f])}}static embedPositionDetectionPattern(t,i,r){for(let s=0;s<7;++s){const o=$e.POSITION_DETECTION_PATTERN[s];for(let f=0;f<7;++f)r.setNumber(t+f,i+s,o[f])}}static embedPositionDetectionPatternsAndSeparators(t){const i=$e.POSITION_DETECTION_PATTERN[0].length;$e.embedPositionDetectionPattern(0,0,t),$e.embedPositionDetectionPattern(t.getWidth()-i,0,t),$e.embedPositionDetectionPattern(0,t.getWidth()-i,t);const r=8;$e.embedHorizontalSeparationPattern(0,r-1,t),$e.embedHorizontalSeparationPattern(t.getWidth()-r,r-1,t),$e.embedHorizontalSeparationPattern(0,t.getWidth()-r,t);const s=7;$e.embedVerticalSeparationPattern(s,0,t),$e.embedVerticalSeparationPattern(t.getHeight()-s-1,0,t),$e.embedVerticalSeparationPattern(s,t.getHeight()-s,t)}static maybeEmbedPositionAdjustmentPatterns(t,i){if(t.getVersionNumber()<2)return;const r=t.getVersionNumber()-1,s=$e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r];for(let o=0,f=s.length;o!==f;o++){const g=s[o];if(g>=0)for(let m=0;m!==f;m++){const E=s[m];E>=0&&$e.isEmpty(i.get(E,g))&&$e.embedPositionAdjustmentPattern(E-2,g-2,i)}}}}$e.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),$e.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),$e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),$e.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),$e.VERSION_INFO_POLY=7973,$e.TYPE_INFO_POLY=1335,$e.TYPE_INFO_MASK_PATTERN=21522;class jc{constructor(t,i){this.dataBytes=t,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Zt{constructor(){}static calculateMaskPenalty(t){return an.applyMaskPenaltyRule1(t)+an.applyMaskPenaltyRule2(t)+an.applyMaskPenaltyRule3(t)+an.applyMaskPenaltyRule4(t)}static encode(t,i,r=null){let s=Zt.DEFAULT_BYTE_MODE_ENCODING;const o=r!==null&&r.get(bn.CHARACTER_SET)!==void 0;o&&(s=r.get(bn.CHARACTER_SET).toString());const f=this.chooseMode(t,s),g=new Ee;if(f===qe.BYTE&&(o||Zt.DEFAULT_BYTE_MODE_ENCODING!==s)){const we=de.getCharacterSetECIByName(s);we!==void 0&&this.appendECI(we,g)}this.appendModeInfo(f,g);const m=new Ee;this.appendBytes(t,f,m,s);let E;if(r!==null&&r.get(bn.QR_VERSION)!==void 0){const we=Number.parseInt(r.get(bn.QR_VERSION).toString(),10);E=He.getVersionForNumber(we);const Ae=this.calculateBitsNeeded(f,g,m,E);if(!this.willFit(Ae,E,i))throw new zt("Data too big for requested version")}else E=this.recommendVersion(i,f,g,m);const S=new Ee;S.appendBitArray(g);const N=f===qe.BYTE?m.getSizeInBytes():t.length;this.appendLengthInfo(N,E,f,S),S.appendBitArray(m);const R=E.getECBlocksForLevel(i),L=E.getTotalCodewords()-R.getTotalECCodewords();this.terminateBits(L,S);const U=this.interleaveWithECBytes(S,E.getTotalCodewords(),L,R.getNumBlocks()),F=new Cr;F.setECLevel(i),F.setMode(f),F.setVersion(E);const W=E.getDimensionForVersion(),se=new gs(W,W),Ie=this.chooseMaskPattern(U,i,E,se);return F.setMaskPattern(Ie),$e.buildMatrix(U,i,E,Ie,se),F.setMatrix(se),F}static recommendVersion(t,i,r,s){const o=this.calculateBitsNeeded(i,r,s,He.getVersionForNumber(1)),f=this.chooseVersion(o,t),g=this.calculateBitsNeeded(i,r,s,f);return this.chooseVersion(g,t)}static calculateBitsNeeded(t,i,r,s){return i.getSize()+t.getCharacterCountBits(s)+r.getSize()}static getAlphanumericCode(t){return t<Zt.ALPHANUMERIC_TABLE.length?Zt.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,i=null){if(de.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(t))return qe.KANJI;let r=!1,s=!1;for(let o=0,f=t.length;o<f;++o){const g=t.charAt(o);if(Zt.isDigit(g))r=!0;else if(this.getAlphanumericCode(g.charCodeAt(0))!==-1)s=!0;else return qe.BYTE}return s?qe.ALPHANUMERIC:r?qe.NUMERIC:qe.BYTE}static isOnlyDoubleByteKanji(t){let i;try{i=tt.encode(t,de.SJIS)}catch{return!1}const r=i.length;if(r%2!==0)return!1;for(let s=0;s<r;s+=2){const o=i[s]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0}static chooseMaskPattern(t,i,r,s){let o=Number.MAX_SAFE_INTEGER,f=-1;for(let g=0;g<Cr.NUM_MASK_PATTERNS;g++){$e.buildMatrix(t,i,r,g,s);let m=this.calculateMaskPenalty(s);m<o&&(o=m,f=g)}return f}static chooseVersion(t,i){for(let r=1;r<=40;r++){const s=He.getVersionForNumber(r);if(Zt.willFit(t,s,i))return s}throw new zt("Data too big")}static willFit(t,i,r){const s=i.getTotalCodewords(),f=i.getECBlocksForLevel(r).getTotalECCodewords(),g=s-f,m=(t+7)/8;return g>=m}static terminateBits(t,i){const r=t*8;if(i.getSize()>r)throw new zt("data bits cannot fit in the QR Code"+i.getSize()+" > "+r);for(let f=0;f<4&&i.getSize()<r;++f)i.appendBit(!1);const s=i.getSize()&7;if(s>0)for(let f=s;f<8;f++)i.appendBit(!1);const o=t-i.getSizeInBytes();for(let f=0;f<o;++f)i.appendBits((f&1)===0?236:17,8);if(i.getSize()!==r)throw new zt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,i,r,s,o,f){if(s>=r)throw new zt("Block ID too large");const g=t%r,m=r-g,E=Math.floor(t/r),S=E+1,N=Math.floor(i/r),R=N+1,L=E-N,U=S-R;if(L!==U)throw new zt("EC bytes mismatch");if(r!==m+g)throw new zt("RS blocks mismatch");if(t!==(N+L)*m+(R+U)*g)throw new zt("Total bytes mismatch");s<m?(o[0]=N,f[0]=L):(o[0]=R,f[0]=U)}static interleaveWithECBytes(t,i,r,s){if(t.getSizeInBytes()!==r)throw new zt("Number of bits and data bytes does not match");let o=0,f=0,g=0;const m=new Array;for(let S=0;S<s;++S){const N=new Int32Array(1),R=new Int32Array(1);Zt.getNumDataBytesAndNumECBytesForBlockID(i,r,s,S,N,R);const L=N[0],U=new Uint8Array(L);t.toBytes(8*o,U,0,L);const F=Zt.generateECBytes(U,R[0]);m.push(new jc(U,F)),f=Math.max(f,L),g=Math.max(g,F.length),o+=N[0]}if(r!==o)throw new zt("Data bytes does not match offset");const E=new Ee;for(let S=0;S<f;++S)for(const N of m){const R=N.getDataBytes();S<R.length&&E.appendBits(R[S],8)}for(let S=0;S<g;++S)for(const N of m){const R=N.getErrorCorrectionBytes();S<R.length&&E.appendBits(R[S],8)}if(i!==E.getSizeInBytes())throw new zt("Interleaving error: "+i+" and "+E.getSizeInBytes()+" differ.");return E}static generateECBytes(t,i){const r=t.length,s=new Int32Array(r+i);for(let f=0;f<r;f++)s[f]=t[f]&255;new Fa(pt.QR_CODE_FIELD_256).encode(s,i);const o=new Uint8Array(i);for(let f=0;f<i;f++)o[f]=s[r+f];return o}static appendModeInfo(t,i){i.appendBits(t.getBits(),4)}static appendLengthInfo(t,i,r,s){const o=r.getCharacterCountBits(i);if(t>=1<<o)throw new zt(t+" is bigger than "+((1<<o)-1));s.appendBits(t,o)}static appendBytes(t,i,r,s){switch(i){case qe.NUMERIC:Zt.appendNumericBytes(t,r);break;case qe.ALPHANUMERIC:Zt.appendAlphanumericBytes(t,r);break;case qe.BYTE:Zt.append8BitBytes(t,r,s);break;case qe.KANJI:Zt.appendKanjiBytes(t,r);break;default:throw new zt("Invalid mode: "+i)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const i=Zt.getDigit(t);return i>=0&&i<=9}static appendNumericBytes(t,i){const r=t.length;let s=0;for(;s<r;){const o=Zt.getDigit(t.charAt(s));if(s+2<r){const f=Zt.getDigit(t.charAt(s+1)),g=Zt.getDigit(t.charAt(s+2));i.appendBits(o*100+f*10+g,10),s+=3}else if(s+1<r){const f=Zt.getDigit(t.charAt(s+1));i.appendBits(o*10+f,7),s+=2}else i.appendBits(o,4),s++}}static appendAlphanumericBytes(t,i){const r=t.length;let s=0;for(;s<r;){const o=Zt.getAlphanumericCode(t.charCodeAt(s));if(o===-1)throw new zt;if(s+1<r){const f=Zt.getAlphanumericCode(t.charCodeAt(s+1));if(f===-1)throw new zt;i.appendBits(o*45+f,11),s+=2}else i.appendBits(o,6),s++}}static append8BitBytes(t,i,r){let s;try{s=tt.encode(t,r)}catch(o){throw new zt(o)}for(let o=0,f=s.length;o!==f;o++){const g=s[o];i.appendBits(g,8)}}static appendKanjiBytes(t,i){let r;try{r=tt.encode(t,de.SJIS)}catch(o){throw new zt(o)}const s=r.length;for(let o=0;o<s;o+=2){const f=r[o]&255,g=r[o+1]&255,m=f<<8&4294967295|g;let E=-1;if(m>=33088&&m<=40956?E=m-33088:m>=57408&&m<=60351&&(E=m-49472),E===-1)throw new zt("Invalid byte sequence");const S=(E>>8)*192+(E&255);i.appendBits(S,13)}}static appendECI(t,i){i.appendBits(qe.ECI.getBits(),4),i.appendBits(t.getValue(),8)}}Zt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Zt.DEFAULT_BYTE_MODE_ENCODING=de.UTF8.getName();class Er{write(t,i,r,s=null){if(t.length===0)throw new M("Found empty contents");if(i<0||r<0)throw new M("Requested dimensions are too small: "+i+"x"+r);let o=gt.L,f=Er.QUIET_ZONE_SIZE;s!==null&&(s.get(bn.ERROR_CORRECTION)!==void 0&&(o=gt.fromString(s.get(bn.ERROR_CORRECTION).toString())),s.get(bn.MARGIN)!==void 0&&(f=Number.parseInt(s.get(bn.MARGIN).toString(),10)));const g=Zt.encode(t,o,s);return this.renderResult(g,i,r,f)}writeToDom(t,i,r,s,o=null){typeof t=="string"&&(t=document.querySelector(t));const f=this.write(i,r,s,o);t&&t.appendChild(f)}renderResult(t,i,r,s){const o=t.getMatrix();if(o===null)throw new _e;const f=o.getWidth(),g=o.getHeight(),m=f+s*2,E=g+s*2,S=Math.max(i,m),N=Math.max(r,E),R=Math.min(Math.floor(S/m),Math.floor(N/E)),L=Math.floor((S-f*R)/2),U=Math.floor((N-g*R)/2),F=this.createSVGElement(S,N);for(let W=0,se=U;W<g;W++,se+=R)for(let Ie=0,we=L;Ie<f;Ie++,we+=R)if(o.get(Ie,W)===1){const Ae=this.createSvgRectElement(we,se,R,R);F.appendChild(Ae)}return F}createSVGElement(t,i){const r=document.createElementNS(Er.SVG_NS,"svg");return r.setAttributeNS(null,"height",t.toString()),r.setAttributeNS(null,"width",i.toString()),r}createSvgRectElement(t,i,r,s){const o=document.createElementNS(Er.SVG_NS,"rect");return o.setAttributeNS(null,"x",t.toString()),o.setAttributeNS(null,"y",i.toString()),o.setAttributeNS(null,"height",r.toString()),o.setAttributeNS(null,"width",s.toString()),o.setAttributeNS(null,"fill","#000000"),o}}Er.QUIET_ZONE_SIZE=4,Er.SVG_NS="http://www.w3.org/2000/svg";class ea{encode(t,i,r,s,o){if(t.length===0)throw new M("Found empty contents");if(i!==Se.QR_CODE)throw new M("Can only encode QR_CODE, but got "+i);if(r<0||s<0)throw new M(`Requested dimensions are too small: ${r}x${s}`);let f=gt.L,g=ea.QUIET_ZONE_SIZE;o!==null&&(o.get(bn.ERROR_CORRECTION)!==void 0&&(f=gt.fromString(o.get(bn.ERROR_CORRECTION).toString())),o.get(bn.MARGIN)!==void 0&&(g=Number.parseInt(o.get(bn.MARGIN).toString(),10)));const m=Zt.encode(t,f,o);return ea.renderResult(m,r,s,g)}static renderResult(t,i,r,s){const o=t.getMatrix();if(o===null)throw new _e;const f=o.getWidth(),g=o.getHeight(),m=f+s*2,E=g+s*2,S=Math.max(i,m),N=Math.max(r,E),R=Math.min(Math.floor(S/m),Math.floor(N/E)),L=Math.floor((S-f*R)/2),U=Math.floor((N-g*R)/2),F=new st(S,N);for(let W=0,se=U;W<g;W++,se+=R)for(let Ie=0,we=L;Ie<f;Ie++,we+=R)o.get(Ie,W)===1&&F.setRegion(we,se,R,R);return F}}ea.QUIET_ZONE_SIZE=4;class kc{encode(t,i,r,s,o){let f;switch(i){case Se.QR_CODE:f=new ea;break;default:throw new M("No encoder available for format "+i)}return f.encode(t,i,r,s,o)}}class Di extends Ge{constructor(t,i,r,s,o,f,g,m){if(super(f,g),this.yuvData=t,this.dataWidth=i,this.dataHeight=r,this.left=s,this.top=o,s+f>i||o+g>r)throw new M("Crop rectangle does not fit within image data.");m&&this.reverseHorizontal(f,g)}getRow(t,i){if(t<0||t>=this.getHeight())throw new M("Requested row is outside the image: "+t);const r=this.getWidth();(i==null||i.length<r)&&(i=new Uint8ClampedArray(r));const s=(t+this.top)*this.dataWidth+this.left;return ne.arraycopy(this.yuvData,s,i,0,r),i}getMatrix(){const t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.yuvData;const r=t*i,s=new Uint8ClampedArray(r);let o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return ne.arraycopy(this.yuvData,o,s,0,r),s;for(let f=0;f<i;f++){const g=f*t;ne.arraycopy(this.yuvData,o,s,g,t),o+=this.dataWidth}return s}isCropSupported(){return!0}crop(t,i,r,s){return new Di(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+i,r,s,!1)}renderThumbnail(){const t=this.getWidth()/Di.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/Di.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(t*i),s=this.yuvData;let o=this.top*this.dataWidth+this.left;for(let f=0;f<i;f++){const g=f*t;for(let m=0;m<t;m++){const E=s[o+m*Di.THUMBNAIL_SCALE_FACTOR]&255;r[g+m]=4278190080|E*65793}o+=this.dataWidth*Di.THUMBNAIL_SCALE_FACTOR}return r}getThumbnailWidth(){return this.getWidth()/Di.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Di.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,i){const r=this.yuvData;for(let s=0,o=this.top*this.dataWidth+this.left;s<i;s++,o+=this.dataWidth){const f=o+t/2;for(let g=o,m=o+t-1;g<f;g++,m--){const E=r[g];r[g]=r[m],r[m]=E}}}invert(){return new Z(this)}}Di.THUMBNAIL_SCALE_FACTOR=2;class io extends Ge{constructor(t,i,r,s,o,f,g){if(super(i,r),this.dataWidth=s,this.dataHeight=o,this.left=f,this.top=g,t.BYTES_PER_ELEMENT===4){const m=i*r,E=new Uint8ClampedArray(m);for(let S=0;S<m;S++){const N=t[S],R=N>>16&255,L=N>>7&510,U=N&255;E[S]=(R+L+U)/4&255}this.luminances=E}else this.luminances=t;if(s===void 0&&(this.dataWidth=i),o===void 0&&(this.dataHeight=r),f===void 0&&(this.left=0),g===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+r>this.dataHeight)throw new M("Crop rectangle does not fit within image data.")}getRow(t,i){if(t<0||t>=this.getHeight())throw new M("Requested row is outside the image: "+t);const r=this.getWidth();(i==null||i.length<r)&&(i=new Uint8ClampedArray(r));const s=(t+this.top)*this.dataWidth+this.left;return ne.arraycopy(this.luminances,s,i,0,r),i}getMatrix(){const t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.luminances;const r=t*i,s=new Uint8ClampedArray(r);let o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return ne.arraycopy(this.luminances,o,s,0,r),s;for(let f=0;f<i;f++){const g=f*t;ne.arraycopy(this.luminances,o,s,g,t),o+=this.dataWidth}return s}isCropSupported(){return!0}crop(t,i,r,s){return new io(this.luminances,r,s,this.dataWidth,this.dataHeight,this.left+t,this.top+i)}invert(){return new Z(this)}}class rl extends de{static forName(t){return this.getCharacterSetECIByName(t)}}class Pa{}Pa.ISO_8859_1=de.ISO8859_1;class ta{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class al{static singletonList(t){return[t]}static min(t,i){return t.sort(i)[0]}}class sl{constructor(t){this.previous=t}getPrevious(){return this.previous}}class Ar extends sl{constructor(t,i,r){super(t),this.value=i,this.bitCount=r}appendTo(t,i){t.appendBits(this.value,this.bitCount)}add(t,i){return new Ar(this,t,i)}addBinaryShift(t,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ar(this,t,i)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+X.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class ps extends Ar{constructor(t,i,r){super(t,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=r}appendTo(t,i){for(let r=0;r<this.binaryShiftByteCount;r++)(r===0||r===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):r===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(i[this.binaryShiftStart+r],8)}addBinaryShift(t,i){return new ps(this,t,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ol(T,t,i){return new ps(T,t,i)}function na(T,t,i){return new Ar(T,t,i)}const ia=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ur=0,xs=1,si=2,ro=3,yi=4,Ha=new Ar(null,0,0),Sr=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function zc(T){for(let t of T)ce.fill(t,-1);return T[ur][yi]=0,T[xs][yi]=0,T[xs][ur]=28,T[ro][yi]=0,T[si][yi]=0,T[si][ur]=15,T}const Va=zc(ce.createInt32Array(6,6));class bi{constructor(t,i,r,s){this.token=t,this.mode=i,this.binaryShiftByteCount=r,this.bitCount=s}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,i){let r=this.bitCount,s=this.token;if(t!==this.mode){let f=Sr[this.mode][t];s=na(s,f&65535,f>>16),r+=f>>16}let o=t===si?4:5;return s=na(s,i,o),new bi(s,t,0,r+o)}shiftAndAppend(t,i){let r=this.token,s=this.mode===si?4:5;return r=na(r,Va[this.mode][t],s),r=na(r,i,5),new bi(r,this.mode,0,this.bitCount+s+5)}addBinaryShiftChar(t){let i=this.token,r=this.mode,s=this.bitCount;if(this.mode===yi||this.mode===si){let g=Sr[r][ur];i=na(i,g&65535,g>>16),s+=g>>16,r=ur}let o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new bi(i,r,this.binaryShiftByteCount+1,s+o);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(t+1)),f}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=ol(i,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new bi(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let i=this.bitCount+(Sr[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?i+=bi.calculateBinaryShiftCost(t)-bi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(i+=10),i<=t.bitCount}toBitArray(t){let i=[];for(let s=this.endBinaryShift(t.length).token;s!==null;s=s.getPrevious())i.unshift(s);let r=new Ee;for(const s of i)s.appendTo(r,t);return r}toString(){return Me.format("%s bits=%d bytes=%d",ia[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}bi.INITIAL_STATE=new bi(Ha,ur,0,0);function ll(T){const t=Me.getCharCode(" "),i=Me.getCharCode("."),r=Me.getCharCode(",");T[ur][t]=1;const s=Me.getCharCode("Z"),o=Me.getCharCode("A");for(let R=o;R<=s;R++)T[ur][R]=R-o+2;T[xs][t]=1;const f=Me.getCharCode("z"),g=Me.getCharCode("a");for(let R=g;R<=f;R++)T[xs][R]=R-g+2;T[si][t]=1;const m=Me.getCharCode("9"),E=Me.getCharCode("0");for(let R=E;R<=m;R++)T[si][R]=R-E+2;T[si][r]=12,T[si][i]=13;const S=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let R=0;R<S.length;R++)T[ro][Me.getCharCode(S[R])]=R;const N=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let R=0;R<N.length;R++)Me.getCharCode(N[R])>0&&(T[yi][Me.getCharCode(N[R])]=R);return T}const Ga=ll(ce.createInt32Array(5,256));class wr{constructor(t){this.text=t}encode(){const t=Me.getCharCode(" "),i=Me.getCharCode(`
`);let r=al.singletonList(bi.INITIAL_STATE);for(let o=0;o<this.text.length;o++){let f,g=o+1<this.text.length?this.text[o+1]:0;switch(this.text[o]){case Me.getCharCode("\r"):f=g===i?2:0;break;case Me.getCharCode("."):f=g===t?3:0;break;case Me.getCharCode(","):f=g===t?4:0;break;case Me.getCharCode(":"):f=g===t?5:0;break;default:f=0}f>0?(r=wr.updateStateListForPair(r,o,f),o++):r=this.updateStateListForChar(r,o)}return al.min(r,(o,f)=>o.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,i){const r=[];for(let s of t)this.updateStateForChar(s,i,r);return wr.simplifyStates(r)}updateStateForChar(t,i,r){let s=this.text[i]&255,o=Ga[t.getMode()][s]>0,f=null;for(let g=0;g<=yi;g++){let m=Ga[g][s];if(m>0){if(f==null&&(f=t.endBinaryShift(i)),!o||g===t.getMode()||g===si){const E=f.latchAndAppend(g,m);r.push(E)}if(!o&&Va[t.getMode()][g]>=0){const E=f.shiftAndAppend(g,m);r.push(E)}}}if(t.getBinaryShiftByteCount()>0||Ga[t.getMode()][s]===0){let g=t.addBinaryShiftChar(i);r.push(g)}}static updateStateListForPair(t,i,r){const s=[];for(let o of t)this.updateStateForPair(o,i,r,s);return this.simplifyStates(s)}static updateStateForPair(t,i,r,s){let o=t.endBinaryShift(i);if(s.push(o.latchAndAppend(yi,r)),t.getMode()!==yi&&s.push(o.shiftAndAppend(yi,r)),r===3||r===4){let f=o.latchAndAppend(si,16-r).latchAndAppend(si,1);s.push(f)}if(t.getBinaryShiftByteCount()>0){let f=t.addBinaryShiftChar(i).addBinaryShiftChar(i+1);s.push(f)}}static simplifyStates(t){let i=[];for(const r of t){let s=!0;for(const o of i){if(o.isBetterThanOrEqualTo(r)){s=!1;break}r.isBetterThanOrEqualTo(o)&&(i=i.filter(f=>f!==o))}s&&i.push(r)}return i}}class bt{constructor(){}static encodeBytes(t){return bt.encode(t,bt.DEFAULT_EC_PERCENT,bt.DEFAULT_AZTEC_LAYERS)}static encode(t,i,r){let s=new wr(t).encode(),o=X.truncDivision(s.getSize()*i,100)+11,f=s.getSize()+o,g,m,E,S,N;if(r!==bt.DEFAULT_AZTEC_LAYERS){if(g=r<0,m=Math.abs(r),m>(g?bt.MAX_NB_BITS_COMPACT:bt.MAX_NB_BITS))throw new M(Me.format("Illegal value %s for layers",r));E=bt.totalBitsInLayer(m,g),S=bt.WORD_SIZE[m];let Ae=E-E%S;if(N=bt.stuffBits(s,S),N.getSize()+o>Ae)throw new M("Data to large for user specified layer");if(g&&N.getSize()>S*64)throw new M("Data to large for user specified layer")}else{S=0,N=null;for(let Ae=0;;Ae++){if(Ae>bt.MAX_NB_BITS)throw new M("Data too large for an Aztec code");if(g=Ae<=3,m=g?Ae+1:Ae,E=bt.totalBitsInLayer(m,g),f>E)continue;(N==null||S!==bt.WORD_SIZE[m])&&(S=bt.WORD_SIZE[m],N=bt.stuffBits(s,S));let dt=E-E%S;if(!(g&&N.getSize()>S*64)&&N.getSize()+o<=dt)break}}let R=bt.generateCheckWords(N,E,S),L=N.getSize()/S,U=bt.generateModeMessage(g,m,L),F=(g?11:14)+m*4,W=new Int32Array(F),se;if(g){se=F;for(let Ae=0;Ae<W.length;Ae++)W[Ae]=Ae}else{se=F+1+2*X.truncDivision(X.truncDivision(F,2)-1,15);let Ae=X.truncDivision(F,2),dt=X.truncDivision(se,2);for(let rt=0;rt<Ae;rt++){let fn=rt+X.truncDivision(rt,15);W[Ae-rt-1]=dt-fn-1,W[Ae+rt]=dt+fn+1}}let Ie=new st(se);for(let Ae=0,dt=0;Ae<m;Ae++){let rt=(m-Ae)*4+(g?9:12);for(let fn=0;fn<rt;fn++){let oi=fn*2;for(let Fn=0;Fn<2;Fn++)R.get(dt+oi+Fn)&&Ie.set(W[Ae*2+Fn],W[Ae*2+fn]),R.get(dt+rt*2+oi+Fn)&&Ie.set(W[Ae*2+fn],W[F-1-Ae*2-Fn]),R.get(dt+rt*4+oi+Fn)&&Ie.set(W[F-1-Ae*2-Fn],W[F-1-Ae*2-fn]),R.get(dt+rt*6+oi+Fn)&&Ie.set(W[F-1-Ae*2-fn],W[Ae*2+Fn])}dt+=rt*8}if(bt.drawModeMessage(Ie,g,se,U),g)bt.drawBullsEye(Ie,X.truncDivision(se,2),5);else{bt.drawBullsEye(Ie,X.truncDivision(se,2),7);for(let Ae=0,dt=0;Ae<X.truncDivision(F,2)-1;Ae+=15,dt+=16)for(let rt=X.truncDivision(se,2)&1;rt<se;rt+=2)Ie.set(X.truncDivision(se,2)-dt,rt),Ie.set(X.truncDivision(se,2)+dt,rt),Ie.set(rt,X.truncDivision(se,2)-dt),Ie.set(rt,X.truncDivision(se,2)+dt)}let we=new ta;return we.setCompact(g),we.setSize(se),we.setLayers(m),we.setCodeWords(L),we.setMatrix(Ie),we}static drawBullsEye(t,i,r){for(let s=0;s<r;s+=2)for(let o=i-s;o<=i+s;o++)t.set(o,i-s),t.set(o,i+s),t.set(i-s,o),t.set(i+s,o);t.set(i-r,i-r),t.set(i-r+1,i-r),t.set(i-r,i-r+1),t.set(i+r,i-r),t.set(i+r,i-r+1),t.set(i+r,i+r-1)}static generateModeMessage(t,i,r){let s=new Ee;return t?(s.appendBits(i-1,2),s.appendBits(r-1,6),s=bt.generateCheckWords(s,28,4)):(s.appendBits(i-1,5),s.appendBits(r-1,11),s=bt.generateCheckWords(s,40,4)),s}static drawModeMessage(t,i,r,s){let o=X.truncDivision(r,2);if(i)for(let f=0;f<7;f++){let g=o-3+f;s.get(f)&&t.set(g,o-5),s.get(f+7)&&t.set(o+5,g),s.get(20-f)&&t.set(g,o+5),s.get(27-f)&&t.set(o-5,g)}else for(let f=0;f<10;f++){let g=o-5+f+X.truncDivision(f,5);s.get(f)&&t.set(g,o-7),s.get(f+10)&&t.set(o+7,g),s.get(29-f)&&t.set(g,o+7),s.get(39-f)&&t.set(o-7,g)}}static generateCheckWords(t,i,r){let s=t.getSize()/r,o=new Fa(bt.getGF(r)),f=X.truncDivision(i,r),g=bt.bitsToWords(t,r,f);o.encode(g,f-s);let m=i%r,E=new Ee;E.appendBits(0,m);for(const S of Array.from(g))E.appendBits(S,r);return E}static bitsToWords(t,i,r){let s=new Int32Array(r),o,f;for(o=0,f=t.getSize()/i;o<f;o++){let g=0;for(let m=0;m<i;m++)g|=t.get(o*i+m)?1<<i-m-1:0;s[o]=g}return s}static getGF(t){switch(t){case 4:return pt.AZTEC_PARAM;case 6:return pt.AZTEC_DATA_6;case 8:return pt.AZTEC_DATA_8;case 10:return pt.AZTEC_DATA_10;case 12:return pt.AZTEC_DATA_12;default:throw new M("Unsupported word size "+t)}}static stuffBits(t,i){let r=new Ee,s=t.getSize(),o=(1<<i)-2;for(let f=0;f<s;f+=i){let g=0;for(let m=0;m<i;m++)(f+m>=s||t.get(f+m))&&(g|=1<<i-1-m);(g&o)===o?(r.appendBits(g&o,i),f--):(g&o)===0?(r.appendBits(g|1,i),f--):r.appendBits(g,i)}return r}static totalBitsInLayer(t,i){return((i?88:112)+16*t)*t}}bt.DEFAULT_EC_PERCENT=33,bt.DEFAULT_AZTEC_LAYERS=0,bt.MAX_NB_BITS=32,bt.MAX_NB_BITS_COMPACT=4,bt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ya{encode(t,i,r,s){return this.encodeWithHints(t,i,r,s,null)}encodeWithHints(t,i,r,s,o){let f=Pa.ISO_8859_1,g=bt.DEFAULT_EC_PERCENT,m=bt.DEFAULT_AZTEC_LAYERS;return o!=null&&(o.has(bn.CHARACTER_SET)&&(f=rl.forName(o.get(bn.CHARACTER_SET).toString())),o.has(bn.ERROR_CORRECTION)&&(g=X.parseInt(o.get(bn.ERROR_CORRECTION).toString())),o.has(bn.AZTEC_LAYERS)&&(m=X.parseInt(o.get(bn.AZTEC_LAYERS).toString()))),Ya.encodeLayers(t,i,r,s,f,g,m)}static encodeLayers(t,i,r,s,o,f,g){if(i!==Se.AZTEC)throw new M("Can only encode AZTEC, but got "+i);let m=bt.encode(Me.getBytes(t,o),f,g);return Ya.renderResult(m,r,s)}static renderResult(t,i,r){let s=t.getMatrix();if(s==null)throw new _e;let o=s.getWidth(),f=s.getHeight(),g=Math.max(i,o),m=Math.max(r,f),E=Math.min(g/o,m/f),S=(g-o*E)/2,N=(m-f*E)/2,R=new st(g,m);for(let L=0,U=N;L<f;L++,U+=E)for(let F=0,W=S;F<o;F++,W+=E)s.get(F,L)&&R.setRegion(W,U,E,E);return R}}u.AbstractExpandedDecoder=mn,u.ArgumentException=D,u.ArithmeticException=hi,u.AztecCode=ta,u.AztecCodeReader=Gr,u.AztecCodeWriter=Ya,u.AztecDecoder=We,u.AztecDetector=Ri,u.AztecDetectorResult=Da,u.AztecEncoder=bt,u.AztecHighLevelEncoder=wr,u.AztecPoint=On,u.BarcodeFormat=Se,u.Binarizer=ee,u.BinaryBitmap=P,u.BitArray=Ee,u.BitMatrix=st,u.BitSource=xi,u.BrowserAztecCodeReader=as,u.BrowserBarcodeReader=Oc,u.BrowserCodeReader=ve,u.BrowserDatamatrixCodeReader=ls,u.BrowserMultiFormatReader=il,u.BrowserPDF417Reader=Bc,u.BrowserQRCodeReader=Lc,u.BrowserQRCodeSvgWriter=Er,u.CharacterSetECI=de,u.ChecksumException=G,u.Code128Reader=Ne,u.Code39Reader=Lt,u.DataMatrixDecodedBitStreamParser=Gi,u.DataMatrixReader=Yi,u.DecodeHintType=ge,u.DecoderResult=Bt,u.DefaultGridSampler=La,u.DetectorResult=yr,u.EAN13Reader=Pe,u.EncodeHintType=bn,u.Exception=A,u.FormatException=te,u.GenericGF=pt,u.GenericGFPoly=cn,u.GlobalHistogramBinarizer=$,u.GridSampler=Ba,u.GridSamplerInstance=qn,u.HTMLCanvasElementLuminanceSource=be,u.HybridBinarizer=fe,u.ITFReader=V,u.IllegalArgumentException=M,u.IllegalStateException=_e,u.InvertedLuminanceSource=Z,u.LuminanceSource=Ge,u.MathUtils=Qe,u.MultiFormatOneDReader=pi,u.MultiFormatReader=nl,u.MultiFormatWriter=kc,u.NotFoundException=oe,u.OneDReader=St,u.PDF417DecodedBitStreamParser=le,u.PDF417DecoderErrorCorrection=Wi,u.PDF417Reader=Bn,u.PDF417ResultMetadata=$r,u.PerspectiveTransform=Xn,u.PlanarYUVLuminanceSource=Di,u.QRCodeByteMatrix=gs,u.QRCodeDataMask=Jn,u.QRCodeDecodedBitStreamParser=Wt,u.QRCodeDecoderErrorCorrectionLevel=gt,u.QRCodeDecoderFormatInformation=wn,u.QRCodeEncoder=Zt,u.QRCodeEncoderQRCode=Cr,u.QRCodeMaskUtil=an,u.QRCodeMatrixUtil=$e,u.QRCodeMode=qe,u.QRCodeReader=Xi,u.QRCodeVersion=He,u.QRCodeWriter=ea,u.RGBLuminanceSource=io,u.RSS14Reader=kt,u.RSSExpandedReader=Ce,u.ReaderException=hs,u.ReedSolomonDecoder=Xe,u.ReedSolomonEncoder=Fa,u.ReedSolomonException=Kt,u.Result=Re,u.ResultMetadataType=ft,u.ResultPoint=ke,u.StringUtils=Me,u.UnsupportedOperationException=De,u.VideoInputDevice=z,u.WhiteRectangleDetector=Jt,u.WriterException=zt,u.ZXingArrays=ce,u.ZXingCharset=rl,u.ZXingInteger=X,u.ZXingStandardCharsets=Pa,u.ZXingStringBuilder=nt,u.ZXingStringEncoding=tt,u.ZXingSystem=ne,u.createAbstractExpandedDecoder=Xr,Object.defineProperty(u,"__esModule",{value:!0})}))})(Go,Go.exports)),Go.exports}var rn=G2();const Y2=ng(rn),X2=tx({__proto__:null,default:Y2},[rn]);var Gh=(function(){function d(l,u,h){if(this.formatMap=new Map([[ze.QR_CODE,rn.BarcodeFormat.QR_CODE],[ze.AZTEC,rn.BarcodeFormat.AZTEC],[ze.CODABAR,rn.BarcodeFormat.CODABAR],[ze.CODE_39,rn.BarcodeFormat.CODE_39],[ze.CODE_93,rn.BarcodeFormat.CODE_93],[ze.CODE_128,rn.BarcodeFormat.CODE_128],[ze.DATA_MATRIX,rn.BarcodeFormat.DATA_MATRIX],[ze.MAXICODE,rn.BarcodeFormat.MAXICODE],[ze.ITF,rn.BarcodeFormat.ITF],[ze.EAN_13,rn.BarcodeFormat.EAN_13],[ze.EAN_8,rn.BarcodeFormat.EAN_8],[ze.PDF_417,rn.BarcodeFormat.PDF_417],[ze.RSS_14,rn.BarcodeFormat.RSS_14],[ze.RSS_EXPANDED,rn.BarcodeFormat.RSS_EXPANDED],[ze.UPC_A,rn.BarcodeFormat.UPC_A],[ze.UPC_E,rn.BarcodeFormat.UPC_E],[ze.UPC_EAN_EXTENSION,rn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!X2)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=u,this.logger=h;var C=this.createZXingFormats(l),b=new Map;b.set(rn.DecodeHintType.POSSIBLE_FORMATS,C),b.set(rn.DecodeHintType.TRY_HARDER,!1),this.hints=b}return d.prototype.decodeAsync=function(l){var u=this;return new Promise(function(h,C){try{h(u.decode(l))}catch(b){C(b)}})},d.prototype.decode=function(l){var u=new rn.MultiFormatReader(this.verbose,this.hints),h=new rn.HTMLCanvasElementLuminanceSource(l),C=new rn.BinaryBitmap(new rn.HybridBinarizer(h)),b=u.decode(C);return{text:b.text,format:Og.create(this.toHtml5QrcodeSupportedFormats(b.format)),debugData:this.createDebugData()}},d.prototype.createReverseFormatMap=function(){var l=new Map;return this.formatMap.forEach(function(u,h,C){l.set(u,h)}),l},d.prototype.toHtml5QrcodeSupportedFormats=function(l){if(!this.reverseFormatMap.has(l))throw"reverseFormatMap doesn't have ".concat(l);return this.reverseFormatMap.get(l)},d.prototype.createZXingFormats=function(l){for(var u=[],h=0,C=l;h<C.length;h++){var b=C[h];this.formatMap.has(b)?u.push(this.formatMap.get(b)):this.logger.logError("".concat(b," is not supported by")+"ZXingHtml5QrcodeShim")}return u},d.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},d})(),W2=function(d,l,u,h){function C(b){return b instanceof u?b:new u(function(w){w(b)})}return new(u||(u=Promise))(function(b,w){function _(D){try{A(h.next(D))}catch(M){w(M)}}function I(D){try{A(h.throw(D))}catch(M){w(M)}}function A(D){D.done?b(D.value):C(D.value).then(_,I)}A((h=h.apply(d,l||[])).next())})},q2=function(d,l){var u={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},h,C,b,w;return w={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function _(A){return function(D){return I([A,D])}}function I(A){if(h)throw new TypeError("Generator is already executing.");for(;w&&(w=0,A[0]&&(u=0)),u;)try{if(h=1,C&&(b=A[0]&2?C.return:A[0]?C.throw||((b=C.return)&&b.call(C),0):C.next)&&!(b=b.call(C,A[1])).done)return b;switch(C=0,b&&(A=[A[0]&2,b.value]),A[0]){case 0:case 1:b=A;break;case 4:return u.label++,{value:A[1],done:!1};case 5:u.label++,C=A[1],A=[0];continue;case 7:A=u.ops.pop(),u.trys.pop();continue;default:if(b=u.trys,!(b=b.length>0&&b[b.length-1])&&(A[0]===6||A[0]===2)){u=0;continue}if(A[0]===3&&(!b||A[1]>b[0]&&A[1]<b[3])){u.label=A[1];break}if(A[0]===6&&u.label<b[1]){u.label=b[1],b=A;break}if(b&&u.label<b[2]){u.label=b[2],u.ops.push(A);break}b[2]&&u.ops.pop(),u.trys.pop();continue}A=l.call(d,u)}catch(D){A=[6,D],C=0}finally{h=b=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},Yh=(function(){function d(l,u,h){if(this.formatMap=new Map([[ze.QR_CODE,"qr_code"],[ze.AZTEC,"aztec"],[ze.CODABAR,"codabar"],[ze.CODE_39,"code_39"],[ze.CODE_93,"code_93"],[ze.CODE_128,"code_128"],[ze.DATA_MATRIX,"data_matrix"],[ze.ITF,"itf"],[ze.EAN_13,"ean_13"],[ze.EAN_8,"ean_8"],[ze.PDF_417,"pdf417"],[ze.UPC_A,"upc_a"],[ze.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!d.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=u,this.logger=h;var C=this.createBarcodeDetectorFormats(l);if(this.detector=new BarcodeDetector(C),!this.detector)throw"BarcodeDetector detector not supported"}return d.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var l=new BarcodeDetector({formats:["qr_code"]});return typeof l<"u"},d.prototype.decodeAsync=function(l){return W2(this,void 0,void 0,function(){var u,h;return q2(this,function(C){switch(C.label){case 0:return[4,this.detector.detect(l)];case 1:if(u=C.sent(),!u||u.length===0)throw"No barcode or QR code detected.";return h=this.selectLargestBarcode(u),[2,{text:h.rawValue,format:Og.create(this.toHtml5QrcodeSupportedFormats(h.format)),debugData:this.createDebugData()}]}})})},d.prototype.selectLargestBarcode=function(l){for(var u=null,h=0,C=0,b=l;C<b.length;C++){var w=b[C],_=w.boundingBox.width*w.boundingBox.height;_>h&&(h=_,u=w)}if(!u)throw"No largest barcode found";return u},d.prototype.createBarcodeDetectorFormats=function(l){for(var u=[],h=0,C=l;h<C.length;h++){var b=C[h];this.formatMap.has(b)?u.push(this.formatMap.get(b)):this.logger.warn("".concat(b," is not supported by")+"BarcodeDetectorDelegate")}return{formats:u}},d.prototype.toHtml5QrcodeSupportedFormats=function(l){if(!this.reverseFormatMap.has(l))throw"reverseFormatMap doesn't have ".concat(l);return this.reverseFormatMap.get(l)},d.prototype.createReverseFormatMap=function(){var l=new Map;return this.formatMap.forEach(function(u,h,C){l.set(u,h)}),l},d.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},d})(),Xh=function(d,l,u,h){function C(b){return b instanceof u?b:new u(function(w){w(b)})}return new(u||(u=Promise))(function(b,w){function _(D){try{A(h.next(D))}catch(M){w(M)}}function I(D){try{A(h.throw(D))}catch(M){w(M)}}function A(D){D.done?b(D.value):C(D.value).then(_,I)}A((h=h.apply(d,l||[])).next())})},Wh=function(d,l){var u={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},h,C,b,w;return w={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function _(A){return function(D){return I([A,D])}}function I(A){if(h)throw new TypeError("Generator is already executing.");for(;w&&(w=0,A[0]&&(u=0)),u;)try{if(h=1,C&&(b=A[0]&2?C.return:A[0]?C.throw||((b=C.return)&&b.call(C),0):C.next)&&!(b=b.call(C,A[1])).done)return b;switch(C=0,b&&(A=[A[0]&2,b.value]),A[0]){case 0:case 1:b=A;break;case 4:return u.label++,{value:A[1],done:!1};case 5:u.label++,C=A[1],A=[0];continue;case 7:A=u.ops.pop(),u.trys.pop();continue;default:if(b=u.trys,!(b=b.length>0&&b[b.length-1])&&(A[0]===6||A[0]===2)){u=0;continue}if(A[0]===3&&(!b||A[1]>b[0]&&A[1]<b[3])){u.label=A[1];break}if(A[0]===6&&u.label<b[1]){u.label=b[1],b=A;break}if(b&&u.label<b[2]){u.label=b[2],u.ops.push(A);break}b[2]&&u.ops.pop(),u.trys.pop();continue}A=l.call(d,u)}catch(D){A=[6,D],C=0}finally{h=b=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},Z2=(function(){function d(l,u,h,C){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=h,u&&Yh.isSupported()?(this.primaryDecoder=new Yh(l,h,C),this.secondaryDecoder=new Gh(l,h,C)):this.primaryDecoder=new Gh(l,h,C)}return d.prototype.decodeAsync=function(l){return Xh(this,void 0,void 0,function(){var u;return Wh(this,function(h){switch(h.label){case 0:u=performance.now(),h.label=1;case 1:return h.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(l)];case 2:return[2,h.sent()];case 3:return this.possiblyLogPerformance(u),[7];case 4:return[2]}})})},d.prototype.decodeRobustlyAsync=function(l){return Xh(this,void 0,void 0,function(){var u,h;return Wh(this,function(C){switch(C.label){case 0:u=performance.now(),C.label=1;case 1:return C.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(l)];case 2:return[2,C.sent()];case 3:if(h=C.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(l)];throw h;case 4:return this.possiblyLogPerformance(u),[7];case 5:return[2]}})})},d.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},d.prototype.possiblyLogPerformance=function(l){if(this.verbose){var u=performance.now()-l;this.executionResults.push(u),this.executions++,this.possiblyFlushPerformanceReport()}},d.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var l=0,u=0,h=this.executionResults;u<h.length;u++){var C=h[u];l+=C}var b=l/this.executionResults.length;console.log("".concat(b," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},d})(),ff=(function(){var d=function(l,u){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,C){h.__proto__=C}||function(h,C){for(var b in C)Object.prototype.hasOwnProperty.call(C,b)&&(h[b]=C[b])},d(l,u)};return function(l,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");d(l,u);function h(){this.constructor=l}l.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}})(),wc=function(d,l,u,h){function C(b){return b instanceof u?b:new u(function(w){w(b)})}return new(u||(u=Promise))(function(b,w){function _(D){try{A(h.next(D))}catch(M){w(M)}}function I(D){try{A(h.throw(D))}catch(M){w(M)}}function A(D){D.done?b(D.value):C(D.value).then(_,I)}A((h=h.apply(d,l||[])).next())})},vc=function(d,l){var u={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},h,C,b,w;return w={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function _(A){return function(D){return I([A,D])}}function I(A){if(h)throw new TypeError("Generator is already executing.");for(;w&&(w=0,A[0]&&(u=0)),u;)try{if(h=1,C&&(b=A[0]&2?C.return:A[0]?C.throw||((b=C.return)&&b.call(C),0):C.next)&&!(b=b.call(C,A[1])).done)return b;switch(C=0,b&&(A=[A[0]&2,b.value]),A[0]){case 0:case 1:b=A;break;case 4:return u.label++,{value:A[1],done:!1};case 5:u.label++,C=A[1],A=[0];continue;case 7:A=u.ops.pop(),u.trys.pop();continue;default:if(b=u.trys,!(b=b.length>0&&b[b.length-1])&&(A[0]===6||A[0]===2)){u=0;continue}if(A[0]===3&&(!b||A[1]>b[0]&&A[1]<b[3])){u.label=A[1];break}if(A[0]===6&&u.label<b[1]){u.label=b[1],b=A;break}if(b&&u.label<b[2]){u.label=b[2],u.ops.push(A);break}b[2]&&u.ops.pop(),u.trys.pop();continue}A=l.call(d,u)}catch(D){A=[6,D],C=0}finally{h=b=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},Lg=(function(){function d(l,u){this.name=l,this.track=u}return d.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},d.prototype.apply=function(l){var u={};u[this.name]=l;var h={advanced:[u]};return this.track.applyConstraints(h)},d.prototype.value=function(){var l=this.track.getSettings();if(this.name in l){var u=l[this.name];return u}return null},d})(),Q2=(function(d){ff(l,d);function l(u,h){return d.call(this,u,h)||this}return l.prototype.min=function(){return this.getCapabilities().min},l.prototype.max=function(){return this.getCapabilities().max},l.prototype.step=function(){return this.getCapabilities().step},l.prototype.apply=function(u){var h={};h[this.name]=u;var C={advanced:[h]};return this.track.applyConstraints(C)},l.prototype.getCapabilities=function(){this.failIfNotSupported();var u=this.track.getCapabilities(),h=u[this.name];return{min:h.min,max:h.max,step:h.step}},l.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},l})(Lg),K2=(function(d){ff(l,d);function l(u){return d.call(this,"zoom",u)||this}return l})(Q2),J2=(function(d){ff(l,d);function l(u){return d.call(this,"torch",u)||this}return l})(Lg),$2=(function(){function d(l){this.track=l}return d.prototype.zoomFeature=function(){return new K2(this.track)},d.prototype.torchFeature=function(){return new J2(this.track)},d})(),ey=(function(){function d(l,u,h){this.isClosed=!1,this.parentElement=l,this.mediaStream=u,this.callbacks=h,this.surface=this.createVideoElement(this.parentElement.clientWidth),l.append(this.surface)}return d.prototype.createVideoElement=function(l){var u=document.createElement("video");return u.style.width="".concat(l,"px"),u.style.display="block",u.muted=!0,u.setAttribute("muted","true"),u.playsInline=!0,u},d.prototype.setupSurface=function(){var l=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var u=function(){var h=l.surface.clientWidth,C=l.surface.clientHeight;l.callbacks.onRenderSurfaceReady(h,C),l.surface.removeEventListener("playing",u)};this.surface.addEventListener("playing",u),this.surface.srcObject=this.mediaStream,this.surface.play()},d.create=function(l,u,h,C){return wc(this,void 0,void 0,function(){var b,w;return vc(this,function(_){switch(_.label){case 0:return b=new d(l,u,C),h.aspectRatio?(w={aspectRatio:h.aspectRatio},[4,b.getFirstTrackOrFail().applyConstraints(w)]):[3,2];case 1:_.sent(),_.label=2;case 2:return b.setupSurface(),[2,b]}})})},d.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},d.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},d.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},d.prototype.resume=function(l){this.failIfClosed();var u=this,h=function(){setTimeout(l,200),u.surface.removeEventListener("playing",h)};this.surface.addEventListener("playing",h),this.surface.play()},d.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},d.prototype.getSurface=function(){return this.failIfClosed(),this.surface},d.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},d.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},d.prototype.applyVideoConstraints=function(l){return wc(this,void 0,void 0,function(){return vc(this,function(u){if("aspectRatio"in l)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(l)]})})},d.prototype.close=function(){if(this.isClosed)return Promise.resolve();var l=this;return new Promise(function(u,h){var C=l.mediaStream.getVideoTracks(),b=C.length,w=0;l.mediaStream.getVideoTracks().forEach(function(_){l.mediaStream.removeTrack(_),_.stop(),++w,w>=b&&(l.isClosed=!0,l.parentElement.removeChild(l.surface),u())})})},d.prototype.getCapabilities=function(){return new $2(this.getFirstTrackOrFail())},d})(),ty=(function(){function d(l){this.mediaStream=l}return d.prototype.render=function(l,u,h){return wc(this,void 0,void 0,function(){return vc(this,function(C){return[2,ey.create(l,this.mediaStream,u,h)]})})},d.create=function(l){return wc(this,void 0,void 0,function(){var u,h;return vc(this,function(C){switch(C.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return u={audio:!1,video:l},[4,navigator.mediaDevices.getUserMedia(u)];case 1:return h=C.sent(),[2,new d(h)]}})})},d})(),qh=function(d,l,u,h){function C(b){return b instanceof u?b:new u(function(w){w(b)})}return new(u||(u=Promise))(function(b,w){function _(D){try{A(h.next(D))}catch(M){w(M)}}function I(D){try{A(h.throw(D))}catch(M){w(M)}}function A(D){D.done?b(D.value):C(D.value).then(_,I)}A((h=h.apply(d,l||[])).next())})},Zh=function(d,l){var u={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},h,C,b,w;return w={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function _(A){return function(D){return I([A,D])}}function I(A){if(h)throw new TypeError("Generator is already executing.");for(;w&&(w=0,A[0]&&(u=0)),u;)try{if(h=1,C&&(b=A[0]&2?C.return:A[0]?C.throw||((b=C.return)&&b.call(C),0):C.next)&&!(b=b.call(C,A[1])).done)return b;switch(C=0,b&&(A=[A[0]&2,b.value]),A[0]){case 0:case 1:b=A;break;case 4:return u.label++,{value:A[1],done:!1};case 5:u.label++,C=A[1],A=[0];continue;case 7:A=u.ops.pop(),u.trys.pop();continue;default:if(b=u.trys,!(b=b.length>0&&b[b.length-1])&&(A[0]===6||A[0]===2)){u=0;continue}if(A[0]===3&&(!b||A[1]>b[0]&&A[1]<b[3])){u.label=A[1];break}if(A[0]===6&&u.label<b[1]){u.label=b[1],b=A;break}if(b&&u.label<b[2]){u.label=b[2],u.ops.push(A);break}b[2]&&u.ops.pop(),u.trys.pop();continue}A=l.call(d,u)}catch(D){A=[6,D],C=0}finally{h=b=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},ny=(function(){function d(){}return d.failIfNotSupported=function(){return qh(this,void 0,void 0,function(){return Zh(this,function(l){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new d]})})},d.prototype.create=function(l){return qh(this,void 0,void 0,function(){return Zh(this,function(u){return[2,ty.create(l)]})})},d})(),iy=function(d,l,u,h){function C(b){return b instanceof u?b:new u(function(w){w(b)})}return new(u||(u=Promise))(function(b,w){function _(D){try{A(h.next(D))}catch(M){w(M)}}function I(D){try{A(h.throw(D))}catch(M){w(M)}}function A(D){D.done?b(D.value):C(D.value).then(_,I)}A((h=h.apply(d,l||[])).next())})},ry=function(d,l){var u={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},h,C,b,w;return w={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function _(A){return function(D){return I([A,D])}}function I(A){if(h)throw new TypeError("Generator is already executing.");for(;w&&(w=0,A[0]&&(u=0)),u;)try{if(h=1,C&&(b=A[0]&2?C.return:A[0]?C.throw||((b=C.return)&&b.call(C),0):C.next)&&!(b=b.call(C,A[1])).done)return b;switch(C=0,b&&(A=[A[0]&2,b.value]),A[0]){case 0:case 1:b=A;break;case 4:return u.label++,{value:A[1],done:!1};case 5:u.label++,C=A[1],A=[0];continue;case 7:A=u.ops.pop(),u.trys.pop();continue;default:if(b=u.trys,!(b=b.length>0&&b[b.length-1])&&(A[0]===6||A[0]===2)){u=0;continue}if(A[0]===3&&(!b||A[1]>b[0]&&A[1]<b[3])){u.label=A[1];break}if(A[0]===6&&u.label<b[1]){u.label=b[1],b=A;break}if(b&&u.label<b[2]){u.label=b[2],u.ops.push(A);break}b[2]&&u.ops.pop(),u.trys.pop();continue}A=l.call(d,u)}catch(D){A=[6,D],C=0}finally{h=b=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},ay=(function(){function d(){}return d.retrieve=function(){if(navigator.mediaDevices)return d.getCamerasFromMediaDevices();var l=MediaStreamTrack;return MediaStreamTrack&&l.getSources?d.getCamerasFromMediaStreamTrack():d.rejectWithError()},d.rejectWithError=function(){var l=Ys.unableToQuerySupportedDevices();return d.isHttpsOrLocalhost()||(l=Ys.insecureContextCameraQueryError()),Promise.reject(l)},d.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var l=location.host.split(":")[0];return l==="127.0.0.1"||l==="localhost"},d.getCamerasFromMediaDevices=function(){return iy(this,void 0,void 0,function(){var l,u,h,C,b,w,_;return ry(this,function(I){switch(I.label){case 0:return l=function(A){for(var D=A.getVideoTracks(),M=0,P=D;M<P.length;M++){var G=P[M];G.enabled=!1,G.stop(),A.removeTrack(G)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return u=I.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(h=I.sent(),C=[],b=0,w=h;b<w.length;b++)_=w[b],_.kind==="videoinput"&&C.push({id:_.deviceId,label:_.label});return l(u),[2,C]}})})},d.getCamerasFromMediaStreamTrack=function(){return new Promise(function(l,u){var h=function(b){for(var w=[],_=0,I=b;_<I.length;_++){var A=I[_];A.kind==="video"&&w.push({id:A.id,label:A.label})}l(w)},C=MediaStreamTrack;C.getSources(h)})},d})(),pn;(function(d){d[d.UNKNOWN=0]="UNKNOWN",d[d.NOT_STARTED=1]="NOT_STARTED",d[d.SCANNING=2]="SCANNING",d[d.PAUSED=3]="PAUSED"})(pn||(pn={}));var sy=(function(){function d(){this.state=pn.NOT_STARTED,this.onGoingTransactionNewState=pn.UNKNOWN}return d.prototype.directTransition=function(l){this.failIfTransitionOngoing(),this.validateTransition(l),this.state=l},d.prototype.startTransition=function(l){return this.failIfTransitionOngoing(),this.validateTransition(l),this.onGoingTransactionNewState=l,this},d.prototype.execute=function(){if(this.onGoingTransactionNewState===pn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var l=this.onGoingTransactionNewState;this.onGoingTransactionNewState=pn.UNKNOWN,this.directTransition(l)},d.prototype.cancel=function(){if(this.onGoingTransactionNewState===pn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=pn.UNKNOWN},d.prototype.getState=function(){return this.state},d.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==pn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},d.prototype.validateTransition=function(l){switch(this.state){case pn.UNKNOWN:throw"Transition from unknown is not allowed";case pn.NOT_STARTED:this.failIfNewStateIs(l,[pn.PAUSED]);break;case pn.SCANNING:break;case pn.PAUSED:break}},d.prototype.failIfNewStateIs=function(l,u){for(var h=0,C=u;h<C.length;h++){var b=C[h];if(l===b)throw"Cannot transition from ".concat(this.state," to ").concat(l)}},d})(),oy=(function(){function d(l){this.stateManager=l}return d.prototype.startTransition=function(l){return this.stateManager.startTransition(l)},d.prototype.directTransition=function(l){this.stateManager.directTransition(l)},d.prototype.getState=function(){return this.stateManager.getState()},d.prototype.canScanFile=function(){return this.stateManager.getState()===pn.NOT_STARTED},d.prototype.isScanning=function(){return this.stateManager.getState()!==pn.NOT_STARTED},d.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===pn.SCANNING},d.prototype.isPaused=function(){return this.stateManager.getState()===pn.PAUSED},d})(),ly=(function(){function d(){}return d.create=function(){return new oy(new sy)},d})(),cy=(function(){var d=function(l,u){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,C){h.__proto__=C}||function(h,C){for(var b in C)Object.prototype.hasOwnProperty.call(C,b)&&(h[b]=C[b])},d(l,u)};return function(l,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");d(l,u);function h(){this.constructor=l}l.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}})(),Ti=(function(d){cy(l,d);function l(){return d!==null&&d.apply(this,arguments)||this}return l.DEFAULT_WIDTH=300,l.DEFAULT_WIDTH_OFFSET=2,l.FILE_SCAN_MIN_HEIGHT=300,l.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,l.MIN_QR_BOX_SIZE=50,l.SHADED_LEFT=1,l.SHADED_RIGHT=2,l.SHADED_TOP=3,l.SHADED_BOTTOM=4,l.SHADED_REGION_ELEMENT_ID="qr-shaded-region",l.VERBOSE=!1,l.BORDER_SHADER_DEFAULT_COLOR="#ffffff",l.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",l})(er),uy=(function(){function d(l,u){this.logger=u,this.fps=Ti.SCAN_DEFAULT_FPS,l?(l.fps&&(this.fps=l.fps),this.disableFlip=l.disableFlip===!0,this.qrbox=l.qrbox,this.aspectRatio=l.aspectRatio,this.videoConstraints=l.videoConstraints):this.disableFlip=Ti.DEFAULT_DISABLE_FLIP}return d.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Bg.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},d.prototype.isShadedBoxEnabled=function(){return!pr(this.qrbox)},d.create=function(l,u){return new d(l,u)},d})(),Qh=(function(){function d(l,u){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(l))throw"HTML Element with id=".concat(l," not found");this.elementId=l,this.verbose=!1;var h;typeof u=="boolean"?this.verbose=u===!0:u&&(h=u,this.verbose=h.verbose===!0,h.experimentalFeatures),this.logger=new Dg(this.verbose),this.qrcode=new Z2(this.getSupportedFormats(u),this.getUseBarCodeDetectorIfSupported(h),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=ly.create()}return d.prototype.start=function(l,u,h,C){var b=this;if(!l)throw"cameraIdOrConfig is required";if(!h||typeof h!="function")throw"qrCodeSuccessCallback is required and should be a function.";var w;C?w=C:w=this.verbose?this.logger.log:function(){};var _=uy.create(u,this.logger);this.clearElement();var I=!1;_.videoConstraints&&(_.isMediaStreamConstraintsValid()?I=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var A=I,D=document.getElementById(this.elementId);D.clientWidth?D.clientWidth:Ti.DEFAULT_WIDTH,D.style.position="relative",this.shouldScan=!0,this.element=D;var M=this,P=this.stateManagerProxy.startTransition(pn.SCANNING);return new Promise(function(G,ee){var ne=A?_.videoConstraints:M.createVideoConstraints(l);if(!ne){P.cancel(),ee("videoConstraints should be defined");return}var J={};(!A||_.aspectRatio)&&(J.aspectRatio=_.aspectRatio);var xe={onRenderSurfaceReady:function(ce,X){M.setupUi(ce,X,_),M.isScanning=!0,M.foreverScan(_,h,w)}};ny.failIfNotSupported().then(function(ce){ce.create(ne).then(function(X){return X.render(b.element,J,xe).then(function(Ee){M.renderedCamera=Ee,P.execute(),G(null)}).catch(function(Ee){P.cancel(),ee(Ee)})}).catch(function(X){P.cancel(),ee(Ys.errorGettingUserMedia(X))})}).catch(function(ce){P.cancel(),ee(Ys.cameraStreamingNotSupported())})})},d.prototype.pause=function(l){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(pn.PAUSED),this.showPausedState(),(pr(l)||l!==!0)&&(l=!1),l&&this.renderedCamera&&this.renderedCamera.pause()},d.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var l=this,u=function(){l.stateManagerProxy.directTransition(pn.SCANNING),l.hidePausedState()};if(!this.renderedCamera.isPaused()){u();return}this.renderedCamera.resume(function(){u()})},d.prototype.getState=function(){return this.stateManagerProxy.getState()},d.prototype.stop=function(){var l=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var u=this.stateManagerProxy.startTransition(pn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var h=function(){if(l.element){var b=document.getElementById(Ti.SHADED_REGION_ELEMENT_ID);b&&l.element.removeChild(b)}},C=this;return this.renderedCamera.close().then(function(){return C.renderedCamera=null,C.element&&(C.element.removeChild(C.canvasElement),C.canvasElement=null),h(),C.qrRegion&&(C.qrRegion=null),C.context&&(C.context=null),u.execute(),C.hidePausedState(),C.isScanning=!1,Promise.resolve()})},d.prototype.scanFile=function(l,u){return this.scanFileV2(l,u).then(function(h){return h.decodedText})},d.prototype.scanFileV2=function(l,u){var h=this;if(!l||!(l instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(pr(u)&&(u=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(C,b){h.possiblyCloseLastScanImageFile(),h.clearElement(),h.lastScanImageFile=URL.createObjectURL(l);var w=new Image;w.onload=function(){var _=w.width,I=w.height,A=document.getElementById(h.elementId),D=A.clientWidth?A.clientWidth:Ti.DEFAULT_WIDTH,M=Math.max(A.clientHeight?A.clientHeight:I,Ti.FILE_SCAN_MIN_HEIGHT),P=h.computeCanvasDrawConfig(_,I,D,M);if(u){var G=h.createCanvasElement(D,M,"qr-canvas-visible");G.style.display="inline-block",A.appendChild(G);var ee=G.getContext("2d");if(!ee)throw"Unable to get 2d context from canvas";ee.canvas.width=D,ee.canvas.height=M,ee.drawImage(w,0,0,_,I,P.x,P.y,P.width,P.height)}var ne=Ti.FILE_SCAN_HIDDEN_CANVAS_PADDING,J=Math.max(w.width,P.width),xe=Math.max(w.height,P.height),ce=J+2*ne,X=xe+2*ne,Ee=h.createCanvasElement(ce,X);A.appendChild(Ee);var Fe=Ee.getContext("2d");if(!Fe)throw"Unable to get 2d context from canvas";Fe.canvas.width=ce,Fe.canvas.height=X,Fe.drawImage(w,0,0,_,I,ne,ne,J,xe);try{h.qrcode.decodeRobustlyAsync(Ee).then(function(ge){C(Ph.createFromQrcodeResult(ge))}).catch(b)}catch(ge){b("QR code parse error, error = ".concat(ge))}},w.onerror=b,w.onabort=b,w.onstalled=b,w.onsuspend=b,w.src=URL.createObjectURL(l)})},d.prototype.clear=function(){this.clearElement()},d.getCameras=function(){return ay.retrieve()},d.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},d.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},d.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},d.prototype.applyVideoConstraints=function(l){if(l){if(!Bg.isMediaStreamConstraintsValid(l,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(l)},d.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},d.prototype.getSupportedFormats=function(l){var u=[ze.QR_CODE,ze.AZTEC,ze.CODABAR,ze.CODE_39,ze.CODE_93,ze.CODE_128,ze.DATA_MATRIX,ze.MAXICODE,ze.ITF,ze.EAN_13,ze.EAN_8,ze.PDF_417,ze.RSS_14,ze.RSS_EXPANDED,ze.UPC_A,ze.UPC_E,ze.UPC_EAN_EXTENSION];if(!l||typeof l=="boolean"||!l.formatsToSupport)return u;if(!Array.isArray(l.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(l.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var h=[],C=0,b=l.formatsToSupport;C<b.length;C++){var w=b[C];P2(w)?h.push(w):this.logger.warn("Invalid format: ".concat(w," passed in config, ignoring."))}if(h.length===0)throw"None of formatsToSupport match supported values.";return h},d.prototype.getUseBarCodeDetectorIfSupported=function(l){if(pr(l))return!0;if(!pr(l.useBarCodeDetectorIfSupported))return l.useBarCodeDetectorIfSupported!==!1;if(pr(l.experimentalFeatures))return!0;var u=l.experimentalFeatures;return pr(u.useBarCodeDetectorIfSupported)?!0:u.useBarCodeDetectorIfSupported!==!1},d.prototype.validateQrboxSize=function(l,u,h){var C=this,b=h.qrbox;this.validateQrboxConfig(b);var w=this.toQrdimensions(l,u,b),_=function(A){if(A<Ti.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ti.MIN_QR_BOX_SIZE,"px.")},I=function(A){return A>l&&(C.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),A=l),A};_(w.width),_(w.height),w.width=I(w.width)},d.prototype.validateQrboxConfig=function(l){if(typeof l!="number"&&typeof l!="function"&&(l.width===void 0||l.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},d.prototype.toQrdimensions=function(l,u,h){if(typeof h=="number")return{width:h,height:h};if(typeof h=="function")try{return h(l,u)}catch(C){throw new Error("qrbox config was passed as a function but it failed with unknown error"+C)}return h},d.prototype.setupUi=function(l,u,h){h.isShadedBoxEnabled()&&this.validateQrboxSize(l,u,h);var C=pr(h.qrbox)?{width:l,height:u}:h.qrbox;this.validateQrboxConfig(C);var b=this.toQrdimensions(l,u,C);b.height>u&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var w=h.isShadedBoxEnabled()&&b.height<=u,_={x:0,y:0,width:l,height:u},I=w?this.getShadedRegionBounds(l,u,b):_,A=this.createCanvasElement(I.width,I.height),D={willReadFrequently:!0},M=A.getContext("2d",D);M.canvas.width=I.width,M.canvas.height=I.height,this.element.append(A),w&&this.possiblyInsertShadingElement(this.element,l,u,b),this.createScannerPausedUiElement(this.element),this.qrRegion=I,this.context=M,this.canvasElement=A},d.prototype.createScannerPausedUiElement=function(l){var u=document.createElement("div");u.innerText=Ys.scannerPaused(),u.style.display="none",u.style.position="absolute",u.style.top="0px",u.style.zIndex="1",u.style.background="rgba(9, 9, 9, 0.46)",u.style.color="#FFECEC",u.style.textAlign="center",u.style.width="100%",l.appendChild(u),this.scannerPausedUiElement=u},d.prototype.scanContext=function(l,u){var h=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(C){return l(C.text,Ph.createFromQrcodeResult(C)),h.possiblyUpdateShaders(!0),!0}).catch(function(C){h.possiblyUpdateShaders(!1);var b=Ys.codeParseError(C);return u(b,Mg.createFrom(b)),!1})},d.prototype.foreverScan=function(l,u,h){var C=this;if(this.shouldScan&&this.renderedCamera){var b=this.renderedCamera.getSurface(),w=b.videoWidth/b.clientWidth,_=b.videoHeight/b.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var I=this.qrRegion.width*w,A=this.qrRegion.height*_,D=this.qrRegion.x*w,M=this.qrRegion.y*_;this.context.drawImage(b,D,M,I,A,0,0,this.qrRegion.width,this.qrRegion.height);var P=function(){C.foreverScanTimeout=setTimeout(function(){C.foreverScan(l,u,h)},C.getTimeoutFps(l.fps))};this.scanContext(u,h).then(function(G){!G&&l.disableFlip!==!0?(C.context.translate(C.context.canvas.width,0),C.context.scale(-1,1),C.scanContext(u,h).finally(function(){P()})):P()}).catch(function(G){C.logger.logError("Error happend while scanning context",G),P()})}},d.prototype.createVideoConstraints=function(l){if(typeof l=="string")return{deviceId:{exact:l}};if(typeof l=="object"){var u="facingMode",h="deviceId",C={user:!0,environment:!0},b="exact",w=function(ee){if(ee in C)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(ee,"'")},_=Object.keys(l);if(_.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(_.length," keys");var I=Object.keys(l)[0];if(I!==u&&I!==h)throw"Only '".concat(u,"' and '").concat(h,"' ")+" are supported for 'cameraIdOrConfig'";if(I===u){var A=l.facingMode;if(typeof A=="string"){if(w(A))return{facingMode:A}}else if(typeof A=="object")if(b in A){if(w(A["".concat(b)]))return{facingMode:{exact:A["".concat(b)]}}}else throw"'facingMode' should be string or object with"+" ".concat(b," as key.");else{var D=typeof A;throw"Invalid type of 'facingMode' = ".concat(D)}}else{var M=l.deviceId;if(typeof M=="string")return{deviceId:M};if(typeof M=="object"){if(b in M)return{deviceId:{exact:M["".concat(b)]}};throw"'deviceId' should be string or object with"+" ".concat(b," as key.")}else{var P=typeof M;throw"Invalid type of 'deviceId' = ".concat(P)}}}var G=typeof l;throw"Invalid type of 'cameraIdOrConfig' = ".concat(G)},d.prototype.computeCanvasDrawConfig=function(l,u,h,C){if(l<=h&&u<=C){var b=(h-l)/2,w=(C-u)/2;return{x:b,y:w,width:l,height:u}}else{var _=l,I=u;return l>h&&(u=h/l*u,l=h),u>C&&(l=C/u*l,u=C),this.logger.log("Image downsampled from "+"".concat(_,"X").concat(I)+" to ".concat(l,"X").concat(u,".")),this.computeCanvasDrawConfig(l,u,h,C)}},d.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var l=document.getElementById(this.elementId);l&&(l.innerHTML="")},d.prototype.possiblyUpdateShaders=function(l){this.qrMatch!==l&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(u){u.style.backgroundColor=l?Ti.BORDER_SHADER_MATCH_COLOR:Ti.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=l)},d.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},d.prototype.createCanvasElement=function(l,u,h){var C=l,b=u,w=document.createElement("canvas");return w.style.width="".concat(C,"px"),w.style.height="".concat(b,"px"),w.style.display="none",w.id=pr(h)?"qr-canvas":h,w},d.prototype.getShadedRegionBounds=function(l,u,h){if(h.width>l||h.height>u)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(l-h.width)/2,y:(u-h.height)/2,width:h.width,height:h.height}},d.prototype.possiblyInsertShadingElement=function(l,u,h,C){if(!(u-C.width<1||h-C.height<1)){var b=document.createElement("div");b.style.position="absolute";var w=(u-C.width)/2,_=(h-C.height)/2;if(b.style.borderLeft="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),b.style.borderRight="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),b.style.borderTop="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),b.style.borderBottom="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),b.style.boxSizing="border-box",b.style.top="0px",b.style.bottom="0px",b.style.left="0px",b.style.right="0px",b.id="".concat(Ti.SHADED_REGION_ELEMENT_ID),u-C.width<11||h-C.height<11)this.hasBorderShaders=!1;else{var I=5,A=40;this.insertShaderBorders(b,A,I,-I,null,0,!0),this.insertShaderBorders(b,A,I,-I,null,0,!1),this.insertShaderBorders(b,A,I,null,-I,0,!0),this.insertShaderBorders(b,A,I,null,-I,0,!1),this.insertShaderBorders(b,I,A+I,-I,null,-I,!0),this.insertShaderBorders(b,I,A+I,null,-I,-I,!0),this.insertShaderBorders(b,I,A+I,-I,null,-I,!1),this.insertShaderBorders(b,I,A+I,null,-I,-I,!1),this.hasBorderShaders=!0}l.append(b)}},d.prototype.insertShaderBorders=function(l,u,h,C,b,w,_){var I=document.createElement("div");I.style.position="absolute",I.style.backgroundColor=Ti.BORDER_SHADER_DEFAULT_COLOR,I.style.width="".concat(u,"px"),I.style.height="".concat(h,"px"),C!==null&&(I.style.top="".concat(C,"px")),b!==null&&(I.style.bottom="".concat(b,"px")),_?I.style.left="".concat(w,"px"):I.style.right="".concat(w,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(I),l.appendChild(I)},d.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},d.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},d.prototype.getTimeoutFps=function(l){return 1e3/l},d})(),hf="data:image/svg+xml;base64,",dy=hf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",fy=hf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Kh=hf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",hy="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Jh=(function(){function d(){}return d.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},d})(),gy=(function(){function d(){this.data=Jh.createDefault();var l=localStorage.getItem(d.LOCAL_STORAGE_KEY);l?this.data=JSON.parse(l):this.reset()}return d.prototype.hasCameraPermissions=function(){return this.data.hasPermission},d.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},d.prototype.setHasPermission=function(l){this.data.hasPermission=l,this.flush()},d.prototype.setLastUsedCameraId=function(l){this.data.lastUsedCameraId=l,this.flush()},d.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},d.prototype.reset=function(){this.data=Jh.createDefault(),this.flush()},d.prototype.flush=function(){localStorage.setItem(d.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},d.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",d})(),py=(function(){function d(){this.infoDiv=document.createElement("div")}return d.prototype.renderInto=function(l){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Hh.poweredBy();var u=document.createElement("a");u.innerText="ScanApp",u.href="https://scanapp.org",u.target="new",u.style.color="white",this.infoDiv.appendChild(u);var h=document.createElement("br"),C=document.createElement("br");this.infoDiv.appendChild(h),this.infoDiv.appendChild(C);var b=document.createElement("a");b.innerText=Hh.reportIssues(),b.href="https://github.com/mebjas/html5-qrcode/issues",b.target="new",b.style.color="white",this.infoDiv.appendChild(b),l.appendChild(this.infoDiv)},d.prototype.show=function(){this.infoDiv.style.display="block"},d.prototype.hide=function(){this.infoDiv.style.display="none"},d})(),xy=(function(){function d(l,u){this.isShowingInfoIcon=!0,this.onTapIn=l,this.onTapOut=u,this.infoIcon=document.createElement("img")}return d.prototype.renderInto=function(l){var u=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Kh,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(h){return u.onHoverIn()},this.infoIcon.onmouseout=function(h){return u.onHoverOut()},this.infoIcon.onclick=function(h){return u.onClick()},l.appendChild(this.infoIcon)},d.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},d.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},d.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=hy,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Kh,this.infoIcon.style.opacity="0.6")},d})(),my=(function(){function d(){var l=this;this.infoDiv=new py,this.infoIcon=new xy(function(){l.infoDiv.show()},function(){l.infoDiv.hide()})}return d.prototype.renderInto=function(l){this.infoDiv.renderInto(l),this.infoIcon.renderInto(l)},d})(),yy=function(d,l,u,h){function C(b){return b instanceof u?b:new u(function(w){w(b)})}return new(u||(u=Promise))(function(b,w){function _(D){try{A(h.next(D))}catch(M){w(M)}}function I(D){try{A(h.throw(D))}catch(M){w(M)}}function A(D){D.done?b(D.value):C(D.value).then(_,I)}A((h=h.apply(d,l||[])).next())})},by=function(d,l){var u={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},h,C,b,w;return w={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function _(A){return function(D){return I([A,D])}}function I(A){if(h)throw new TypeError("Generator is already executing.");for(;w&&(w=0,A[0]&&(u=0)),u;)try{if(h=1,C&&(b=A[0]&2?C.return:A[0]?C.throw||((b=C.return)&&b.call(C),0):C.next)&&!(b=b.call(C,A[1])).done)return b;switch(C=0,b&&(A=[A[0]&2,b.value]),A[0]){case 0:case 1:b=A;break;case 4:return u.label++,{value:A[1],done:!1};case 5:u.label++,C=A[1],A=[0];continue;case 7:A=u.ops.pop(),u.trys.pop();continue;default:if(b=u.trys,!(b=b.length>0&&b[b.length-1])&&(A[0]===6||A[0]===2)){u=0;continue}if(A[0]===3&&(!b||A[1]>b[0]&&A[1]<b[3])){u.label=A[1];break}if(A[0]===6&&u.label<b[1]){u.label=b[1],b=A;break}if(b&&u.label<b[2]){u.label=b[2],u.ops.push(A);break}b[2]&&u.ops.pop(),u.trys.pop();continue}A=l.call(d,u)}catch(D){A=[6,D],C=0}finally{h=b=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},$h=(function(){function d(){}return d.hasPermissions=function(){return yy(this,void 0,void 0,function(){var l,u,h,C;return by(this,function(b){switch(b.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(l=b.sent(),u=0,h=l;u<h.length;u++)if(C=h[u],C.kind==="videoinput"&&C.label)return[2,!0];return[2,!1]}})})},d})(),Na=(function(){function d(l){this.supportedScanTypes=this.validateAndReturnScanTypes(l)}return d.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},d.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},d.prototype.isCameraScanRequired=function(){for(var l=0,u=this.supportedScanTypes;l<u.length;l++){var h=u[l];if(d.isCameraScanType(h))return!0}return!1},d.isCameraScanType=function(l){return l===_a.SCAN_TYPE_CAMERA},d.isFileScanType=function(l){return l===_a.SCAN_TYPE_FILE},d.prototype.validateAndReturnScanTypes=function(l){if(!l||l.length===0)return er.DEFAULT_SUPPORTED_SCAN_TYPE;var u=er.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(l.length>u)throw"Max ".concat(u," values expected for ")+"supportedScanTypes";for(var h=0,C=l;h<C.length;h++){var b=C[h];if(!er.DEFAULT_SUPPORTED_SCAN_TYPE.includes(b))throw"Unsupported scan type ".concat(b)}return l},d})(),Ii=(function(){function d(){}return d.ALL_ELEMENT_CLASS="html5-qrcode-element",d.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",d.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",d.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",d.TORCH_BUTTON_ID="html5-qrcode-button-torch",d.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",d.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",d.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",d.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",d.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",d.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",d})(),Pr=(function(){function d(){}return d.createElement=function(l,u){var h=document.createElement(l);return h.id=u,h.classList.add(Ii.ALL_ELEMENT_CLASS),l==="button"&&h.setAttribute("type","button"),h},d})(),jg=function(d,l,u,h){function C(b){return b instanceof u?b:new u(function(w){w(b)})}return new(u||(u=Promise))(function(b,w){function _(D){try{A(h.next(D))}catch(M){w(M)}}function I(D){try{A(h.throw(D))}catch(M){w(M)}}function A(D){D.done?b(D.value):C(D.value).then(_,I)}A((h=h.apply(d,l||[])).next())})},kg=function(d,l){var u={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},h,C,b,w;return w={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function _(A){return function(D){return I([A,D])}}function I(A){if(h)throw new TypeError("Generator is already executing.");for(;w&&(w=0,A[0]&&(u=0)),u;)try{if(h=1,C&&(b=A[0]&2?C.return:A[0]?C.throw||((b=C.return)&&b.call(C),0):C.next)&&!(b=b.call(C,A[1])).done)return b;switch(C=0,b&&(A=[A[0]&2,b.value]),A[0]){case 0:case 1:b=A;break;case 4:return u.label++,{value:A[1],done:!1};case 5:u.label++,C=A[1],A=[0];continue;case 7:A=u.ops.pop(),u.trys.pop();continue;default:if(b=u.trys,!(b=b.length>0&&b[b.length-1])&&(A[0]===6||A[0]===2)){u=0;continue}if(A[0]===3&&(!b||A[1]>b[0]&&A[1]<b[3])){u.label=A[1];break}if(A[0]===6&&u.label<b[1]){u.label=b[1],b=A;break}if(b&&u.label<b[2]){u.label=b[2],u.ops.push(A);break}b[2]&&u.ops.pop(),u.trys.pop();continue}A=l.call(d,u)}catch(D){A=[6,D],C=0}finally{h=b=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},eg=(function(){function d(l,u,h){this.isTorchOn=!1,this.torchCapability=l,this.buttonController=u,this.onTorchActionFailureCallback=h}return d.prototype.isTorchEnabled=function(){return this.isTorchOn},d.prototype.flipState=function(){return jg(this,void 0,void 0,function(){var l,u;return kg(this,function(h){switch(h.label){case 0:this.buttonController.disable(),l=!this.isTorchOn,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this.torchCapability.apply(l)];case 2:return h.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),l),[3,4];case 3:return u=h.sent(),this.propagateFailure(l,u),this.buttonController.enable(),[3,4];case 4:return[2]}})})},d.prototype.updateUiBasedOnLatestSettings=function(l,u){l===u?(this.buttonController.setText(u?Vt.torchOffButton():Vt.torchOnButton()),this.isTorchOn=u):this.propagateFailure(u),this.buttonController.enable()},d.prototype.propagateFailure=function(l,u){var h=l?Vt.torchOnFailedMessage():Vt.torchOffFailedMessage();u&&(h+="; Error = "+u),this.onTorchActionFailureCallback(h)},d.prototype.reset=function(){this.isTorchOn=!1},d})(),Cy=(function(){function d(l,u){this.onTorchActionFailureCallback=u,this.torchButton=Pr.createElement("button",Ii.TORCH_BUTTON_ID),this.torchController=new eg(l,this,u)}return d.prototype.render=function(l,u){var h=this;this.torchButton.innerText=Vt.torchOnButton(),this.torchButton.style.display=u.display,this.torchButton.style.marginLeft=u.marginLeft;var C=this;this.torchButton.addEventListener("click",function(b){return jg(h,void 0,void 0,function(){return kg(this,function(w){switch(w.label){case 0:return[4,C.torchController.flipState()];case 1:return w.sent(),C.torchController.isTorchEnabled()?(C.torchButton.classList.remove(Ii.TORCH_BUTTON_CLASS_TORCH_OFF),C.torchButton.classList.add(Ii.TORCH_BUTTON_CLASS_TORCH_ON)):(C.torchButton.classList.remove(Ii.TORCH_BUTTON_CLASS_TORCH_ON),C.torchButton.classList.add(Ii.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),l.appendChild(this.torchButton)},d.prototype.updateTorchCapability=function(l){this.torchController=new eg(l,this,this.onTorchActionFailureCallback)},d.prototype.getTorchButton=function(){return this.torchButton},d.prototype.hide=function(){this.torchButton.style.display="none"},d.prototype.show=function(){this.torchButton.style.display="inline-block"},d.prototype.disable=function(){this.torchButton.disabled=!0},d.prototype.enable=function(){this.torchButton.disabled=!1},d.prototype.setText=function(l){this.torchButton.innerText=l},d.prototype.reset=function(){this.torchButton.innerText=Vt.torchOnButton(),this.torchController.reset()},d.create=function(l,u,h,C){var b=new d(u,C);return b.render(l,h),b},d})(),Ey=(function(){function d(l,u,h){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=u?"block":"none",l.appendChild(this.fileBasedScanRegion);var C=document.createElement("label");C.setAttribute("for",this.getFileScanInputId()),C.style.display="inline-block",this.fileBasedScanRegion.appendChild(C),this.fileSelectionButton=Pr.createElement("button",Ii.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(_){C.click()}),C.append(this.fileSelectionButton),this.fileScanInput=Pr.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",C.appendChild(this.fileScanInput);var b=this;this.fileScanInput.addEventListener("change",function(_){if(!(_==null||_.target==null)){var I=_.target;if(!(I.files&&I.files.length===0)){var A=I.files,D=A[0],M=D.name;b.setImageNameToButton(M),h(D)}}});var w=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(w),this.fileBasedScanRegion.addEventListener("dragenter",function(_){b.fileBasedScanRegion.style.border=b.fileBasedScanRegionActiveBorder(),_.stopPropagation(),_.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(_){b.fileBasedScanRegion.style.border=b.fileBasedScanRegionDefaultBorder(),_.stopPropagation(),_.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(_){b.fileBasedScanRegion.style.border=b.fileBasedScanRegionActiveBorder(),_.stopPropagation(),_.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(_){_.stopPropagation(),_.preventDefault(),b.fileBasedScanRegion.style.border=b.fileBasedScanRegionDefaultBorder();var I=_.dataTransfer;if(I){var A=I.files;if(!A||A.length===0)return;for(var D=!1,M=0;M<A.length;++M){var P=A.item(M);if(P){var G=/image.*/;if(P.type.match(G)){D=!0;var ee=P.name;b.setImageNameToButton(ee),h(P),w.innerText=Vt.dragAndDropMessage();break}}}D||(w.innerText=Vt.dragAndDropMessageOnlyImages())}})}return d.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},d.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},d.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},d.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},d.prototype.createFileBasedScanRegion=function(){var l=document.createElement("div");return l.style.textAlign="center",l.style.margin="auto",l.style.width="80%",l.style.maxWidth="600px",l.style.border=this.fileBasedScanRegionDefaultBorder(),l.style.padding="10px",l.style.marginBottom="10px",l},d.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},d.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},d.prototype.createDragAndDropMessage=function(){var l=document.createElement("div");return l.innerText=Vt.dragAndDropMessage(),l.style.fontWeight="400",l},d.prototype.setImageNameToButton=function(l){var u=20;if(l.length>u){var h=l.substring(0,8),C=l.length,b=l.substring(C-8,C);l="".concat(h,"....").concat(b)}var w=Vt.fileSelectionChooseAnother()+" - "+l;this.fileSelectionButton.innerText=w},d.prototype.setInitialValueToButton=function(){var l=Vt.fileSelectionChooseImage()+" - "+Vt.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=l},d.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},d.create=function(l,u,h){var C=new d(l,u,h);return C},d})(),Ay=(function(){function d(l){this.selectElement=Pr.createElement("select",Ii.CAMERA_SELECTION_SELECT_ID),this.cameras=l,this.options=[]}return d.prototype.render=function(l){var u=document.createElement("span");u.style.marginRight="10px";var h=this.cameras.length;if(h===0)throw new Error("No cameras found");if(h===1)u.style.display="none";else{var C=Vt.selectCamera();u.innerText="".concat(C," (").concat(this.cameras.length,")  ")}for(var b=1,w=0,_=this.cameras;w<_.length;w++){var I=_[w],A=I.id,D=I.label==null?A:I.label;(!D||D==="")&&(D=[Vt.anonymousCameraPrefix(),b++].join(" "));var M=document.createElement("option");M.value=A,M.innerText=D,this.options.push(M),this.selectElement.appendChild(M)}u.appendChild(this.selectElement),l.appendChild(u)},d.prototype.disable=function(){this.selectElement.disabled=!0},d.prototype.isDisabled=function(){return this.selectElement.disabled===!0},d.prototype.enable=function(){this.selectElement.disabled=!1},d.prototype.getValue=function(){return this.selectElement.value},d.prototype.hasValue=function(l){for(var u=0,h=this.options;u<h.length;u++){var C=h[u];if(C.value===l)return!0}return!1},d.prototype.setValue=function(l){if(!this.hasValue(l))throw new Error("".concat(l," is not present in the camera list."));this.selectElement.value=l},d.prototype.hasSingleItem=function(){return this.cameras.length===1},d.prototype.numCameras=function(){return this.cameras.length},d.create=function(l,u){var h=new d(u);return h.render(l),h},d})(),Sy=(function(){function d(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Pr.createElement("input",Ii.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return d.prototype.render=function(l,u){this.zoomElementContainer.style.display=u?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",l.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var h=Vt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(h),this.rangeText.style.marginRight="10px";var C=this;this.rangeInput.addEventListener("input",function(){return C.onValueChange()}),this.rangeInput.addEventListener("change",function(){return C.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},d.prototype.onValueChange=function(){var l=Vt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(l),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},d.prototype.setValues=function(l,u,h,C){this.rangeInput.min=l.toString(),this.rangeInput.max=u.toString(),this.rangeInput.step=C.toString(),this.rangeInput.value=h.toString(),this.onValueChange()},d.prototype.show=function(){this.zoomElementContainer.style.display="block"},d.prototype.hide=function(){this.zoomElementContainer.style.display="none"},d.prototype.setOnCameraZoomValueChangeCallback=function(l){this.onChangeCallback=l},d.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},d.create=function(l,u){var h=new d;return h.render(l,u),h},d})(),Ni;(function(d){d[d.STATUS_DEFAULT=0]="STATUS_DEFAULT",d[d.STATUS_SUCCESS=1]="STATUS_SUCCESS",d[d.STATUS_WARNING=2]="STATUS_WARNING",d[d.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Ni||(Ni={}));function wy(d){return{fps:d.fps,qrbox:d.qrbox,aspectRatio:d.aspectRatio,disableFlip:d.disableFlip,videoConstraints:d.videoConstraints}}function vy(d,l){return{formatsToSupport:d.formatsToSupport,useBarCodeDetectorIfSupported:d.useBarCodeDetectorIfSupported,experimentalFeatures:d.experimentalFeatures,verbose:l}}var Ty=(function(){function d(l,u,h){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=l,this.config=this.createConfig(u),this.verbose=h===!0,!document.getElementById(l))throw"HTML Element with id=".concat(l," not found");this.scanTypeSelector=new Na(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Dg(this.verbose),this.persistedDataManager=new gy,u.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return d.prototype.render=function(l,u){var h=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(b,w){if(l)l(b,w);else{if(h.lastMatchFound===b)return;h.lastMatchFound=b,h.setHeaderMessage(Vt.lastMatch(b),Ni.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(b,w){u&&u(b,w)};var C=document.getElementById(this.elementId);if(!C)throw"HTML Element with id=".concat(this.elementId," not found");C.innerHTML="",this.createBasicLayout(C),this.html5Qrcode=new Qh(this.getScanRegionId(),vy(this.config,this.verbose))},d.prototype.pause=function(l){(pr(l)||l!==!0)&&(l=!1),this.getHtml5QrcodeOrFail().pause(l)},d.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},d.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},d.prototype.clear=function(){var l=this,u=function(){var h=document.getElementById(l.elementId);h&&(h.innerHTML="",l.resetBasicLayout(h))};return this.html5Qrcode?new Promise(function(h,C){if(!l.html5Qrcode){h();return}l.html5Qrcode.isScanning?l.html5Qrcode.stop().then(function(b){if(!l.html5Qrcode){h();return}l.html5Qrcode.clear(),u(),h()}).catch(function(b){l.verbose&&l.logger.logError("Unable to stop qrcode scanner",b),C(b)}):(l.html5Qrcode.clear(),u(),h())}):Promise.resolve()},d.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},d.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},d.prototype.applyVideoConstraints=function(l){return this.getHtml5QrcodeOrFail().applyVideoConstraints(l)},d.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},d.prototype.createConfig=function(l){return l?(l.fps||(l.fps=er.SCAN_DEFAULT_FPS),l.rememberLastUsedCamera!==!er.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(l.rememberLastUsedCamera=er.DEFAULT_REMEMBER_LAST_CAMERA_USED),l.supportedScanTypes||(l.supportedScanTypes=er.DEFAULT_SUPPORTED_SCAN_TYPE),l):{fps:er.SCAN_DEFAULT_FPS,rememberLastUsedCamera:er.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:er.DEFAULT_SUPPORTED_SCAN_TYPE}},d.prototype.createBasicLayout=function(l){l.style.position="relative",l.style.padding="0px",l.style.border="1px solid silver",this.createHeader(l);var u=document.createElement("div"),h=this.getScanRegionId();u.id=h,u.style.width="100%",u.style.minHeight="100px",u.style.textAlign="center",l.appendChild(u),Na.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var C=document.createElement("div"),b=this.getDashboardId();C.id=b,C.style.width="100%",l.appendChild(C),this.setupInitialDashboard(C)},d.prototype.resetBasicLayout=function(l){l.style.border="none"},d.prototype.setupInitialDashboard=function(l){this.createSection(l),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},d.prototype.createHeader=function(l){var u=document.createElement("div");u.style.textAlign="left",u.style.margin="0px",l.appendChild(u);var h=new my;h.renderInto(u);var C=document.createElement("div");C.id=this.getHeaderMessageContainerId(),C.style.display="none",C.style.textAlign="center",C.style.fontSize="14px",C.style.padding="2px 10px",C.style.margin="4px",C.style.borderTop="1px solid #f6f6f6",u.appendChild(C)},d.prototype.createSection=function(l){var u=document.createElement("div");u.id=this.getDashboardSectionId(),u.style.width="100%",u.style.padding="10px 0px 10px 0px",u.style.textAlign="left",l.appendChild(u)},d.prototype.createCameraListUi=function(l,u,h){var C=this;C.showHideScanTypeSwapLink(!1),C.setHeaderMessage(Vt.cameraPermissionRequesting());var b=function(){h||C.createPermissionButton(l,u)};Qh.getCameras().then(function(w){C.persistedDataManager.setHasPermission(!0),C.showHideScanTypeSwapLink(!0),C.resetHeaderMessage(),w&&w.length>0?(l.removeChild(u),C.renderCameraSelection(w)):(C.setHeaderMessage(Vt.noCameraFound(),Ni.STATUS_WARNING),b())}).catch(function(w){C.persistedDataManager.setHasPermission(!1),h?h.disabled=!1:b(),C.setHeaderMessage(w,Ni.STATUS_WARNING),C.showHideScanTypeSwapLink(!0)})},d.prototype.createPermissionButton=function(l,u){var h=this,C=Pr.createElement("button",this.getCameraPermissionButtonId());C.innerText=Vt.cameraPermissionTitle(),C.addEventListener("click",function(){C.disabled=!0,h.createCameraListUi(l,u,C)}),u.appendChild(C)},d.prototype.createPermissionsUi=function(l,u){var h=this;if(Na.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){$h.hasPermissions().then(function(C){C?h.createCameraListUi(l,u):(h.persistedDataManager.setHasPermission(!1),h.createPermissionButton(l,u))}).catch(function(C){h.persistedDataManager.setHasPermission(!1),h.createPermissionButton(l,u)});return}this.createPermissionButton(l,u)},d.prototype.createSectionControlPanel=function(){var l=document.getElementById(this.getDashboardSectionId()),u=document.createElement("div");l.appendChild(u);var h=document.createElement("div");h.id=this.getDashboardSectionCameraScanRegionId(),h.style.display=Na.isCameraScanType(this.currentScanType)?"block":"none",u.appendChild(h);var C=document.createElement("div");C.style.textAlign="center",h.appendChild(C),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(h,C),this.renderFileScanUi(u)},d.prototype.renderFileScanUi=function(l){var u=Na.isFileScanType(this.currentScanType),h=this,C=function(b){if(!h.html5Qrcode)throw"html5Qrcode not defined";Na.isFileScanType(h.currentScanType)&&(h.setHeaderMessage(Vt.loadingImage()),h.html5Qrcode.scanFileV2(b,!0).then(function(w){h.resetHeaderMessage(),h.qrCodeSuccessCallback(w.decodedText,w)}).catch(function(w){h.setHeaderMessage(w,Ni.STATUS_WARNING),h.qrCodeErrorCallback(w,Mg.createFrom(w))}))};this.fileSelectionUi=Ey.create(l,u,C)},d.prototype.renderCameraSelection=function(l){var u=this,h=this,C=document.getElementById(this.getDashboardSectionCameraScanRegionId());C.style.textAlign="center";var b=Sy.create(C,!1),w=function(ne){var J=ne.zoomFeature();if(J.isSupported()){b.setOnCameraZoomValueChangeCallback(function(ce){J.apply(ce)});var xe=1;u.config.defaultZoomValueIfSupported&&(xe=u.config.defaultZoomValueIfSupported),xe=H2(xe,J.min(),J.max()),b.setValues(J.min(),J.max(),xe,J.step()),b.show()}},_=Ay.create(C,l),I=document.createElement("span"),A=Pr.createElement("button",Ii.CAMERA_START_BUTTON_ID);A.innerText=Vt.scanButtonStartScanningText(),I.appendChild(A);var D=Pr.createElement("button",Ii.CAMERA_STOP_BUTTON_ID);D.innerText=Vt.scanButtonStopScanningText(),D.style.display="none",D.disabled=!0,I.appendChild(D);var M,P=function(ne){if(!ne.torchFeature().isSupported()){M&&M.hide();return}M?M.updateTorchCapability(ne.torchFeature()):M=Cy.create(I,ne.torchFeature(),{display:"none",marginLeft:"5px"},function(J){h.setHeaderMessage(J,Ni.STATUS_WARNING)}),M.show()};C.appendChild(I);var G=function(ne){ne||(A.style.display="none"),A.innerText=Vt.scanButtonStartScanningText(),A.style.opacity="1",A.disabled=!1,ne&&(A.style.display="inline-block")};if(A.addEventListener("click",function(ne){A.innerText=Vt.scanButtonScanningStarting(),_.disable(),A.disabled=!0,A.style.opacity="0.5",u.scanTypeSelector.hasMoreThanOneScanType()&&h.showHideScanTypeSwapLink(!1),h.resetHeaderMessage();var J=_.getValue();h.persistedDataManager.setLastUsedCameraId(J),h.html5Qrcode.start(J,wy(h.config),h.qrCodeSuccessCallback,h.qrCodeErrorCallback).then(function(xe){D.disabled=!1,D.style.display="inline-block",G(!1);var ce=h.html5Qrcode.getRunningTrackCameraCapabilities();u.config.showTorchButtonIfSupported===!0&&P(ce),u.config.showZoomSliderIfSupported===!0&&w(ce)}).catch(function(xe){h.showHideScanTypeSwapLink(!0),_.enable(),G(!0),h.setHeaderMessage(xe,Ni.STATUS_WARNING)})}),_.hasSingleItem()&&A.click(),D.addEventListener("click",function(ne){if(!h.html5Qrcode)throw"html5Qrcode not defined";D.disabled=!0,h.html5Qrcode.stop().then(function(J){u.scanTypeSelector.hasMoreThanOneScanType()&&h.showHideScanTypeSwapLink(!0),_.enable(),A.disabled=!1,D.style.display="none",A.style.display="inline-block",M&&(M.reset(),M.hide()),b.removeOnCameraZoomValueChangeCallback(),b.hide(),h.insertCameraScanImageToScanRegion()}).catch(function(J){D.disabled=!1,h.setHeaderMessage(J,Ni.STATUS_WARNING)})}),h.persistedDataManager.getLastUsedCameraId()){var ee=h.persistedDataManager.getLastUsedCameraId();_.hasValue(ee)?(_.setValue(ee),A.click()):h.persistedDataManager.resetLastUsedCameraId()}},d.prototype.createSectionSwap=function(){var l=this,u=Vt.textIfCameraScanSelected(),h=Vt.textIfFileScanSelected(),C=document.getElementById(this.getDashboardSectionId()),b=document.createElement("div");b.style.textAlign="center";var w=Pr.createElement("span",this.getDashboardSectionSwapLinkId());w.style.textDecoration="underline",w.style.cursor="pointer",w.innerText=Na.isCameraScanType(this.currentScanType)?u:h,w.addEventListener("click",function(){if(!l.sectionSwapAllowed){l.verbose&&l.logger.logError("Section swap called when not allowed");return}l.resetHeaderMessage(),l.fileSelectionUi.resetValue(),l.sectionSwapAllowed=!1,Na.isCameraScanType(l.currentScanType)?(l.clearScanRegion(),l.getCameraScanRegion().style.display="none",l.fileSelectionUi.show(),w.innerText=h,l.currentScanType=_a.SCAN_TYPE_FILE,l.insertFileScanImageToScanRegion()):(l.clearScanRegion(),l.getCameraScanRegion().style.display="block",l.fileSelectionUi.hide(),w.innerText=u,l.currentScanType=_a.SCAN_TYPE_CAMERA,l.insertCameraScanImageToScanRegion(),l.startCameraScanIfPermissionExistsOnSwap()),l.sectionSwapAllowed=!0}),b.appendChild(w),C.appendChild(b)},d.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var l=this,u=this;if(this.persistedDataManager.hasCameraPermissions()){$h.hasPermissions().then(function(h){if(h){var C=document.getElementById(u.getCameraPermissionButtonId());if(!C)throw l.logger.logError("Permission button not found, fail;"),"Permission button not found";C.click()}else u.persistedDataManager.setHasPermission(!1)}).catch(function(h){u.persistedDataManager.setHasPermission(!1)});return}},d.prototype.resetHeaderMessage=function(){var l=document.getElementById(this.getHeaderMessageContainerId());l.style.display="none"},d.prototype.setHeaderMessage=function(l,u){u||(u=Ni.STATUS_DEFAULT);var h=this.getHeaderMessageDiv();switch(h.innerText=l,h.style.display="block",u){case Ni.STATUS_SUCCESS:h.style.background="rgba(106, 175, 80, 0.26)",h.style.color="#477735";break;case Ni.STATUS_WARNING:h.style.background="rgba(203, 36, 49, 0.14)",h.style.color="#cb2431";break;case Ni.STATUS_DEFAULT:default:h.style.background="rgba(0, 0, 0, 0)",h.style.color="rgb(17, 17, 17)";break}},d.prototype.showHideScanTypeSwapLink=function(l){this.scanTypeSelector.hasMoreThanOneScanType()&&(l!==!0&&(l=!1),this.sectionSwapAllowed=l,this.getDashboardSectionSwapLink().style.display=l?"inline-block":"none")},d.prototype.insertCameraScanImageToScanRegion=function(){var l=this,u=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){u.innerHTML="<br>",u.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(h){u.innerHTML="<br>",u.appendChild(l.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=dy,this.cameraScanImage.alt=Vt.cameraScanAltText()},d.prototype.insertFileScanImageToScanRegion=function(){var l=this,u=document.getElementById(this.getScanRegionId());if(this.fileScanImage){u.innerHTML="<br>",u.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(h){u.innerHTML="<br>",u.appendChild(l.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=fy,this.fileScanImage.alt=Vt.fileScanAltText()},d.prototype.clearScanRegion=function(){var l=document.getElementById(this.getScanRegionId());l.innerHTML=""},d.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},d.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},d.prototype.getDashboardSectionSwapLinkId=function(){return Ii.SCAN_TYPE_CHANGE_ANCHOR_ID},d.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},d.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},d.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},d.prototype.getCameraPermissionButtonId=function(){return Ii.CAMERA_PERMISSION_BUTTON_ID},d.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},d.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},d.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},d})();function Ny({onScanSuccess:d,onScanError:l,onClose:u}){const h=j.useRef(null),[C,b]=j.useState(!1);j.useEffect(()=>{const _={fps:10,qrbox:{width:250,height:250},aspectRatio:1,showTorchButtonIfSupported:!0,showZoomSliderIfSupported:!0,defaultZoomValueIfSupported:2},I=new Ty("qr-reader",_,!1),A=M=>{console.log(`QR Code scanned: ${M}`),b(!1),I.clear(),d(M)},D=M=>{l&&!M.includes("No QR code found")&&l(M)};return I.render(A,D),h.current=I,b(!0),()=>{h.current&&h.current.clear().catch(console.error)}},[d,l]);const w=()=>{h.current&&h.current.clear().catch(console.error),b(!1),u()};return x.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:x.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",maxWidth:"400px",width:"100%",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.3)"},children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[x.jsx("h3",{style:{margin:0,color:"#333"},children:"📱 Escanear QR de Mesa"}),x.jsx("button",{onClick:w,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#666",padding:"0",width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center"},children:"×"})]}),x.jsx("div",{id:"qr-reader",style:{width:"100%",marginBottom:"20px"}}),C&&x.jsx("div",{style:{textAlign:"center",color:"#666",fontSize:"14px",marginBottom:"15px"},children:"🎯 Apunta la cámara hacia el código QR de la mesa"}),x.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"10px"},children:x.jsx("button",{onClick:w,style:{backgroundColor:"#6c757d",color:"white",border:"none",padding:"10px 20px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"Cancelar"})})]})})}function Iy(){const[d,l]=j.useState(Sc()),[u]=j.useState(Yo()),[h,C]=j.useState(Dh()),[b,w]=j.useState(()=>({tableId:null})),[_,I]=j.useState([]),[A,D]=j.useState(""),[M,P]=j.useState([]),[G,ee]=j.useState(0),[ne,J]=j.useState({orderId:null,note:""}),[xe,ce]=j.useState(!1),[X,Ee]=j.useState(null),{isConnected:Fe}=_c({room:"waiters"}),{orderNotifications:ge,clearOrderNotifications:te}=df(),Te=Z=>u.find(be=>be.id===Z)?.name||Z;j.useEffect(()=>{const Z=af(()=>{const be=Sc(),z=be.filter(re=>re.status==="listo");if(z.length>G){const ve=z.slice(G).map(Re=>`🔔 ¡Pedido listo! Mesa ${Re.tableId} - ${Re.items.map(Ke=>Te(Ke.menuItemId)).join(", ")}`);P(Re=>[...Re,...ve]),ve.length>0&&new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT").play().catch(()=>{})}ee(z.length),l(be),C(Dh())});return()=>{Z()}},[]);const de=Z=>{P(be=>be.filter((z,re)=>re!==Z))},De=Z=>{P(be=>[...be,Z])},tt=Z=>{J({orderId:Z,note:""})},Me=()=>{J({orderId:null,note:""})},nt=()=>{ne.orderId&&ne.note.trim()&&(Um(ne.orderId,ne.note.trim()),Me())},st=Z=>Ji(Z).filter(be=>be.paymentStatus!=="pagado"),oe=Z=>u.find(be=>be.id===Z)?.price||0,$=Z=>Z.items.reduce((be,z)=>be+z.qty*oe(z.menuItemId),0),fe=async Z=>{try{const z=new URL(Z).pathname.split("/"),re=z[z.length-1];if(!re||isNaN(Number(re))){De("❌ QR inválido: No se pudo identificar la mesa");return}const ve=await fetch(`/api/tables/${re}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"AVAILABLE"})});if(ve.ok)Ee(`Mesa ${re} marcada como libre`),De(`✅ Mesa ${re} marcada como libre y lista para nuevos clientes`),ce(!1);else{const Re=await ve.json();De(`❌ Error al marcar mesa ${re}: ${Re.message||"Error desconocido"}`)}}catch(be){console.error("Error al procesar QR:",be),De("❌ Error al procesar el código QR")}},Ge=Z=>{console.error("Error del escáner QR:",Z)};return x.jsxs("div",{className:"container",children:[x.jsx("header",{className:"header",children:x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[x.jsx("h2",{children:"Panel Mesero"}),x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"4px 8px",borderRadius:"6px",backgroundColor:Fe?"#dcfce7":"#fee2e2",color:Fe?"#166534":"#991b1b",fontSize:"12px",fontWeight:"500"},children:[x.jsx("span",{children:Fe?"🟢":"🔴"}),Fe?"Conectado":"Desconectado"]}),ge.length>0&&x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"4px 8px",borderRadius:"6px",backgroundColor:"#fef3c7",color:"#92400e",fontSize:"12px",fontWeight:"500",cursor:"pointer"},onClick:te,title:"Click para limpiar notificaciones",children:[x.jsx("span",{children:"🔔"}),ge.length," nuevas"]}),x.jsxs("nav",{style:{display:"flex",gap:12},children:[x.jsx(Un,{to:"/mesa/1",children:"Mesa 1"}),x.jsx(Un,{to:"/cocina",children:"Cocina"}),x.jsx(Un,{to:"/admin",children:"Admin"})]})]})]})}),M.length>0&&x.jsx("section",{style:{position:"fixed",top:"20px",right:"20px",zIndex:1e3,display:"flex",flexDirection:"column",gap:"8px",maxWidth:"400px"},children:M.map((Z,be)=>x.jsxs("div",{style:{backgroundColor:"#10b981",color:"white",padding:"12px 16px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",display:"flex",justifyContent:"space-between",alignItems:"center",animation:"slideIn 0.3s ease-out"},children:[x.jsx("span",{style:{fontSize:"14px",fontWeight:"500"},children:Z}),x.jsx("button",{onClick:()=>de(be),style:{background:"none",border:"none",color:"white",cursor:"pointer",fontSize:"18px",padding:"0",marginLeft:"12px"},children:"×"})]},be))}),x.jsxs("section",{className:"card",children:[x.jsx("h3",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:16},children:"💰 Solicitudes de pago en efectivo"}),x.jsxs("div",{style:{display:"grid",gap:16},children:[h.filter(Z=>Z.from==="mesero"&&Z.text.toLowerCase().includes("pagar en efectivo")).sort((Z,be)=>Z.createdAt>be.createdAt?-1:1).map(Z=>x.jsxs("div",{style:{backgroundColor:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:8,padding:16,display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[x.jsxs("div",{children:[x.jsxs("div",{style:{fontWeight:700,fontSize:16,color:"#333",marginBottom:4},children:["🏪 Mesa ",Z.tableId]}),x.jsx("div",{style:{color:"#666",fontSize:14},children:Z.text})]}),x.jsx("button",{onClick:()=>{w({tableId:Z.tableId}),I([]),D("")},style:{backgroundColor:"#28a745",color:"white",border:"none",borderRadius:6,padding:"8px 16px",cursor:"pointer",fontWeight:500,transition:"all 0.2s ease"},onMouseOver:be=>be.currentTarget.style.backgroundColor="#218838",onMouseOut:be=>be.currentTarget.style.backgroundColor="#28a745",children:"✅ Atender"})]},Z.id)),h.filter(Z=>Z.from==="mesero"&&Z.text.toLowerCase().includes("pagar en efectivo")).length===0&&x.jsx("div",{style:{textAlign:"center",padding:32,color:"#666",fontStyle:"italic",backgroundColor:"#f8f9fa",borderRadius:8,border:"1px dashed #dee2e6"},children:"📭 No hay solicitudes de pago en efectivo"})]})]}),x.jsxs("section",{className:"card",children:[x.jsx("h3",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:16},children:"📱 Escáner QR - Marcar Mesa como Libre"}),x.jsx("div",{style:{display:"grid",gap:16},children:xe?x.jsxs("div",{style:{backgroundColor:"#f8f9fa",borderRadius:8,padding:16,border:"1px solid #e9ecef"},children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[x.jsx("h4",{style:{margin:0,color:"#333"},children:"📱 Escaneando código QR..."}),x.jsx("button",{onClick:()=>ce(!1),style:{backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:6,padding:"6px 12px",cursor:"pointer",fontWeight:500,fontSize:12},children:"❌ Cerrar"})]}),x.jsx(Ny,{onScanSuccess:fe,onScanError:Ge,onClose:()=>ce(!1)}),x.jsxs("div",{style:{marginTop:12,padding:12,backgroundColor:"#e3f2fd",borderRadius:6,fontSize:12,color:"#1976d2"},children:["💡 ",x.jsx("strong",{children:"Instrucciones:"})," Apunta la cámara hacia el código QR de la mesa que acabas de limpiar. El sistema automáticamente marcará la mesa como disponible para nuevos clientes."]})]}):x.jsxs("div",{style:{textAlign:"center",padding:24,backgroundColor:"#f8f9fa",borderRadius:8,border:"1px solid #e9ecef"},children:[x.jsx("div",{style:{marginBottom:16,color:"#666",fontSize:14},children:"Escanea el código QR de la mesa para marcarla como libre después de la limpieza"}),x.jsx("button",{onClick:()=>ce(!0),style:{backgroundColor:"#007bff",color:"white",border:"none",borderRadius:8,padding:"12px 24px",cursor:"pointer",fontWeight:600,fontSize:16,transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:8,margin:"0 auto"},onMouseOver:Z=>Z.currentTarget.style.backgroundColor="#0056b3",onMouseOut:Z=>Z.currentTarget.style.backgroundColor="#007bff",children:"📱 Activar Escáner QR"}),X&&x.jsxs("div",{style:{marginTop:16,padding:12,backgroundColor:"#d4edda",color:"#155724",borderRadius:6,border:"1px solid #c3e6cb",fontSize:14,fontWeight:500},children:["✅ ",X]})]})})]}),x.jsxs("section",{className:"card",children:[x.jsx("h3",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:16},children:"🍽️ Listos para retirar"}),x.jsxs("div",{style:{display:"grid",gap:16},children:[d.filter(Z=>Z.status==="listo").sort((Z,be)=>Z.createdAt>be.createdAt?-1:1).map(Z=>x.jsxs("div",{style:{backgroundColor:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:8,padding:16,display:"flex",justifyContent:"space-between",alignItems:"flex-start",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[x.jsxs("div",{style:{flex:1},children:[x.jsxs("div",{style:{fontWeight:700,fontSize:16,color:"#333",marginBottom:4},children:["🏪 Mesa ",Z.tableId]}),x.jsxs("div",{style:{display:"inline-block",backgroundColor:"#28a745",color:"white",padding:"2px 8px",borderRadius:12,fontSize:12,fontWeight:500,marginBottom:8},children:["✅ ",Z.status]}),x.jsx("ul",{style:{margin:0,paddingLeft:16,color:"#666"},children:Z.items.map(be=>x.jsxs("li",{style:{marginBottom:2},children:[Te(be.menuItemId)," x ",be.qty]},be.menuItemId))}),Z.waiterNotes&&x.jsxs("div",{style:{marginTop:8,padding:8,backgroundColor:"#e3f2fd",borderRadius:6,border:"1px solid #bbdefb"},children:[x.jsx("div",{style:{fontWeight:600,fontSize:12,color:"#1976d2",marginBottom:4},children:"📝 Observaciones del mesero:"}),x.jsx("div",{style:{fontSize:12,color:"#424242",whiteSpace:"pre-line"},children:Z.waiterNotes})]})]}),x.jsx("button",{onClick:()=>Gs(Z.id,"entregado"),style:{backgroundColor:"#007bff",color:"white",border:"none",borderRadius:6,padding:"8px 16px",cursor:"pointer",fontWeight:500,transition:"all 0.2s ease",marginLeft:16},onMouseOver:be=>be.currentTarget.style.backgroundColor="#0056b3",onMouseOut:be=>be.currentTarget.style.backgroundColor="#007bff",children:"🚚 Entregar"})]},Z.id)),d.filter(Z=>Z.status==="listo").length===0&&x.jsx("div",{style:{textAlign:"center",padding:32,color:"#666",fontStyle:"italic",backgroundColor:"#f8f9fa",borderRadius:8,border:"1px dashed #dee2e6"},children:"📭 No hay pedidos listos para retirar"})]})]}),x.jsxs("section",{className:"card",children:[x.jsx("h3",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:16},children:"📋 Todos los pedidos"}),x.jsxs("div",{style:{display:"grid",gap:16},children:[d.sort((Z,be)=>Z.createdAt>be.createdAt?-1:1).map(Z=>x.jsxs("div",{style:{backgroundColor:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:8,padding:16,display:"flex",justifyContent:"space-between",alignItems:"flex-start",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[x.jsxs("div",{style:{flex:1},children:[x.jsxs("div",{style:{fontWeight:700,fontSize:16,color:"#333",marginBottom:4},children:["🏪 Mesa ",Z.tableId]}),x.jsxs("div",{style:{display:"inline-block",backgroundColor:Z.status==="pendiente"?"#ffc107":Z.status==="en_cocina"?"#fd7e14":Z.status==="listo"?"#28a745":Z.status==="entregado"?"#6c757d":"#007bff",color:"white",padding:"2px 8px",borderRadius:12,fontSize:12,fontWeight:500,marginBottom:8},children:[Z.status==="pendiente"?"⏳":Z.status==="en_cocina"?"👨‍🍳":Z.status==="listo"?"✅":Z.status==="entregado"?"🚚":"📋"," ",Z.status]}),x.jsx("ul",{style:{margin:0,paddingLeft:16,color:"#666"},children:Z.items.map(be=>x.jsxs("li",{style:{marginBottom:2},children:[Te(be.menuItemId)," x ",be.qty]},be.menuItemId))})]}),x.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[x.jsx("button",{onClick:()=>tt(Z.id),style:{backgroundColor:"#6f42c1",color:"white",border:"none",borderRadius:6,padding:"6px 12px",cursor:"pointer",fontWeight:500,fontSize:12,transition:"all 0.2s ease"},onMouseOver:be=>be.currentTarget.style.backgroundColor="#5a32a3",onMouseOut:be=>be.currentTarget.style.backgroundColor="#6f42c1",children:"📝 Observación"}),x.jsx("button",{onClick:()=>Gs(Z.id,"en_cocina"),style:{backgroundColor:"#fd7e14",color:"white",border:"none",borderRadius:6,padding:"6px 12px",cursor:"pointer",fontWeight:500,fontSize:12,transition:"all 0.2s ease"},onMouseOver:be=>be.currentTarget.style.backgroundColor="#e8690b",onMouseOut:be=>be.currentTarget.style.backgroundColor="#fd7e14",children:"👨‍🍳 En cocina"}),x.jsx("button",{onClick:()=>Gs(Z.id,"listo"),style:{backgroundColor:"#28a745",color:"white",border:"none",borderRadius:6,padding:"6px 12px",cursor:"pointer",fontWeight:500,fontSize:12,transition:"all 0.2s ease"},onMouseOver:be=>be.currentTarget.style.backgroundColor="#218838",onMouseOut:be=>be.currentTarget.style.backgroundColor="#28a745",children:"✅ Listo"}),x.jsx("button",{onClick:()=>Gs(Z.id,"entregado"),style:{backgroundColor:"#007bff",color:"white",border:"none",borderRadius:6,padding:"6px 12px",cursor:"pointer",fontWeight:500,fontSize:12,transition:"all 0.2s ease"},onMouseOver:be=>be.currentTarget.style.backgroundColor="#0056b3",onMouseOut:be=>be.currentTarget.style.backgroundColor="#007bff",children:"🚚 Entregado"})]})]},Z.id)),d.length===0&&x.jsx("div",{style:{textAlign:"center",padding:32,color:"#666",fontStyle:"italic",backgroundColor:"#f8f9fa",borderRadius:8,border:"1px dashed #dee2e6"},children:"📭 No hay pedidos registrados"})]})]}),b.tableId&&x.jsx("div",{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":`Confirmar pago efectivo mesa ${b.tableId}`,onClick:()=>w({tableId:null}),children:x.jsxs("div",{className:"modal",onClick:Z=>Z.stopPropagation(),children:[x.jsxs("div",{className:"modal-header",children:[x.jsxs("div",{className:"modal-title",children:["Confirmar pago efectivo — Mesa ",b.tableId]}),x.jsx("button",{className:"modal-close","aria-label":"Cerrar",onClick:()=>w({tableId:null}),children:"×"})]}),x.jsx("div",{className:"modal-body",style:{gridTemplateColumns:"1fr"},children:x.jsxs("div",{className:"modal-info",children:[x.jsx("div",{children:"Seleccione los pedidos impagos que se van a pagar:"}),x.jsx("div",{style:{marginTop:8},children:st(b.tableId).map(Z=>x.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 0"},children:[x.jsx("input",{type:"checkbox",checked:_.includes(Z.id),onChange:be=>{const z=be.target.checked;I(re=>z?[...re,Z.id]:re.filter(ve=>ve!==Z.id))}}),x.jsxs("span",{children:["Pedido #",Z.id," — $",$(Z)]})]},Z.id))}),x.jsxs("div",{style:{marginTop:8,fontWeight:700},children:["Total: $",st(b.tableId).filter(Z=>_.includes(Z.id)).reduce((Z,be)=>Z+$(be),0)]}),x.jsx("div",{style:{marginTop:8},children:x.jsx("input",{type:"number",placeholder:"Monto recibido",value:A,onChange:Z=>D(Z.target.value)})}),x.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[x.jsx("button",{onClick:()=>{const Z=Number(A)||0,be=st(b.tableId);let z=0;const re=[];for(const ve of be){const Re=$(ve);if(z+Re<=Z)re.push(ve.id),z+=Re;else break}I(re)},children:"Ajustar selección al monto"}),x.jsx("button",{onClick:()=>I(st(b.tableId).map(Z=>Z.id)),children:"Seleccionar todo"})]}),x.jsxs("div",{className:"product-actions",style:{marginTop:8},children:[x.jsx("button",{onClick:()=>w({tableId:null}),children:"Cancelar"}),x.jsx("button",{className:"primary",disabled:_.length===0||Number(A)<st(b.tableId).filter(Z=>_.includes(Z.id)).reduce((Z,be)=>Z+$(be),0),onClick:()=>{_.forEach(Z=>Pd(Z,"pagado")),w({tableId:null}),I([]),D(""),De(`✅ Pago en efectivo confirmado para Mesa ${b.tableId}`)},children:"💰 Confirmar pago recibido"})]})]})})]})}),ne.orderId&&x.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:x.jsxs("div",{style:{backgroundColor:"white",borderRadius:12,padding:24,maxWidth:500,width:"90%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)"},children:[x.jsx("h3",{style:{margin:"0 0 16px 0",color:"#1f2937"},children:"📝 Agregar Observación"}),x.jsxs("p",{style:{margin:"0 0 16px 0",color:"#6b7280",fontSize:14},children:["Pedido #",ne.orderId," - Mesa ",d.find(Z=>Z.id===ne.orderId)?.tableId]}),x.jsx("textarea",{value:ne.note,onChange:Z=>J(be=>({...be,note:Z.target.value})),placeholder:"Escribe tu observación aquí... (ej: Cliente alérgico a mariscos, sin cebolla, etc.)",style:{width:"100%",minHeight:100,padding:12,border:"2px solid #e5e7eb",borderRadius:8,fontSize:14,fontFamily:"inherit",resize:"vertical",outline:"none",transition:"border-color 0.2s ease"},onFocus:Z=>Z.target.style.borderColor="#3b82f6",onBlur:Z=>Z.target.style.borderColor="#e5e7eb"}),x.jsxs("div",{style:{display:"flex",gap:12,marginTop:20,justifyContent:"flex-end"},children:[x.jsx("button",{onClick:Me,style:{padding:"10px 20px",backgroundColor:"#f3f4f6",color:"#374151",border:"none",borderRadius:6,cursor:"pointer",fontWeight:500,transition:"all 0.2s ease"},onMouseOver:Z=>Z.currentTarget.style.backgroundColor="#e5e7eb",onMouseOut:Z=>Z.currentTarget.style.backgroundColor="#f3f4f6",children:"Cancelar"}),x.jsx("button",{onClick:nt,disabled:!ne.note.trim(),style:{padding:"10px 20px",backgroundColor:ne.note.trim()?"#3b82f6":"#9ca3af",color:"white",border:"none",borderRadius:6,cursor:ne.note.trim()?"pointer":"not-allowed",fontWeight:500,transition:"all 0.2s ease"},onMouseOver:Z=>{ne.note.trim()&&(Z.currentTarget.style.backgroundColor="#2563eb")},onMouseOut:Z=>{ne.note.trim()&&(Z.currentTarget.style.backgroundColor="#3b82f6")},children:"💾 Guardar Observación"})]})]})})]})}function Ry(){const[d,l]=j.useState(Sc()),[u]=j.useState(Yo()),[h,C]=j.useState(!1),[b,w]=j.useState(""),[_,I]=j.useState(""),[A,D]=j.useState("time"),[M,P]=j.useState(!1),{isConnected:G}=_c({room:"kitchen"}),{orderNotifications:ee,clearOrderNotifications:ne}=df();j.useEffect(()=>{const ge=af(()=>l(Sc()));return()=>{ge()}},[]);const J=ge=>u.find(te=>te.id===ge)?.name||ge,xe=ge=>{const te=Date.now()-new Date(ge.createdAt).getTime(),Te=ge.items.reduce((tt,Me)=>tt+Me.qty,0),de=te/(1e3*60),De=Te*.5;return de+De},ce=d.filter(ge=>ge.status==="pendiente"||ge.status==="en_cocina").sort((ge,te)=>A==="priority"?xe(te)-xe(ge):new Date(ge.createdAt).getTime()-new Date(te.createdAt).getTime()),X=ge=>{I(ge),w(""),C(!0)},Ee=()=>C(!1),Fe=()=>{!_||!b.trim()||(mg(_,"cocina",b.trim()),C(!1),w(""),I(""))};return x.jsxs("div",{className:"container",children:[x.jsx("header",{className:"header",children:x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[x.jsx("h2",{children:"Panel Cocina/Bar"}),x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"4px 8px",borderRadius:"6px",backgroundColor:G?"#dcfce7":"#fee2e2",color:G?"#166534":"#991b1b",fontSize:"12px",fontWeight:"500"},children:[x.jsx("span",{children:G?"🟢":"🔴"}),G?"Conectado":"Desconectado"]}),ee.length>0&&x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"4px 8px",borderRadius:"6px",backgroundColor:"#fef3c7",color:"#92400e",fontSize:"12px",fontWeight:"500",cursor:"pointer"},onClick:ne,title:"Click para limpiar notificaciones",children:[x.jsx("span",{children:"🔔"}),ee.length," nuevas"]}),x.jsxs("nav",{style:{display:"flex",gap:12},children:[x.jsx(Un,{to:"/mesa/1",children:"Mesa 1"}),x.jsx(Un,{to:"/mesero",children:"Mesero"}),x.jsx(Un,{to:"/admin",children:"Admin"})]})]})]})}),x.jsxs("section",{className:"card",style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb"},children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[x.jsxs("h3",{style:{margin:"0",color:"#1f2937",fontSize:"20px",fontWeight:"600"},children:["Pedidos en preparación (",ce.length,")"]}),x.jsxs("div",{style:{display:"flex",gap:"8px"},children:[x.jsx("button",{onClick:()=>D("time"),style:{padding:"6px 12px",backgroundColor:A==="time"?"#3b82f6":"#f3f4f6",color:A==="time"?"white":"#374151",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"🕒 Por tiempo"}),x.jsx("button",{onClick:()=>D("priority"),style:{padding:"6px 12px",backgroundColor:A==="priority"?"#3b82f6":"#f3f4f6",color:A==="priority"?"white":"#374151",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"⚡ Por prioridad"}),x.jsx("button",{onClick:()=>P(!M),style:{padding:"6px 12px",backgroundColor:M?"#059669":"#f3f4f6",color:M?"white":"#374151",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"📊 Estadísticas"})]})]}),x.jsx("div",{className:"kitchen-list",style:{display:"grid",gap:"16px"},children:ce.length===0?x.jsx("p",{style:{color:"#6b7280",fontStyle:"italic",textAlign:"center",padding:"40px 0",fontSize:"16px"},children:"No hay pedidos pendientes en este momento"}):ce.map(ge=>{const te=Math.floor((Date.now()-new Date(ge.createdAt).getTime())/6e4),Te=xe(ge),de=Te>15;return x.jsxs("div",{className:"kitchen-order",style:{backgroundColor:"white",border:`2px solid ${de?"#ef4444":"#e5e7eb"}`,borderRadius:"12px",padding:"20px",boxShadow:de?"0 4px 12px rgba(239, 68, 68, 0.15)":"0 2px 4px rgba(0, 0, 0, 0.1)",display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"16px",position:"relative"},children:[de&&x.jsx("div",{style:{position:"absolute",top:"-8px",right:"16px",backgroundColor:"#ef4444",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"10px",fontWeight:"600"},children:"⚠️ URGENTE"}),x.jsxs("div",{style:{flex:1},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[x.jsxs("div",{style:{fontWeight:"700",fontSize:"18px",color:"#1f2937"},children:["Mesa ",ge.tableId]}),x.jsxs("div",{style:{fontSize:"12px",color:te>10?"#ef4444":"#6b7280",fontWeight:"500",backgroundColor:te>10?"#fef2f2":"#f9fafb",padding:"2px 8px",borderRadius:"8px"},children:["⏱️ ",te," min"]}),A==="priority"&&x.jsxs("div",{style:{fontSize:"10px",color:"#6366f1",fontWeight:"500",backgroundColor:"#eef2ff",padding:"2px 6px",borderRadius:"6px"},children:["Prioridad: ",Te.toFixed(1)]})]}),x.jsxs("div",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"500",marginBottom:"8px",backgroundColor:ge.status==="en_cocina"?"#dbeafe":"#fef3c7",color:ge.status==="en_cocina"?"#1e40af":"#92400e"},children:["Estado: ",ge.status]}),typeof ge.etaMinutes=="number"&&x.jsxs("div",{style:{color:"#059669",fontWeight:"500",marginBottom:"8px"},children:["ETA: ",ge.etaMinutes," min"]}),ge.suggestions&&ge.suggestions.trim()&&x.jsxs("div",{className:"kitchen-suggestion",style:{backgroundColor:"#fef3c7",color:"#92400e",padding:"8px 12px",borderRadius:"8px",fontSize:"14px",marginBottom:"12px"},children:["Sugerencia: ",ge.suggestions]}),x.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:ge.items.map(De=>x.jsxs("li",{style:{padding:"6px 0",borderBottom:"1px solid #f3f4f6",color:"#374151",fontSize:"14px"},children:[x.jsx("span",{style:{fontWeight:"500"},children:J(De.menuItemId)}),x.jsxs("span",{style:{color:"#6b7280",marginLeft:"8px"},children:["x ",De.qty]})]},De.menuItemId))})]}),x.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"stretch",minWidth:"200px"},children:[x.jsx("button",{onClick:()=>Gs(ge.id,"en_cocina"),style:{padding:"8px 16px",backgroundColor:ge.status==="en_cocina"?"#dbeafe":"#3b82f6",color:ge.status==="en_cocina"?"#1e40af":"white",border:ge.status==="en_cocina"?"2px solid #3b82f6":"none",borderRadius:"6px",fontWeight:"500",fontSize:"14px",cursor:"pointer",transition:"all 0.2s ease"},children:"En cocina"}),x.jsx("button",{onClick:()=>Gs(ge.id,"listo"),style:{padding:"8px 16px",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"6px",fontWeight:"500",fontSize:"14px",cursor:"pointer",transition:"all 0.2s ease"},children:"Listo"}),x.jsx("input",{type:"number",style:{width:"100%",padding:"8px 12px",border:"2px solid #e5e7eb",borderRadius:"6px",fontSize:"14px",color:"#374151"},placeholder:"ETA (min)",onChange:De=>Pm(ge.id,Number(De.target.value))}),x.jsx("button",{onClick:()=>X(ge.tableId),style:{padding:"8px 16px",backgroundColor:"#f9fafb",color:"#374151",border:"2px solid #e5e7eb",borderRadius:"6px",fontWeight:"500",fontSize:"14px",cursor:"pointer",transition:"all 0.2s ease"},children:"Mensaje"})]})]},ge.id)})})]}),M&&x.jsxs("section",{className:"card",style:{backgroundColor:"white",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb",marginTop:"20px"},children:[x.jsx("h3",{style:{margin:"0 0 20px 0",color:"#1f2937",fontSize:"20px",fontWeight:"600"},children:"📊 Estadísticas de Rendimiento"}),x.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:[x.jsxs("div",{style:{backgroundColor:"#f8fafc",padding:"16px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[x.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#059669"},children:d.filter(ge=>ge.status==="entregado").length}),x.jsx("div",{style:{fontSize:"14px",color:"#64748b"},children:"Pedidos completados hoy"})]}),x.jsxs("div",{style:{backgroundColor:"#f8fafc",padding:"16px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[x.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#dc2626"},children:ce.length}),x.jsx("div",{style:{fontSize:"14px",color:"#64748b"},children:"Pedidos pendientes"})]}),x.jsxs("div",{style:{backgroundColor:"#f8fafc",padding:"16px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[x.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#3b82f6"},children:[Math.round(d.filter(ge=>ge.status==="entregado").reduce((ge,te)=>{const Te=new Date(te.createdAt).getTime()-new Date(te.createdAt).getTime();return ge+Te/(1e3*60)},0)/Math.max(d.filter(ge=>ge.status==="entregado").length,1)),"min"]}),x.jsx("div",{style:{fontSize:"14px",color:"#64748b"},children:"Tiempo promedio"})]}),x.jsxs("div",{style:{backgroundColor:"#f8fafc",padding:"16px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[x.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#f59e0b"},children:ce.filter(ge=>Date.now()-new Date(ge.createdAt).getTime()>1200*1e3).length}),x.jsx("div",{style:{fontSize:"14px",color:"#64748b"},children:"Pedidos urgentes (+20min)"})]})]}),x.jsxs("div",{children:[x.jsx("h4",{style:{margin:"0 0 16px 0",color:"#374151",fontSize:"16px",fontWeight:"600"},children:"📋 Historial Reciente (Últimos 10 pedidos completados)"}),x.jsxs("div",{style:{maxHeight:"300px",overflowY:"auto",border:"1px solid #e5e7eb",borderRadius:"8px"},children:[d.filter(ge=>ge.status==="entregado").sort((ge,te)=>new Date(te.createdAt).getTime()-new Date(ge.createdAt).getTime()).slice(0,10).map((ge,te)=>{const Te=Math.round((new Date(ge.createdAt).getTime()-new Date(ge.createdAt).getTime())/6e4),de=ge.items.reduce((De,tt)=>De+tt.qty,0);return x.jsxs("div",{style:{padding:"12px 16px",borderBottom:te<9?"1px solid #f1f5f9":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[x.jsxs("div",{children:[x.jsxs("div",{style:{fontWeight:"500",color:"#1f2937"},children:["Mesa ",ge.tableId," - ",de," items"]}),x.jsx("div",{style:{fontSize:"12px",color:"#64748b"},children:new Date(ge.createdAt).toLocaleTimeString()})]}),x.jsxs("div",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",backgroundColor:Te<=15?"#dcfce7":Te<=25?"#fef3c7":"#fee2e2",color:Te<=15?"#166534":Te<=25?"#92400e":"#991b1b"},children:[Te,"min"]})]},ge.id)}),d.filter(ge=>ge.status==="entregado").length===0&&x.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#64748b"},children:"No hay pedidos completados aún"})]})]})]}),h&&x.jsx("div",{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":`Mensaje a mesa ${_}`,onClick:Ee,children:x.jsxs("div",{className:"modal",onClick:ge=>ge.stopPropagation(),children:[x.jsxs("div",{className:"modal-header",children:[x.jsxs("div",{className:"modal-title",children:["Mensaje a mesa ",_]}),x.jsx("button",{className:"modal-close","aria-label":"Cerrar",onClick:Ee,children:"×"})]}),x.jsx("div",{className:"modal-body",style:{gridTemplateColumns:"1fr"},children:x.jsxs("div",{className:"modal-info",children:[x.jsx("textarea",{placeholder:"Escribe el mensaje para la mesa",value:b,onChange:ge=>w(ge.target.value)}),x.jsx("div",{className:"product-actions",style:{marginTop:8},children:x.jsx("button",{className:"primary",onClick:Fe,children:"Enviar"})})]})})]})})]})}const _y=()=>{const[d,l]=j.useState(null),[u,h]=j.useState(!1),[C,b]=j.useState(""),[w,_]=j.useState({startDate:new Date(Date.now()-10080*60*1e3).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],groupBy:"day",status:"all"});j.useEffect(()=>{I()},[]);const I=async()=>{h(!0),b("");try{const P=localStorage.getItem("token"),G=new URLSearchParams({startDate:w.startDate,endDate:w.endDate,groupBy:w.groupBy,...w.status!=="all"&&{status:w.status}}),ee=await fetch(`/api/reports/sales?${G}`,{headers:{Authorization:`Bearer ${P}`,"Content-Type":"application/json"}});if(!ee.ok)throw new Error("Error al cargar el reporte");const ne=await ee.json();l(ne.data)}catch(P){b(P.message)}finally{h(!1)}},A=(P,G)=>{_(ee=>({...ee,[P]:G}))},D=async()=>{try{const P=localStorage.getItem("token"),G=new URLSearchParams({startDate:w.startDate,endDate:w.endDate,type:"sales"}),ee=await fetch(`/api/reports/export/excel?${G}`,{headers:{Authorization:`Bearer ${P}`}});if(!ee.ok)throw new Error("Error al exportar a Excel");const ne=await ee.blob(),J=window.URL.createObjectURL(ne),xe=document.createElement("a");xe.href=J,xe.download=`reporte-ventas-${w.startDate}-${w.endDate}.xlsx`,document.body.appendChild(xe),xe.click(),window.URL.revokeObjectURL(J),document.body.removeChild(xe)}catch(P){b(P.message)}},M=async()=>{try{const P=localStorage.getItem("token"),G=new URLSearchParams({startDate:w.startDate,endDate:w.endDate}),ee=await fetch(`/api/reports/export/pdf?${G}`,{headers:{Authorization:`Bearer ${P}`}});if(!ee.ok)throw new Error("Error al exportar a PDF");const ne=await ee.blob(),J=window.URL.createObjectURL(ne),xe=document.createElement("a");xe.href=J,xe.download=`reporte-ventas-${w.startDate}-${w.endDate}.pdf`,document.body.appendChild(xe),xe.click(),window.URL.revokeObjectURL(J),document.body.removeChild(xe)}catch(P){b(P.message)}};return x.jsxs("div",{style:{padding:"1rem"},children:[x.jsx("h2",{style:{marginBottom:"2rem",color:"#333"},children:"📈 Reportes de Ventas"}),x.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"8px",border:"1px solid #ddd",marginBottom:"2rem"},children:[x.jsx("h3",{style:{marginBottom:"1rem",color:"#333"},children:"Filtros"}),x.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"Fecha Inicio:"}),x.jsx("input",{type:"date",value:w.startDate,onChange:P=>A("startDate",P.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #ddd",borderRadius:"4px"}})]}),x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"Fecha Fin:"}),x.jsx("input",{type:"date",value:w.endDate,onChange:P=>A("endDate",P.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #ddd",borderRadius:"4px"}})]}),x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"Agrupar por:"}),x.jsxs("select",{value:w.groupBy,onChange:P=>A("groupBy",P.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #ddd",borderRadius:"4px"},children:[x.jsx("option",{value:"day",children:"Día"}),x.jsx("option",{value:"week",children:"Semana"}),x.jsx("option",{value:"month",children:"Mes"})]})]}),x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"Estado:"}),x.jsxs("select",{value:w.status,onChange:P=>A("status",P.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #ddd",borderRadius:"4px"},children:[x.jsx("option",{value:"all",children:"Todos"}),x.jsx("option",{value:"completed",children:"Completados"}),x.jsx("option",{value:"cancelled",children:"Cancelados"})]})]})]}),x.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[x.jsx("button",{onClick:I,disabled:u,style:{padding:"0.75rem 1.5rem",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:u?"not-allowed":"pointer",opacity:u?.6:1},children:u?"🔄 Cargando...":"🔍 Generar Reporte"}),x.jsx("button",{onClick:D,disabled:u||!d,style:{padding:"0.75rem 1.5rem",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:u||!d?"not-allowed":"pointer",opacity:u||!d?.6:1},children:"📊 Exportar Excel"}),x.jsx("button",{onClick:M,disabled:u||!d,style:{padding:"0.75rem 1.5rem",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:u||!d?"not-allowed":"pointer",opacity:u||!d?.6:1},children:"📄 Exportar PDF"})]})]}),C&&x.jsxs("div",{style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"1rem",borderRadius:"4px",marginBottom:"1rem",border:"1px solid #f5c6cb"},children:["❌ ",C]}),d&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"8px",border:"1px solid #ddd",marginBottom:"2rem"},children:[x.jsxs("h3",{style:{marginBottom:"1rem",color:"#333"},children:["📊 Resumen del Período (",d.period,")"]}),x.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[x.jsxs("div",{style:{backgroundColor:"#e3f2fd",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[x.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.5rem"},children:"Ventas Totales"}),x.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"#1976d2"},children:["$",d.totalSales?.toFixed(2)||"0.00"]})]}),x.jsxs("div",{style:{backgroundColor:"#f3e5f5",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[x.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.5rem"},children:"Total Pedidos"}),x.jsx("div",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"#7b1fa2"},children:d.totalOrders||0})]}),x.jsxs("div",{style:{backgroundColor:"#e8f5e8",padding:"1rem",borderRadius:"8px",textAlign:"center"},children:[x.jsx("div",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.5rem"},children:"Promedio por Pedido"}),x.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"#388e3c"},children:["$",d.averageOrderValue?.toFixed(2)||"0.00"]})]})]})]}),x.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"8px",border:"1px solid #ddd"},children:[x.jsxs("h3",{style:{marginBottom:"1rem",color:"#333"},children:["📋 Detalle por ",w.groupBy==="day"?"Día":w.groupBy==="week"?"Semana":"Mes"]}),d.details.length>0?x.jsx("div",{style:{overflowX:"auto"},children:x.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.9rem"},children:[x.jsx("thead",{children:x.jsxs("tr",{style:{backgroundColor:"#f8f9fa"},children:[x.jsx("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid #dee2e6",fontWeight:"bold"},children:"Fecha"}),x.jsx("th",{style:{padding:"0.75rem",textAlign:"right",borderBottom:"2px solid #dee2e6",fontWeight:"bold"},children:"Ventas"}),x.jsx("th",{style:{padding:"0.75rem",textAlign:"right",borderBottom:"2px solid #dee2e6",fontWeight:"bold"},children:"Pedidos"}),x.jsx("th",{style:{padding:"0.75rem",textAlign:"right",borderBottom:"2px solid #dee2e6",fontWeight:"bold"},children:"Promedio"})]})}),x.jsx("tbody",{children:d.details.map((P,G)=>x.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6",backgroundColor:G%2===0?"white":"#f8f9fa"},children:[x.jsx("td",{style:{padding:"0.75rem"},children:new Date(P.date).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"})}),x.jsxs("td",{style:{padding:"0.75rem",textAlign:"right",fontWeight:"bold"},children:["$",P.sales?.toFixed(2)||"0.00"]}),x.jsx("td",{style:{padding:"0.75rem",textAlign:"right"},children:P.orders||0}),x.jsxs("td",{style:{padding:"0.75rem",textAlign:"right"},children:["$",(P.orders||0)>0?((P.sales||0)/(P.orders||1)).toFixed(2):"0.00"]})]},G))})]})}):x.jsx("div",{style:{textAlign:"center",color:"#666",padding:"2rem",fontStyle:"italic"},children:"No hay datos para el período seleccionado"})]})]})]})},Oy=()=>{const[d,l]=j.useState(null),[u,h]=j.useState(null),[C,b]=j.useState(!1),[w,_]=j.useState(""),[I,A]=j.useState(!1),[D,M]=j.useState(null);j.useEffect(()=>{P()},[]);const P=async()=>{try{const ce=localStorage.getItem("token"),X=await fetch("/api/daily-close/status",{headers:{Authorization:`Bearer ${ce}`,"Content-Type":"application/json"}});if(!X.ok)throw new Error("Error al verificar estado de cierre");const Ee=await X.json();l(Ee.data)}catch(ce){_(ce.message)}},G=async()=>{b(!0),_("");try{const ce=localStorage.getItem("token"),X=await fetch("/api/daily-close/validate",{method:"POST",headers:{Authorization:`Bearer ${ce}`,"Content-Type":"application/json"}});if(!X.ok)throw new Error("Error al ejecutar validaciones");const Ee=await X.json();h(Ee.data),A(!0)}catch(ce){_(ce.message)}finally{b(!1)}},ee=async()=>{b(!0),_("");try{const ce=localStorage.getItem("token"),X=await fetch("/api/daily-close/execute",{method:"POST",headers:{Authorization:`Bearer ${ce}`,"Content-Type":"application/json"}});if(!X.ok)throw new Error("Error al ejecutar cierre diario");const Ee=await X.json();M(Ee.data),await P()}catch(ce){_(ce.message)}finally{b(!1)}},ne=async()=>{if(window.confirm("¿Está seguro de que desea reabrir el día? Esta acción requiere permisos de administrador.")){b(!0),_("");try{const ce=localStorage.getItem("token");if(!(await fetch("/api/daily-close/reopen",{method:"POST",headers:{Authorization:`Bearer ${ce}`,"Content-Type":"application/json"}})).ok)throw new Error("Error al reabrir el día");await P(),M(null),h(null),A(!1)}catch(ce){_(ce.message)}finally{b(!1)}}},J=ce=>ce?"✅":"❌",xe=ce=>ce?"#28a745":"#dc3545";return x.jsxs("div",{style:{padding:"1rem"},children:[x.jsx("h2",{style:{marginBottom:"2rem",color:"#333"},children:"🔒 Cierre de Día"}),w&&x.jsxs("div",{style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"1rem",borderRadius:"4px",marginBottom:"1rem",border:"1px solid #f5c6cb"},children:["❌ ",w]}),d&&x.jsxs("div",{style:{backgroundColor:d.isClosed?"#d4edda":"#fff3cd",color:d.isClosed?"#155724":"#856404",padding:"1.5rem",borderRadius:"8px",border:`1px solid ${d.isClosed?"#c3e6cb":"#ffeaa7"}`,marginBottom:"2rem"},children:[x.jsx("h3",{style:{margin:"0 0 0.5rem 0"},children:d.isClosed?"🔒 Día Cerrado":"🔓 Día Abierto"}),d.lastCloseDate&&x.jsxs("p",{style:{margin:"0.5rem 0"},children:["Último cierre: ",new Date(d.lastCloseDate).toLocaleString("es-ES")]}),d.reason&&x.jsx("p",{style:{margin:"0.5rem 0",fontStyle:"italic"},children:d.reason})]}),D&&x.jsxs("div",{style:{backgroundColor:D.success?"#d4edda":"#f8d7da",color:D.success?"#155724":"#721c24",padding:"1.5rem",borderRadius:"8px",border:`1px solid ${D.success?"#c3e6cb":"#f5c6cb"}`,marginBottom:"2rem"},children:[x.jsx("h3",{style:{margin:"0 0 1rem 0"},children:D.success?"✅ Cierre Exitoso":"❌ Error en Cierre"}),x.jsx("p",{style:{margin:"0.5rem 0"},children:D.message}),D.stats&&x.jsxs("div",{style:{marginTop:"1rem"},children:[x.jsx("h4",{style:{margin:"0 0 0.5rem 0"},children:"📊 Estadísticas del Día:"}),x.jsxs("ul",{style:{margin:"0.5rem 0",paddingLeft:"1.5rem"},children:[x.jsxs("li",{children:["Ventas totales: $",D.stats.totalSales.toFixed(2)]}),x.jsxs("li",{children:["Total de pedidos: ",D.stats.totalOrders]}),x.jsx("li",{children:"Productos más vendidos:"}),x.jsx("ul",{style:{marginTop:"0.5rem"},children:D.stats.topProducts.map((ce,X)=>x.jsxs("li",{children:[ce.name,": ",ce.quantity," unidades"]},X))})]})]})]}),I&&u&&x.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"8px",border:"1px solid #ddd",marginBottom:"2rem"},children:[x.jsx("h3",{style:{marginBottom:"1rem",color:"#333"},children:"🔍 Validaciones Pre-Cierre"}),x.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",backgroundColor:u.validations.pendingOrders.valid?"#f8f9fa":"#fff5f5",borderRadius:"4px",border:`1px solid ${u.validations.pendingOrders.valid?"#e9ecef":"#fed7d7"}`},children:[x.jsx("span",{style:{fontSize:"1.5rem"},children:J(u.validations.pendingOrders.valid)}),x.jsxs("div",{style:{flex:1},children:[x.jsx("strong",{children:"Pedidos Pendientes"}),x.jsx("div",{style:{color:xe(u.validations.pendingOrders.valid),fontSize:"0.9rem"},children:u.validations.pendingOrders.message})]}),u.validations.pendingOrders.count>0&&x.jsx("span",{style:{backgroundColor:"#dc3545",color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.8rem"},children:u.validations.pendingOrders.count})]}),x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",backgroundColor:u.validations.openShifts.valid?"#f8f9fa":"#fff5f5",borderRadius:"4px",border:`1px solid ${u.validations.openShifts.valid?"#e9ecef":"#fed7d7"}`},children:[x.jsx("span",{style:{fontSize:"1.5rem"},children:J(u.validations.openShifts.valid)}),x.jsxs("div",{style:{flex:1},children:[x.jsx("strong",{children:"Turnos Abiertos"}),x.jsx("div",{style:{color:xe(u.validations.openShifts.valid),fontSize:"0.9rem"},children:u.validations.openShifts.message})]}),u.validations.openShifts.count>0&&x.jsx("span",{style:{backgroundColor:"#dc3545",color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.8rem"},children:u.validations.openShifts.count})]}),x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",backgroundColor:u.validations.pendingPayments.valid?"#f8f9fa":"#fff5f5",borderRadius:"4px",border:`1px solid ${u.validations.pendingPayments.valid?"#e9ecef":"#fed7d7"}`},children:[x.jsx("span",{style:{fontSize:"1.5rem"},children:J(u.validations.pendingPayments.valid)}),x.jsxs("div",{style:{flex:1},children:[x.jsx("strong",{children:"Pagos Pendientes"}),x.jsx("div",{style:{color:xe(u.validations.pendingPayments.valid),fontSize:"0.9rem"},children:u.validations.pendingPayments.message})]}),u.validations.pendingPayments.count>0&&x.jsx("span",{style:{backgroundColor:"#dc3545",color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.8rem"},children:u.validations.pendingPayments.count})]}),x.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem",padding:"1rem",backgroundColor:u.validations.lowStock.valid?"#f8f9fa":"#fff3cd",borderRadius:"4px",border:`1px solid ${u.validations.lowStock.valid?"#e9ecef":"#ffeaa7"}`},children:[x.jsx("span",{style:{fontSize:"1.5rem"},children:u.validations.lowStock.valid?"✅":"⚠️"}),x.jsxs("div",{style:{flex:1},children:[x.jsx("strong",{children:"Stock Bajo"}),x.jsx("div",{style:{color:u.validations.lowStock.valid?"#28a745":"#856404",fontSize:"0.9rem"},children:u.validations.lowStock.message}),u.validations.lowStock.products&&u.validations.lowStock.products.length>0&&x.jsxs("div",{style:{marginTop:"0.5rem"},children:[x.jsx("strong",{children:"Productos con stock bajo:"}),x.jsx("ul",{style:{margin:"0.5rem 0",paddingLeft:"1.5rem"},children:u.validations.lowStock.products.map((ce,X)=>x.jsxs("li",{style:{fontSize:"0.8rem"},children:[ce.name,": ",ce.currentStock," (mín: ",ce.minStock,")"]},X))})]})]}),u.validations.lowStock.count>0&&x.jsx("span",{style:{backgroundColor:"#ffc107",color:"#212529",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.8rem"},children:u.validations.lowStock.count})]})]}),x.jsx("div",{style:{marginTop:"1.5rem",padding:"1rem",backgroundColor:u.canClose?"#d4edda":"#f8d7da",color:u.canClose?"#155724":"#721c24",borderRadius:"4px",border:`1px solid ${u.canClose?"#c3e6cb":"#f5c6cb"}`,textAlign:"center"},children:x.jsx("strong",{children:u.canClose?"✅ El sistema está listo para el cierre diario":"❌ Hay problemas que deben resolverse antes del cierre"})})]}),x.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[d&&!d.isClosed&&x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:G,disabled:C,style:{padding:"0.75rem 1.5rem",backgroundColor:"#17a2b8",color:"white",border:"none",borderRadius:"4px",cursor:C?"not-allowed":"pointer",opacity:C?.6:1},children:C?"🔄 Validando...":"🔍 Ejecutar Validaciones"}),x.jsx("button",{onClick:ee,disabled:C||u!==null&&!u.canClose,style:{padding:"0.75rem 1.5rem",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:C||u!==null&&!u.canClose?"not-allowed":"pointer",opacity:C||u!==null&&!u.canClose?.6:1},children:C?"🔄 Cerrando...":"🔒 Ejecutar Cierre Diario"})]}),d&&d.isClosed&&x.jsx("button",{onClick:ne,disabled:C,style:{padding:"0.75rem 1.5rem",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:C?"not-allowed":"pointer",opacity:C?.6:1},children:C?"🔄 Reabriendo...":"🔓 Reabrir Día (Admin)"}),x.jsx("button",{onClick:P,disabled:C,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:C?"not-allowed":"pointer",opacity:C?.6:1},children:"🔄 Actualizar Estado"})]})]})};function tg({orders:d,tables:l,staff:u}){const h=d.reduce((w,_)=>w+_.total,0),C=l.filter(w=>w.status==="OCCUPIED").length,b=u.filter(w=>w.active).length;return x.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[x.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"20px"},children:[x.jsx("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",border:"1px solid #f1f5f9"},children:x.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[x.jsxs("div",{children:[x.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"14px",color:"#64748b",fontWeight:"500"},children:"Ingresos Totales"}),x.jsxs("p",{style:{margin:0,fontSize:"28px",fontWeight:"700",color:"#0f172a"},children:["$",h.toLocaleString()]})]}),x.jsx("div",{style:{width:"48px",height:"48px",backgroundColor:"#dbeafe",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px"},children:"💰"})]})}),x.jsx("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",border:"1px solid #f1f5f9"},children:x.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[x.jsxs("div",{children:[x.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"14px",color:"#64748b",fontWeight:"500"},children:"Pedidos Hoy"}),x.jsx("p",{style:{margin:0,fontSize:"28px",fontWeight:"700",color:"#0f172a"},children:d.length})]}),x.jsx("div",{style:{width:"48px",height:"48px",backgroundColor:"#dcfce7",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px"},children:"📋"})]})}),x.jsx("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",border:"1px solid #f1f5f9"},children:x.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[x.jsxs("div",{children:[x.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"14px",color:"#64748b",fontWeight:"500"},children:"Mesas Ocupadas"}),x.jsxs("p",{style:{margin:0,fontSize:"28px",fontWeight:"700",color:"#0f172a"},children:[C,"/",l.length]})]}),x.jsx("div",{style:{width:"48px",height:"48px",backgroundColor:"#fef3c7",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px"},children:"🪑"})]})}),x.jsx("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",border:"1px solid #f1f5f9"},children:x.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[x.jsxs("div",{children:[x.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"14px",color:"#64748b",fontWeight:"500"},children:"Personal Activo"}),x.jsx("p",{style:{margin:0,fontSize:"28px",fontWeight:"700",color:"#0f172a"},children:b})]}),x.jsx("div",{style:{width:"48px",height:"48px",backgroundColor:"#e0e7ff",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px"},children:"👥"})]})})]}),x.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",border:"1px solid #f1f5f9"},children:[x.jsxs("h3",{style:{margin:"0 0 20px 0",fontSize:"18px",fontWeight:"600",color:"#0f172a"},children:["Personal Activo (",b,")"]}),x.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:u.filter(w=>w.active).length===0?x.jsx("p",{style:{margin:0,fontSize:"14px",color:"#64748b",fontStyle:"italic"},children:"No hay personal activo en este momento"}):u.filter(w=>w.active).map(w=>x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[x.jsxs("div",{children:[x.jsx("p",{style:{margin:"0 0 4px 0",fontSize:"14px",fontWeight:"500",color:"#0f172a"},children:w.name}),x.jsxs("p",{style:{margin:0,fontSize:"12px",color:"#64748b"},children:[w.role==="ADMIN"?"Administrador":w.role==="MANAGER"?"Gerente":w.role==="KITCHEN"?"Chef":"Camarero"," • Activo desde ",new Date(w.createdAt).toLocaleDateString()]})]}),x.jsx("div",{style:{width:"8px",height:"8px",backgroundColor:"#22c55e",borderRadius:"50%"}})]},w.id))})]}),x.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",border:"1px solid #f1f5f9"},children:[x.jsx("h3",{style:{margin:"0 0 20px 0",fontSize:"18px",fontWeight:"600",color:"#0f172a"},children:"Actividad Reciente"}),x.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:d.slice(0,5).map((w,_)=>x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0",borderBottom:_<4?"1px solid #f1f5f9":"none"},children:[x.jsxs("div",{children:[x.jsxs("p",{style:{margin:"0 0 4px 0",fontSize:"14px",fontWeight:"500",color:"#0f172a"},children:["Mesa ",w.tableId," - Pedido #",w.id]}),x.jsx("p",{style:{margin:0,fontSize:"12px",color:"#64748b"},children:new Date(w.timestamp).toLocaleTimeString()})]}),x.jsxs("div",{style:{padding:"4px 8px",backgroundColor:w.status==="entregado"?"#dcfce7":"#fef3c7",color:w.status==="entregado"?"#166534":"#92400e",borderRadius:"6px",fontSize:"12px",fontWeight:"500"},children:["$",w.total]})]},_))})]})]})}function My({orders:d}){const[l,u]=j.useState(new Date().toISOString().split("T")[0]),[h,C]=j.useState(!1),[b,w]=j.useState(!1),_=d.filter(M=>new Date(M.timestamp).toISOString().split("T")[0]===l&&M.paymentStatus==="pagado"),I={totalOrders:_.length,totalRevenue:_.reduce((M,P)=>M+P.total,0),averageOrderValue:_.length>0?_.reduce((M,P)=>M+P.total,0)/_.length:0,cashOrders:_.filter(M=>M.paymentStatus==="pagado").length,pendingOrders:d.filter(M=>new Date(M.timestamp).toISOString().split("T")[0]===l&&M.paymentStatus==="pendiente").length},A=_.reduce((M,P)=>{const G=new Date(P.timestamp).getHours(),ee=`${G}:00 - ${G+1}:00`;return M[ee]||(M[ee]={orders:0,revenue:0}),M[ee].orders+=1,M[ee].revenue+=P.total,M},{}),D=()=>{C(!0),setTimeout(()=>{w(!0),C(!1),alert(`Caja cerrada exitosamente!

Resumen del día ${l}:
- Total de pedidos: ${I.totalOrders}
- Ingresos totales: $${I.totalRevenue.toLocaleString()}
- Promedio por pedido: $${I.averageOrderValue.toFixed(2)}`)},2e3)};return x.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[x.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",border:"1px solid #f1f5f9"},children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[x.jsx("h2",{style:{margin:0,fontSize:"24px",fontWeight:"600",color:"#0f172a",display:"flex",alignItems:"center",gap:"12px"},children:"💰 Panel de Cierre de Caja"}),x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[x.jsx("label",{style:{fontSize:"14px",color:"#64748b"},children:"Fecha:"}),x.jsx("input",{type:"date",value:l,onChange:M=>u(M.target.value),style:{padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}})]})]}),b&&x.jsx("div",{style:{backgroundColor:"#dcfce7",border:"1px solid #bbf7d0",borderRadius:"8px",padding:"12px",marginBottom:"16px"},children:x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#166534"},children:[x.jsx("span",{children:"✅"}),x.jsxs("strong",{children:["Caja cerrada exitosamente para el día ",l]})]})})]}),x.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[x.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #f1f5f9"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[x.jsx("span",{style:{fontSize:"20px"},children:"📋"}),x.jsx("h3",{style:{margin:0,fontSize:"14px",color:"#64748b"},children:"Total Pedidos"})]}),x.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#0f172a"},children:I.totalOrders})]}),x.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #f1f5f9"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[x.jsx("span",{style:{fontSize:"20px"},children:"💵"}),x.jsx("h3",{style:{margin:0,fontSize:"14px",color:"#64748b"},children:"Ingresos Totales"})]}),x.jsxs("div",{style:{fontSize:"24px",fontWeight:"700",color:"#059669"},children:["$",I.totalRevenue.toLocaleString()]})]}),x.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #f1f5f9"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[x.jsx("span",{style:{fontSize:"20px"},children:"📊"}),x.jsx("h3",{style:{margin:0,fontSize:"14px",color:"#64748b"},children:"Promedio por Pedido"})]}),x.jsxs("div",{style:{fontSize:"24px",fontWeight:"700",color:"#0f172a"},children:["$",I.averageOrderValue.toFixed(2)]})]}),x.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #f1f5f9"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[x.jsx("span",{style:{fontSize:"20px"},children:"⏳"}),x.jsx("h3",{style:{margin:0,fontSize:"14px",color:"#64748b"},children:"Pedidos Pendientes"})]}),x.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"#dc2626"},children:I.pendingOrders})]})]}),x.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #f1f5f9"},children:[x.jsx("h3",{style:{margin:"0 0 20px 0",fontSize:"18px",fontWeight:"600",color:"#0f172a",display:"flex",alignItems:"center",gap:"8px"},children:"⏰ Desglose por Horas"}),Object.keys(A).length>0?x.jsx("div",{style:{overflowX:"auto"},children:x.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[x.jsx("thead",{children:x.jsxs("tr",{style:{backgroundColor:"#f8fafc"},children:[x.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#64748b",borderBottom:"1px solid #e2e8f0"},children:"HORARIO"}),x.jsx("th",{style:{padding:"12px",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#64748b",borderBottom:"1px solid #e2e8f0"},children:"PEDIDOS"}),x.jsx("th",{style:{padding:"12px",textAlign:"right",fontSize:"12px",fontWeight:"600",color:"#64748b",borderBottom:"1px solid #e2e8f0"},children:"INGRESOS"})]})}),x.jsx("tbody",{children:Object.entries(A).sort(([M],[P])=>M.localeCompare(P)).map(([M,P])=>x.jsxs("tr",{children:[x.jsx("td",{style:{padding:"12px",fontSize:"14px",color:"#0f172a",borderBottom:"1px solid #f1f5f9"},children:M}),x.jsx("td",{style:{padding:"12px",textAlign:"center",fontSize:"14px",color:"#0f172a",borderBottom:"1px solid #f1f5f9"},children:P.orders}),x.jsxs("td",{style:{padding:"12px",textAlign:"right",fontSize:"14px",fontWeight:"600",color:"#059669",borderBottom:"1px solid #f1f5f9"},children:["$",P.revenue.toLocaleString()]})]},M))})]})}):x.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#64748b",fontSize:"16px"},children:"No hay pedidos registrados para la fecha seleccionada"})]}),x.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #f1f5f9"},children:[x.jsxs("h3",{style:{margin:"0 0 20px 0",fontSize:"18px",fontWeight:"600",color:"#0f172a",display:"flex",alignItems:"center",gap:"8px"},children:["📋 Detalle de Pedidos (",_.length,")"]}),_.length>0?x.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"16px",maxHeight:"400px",overflowY:"auto"},children:_.map(M=>x.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"8px",padding:"16px",backgroundColor:"#f9fafb"},children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[x.jsxs("strong",{style:{fontSize:"14px",color:"#374151"},children:["Mesa ",M.tableId]}),x.jsx("span",{style:{backgroundColor:"#dcfce7",color:"#166534",padding:"2px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500"},children:M.status})]}),x.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"8px"},children:new Date(M.timestamp).toLocaleTimeString()}),x.jsxs("div",{style:{fontSize:"16px",fontWeight:"600",color:"#059669"},children:["$",M.total.toLocaleString()]}),x.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:[M.items?.length||0," items"]})]},M.id))}):x.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#64748b",fontSize:"16px"},children:"No hay pedidos pagados para la fecha seleccionada"})]}),!b&&I.totalOrders>0&&x.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",border:"1px solid #f1f5f9",textAlign:"center"},children:[x.jsxs("div",{style:{marginBottom:"16px"},children:[x.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"18px",color:"#0f172a"},children:"¿Listo para cerrar la caja?"}),x.jsx("p",{style:{margin:0,color:"#64748b",fontSize:"14px"},children:"Esta acción generará el reporte final del día y cerrará la caja."})]}),x.jsx("button",{onClick:D,disabled:h,style:{backgroundColor:h?"#9ca3af":"#dc2626",color:"white",border:"none",padding:"12px 32px",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:h?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",margin:"0 auto"},children:h?x.jsxs(x.Fragment,{children:[x.jsx("span",{children:"⏳"}),"Cerrando caja..."]}):x.jsxs(x.Fragment,{children:[x.jsx("span",{children:"🔒"}),"Cerrar Caja del Día"]})})]})]})}function Dy({menu:d,onAddItem:l,onToggleStock:u,onEditItem:h,onDeleteItem:C,name:b,setName:w,price:_,setPrice:I,description:A,setDescription:D,image:M,setImage:P,categories:G,selectedCategoryId:ee,setSelectedCategoryId:ne,editingProduct:J,setEditingProduct:xe}){const[ce,X]=j.useState(!1),[Ee,Fe]=j.useState("none"),[ge,te]=j.useState(null),Te=()=>{if(!b||_<=0||!ee){alert("Por favor completa todos los campos requeridos (nombre, precio y categoría)");return}l(),X(!1)},de=De=>{const tt=De.target.files?.[0];if(tt){te(tt);const Me=new FileReader;Me.onload=nt=>{P(nt.target?.result)},Me.readAsDataURL(tt)}};return x.jsxs("div",{children:[x.jsxs("section",{className:"card",children:[x.jsx("h3",{children:"🍽️ Gestión de Menú"}),x.jsx("button",{onClick:()=>{X(!ce),J&&xe(null)},className:"primary",children:ce?"Cancelar":J?"Cancelar Edición":"Agregar nuevo plato"}),(ce||J)&&x.jsxs("div",{style:{marginTop:16,padding:20,border:"1px solid #e0e0e0",borderRadius:12,backgroundColor:"#fafafa"},children:[x.jsx("h4",{style:{margin:"0 0 16px 0",color:"#333"},children:J?"✏️ Editar plato":"✨ Agregar nuevo plato"}),x.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:16},children:[x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:6,fontWeight:"bold",color:"#555"},children:"📝 Nombre del plato *"}),x.jsx("input",{placeholder:"Ej: Hamburguesa Clásica",value:b,onChange:De=>w(De.target.value),style:{width:"100%",padding:"10px 12px",border:"2px solid #ddd",borderRadius:8,fontSize:14}})]}),x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:6,fontWeight:"bold",color:"#555"},children:"💰 Precio *"}),x.jsx("input",{type:"number",placeholder:"0",value:_||"",onChange:De=>I(Number(De.target.value)),style:{width:"100%",padding:"10px 12px",border:"2px solid #ddd",borderRadius:8,fontSize:14}})]}),x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:6,fontWeight:"bold",color:"#555"},children:"🏷️ Categoría *"}),x.jsxs("select",{value:ee,onChange:De=>ne(De.target.value),style:{width:"100%",padding:"10px 12px",border:"2px solid #ddd",borderRadius:8,fontSize:14,backgroundColor:"white"},children:[x.jsx("option",{value:"",children:"Seleccionar categoría..."}),G.map(De=>x.jsx("option",{value:De.id,children:De.name},De.id))]})]}),x.jsxs("div",{style:{gridColumn:"1 / -1"},children:[x.jsx("label",{style:{display:"block",marginBottom:6,fontWeight:"bold",color:"#555"},children:"📄 Descripción"}),x.jsx("textarea",{placeholder:"Describe los ingredientes y características del plato...",value:A,onChange:De=>D(De.target.value),rows:3,style:{width:"100%",padding:"10px 12px",border:"2px solid #ddd",borderRadius:8,fontSize:14,resize:"vertical"}})]}),x.jsxs("div",{style:{gridColumn:"1 / -1"},children:[x.jsx("label",{style:{display:"block",marginBottom:6,fontWeight:"bold",color:"#555"},children:"🖼️ Imagen del plato"}),x.jsxs("div",{style:{display:"flex",gap:12,marginBottom:12},children:[x.jsx("button",{type:"button",onClick:()=>Fe("none"),style:{padding:"8px 16px",border:Ee==="none"?"2px solid #007bff":"1px solid #ddd",borderRadius:6,backgroundColor:Ee==="none"?"#007bff":"#f8f9fa",color:Ee==="none"?"white":"#333",cursor:"pointer",transition:"all 0.2s ease"},children:"Sin imagen"}),x.jsx("button",{type:"button",onClick:()=>Fe("url"),style:{padding:"8px 16px",border:Ee==="url"?"2px solid #007bff":"1px solid #ddd",borderRadius:6,backgroundColor:Ee==="url"?"#007bff":"#f8f9fa",color:Ee==="url"?"white":"#333",cursor:"pointer",transition:"all 0.2s ease"},children:"URL de imagen"}),x.jsx("button",{type:"button",onClick:()=>Fe("upload"),style:{padding:"8px 16px",border:Ee==="upload"?"2px solid #007bff":"1px solid #ddd",borderRadius:6,backgroundColor:Ee==="upload"?"#007bff":"#f8f9fa",color:Ee==="upload"?"white":"#333",cursor:"pointer",transition:"all 0.2s ease"},children:"Subir archivo"})]}),Ee==="url"&&x.jsx("input",{placeholder:"https://ejemplo.com/imagen.jpg",value:M,onChange:De=>P(De.target.value),style:{width:"100%",padding:"10px 12px",border:"2px solid #ddd",borderRadius:8,fontSize:14}}),Ee==="upload"&&x.jsxs("div",{children:[x.jsx("input",{type:"file",accept:"image/*",onChange:de,style:{width:"100%",padding:"10px 12px",border:"2px solid #ddd",borderRadius:8,fontSize:14}}),ge&&x.jsxs("p",{style:{marginTop:8,color:"#666",fontSize:12},children:["Archivo seleccionado: ",ge.name]})]}),M&&x.jsxs("div",{style:{marginTop:12},children:[x.jsx("p",{style:{marginBottom:8,color:"#666",fontSize:12},children:"Vista previa:"}),x.jsx("img",{src:M,alt:"Vista previa",style:{maxWidth:200,maxHeight:150,borderRadius:8,border:"1px solid #ddd"},onError:()=>P("")})]})]})]}),x.jsxs("div",{style:{marginTop:20,display:"flex",gap:12},children:[x.jsx("button",{onClick:Te,className:"primary",style:{padding:"12px 24px",fontSize:16,fontWeight:"bold"},children:J?"✏️ Actualizar plato":"✅ Agregar plato"}),x.jsx("button",{onClick:()=>{X(!1),xe(null)},style:{padding:"12px 24px",fontSize:16,backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:6,cursor:"pointer"},children:"❌ Cancelar"})]})]})]}),x.jsxs("section",{className:"card",children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:20},children:[x.jsx("span",{style:{fontSize:"20px"},children:"📋"}),x.jsxs("h3",{style:{margin:0},children:["Menú actual (",d.length," platos)"]})]}),x.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(380px, 1fr))",gap:16},children:d.map(De=>x.jsxs("div",{style:{backgroundColor:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:12,padding:16,position:"relative"},children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:8},children:[x.jsx("h4",{style:{margin:0,fontSize:"16px",fontWeight:"600",color:"#333"},children:De.name}),x.jsxs("div",{style:{fontSize:"16px",fontWeight:"700",color:"#333"},children:["$",De.price]})]}),x.jsx("div",{style:{marginBottom:12},children:!De.active&&x.jsx("span",{style:{backgroundColor:"#dc3545",color:"white",padding:"2px 8px",borderRadius:4,fontSize:"12px",fontWeight:"500"},children:"¡AGOTADO!"})}),De.tags&&De.tags.length>0&&x.jsx("div",{style:{marginBottom:12},children:De.tags.map(tt=>x.jsx("span",{style:{backgroundColor:tt==="vegano"?"#28a745":"#17a2b8",color:"white",padding:"2px 6px",borderRadius:4,fontSize:"11px",marginRight:4,textTransform:"capitalize"},children:tt==="vegano"?"Vegano":"Sin Gluten"},tt))}),x.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[x.jsx("button",{onClick:()=>u(De.id,De.active),style:{backgroundColor:De.active?"#28a745":"#ffc107",color:De.active?"white":"#212529",border:"none",padding:"4px 8px",borderRadius:4,fontSize:"11px",fontWeight:"500",cursor:"pointer"},children:De.active?"✓ Marcar agotado":"Volvio stock"}),x.jsx("button",{onClick:()=>h(De),style:{backgroundColor:"#ffc107",color:"#212529",border:"none",padding:"4px 8px",borderRadius:4,fontSize:"11px",fontWeight:"500",cursor:"pointer"},children:"📝 Editar"}),x.jsx("button",{onClick:()=>C(De.id),style:{backgroundColor:"#dc3545",color:"white",border:"none",padding:"4px 8px",borderRadius:4,fontSize:"11px",fontWeight:"500",cursor:"pointer"},children:"🗑️ Eliminar"})]})]},De.id))})]})]})}function By({staff:d,onAddStaff:l,onToggleStatus:u,onDeleteStaff:h,newStaffName:C,setNewStaffName:b,newStaffPassword:w,setNewStaffPassword:_,newStaffRole:I,setNewStaffRole:A}){const[D,M]=j.useState(!1),[P,G]=j.useState({}),ee=()=>{const J={};return C.trim()?C.trim().length<8&&(J.name="El nombre debe tener al menos 8 caracteres"):J.name="El nombre es requerido",w.trim()?w.trim().length<8&&(J.password="La contraseña debe tener al menos 8 caracteres"):J.password="La contraseña es requerida",G(J),Object.keys(J).length===0},ne=()=>{ee()&&(l(),M(!1),G({}))};return x.jsxs("div",{children:[x.jsxs("section",{className:"card",children:[x.jsx("h3",{children:"👥 Gestión de Personal"}),x.jsx("button",{onClick:()=>M(!D),className:"primary",children:D?"Cancelar":"Agregar nuevo miembro"}),D&&x.jsxs("div",{style:{marginTop:20,padding:24,border:"1px solid #e2e8f0",borderRadius:12,backgroundColor:"#f8fafc"},children:[x.jsx("h4",{style:{marginBottom:16,color:"#1e293b"},children:"Nuevo miembro del personal"}),x.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:16},children:[x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:6,fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Nombre completo *"}),x.jsx("input",{placeholder:"Ingrese el nombre completo (mínimo 8 caracteres)",value:C,onChange:J=>{b(J.target.value),P.name&&G(xe=>({...xe,name:void 0}))},style:{width:"100%",padding:"12px 16px",border:`1px solid ${P.name?"#dc2626":"#d1d5db"}`,borderRadius:"8px",fontSize:"14px",backgroundColor:"white"}}),P.name&&x.jsx("div",{style:{color:"#dc2626",fontSize:"12px",marginTop:"4px",fontWeight:"500"},children:P.name})]}),x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:6,fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Contraseña *"}),x.jsx("input",{placeholder:"Contraseña para el sistema (mínimo 8 caracteres)",type:"password",value:w,onChange:J=>{_(J.target.value),P.password&&G(xe=>({...xe,password:void 0}))},style:{width:"100%",padding:"12px 16px",border:`1px solid ${P.password?"#dc2626":"#d1d5db"}`,borderRadius:"8px",fontSize:"14px",backgroundColor:"white"}}),P.password&&x.jsx("div",{style:{color:"#dc2626",fontSize:"12px",marginTop:"4px",fontWeight:"500"},children:P.password})]}),x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:6,fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Cargo"}),x.jsxs("select",{value:I,onChange:J=>A(J.target.value),style:{width:"100%",padding:"12px 16px",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"14px",backgroundColor:"white"},children:[x.jsx("option",{value:"WAITER",children:"Camarero"}),x.jsx("option",{value:"KITCHEN",children:"Chef"}),x.jsx("option",{value:"ADMIN",children:"Administrador"})]})]})]}),x.jsx("button",{onClick:ne,className:"primary",style:{marginTop:16,padding:"12px 24px",fontSize:"14px",fontWeight:"500"},children:"Agregar miembro"})]})]}),x.jsxs("section",{className:"card",children:[x.jsxs("h3",{children:["📋 Personal actual (",d.length," miembros)"]}),x.jsx("div",{style:{display:"grid",gap:16},children:d.map(J=>x.jsxs("div",{className:"staff-card",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:20,border:"1px solid #e2e8f0",borderRadius:12,backgroundColor:J.active?"white":"#f1f5f9",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[x.jsxs("div",{children:[x.jsx("div",{style:{fontWeight:"600",fontSize:"16px",color:"#1e293b",marginBottom:4},children:J.name}),x.jsx("div",{style:{color:"#64748b",fontSize:"14px",marginBottom:2},children:x.jsx("span",{style:{display:"inline-block",padding:"2px 8px",backgroundColor:J.role==="ADMIN"?"#dbeafe":J.role==="KITCHEN"?"#fef3c7":J.role==="MANAGER"?"#f3e8ff":"#dcfce7",color:J.role==="ADMIN"?"#1e40af":J.role==="KITCHEN"?"#92400e":J.role==="MANAGER"?"#7c3aed":"#166534",borderRadius:"4px",fontSize:"12px",fontWeight:"500",textTransform:"capitalize"},children:J.role==="ADMIN"?"Administrador":J.role==="MANAGER"?"Gerente":J.role==="KITCHEN"?"Chef":"Camarero"})}),x.jsxs("div",{style:{fontSize:"12px",color:"#94a3b8"},children:["Creado: ",new Date(J.createdAt).toLocaleDateString()]})]}),x.jsxs("div",{style:{display:"flex",gap:12},children:[x.jsx("button",{onClick:()=>u(J.id),style:{padding:"8px 16px",borderRadius:"6px",border:"none",fontSize:"14px",fontWeight:"500",cursor:"pointer",backgroundColor:J.active?"#fef2f2":"#f0fdf4",color:J.active?"#dc2626":"#16a34a"},children:J.active?"⏸️ Desactivar":"▶️ Activar"}),x.jsx("button",{onClick:()=>h(J.id),style:{padding:"8px 16px",borderRadius:"6px",border:"none",fontSize:"14px",fontWeight:"500",cursor:"pointer",backgroundColor:"#dc2626",color:"white"},children:"🗑️ Eliminar"})]})]},J.id))})]})]})}function Ly({tables:d,onGenerateQR:l,onAddTable:u,onUpdateStatus:h,onDeleteTable:C,onEditTable:b}){const[w,_]=j.useState(!1),[I,A]=j.useState(null),D=()=>{if(!d||d.length===0)return 1;const X=d.map(Ee=>Ee.number).sort((Ee,Fe)=>Ee-Fe);for(let Ee=1;Ee<=X.length+1;Ee++)if(!X.includes(Ee))return Ee;return X.length+1},[M,P]=j.useState(()=>({number:D(),capacity:4,status:"AVAILABLE"})),[G,ee]=j.useState({number:0,capacity:4});ax.useEffect(()=>{w||P(X=>({...X,number:D()}))},[d,w]);const ne=()=>{if(M.number<=0){alert("Por favor, ingrese un número de mesa válido (mayor a 0)");return}if(M.capacity<=0){alert("Por favor, ingrese una capacidad válida (mayor a 0)");return}if(d.find(Ee=>Ee.number===M.number)){alert(`Ya existe una mesa con el número ${M.number}. Por favor, elija un número diferente.`);return}u(M),_(!1),P({number:D(),capacity:4,status:"AVAILABLE"})},J=X=>{const Ee=d.find(Fe=>Fe.id===X);Ee&&(ee({number:Ee.number,capacity:Ee.capacity}),A(X))},xe=()=>{I&&(b(I,G),A(null))},ce=()=>{A(null)};return x.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[x.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",border:"1px solid #f1f5f9"},children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:w?"20px":"0"},children:[x.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#0f172a",display:"flex",alignItems:"center",gap:"8px"},children:"🪑 Gestión de Mesas"}),x.jsx("button",{onClick:()=>_(!w),style:{backgroundColor:w?"#64748b":"#3b82f6",color:"white",border:"none",padding:"10px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:w?"Cancelar":"Agregar nueva mesa"})]}),w&&x.jsx("div",{style:{padding:"20px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:x.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr auto",gap:"16px",alignItems:"end"},children:[x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Número de mesa"}),x.jsxs("small",{style:{display:"block",marginBottom:"6px",fontSize:"12px",color:"#6b7280"},children:["Mesas existentes: ",d.map(X=>X.number).sort((X,Ee)=>X-Ee).join(", ")]}),x.jsx("input",{type:"number",placeholder:"Ej: 5",value:M.number,onChange:X=>P({...M,number:Number(X.target.value)}),style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}})]}),x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:"6px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Capacidad (personas)"}),x.jsx("input",{type:"number",placeholder:"Ej: 4",value:M.capacity,onChange:X=>P({...M,capacity:Number(X.target.value)}),style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}})]}),x.jsx("button",{onClick:ne,style:{backgroundColor:"#10b981",color:"white",border:"none",padding:"12px 20px",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer",height:"fit-content"},children:"Agregar mesa"})]})})]}),x.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"12px",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",border:"1px solid #f1f5f9"},children:[x.jsxs("h3",{style:{margin:"0 0 20px 0",fontSize:"18px",fontWeight:"600",color:"#0f172a",display:"flex",alignItems:"center",gap:"8px"},children:["📋 Mesas del restaurante (",d.length," mesas)"]}),x.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"20px"},children:d.map(X=>x.jsxs("div",{style:{padding:"20px",border:"1px solid #e2e8f0",borderRadius:"8px",backgroundColor:"#fafafa"},children:[I===X.id?x.jsxs("div",{children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[x.jsx("h4",{style:{margin:0,fontSize:"16px",fontWeight:"600",color:"#0f172a"},children:"Editando Mesa"}),x.jsxs("div",{style:{display:"flex",gap:"8px"},children:[x.jsx("button",{onClick:xe,style:{backgroundColor:"#10b981",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",fontSize:"12px",cursor:"pointer"},children:"✓ Guardar"}),x.jsx("button",{onClick:ce,style:{backgroundColor:"#64748b",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",fontSize:"12px",cursor:"pointer"},children:"✕ Cancelar"})]})]}),x.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"16px"},children:[x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"12px",fontWeight:"500",color:"#374151"},children:"Número de mesa"}),x.jsx("input",{type:"number",value:G.number,onChange:Ee=>ee({...G,number:Number(Ee.target.value)}),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"14px"}})]}),x.jsxs("div",{children:[x.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"12px",fontWeight:"500",color:"#374151"},children:"Capacidad (personas)"}),x.jsx("input",{type:"number",value:G.capacity,onChange:Ee=>ee({...G,capacity:Number(Ee.target.value)}),style:{width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"14px"}})]})]})]}):x.jsxs("div",{children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[x.jsxs("h4",{style:{margin:0,fontSize:"16px",fontWeight:"600",color:"#0f172a"},children:["Mesa ",X.number]}),x.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500",backgroundColor:X.status==="AVAILABLE"?"#dcfce7":X.status==="OCCUPIED"?"#fee2e2":X.status==="RESERVED"?"#fef3c7":"#f3f4f6",color:X.status==="AVAILABLE"?"#166534":X.status==="OCCUPIED"?"#991b1b":X.status==="RESERVED"?"#92400e":"#374151"},children:X.status})]}),x.jsxs("div",{style:{marginBottom:"16px"},children:[x.jsxs("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"4px"},children:["👥 Capacidad: ",x.jsxs("strong",{children:[X.capacity," personas"]})]}),x.jsxs("div",{style:{fontSize:"14px",color:"#64748b"},children:["📋 Pedidos activos: ",X.currentOrders?.length||0]})]}),x.jsxs("div",{style:{display:"flex",gap:"6px",marginBottom:"12px",flexWrap:"wrap"},children:[x.jsx("button",{onClick:()=>h(X.id,"AVAILABLE"),style:{backgroundColor:X.status==="AVAILABLE"?"#10b981":"#f1f5f9",color:X.status==="AVAILABLE"?"white":"#64748b",border:"none",padding:"6px 10px",borderRadius:"4px",fontSize:"12px",cursor:"pointer"},children:"🟢 Libre"}),x.jsx("button",{onClick:()=>h(X.id,"OCCUPIED"),style:{backgroundColor:X.status==="OCCUPIED"?"#ef4444":"#f1f5f9",color:X.status==="OCCUPIED"?"white":"#64748b",border:"none",padding:"6px 10px",borderRadius:"4px",fontSize:"12px",cursor:"pointer"},children:"🔴 Ocupada"}),x.jsx("button",{onClick:()=>h(X.id,"RESERVED"),style:{backgroundColor:X.status==="RESERVED"?"#f59e0b":"#f1f5f9",color:X.status==="RESERVED"?"white":"#64748b",border:"none",padding:"6px 10px",borderRadius:"4px",fontSize:"12px",cursor:"pointer"},children:"💳 Reservada"}),x.jsx("button",{onClick:()=>h(X.id,"OUT_OF_SERVICE"),style:{backgroundColor:X.status==="OUT_OF_SERVICE"?"#8b5cf6":"#f1f5f9",color:X.status==="OUT_OF_SERVICE"?"white":"#64748b",border:"none",padding:"6px 10px",borderRadius:"4px",fontSize:"12px",cursor:"pointer"},children:"🧽 Fuera de Servicio"})]}),x.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"space-between"},children:[x.jsxs("div",{style:{display:"flex",gap:"8px"},children:[x.jsx("button",{onClick:()=>l(X.id),style:{backgroundColor:"#3b82f6",color:"white",border:"none",padding:"8px 12px",borderRadius:"4px",fontSize:"12px",cursor:"pointer"},children:"📱 Generar QR"}),x.jsx("button",{onClick:()=>J(X.id),style:{backgroundColor:"#f59e0b",color:"white",border:"none",padding:"8px 12px",borderRadius:"4px",fontSize:"12px",cursor:"pointer"},children:"✏️ Editar"})]}),x.jsx("button",{onClick:()=>C(X.id),style:{backgroundColor:"#ef4444",color:"white",border:"none",padding:"8px 12px",borderRadius:"4px",fontSize:"12px",cursor:"pointer"},children:"🗑️ Eliminar"})]})]}),X.qrCode&&x.jsx("div",{style:{marginTop:12,textAlign:"center"},children:x.jsx("img",{src:X.qrCode,alt:`QR Mesa ${X.number}`,style:{maxWidth:150,height:"auto"}})})]},X.id))})]})]})}function jy({orders:d}){const l=u=>u||"N/A";return x.jsx("div",{children:x.jsxs("section",{className:"card",children:[x.jsxs("h3",{children:["📋 Control de pedidos (",d.length," pedidos)"]}),x.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:16},children:d.map(u=>x.jsxs("div",{className:"order-card",style:{padding:16,border:"1px solid var(--muted)",borderRadius:8,backgroundColor:"var(--surface)"},children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[x.jsxs("h4",{children:["Mesa ",l(u.tableId)]}),x.jsx("span",{className:`status-badge status-${u.status}`,children:u.status})]}),x.jsxs("div",{style:{marginBottom:12},children:[x.jsxs("div",{children:["Total: $",u.total]}),x.jsxs("div",{children:["Items: ",u.items?.length||0]}),x.jsxs("div",{children:["Hora: ",new Date(u.timestamp).toLocaleTimeString()]})]}),x.jsxs("div",{style:{marginBottom:12},children:[x.jsx("h5",{children:"Items del pedido:"}),u.items?.map((h,C)=>x.jsxs("div",{style:{fontSize:"0.9rem",padding:"2px 0"},children:[h.qty,"x Item ID: ",h.menuItemId]},C))]}),x.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[x.jsx("button",{className:u.status==="pendiente"?"primary":"",children:"⏳ Pendiente"}),x.jsx("button",{className:u.status==="en_cocina"?"primary":"",children:"👨‍🍳 En Cocina"}),x.jsx("button",{className:u.status==="listo"?"primary":"",children:"✅ Listo"}),x.jsx("button",{className:u.status==="entregado"?"primary":"",children:"🚚 Entregado"})]})]},u.id))})]})})}function ky({orders:d}){const l=d.filter(C=>C.paymentStatus==="pagado"),u=d.filter(C=>C.paymentStatus==="pendiente"),h=l.reduce((C,b)=>C+(b.total||0),0);return x.jsxs("div",{children:[x.jsxs("section",{className:"card",children:[x.jsx("h3",{children:"💳 Resumen de pagos"}),x.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:16},children:[x.jsxs("div",{className:"stat-card",children:[x.jsx("h4",{children:"💰 Ingresos totales"}),x.jsxs("div",{className:"stat-value",children:["$",h]})]}),x.jsxs("div",{className:"stat-card",children:[x.jsx("h4",{children:"✅ Pagos completados"}),x.jsx("div",{className:"stat-value",children:l.length})]}),x.jsxs("div",{className:"stat-card",children:[x.jsx("h4",{children:"⏳ Pagos pendientes"}),x.jsx("div",{className:"stat-value",children:u.length})]})]})]}),x.jsxs("section",{className:"card",children:[x.jsx("h3",{children:"📋 Historial de pagos"}),x.jsx("div",{style:{display:"grid",gap:12},children:d.map(C=>x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:12,border:"1px solid var(--muted)",borderRadius:8,backgroundColor:C.paymentStatus==="pagado"?"#f0f9ff":"#fef3c7"},children:[x.jsxs("div",{children:[x.jsxs("div",{style:{fontWeight:"bold"},children:["Mesa ",C.tableId," - $",C.total]}),x.jsx("div",{style:{fontSize:"0.9rem",color:"var(--muted-foreground)"},children:new Date(C.timestamp).toLocaleString()})]}),x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[x.jsx("span",{className:`status-badge ${C.paymentStatus==="pagado"?"status-paid":"status-pending"}`,children:C.paymentStatus==="pagado"?"✅ Pagado":"⏳ Pendiente"}),C.paymentStatus&&C.paymentStatus!=="pendiente"&&x.jsx("span",{style:{fontSize:"0.8rem",color:"var(--muted-foreground)"},children:C.paymentStatus})]})]},C.id))})]})]})}const zy=()=>{const[d,l]=j.useState("dashboard"),[u,h]=j.useState([]),[C,b]=j.useState([]),[w,_]=j.useState([]),[I,A]=j.useState([]),[D,M]=j.useState(!0),[P,G]=j.useState(""),[ee,ne]=j.useState(""),[J,xe]=j.useState("WAITER"),[ce,X]=j.useState([]),[Ee,Fe]=j.useState(""),[ge,te]=j.useState(""),[Te,de]=j.useState(0),[De,tt]=j.useState(""),[Me,nt]=j.useState(""),[st,oe]=j.useState(null);j.useEffect(()=>{(async()=>{M(!0),await Promise.all([$(),fe(),Z(),Ge()]),M(!1)})()},[]);const $=async()=>{try{const _e=await fetch("/api/tables");if(_e.ok){const Xe=await _e.json(),Oe=Xe.data||Xe;b(Array.isArray(Oe)?Oe:[])}else console.error("Error loading tables: Response not ok"),b([])}catch(_e){console.error("Error loading tables:",_e),b([])}},fe=async()=>{try{const _e=await fetch("/api/users");if(_e.ok){const Oe=(await _e.json()).data||[];_(Array.isArray(Oe)?Oe:[])}else console.error("Error loading staff: Response not ok"),_([])}catch(_e){console.error("Error loading staff:",_e),_([])}},Ge=async()=>{try{console.log("Cargando categorías...");const _e=await fetch("/api/categories");if(console.log("Respuesta de categorías:",_e.status,_e.statusText),_e.ok){const Xe=await _e.json();console.log("Datos de categorías recibidos:",Xe);const Oe=Xe.data||[];X(Array.isArray(Oe)?Oe:[]),console.log("Categorías establecidas:",Oe)}else console.error("Error loading categories: Response not ok",_e.status),X([])}catch(_e){console.error("Error loading categories:",_e),X([])}},Z=async()=>{try{const _e=await fetch("/api/products");if(_e.ok){const Oe=(await _e.json()).data||[];A(Array.isArray(Oe)?Oe:[])}else console.error("Error loading menu: Response not ok"),A([])}catch(_e){console.error("Error loading menu:",_e),A([])}},be=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"},z=async _e=>{try{const Xe={..._e,currentOrders:[]},Oe=await fetch("/api/tables",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Xe)});if(Oe.ok)await $();else{const We=await Oe.json();console.error("Error adding table:",We),alert(`Error al agregar mesa: ${We.error||"Error desconocido"}`)}}catch(Xe){console.error("Error adding table:",Xe),alert("Error al agregar mesa. Por favor, intente nuevamente.")}},re=async _e=>{try{const Xe=await fetch(`/api/tables/${_e}/qr`,{method:"POST"});if(Xe.ok){const Oe=await Xe.json();alert(`Código QR generado exitosamente: ${Oe.data.qrCode}`),$()}else{const Oe=await Xe.json();alert(`Error al generar QR: ${Oe.error||"Error desconocido"}`)}}catch(Xe){console.error("Error generating QR:",Xe),alert("Error al generar código QR. Por favor, intente nuevamente.")}},ve=async(_e,Xe)=>{try{const Oe=await fetch(`/api/tables/${_e}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:Xe})});if(Oe.ok)$();else{const We=await Oe.json();alert(`Error al actualizar estado: ${We.error||"Error desconocido"}`)}}catch(Oe){console.error("Error updating table status:",Oe),alert("Error al actualizar estado de la mesa. Por favor, intente nuevamente.")}},Re=async _e=>{if(confirm("¿Está seguro de que desea eliminar esta mesa?"))try{const Xe=await fetch(`/api/tables/${_e}`,{method:"DELETE"});if(Xe.ok)alert("Mesa eliminada exitosamente"),$();else{const Oe=await Xe.json();Xe.status===409?alert(`❌ No se puede eliminar la mesa porque tiene pedidos activos.

Por favor, complete o cancele todos los pedidos de esta mesa antes de eliminarla.`):alert(`Error al eliminar mesa: ${Oe.error||"Error desconocido"}`)}}catch(Xe){console.error("Error deleting table:",Xe),alert("Error al eliminar mesa. Por favor, intente nuevamente.")}},Ke=async(_e,Xe)=>{try{const Oe=await fetch(`/api/tables/${_e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Xe)});if(Oe.ok)alert("Mesa actualizada exitosamente"),$();else{const We=await Oe.json();alert(`Error al actualizar mesa: ${We.error||"Error desconocido"}`)}}catch(Oe){console.error("Error editing table:",Oe),alert("Error al editar mesa. Por favor, intente nuevamente.")}},Se=async()=>{if(!(!P.trim()||!ee.trim()))try{const _e=localStorage.getItem("token"),Xe={name:P.trim(),email:`${P.trim().toLowerCase().replace(/\s+/g,".")}@restaurant.com`,password:ee.trim(),role:J},Oe=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_e}`},body:JSON.stringify(Xe)});if(Oe.ok)fe(),G(""),ne(""),xe("WAITER");else{const We=await Oe.json();console.error("Error adding staff member:",We)}}catch(_e){console.error("Error adding staff member:",_e)}},ot=async _e=>{try{console.log("Intentando cambiar estado del staff con ID:",_e);const Xe=localStorage.getItem("token");if(!Xe){alert("Error: {success: false, error: Token de acceso requerido}");return}const Oe=w.find(Qe=>Qe.id===_e);if(!Oe){console.error("Staff member not found with ID:",_e);return}console.log("Staff member encontrado:",Oe),console.log("Cambiando active de",Oe.active,"a",!Oe.active);const We=await fetch(`/api/users/${_e}/status`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Xe}`},body:JSON.stringify({active:!Oe.active})});if(console.log("Respuesta del servidor:",We.status,We.statusText),We.ok){const Qe=await We.json();console.log("Estado actualizado exitosamente:",Qe),fe()}else{const Qe=await We.json();console.error("Error toggling staff status:",Qe),We.status===401?alert("Error: {success: false, error: Token de acceso requerido}"):alert(`Error: ${Qe.message||"No se pudo cambiar el estado del personal"}`)}}catch(Xe){console.error("Error toggling staff status:",Xe),alert("Error de conexión al cambiar estado del personal")}},ft=async _e=>{try{console.log("Intentando eliminar staff con ID:",_e);const Xe=localStorage.getItem("token");if(!Xe){alert("Error deleting staff: {success: false, error: Token de acceso requerido}");return}const Oe=await fetch(`/api/users/${_e}`,{method:"DELETE",headers:{Authorization:`Bearer ${Xe}`}});if(console.log("Respuesta del servidor para eliminación:",Oe.status,Oe.statusText),Oe.ok){const We=await Oe.json();console.log("Staff eliminado exitosamente:",We),fe(),alert("Personal eliminado exitosamente")}else{const We=await Oe.json();console.error("Error deleting staff:",We),Oe.status===401?alert("Error deleting staff: {success: false, error: Token de acceso requerido}"):alert(`Error: ${We.message||"No se pudo eliminar el personal"}`)}}catch(Xe){console.error("Error deleting staff:",Xe),alert("Error de conexión al eliminar personal")}},Bt=async()=>{if(!ge||!Te||!Ee){alert("Por favor completa todos los campos requeridos (nombre, precio y categoría)");return}try{const _e=st?"PUT":"POST",Xe=st?`/api/products/${st.id}`:"/api/products";console.log("Enviando datos:",{name:ge,price:Te,image:Me||void 0,categoryId:Ee,active:!0});const Oe=await fetch(Xe,{method:_e,headers:{"Content-Type":"application/json"},body:JSON.stringify({name:ge,price:Te,image:Me||void 0,categoryId:Ee,active:!0})});if(console.log("Respuesta del servidor:",Oe.status,Oe.statusText),Oe.ok){const We=await Oe.json();console.log("Producto procesado exitosamente:",We),await Z(),te(""),tt(""),de(0),nt(""),Fe(""),oe(null),alert(st?"Producto actualizado exitosamente":"Producto agregado exitosamente")}else{const We=await Oe.json();console.error("Error del servidor:",We),alert(`Error: ${We.message||"No se pudo procesar el producto"}`)}}catch(_e){console.error("Error de conexión:",_e),alert("Error de conexión")}},Yn=async(_e,Xe)=>{try{(await fetch(`/api/products/${_e}/availability`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({active:!Xe})})).ok?Z():console.error("Error toggling stock")}catch(Oe){console.error("Error toggling stock:",Oe)}},cn=_e=>{oe(_e),te(_e.name),de(_e.price),tt(""),nt(_e.image||""),Fe(_e.category||"")},hi=async _e=>{const Xe=I.find(Qe=>Qe.id===_e),Oe=Xe?Xe.name:"este producto";if(window.confirm(`¿Estás seguro de que quieres eliminar "${Oe}"?

Esta acción no se puede deshacer.`))try{const Qe=await fetch(`/api/products/${_e}`,{method:"DELETE"});if(Qe.ok)Z(),alert(`Producto "${Oe}" eliminado exitosamente`);else if(Qe.status===409){const ii=await Qe.json();alert(`No se puede eliminar el producto "${Oe}": ${ii.message||"El producto tiene historial de órdenes"}`)}else{const ii=await Qe.json();alert(`Error al eliminar el producto "${Oe}": ${ii.message||"Error desconocido"}`)}}catch(Qe){console.error("Error deleting menu item:",Qe),alert(`Error de conexión al eliminar el producto "${Oe}"`)}},pt=()=>{switch(d){case"dashboard":return x.jsx(tg,{orders:u,tables:C,staff:w});case"cash-register":return x.jsx(My,{orders:u});case"menu":return x.jsx(Dy,{menu:I,onAddItem:Bt,onToggleStock:Yn,onEditItem:cn,onDeleteItem:hi,name:ge,setName:te,price:Te,setPrice:de,description:De,setDescription:tt,image:Me,setImage:nt,categories:ce,selectedCategoryId:Ee,setSelectedCategoryId:Fe,editingProduct:st,setEditingProduct:oe});case"staff":return x.jsx(By,{staff:w,onAddStaff:Se,onToggleStatus:ot,onDeleteStaff:ft,newStaffName:P,setNewStaffName:G,newStaffPassword:ee,setNewStaffPassword:ne,newStaffRole:J,setNewStaffRole:xe});case"tables":return x.jsx(Ly,{tables:C,onGenerateQR:re,onAddTable:z,onUpdateStatus:ve,onDeleteTable:Re,onEditTable:Ke});case"orders":return x.jsx(jy,{orders:u});case"payments":return x.jsx(ky,{orders:u});case"reports":return x.jsx(_y,{});case"daily-close":return x.jsx(Oy,{});default:return x.jsx(tg,{orders:u,tables:C,staff:w})}},Kt=[{id:"dashboard",label:"📊 Dashboard"},{id:"cash-register",label:"💰 Caja"},{id:"menu",label:"🍽️ Menú"},{id:"staff",label:"👥 Personal"},{id:"tables",label:"🪑 Mesas"},{id:"orders",label:"📋 Órdenes"},{id:"payments",label:"💳 Pagos"},{id:"reports",label:"📈 Reportes"},{id:"daily-close",label:"🔒 Cierre de Día"}];return x.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#f8f9fa"},children:[x.jsxs("div",{style:{backgroundColor:"white",borderBottom:"1px solid #dee2e6",padding:"1rem 2rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[x.jsx("h1",{style:{margin:0,color:"#333"},children:"👨‍💼 Panel de Administración"}),x.jsx("button",{onClick:be,style:{padding:"0.5rem 1rem",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"🚪 Cerrar Sesión"})]}),x.jsx("div",{style:{backgroundColor:"white",borderBottom:"1px solid #dee2e6",padding:"0 2rem",overflowX:"auto"},children:x.jsx("div",{style:{display:"flex",gap:"0",minWidth:"max-content"},children:Kt.map(_e=>x.jsx("button",{onClick:()=>l(_e.id),style:{padding:"1rem 1.5rem",backgroundColor:d===_e.id?"#007bff":"transparent",color:d===_e.id?"white":"#666",border:"none",borderBottom:d===_e.id?"3px solid #007bff":"3px solid transparent",cursor:"pointer",fontSize:"0.9rem",fontWeight:d===_e.id?"bold":"normal",transition:"all 0.3s ease",whiteSpace:"nowrap"},children:_e.label},_e.id))})}),x.jsx("div",{style:{padding:"2rem"},children:D?x.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px",fontSize:"18px",color:"#666"},children:"🔄 Cargando datos..."}):pt()})]})},Uy=({position:d="top-right",maxNotifications:l=5,autoHide:u=!0,hideDelay:h=5e3})=>{const{isConnected:C}=_c(),{orderNotifications:b}=df(),{systemNotifications:w}=z2(),[_,I]=j.useState([]);j.useEffect(()=>{const G=[...b.map(ee=>({...ee,id:`order-${Date.now()}-${Math.random()}`})),...w.map(ee=>({...ee,id:`system-${Date.now()}-${Math.random()}`}))].slice(0,l);I(G)},[b,w,l]),j.useEffect(()=>{if(!u)return;const G=_.map(ee=>setTimeout(()=>{I(ne=>ne.filter(J=>J.id!==ee.id))},h));return()=>{G.forEach(ee=>clearTimeout(ee))}},[_,u,h]);const A=G=>{I(ee=>ee.filter(ne=>ne.id!==G))},D=()=>{const G="fixed z-50 space-y-2";switch(d){case"top-right":return`${G} top-4 right-4`;case"top-left":return`${G} top-4 left-4`;case"bottom-right":return`${G} bottom-4 right-4`;case"bottom-left":return`${G} bottom-4 left-4`;default:return`${G} top-4 right-4`}},M=G=>{switch(G){case"critical":return"bg-red-500 border-red-600";case"high":return"bg-orange-500 border-orange-600";case"medium":return"bg-blue-500 border-blue-600";case"low":return"bg-gray-500 border-gray-600";default:return"bg-blue-500 border-blue-600"}},P=G=>{switch(G){case"NEW_ORDER":return"🍽️";case"ORDER_STATUS_CHANGED":return"📊";case"ORDER_READY":return"✅";case"TABLE_STATUS_CHANGED":return"🪑";case"TABLE_NOTIFICATION":return"📱";case"EMERGENCY":return"🚨";case"LOW_STOCK":return"📦";default:return"🔔"}};return C?_.length===0?null:x.jsx("div",{className:D(),children:_.map(G=>x.jsx("div",{className:`${M(G.priority)} text-white px-4 py-3 rounded-lg shadow-lg border-l-4 max-w-sm animate-slide-in`,children:x.jsxs("div",{className:"flex items-start justify-between",children:[x.jsxs("div",{className:"flex items-start space-x-2 flex-1",children:[x.jsx("span",{className:"text-lg",children:P(G.type)}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"text-sm font-medium truncate",children:G.message}),G.data&&x.jsxs("div",{className:"mt-1 text-xs opacity-90",children:[G.type.includes("ORDER")&&G.data.orderId&&x.jsxs("span",{children:["Orden #",G.data.orderId]}),G.type.includes("TABLE")&&G.data.tableNumber&&x.jsxs("span",{children:["Mesa ",G.data.tableNumber]})]}),x.jsx("p",{className:"text-xs opacity-75 mt-1",children:new Date(G.timestamp).toLocaleTimeString()})]})]}),x.jsx("button",{onClick:()=>A(G.id),className:"ml-2 text-white hover:text-gray-200 focus:outline-none",children:x.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:x.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})},G.id))}):x.jsx("div",{className:D(),children:x.jsx("div",{className:"bg-yellow-500 text-white px-4 py-2 rounded-lg shadow-lg border border-yellow-600",children:x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("span",{children:"⚠️"}),x.jsx("span",{className:"text-sm font-medium",children:"Desconectado del servidor"})]})})})},Fy=({onLogin:d})=>{const[l,u]=j.useState(""),[h,C]=j.useState(""),[b,w]=j.useState(!1),[_,I]=j.useState(""),A=$d(),D=async P=>{P.preventDefault(),w(!0),I("");try{const G=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:l,password:h})}),ee=await G.json();if(!G.ok)throw new Error(ee.message||"Error al iniciar sesión");switch(localStorage.setItem("token",ee.data.token),localStorage.setItem("user",JSON.stringify(ee.data.user)),d(ee.data.user),ee.data.user.role){case"ADMIN":case"MANAGER":A("/admin");break;case"WAITER":A("/mesero");break;case"KITCHEN":A("/cocina");break;default:A("/")}}catch(G){I(G.message)}finally{w(!1)}},M=async P=>{const ee={admin:{id:"1",name:"Admin Demo",email:"admin@demo.com",role:"ADMIN"},waiter:{id:"2",name:"Mesero Demo",email:"waiter@demo.com",role:"WAITER"},kitchen:{id:"3",name:"Cocina Demo",email:"kitchen@demo.com",role:"KITCHEN"}}[P];if(ee){try{const ne=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:ee.name,password:"demo123"})});if(ne.ok){const J=await ne.json();localStorage.setItem("token",J.data.token),localStorage.setItem("user",JSON.stringify(J.data.user)),d(J.data.user)}else{const J=`demo-token-${ee.role.toLowerCase()}-${Date.now()}`;localStorage.setItem("token",J),localStorage.setItem("user",JSON.stringify(ee)),d(ee)}}catch{const J=`demo-token-${ee.role.toLowerCase()}-${Date.now()}`;localStorage.setItem("token",J),localStorage.setItem("user",JSON.stringify(ee)),d(ee)}switch(ee.role){case"ADMIN":A("/admin");break;case"WAITER":A("/mesero");break;case"KITCHEN":A("/cocina");break}}};return x.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#f5f5f5"},children:x.jsxs("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",width:"100%",maxWidth:"400px"},children:[x.jsx("h2",{style:{textAlign:"center",marginBottom:"2rem",color:"#333"},children:"Iniciar Sesión"}),x.jsxs("form",{onSubmit:D,children:[x.jsxs("div",{style:{marginBottom:"1rem"},children:[x.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"Usuario:"}),x.jsx("input",{type:"text",value:l,onChange:P=>u(P.target.value),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"4px",fontSize:"1rem"},placeholder:"Nombre de usuario"})]}),x.jsxs("div",{style:{marginBottom:"1.5rem"},children:[x.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"Contraseña:"}),x.jsx("input",{type:"password",value:h,onChange:P=>C(P.target.value),required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #ddd",borderRadius:"4px",fontSize:"1rem"},placeholder:"••••••••"})]}),_&&x.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"0.75rem",borderRadius:"4px",marginBottom:"1rem",border:"1px solid #fcc"},children:_}),x.jsx("button",{type:"submit",disabled:b,style:{width:"100%",padding:"0.75rem",backgroundColor:b?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"4px",fontSize:"1rem",cursor:b?"not-allowed":"pointer",marginBottom:"1rem"},children:b?"Iniciando sesión...":"Iniciar Sesión"})]}),x.jsxs("div",{style:{borderTop:"1px solid #eee",paddingTop:"1rem",marginTop:"1rem"},children:[x.jsx("p",{style:{textAlign:"center",marginBottom:"1rem",color:"#666",fontSize:"0.9rem"},children:"Acceso rápido para demostración:"}),x.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[x.jsx("button",{onClick:()=>M("admin"),style:{padding:"0.5rem",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem"},children:"🔧 Acceder como Administrador"}),x.jsx("button",{onClick:()=>M("waiter"),style:{padding:"0.5rem",backgroundColor:"#17a2b8",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem"},children:"🍽️ Acceder como Camarero"}),x.jsx("button",{onClick:()=>M("kitchen"),style:{padding:"0.5rem",backgroundColor:"#fd7e14",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem"},children:"👨‍🍳 Acceder como Chef"})]})]}),x.jsx("div",{style:{marginTop:"1rem",textAlign:"center",fontSize:"0.8rem",color:"#666"},children:x.jsxs("p",{children:["Para acceso de clientes (mesas), no se requiere login.",x.jsx("br",{}),x.jsx("a",{href:"/mesa/1",style:{color:"#007bff",textDecoration:"none"},children:"Ir a Mesa de Ejemplo"})]})})]})})},jd=({children:d,allowedRoles:l,currentUser:u})=>u?l.includes(u.role)?x.jsx(x.Fragment,{children:d}):x.jsx(zd,{to:"/unauthorized",replace:!0}):x.jsx(zd,{to:"/login",replace:!0}),Py=()=>x.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#f8f9fa",textAlign:"center",padding:"2rem"},children:x.jsxs("div",{style:{backgroundColor:"white",padding:"3rem",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",maxWidth:"500px"},children:[x.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"🚫"}),x.jsx("h1",{style:{color:"#dc3545",marginBottom:"1rem",fontSize:"2rem"},children:"Acceso No Autorizado"}),x.jsx("p",{style:{color:"#666",marginBottom:"2rem",fontSize:"1.1rem",lineHeight:"1.5"},children:"No tienes permisos para acceder a esta sección del sistema. Por favor, contacta al administrador si crees que esto es un error."}),x.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[x.jsx(Un,{to:"/login",style:{padding:"0.75rem 1.5rem",backgroundColor:"#007bff",color:"white",textDecoration:"none",borderRadius:"4px",fontSize:"1rem"},children:"Iniciar Sesión"}),x.jsx(Un,{to:"/",style:{padding:"0.75rem 1.5rem",backgroundColor:"#6c757d",color:"white",textDecoration:"none",borderRadius:"4px",fontSize:"1rem"},children:"Ir al Inicio"})]}),x.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"4px",fontSize:"0.9rem",color:"#666"},children:[x.jsx("strong",{children:"Roles del sistema:"}),x.jsx("br",{}),"• Administrador: Gestión completa del sistema",x.jsx("br",{}),"• Mesero: Gestión de pedidos y mesas",x.jsx("br",{}),"• Cocina: Preparación de pedidos",x.jsx("br",{}),"• Cliente: Acceso a menú y pedidos (sin login)"]})]})}),Hy=()=>{const[d,l]=j.useState(null),[u,h]=j.useState(!0);return j.useEffect(()=>{const I=localStorage.getItem("user"),A=localStorage.getItem("token");if(I&&A)try{const D=JSON.parse(I);l(D)}catch(D){console.error("Error parsing saved user:",D),localStorage.removeItem("user"),localStorage.removeItem("token")}h(!1)},[]),{user:d,loading:u,login:I=>{l(I)},logout:()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),l(null)},isAuthenticated:()=>!!d&&!!localStorage.getItem("token"),hasRole:I=>d&&I.includes(d.role)}};function Vy(){const{user:d,loading:l,login:u,logout:h,isAuthenticated:C}=Hy();return l?x.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:x.jsx("div",{children:"Cargando..."})}):x.jsxs("div",{className:"container",children:[x.jsxs("header",{className:"header",children:[x.jsx("h1",{children:"QR Pedido Digital"}),x.jsxs("nav",{style:{display:"flex",gap:12,alignItems:"center"},children:[x.jsx(Un,{to:"/mesa/1",children:"Mesa 1"}),C()&&x.jsxs(x.Fragment,{children:[d?.role==="WAITER"&&x.jsx(Un,{to:"/mesero",children:"Panel Mesero"}),d?.role==="KITCHEN"&&x.jsx(Un,{to:"/cocina",children:"Panel Cocina"}),(d?.role==="ADMIN"||d?.role==="MANAGER")&&x.jsx(Un,{to:"/admin",children:"Panel Admin"})]}),C()?x.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[x.jsxs("span",{style:{fontSize:"0.9rem",color:"#666"},children:[d?.name," (",d?.role,")"]}),x.jsx("button",{onClick:h,style:{padding:"4px 8px",fontSize:"0.8rem",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Salir"})]}):x.jsx(Un,{to:"/login",children:"Iniciar Sesión"})]})]}),x.jsxs(im,{children:[x.jsx(Ia,{path:"/",element:x.jsx(zd,{to:"/login",replace:!0})}),x.jsx(Ia,{path:"/login",element:x.jsx(Fy,{onLogin:u})}),x.jsx(Ia,{path:"/unauthorized",element:x.jsx(Py,{})}),x.jsx(Ia,{path:"/mesa/:tableId",element:x.jsx(U2,{})}),x.jsx(Ia,{path:"/mesero",element:x.jsx(jd,{allowedRoles:["WAITER"],currentUser:d,children:x.jsx(Iy,{})})}),x.jsx(Ia,{path:"/cocina",element:x.jsx(jd,{allowedRoles:["KITCHEN"],currentUser:d,children:x.jsx(Ry,{})})}),x.jsx(Ia,{path:"/admin",element:x.jsx(jd,{allowedRoles:["ADMIN","MANAGER"],currentUser:d,children:x.jsx(zy,{})})})]}),x.jsx(Uy,{})]})}fx.createRoot(document.getElementById("root")).render(x.jsx(j.StrictMode,{children:x.jsx(Tm,{children:x.jsx(Vy,{})})}));
